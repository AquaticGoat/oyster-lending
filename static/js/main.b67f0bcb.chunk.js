(this["webpackJsonptoken-lending-ui"]=this["webpackJsonptoken-lending-ui"]||[]).push([[0],{1090:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(60),o=n.n(i),c=(n(546),n(362),n(52)),l=n(79),u=n(63),s=n(26),d=n(11),m=n(241),f=n(13),b=n.n(f),p=n(23),v=n(30),y=n(21),E={},g=[],h=n(12),O=n(104),w=n(18),j=n(285),k=n(29),S=function(e,t){var n=O.Orderbook.LAYOUT.decode(t.data);return{pubkey:e,account:Object(k.a)({},t),info:n}},A=new w.d("EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"),T=function(e,t){var n=O.MARKETS.find((function(t){return t.address.equals(e)})),a=O.Market.getLayout((null===n||void 0===n?void 0:n.programId)||A).decode(t.data),r={pubkey:e,account:Object(k.a)({},t),info:a};return d.d.registerParser(r.info.baseMint,d.b),d.d.registerParser(r.info.quoteMint,d.b),d.d.registerParser(r.info.bids,S),d.d.registerParser(r.info.asks,S),r},x=n(120),N=new Date("2020-10-27"),I=r.a.createContext(null),B=new j.a;function M(e){var t=e.children,n=void 0===t?null:t,i=Object(s.e)().endpoint,o=Object(a.useMemo)((function(){return new Map}),[]),c=Object(a.useState)([]),l=Object(y.a)(c,2),u=l[0],m=l[1],f=Object(a.useState)(new Map),g=Object(y.a)(f,2),h=g[0],j=(g[1],Object(a.useMemo)((function(){return new w.b(i,"recent")}),[i])),k=Object(a.useMemo)((function(){return Object(v.a)(new Set(u).values()).reduce((function(e,t){var n=t,a=O.TOKEN_MINTS.find((function(e){return e.address.toBase58()===n})),r=E[n],i="".concat(null===a||void 0===a?void 0:a.name,"/USDC"),o=O.MARKETS.find((function(e){return e.name===i||e.address.toBase58()===r}));return o&&e.set(n,{marketInfo:o}),e}),new Map)}),[u]);Object(a.useEffect)((function(){var e=0,t=function(){var n=Object(p.a)(b.a.mark((function n(){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,P(j,Object(v.a)(o.keys()));case 2:B.raiseMarketUpdated(new Set(Object(v.a)(k.keys()))),e=window.setTimeout((function(){return t()}),3e4);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return function(){var e=Object(p.a)(b.a.mark((function e(){var n,a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Map,Object(v.a)(k.keys()).forEach((function(e){var t=k.get(e);t&&n.set(t.marketInfo.address.toBase58(),e)})),a=Object(v.a)(k.values()).map((function(e){return e.marketInfo.address.toBase58()})),e.next=5,Object(d.f)(j,a.filter((function(e){return void 0===d.d.get(e)})),"single").then((function(e){var t=e.keys,r=e.array;return a.forEach((function(){})),r.map((function(e,a){var r=t[a],i=n.get(r);if(i){var o=k.get(i);if(o){var c=o.marketInfo.address;d.d.add(c,e,T)}}return e}))}));case 5:return r=new Set,a.forEach((function(e){var t=d.d.get(e);if(t){var n=t;d.d.get(n.info.baseMint)||r.add(n.info.baseMint.toBase58()),d.d.get(n.info.baseMint)||r.add(n.info.quoteMint.toBase58()),r.add(n.info.bids.toBase58()),r.add(n.info.asks.toBase58())}})),e.next=9,P(j,Object(v.a)(r.keys()));case 9:B.raiseMarketUpdated(new Set(Object(v.a)(k.keys()))),t();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){window.clearTimeout(e)}}),[k,o,j]);var S=Object(a.useCallback)((function(e){var t;return q(null===(t=k.get(e))||void 0===t?void 0:t.marketInfo.address.toBase58(),e)}),[k]),A=Object(a.useCallback)((function(e){var t=k.get(e),n=d.d.get((null===t||void 0===t?void 0:t.marketInfo.address.toBase58())||"");if(!n)return function(){};var a=n.info.bids.toBase58(),r=n.info.asks.toBase58();return o.set(a,(o.get(a)||0)+1),o.set(r,(o.get(r)||0)+1),function(){o.set(a,(o.get(a)||0)-1),o.set(r,(o.get(r)||0)-1),Object(v.a)(o.keys()).forEach((function(e){(o.get(e)||0)<=0&&o.delete(e)}))}}),[k,o]),x=Object(a.useCallback)((function(e){var t=Object(v.a)(new Set([].concat(Object(v.a)(u),Object(v.a)(e))).values());u.length!==t.length&&m(t)}),[m,u]);return r.a.createElement(I.Provider,{value:{midPriceInUSD:S,marketEmitter:B,accountsToObserve:o,marketByMint:k,subscribeToMarket:A,precacheMarkets:x,dailyVolume:h}},n)}var L=function(){return Object(a.useContext)(I)},C=function(e){var t=Object(a.useContext)(I),n=Object(s.e)().tokenMap,r=Object(a.useState)([]),i=Object(y.a)(r,2),o=i[0],c=i[1],l=null===t||void 0===t?void 0:t.subscribeToMarket,u=null===t||void 0===t?void 0:t.marketEmitter,m=null===t||void 0===t?void 0:t.marketByMint,f=null===t||void 0===t?void 0:t.dailyVolume,b=e.map((function(e){return e.pubkeys.account.toBase58()})).join(",");return Object(a.useEffect)((function(){if(u&&l&&0!==e.length){var t=Object(v.a)(new Set(Object(v.a)(null===m||void 0===m?void 0:m.keys())).keys()).map((function(e){return l(e)})),a=function(){c(function(e,t,n,a){var r=new Date;if(!t)return[];return e.filter((function(e){return e.pubkeys.holdingMints&&e.pubkeys.holdingMints.length>1})).map((function(e,i){var o,c,l,u=(e.pubkeys.holdingMints||[]).map((function(e){return e.toBase58()})).sort(),s=d.d.getMint(u[0]),m=d.d.getMint(u[1]),f=d.d.get(e.pubkeys.holdingAccounts[0]),b=d.d.get(e.pubkeys.holdingAccounts[1]),p=(null===f||void 0===f?void 0:f.info.mint.toBase58())===u[0]?f:b,v=(null===b||void 0===b?void 0:b.info.mint.toBase58())===u[1]?b:f,y=q((null===(o=t.get(u[0]))||void 0===o?void 0:o.marketInfo.address.toBase58())||"",u[0]),E=y*Object(h.c)(p,s),O=q((null===(c=t.get(u[1]))||void 0===c?void 0:c.marketInfo.address.toBase58())||"",u[1])*Object(h.c)(v,m),w=d.d.getMint(e.pubkeys.mint);if(!(null===w||void 0===w?void 0:w.supply.eqn(0))){var j=function(e,t,n,a){var r=0,i=g.find((function(t){return t.pool.equals(e.pubkeys.mint)}));i&&(r=i.airdrops.reduce((function(e,r){var i,o=null===(i=t.get(r.mint.toBase58()))||void 0===i?void 0:i.marketInfo.address;if(o){var c=q(null===o||void 0===o?void 0:o.toBase58(),r.mint.toBase58());e+=r.amount*c/(n+a)*(365/30)}return e}),0));return r}(e,t,E,O),k=0,S=y*((null===n||void 0===n||null===(l=n.get(e.pubkeys.mint.toBase58()))||void 0===l?void 0:l.volume24hA)||0),A=S*(x.a-x.b),T=0,I=j,B=j;if(e.pubkeys.feeAccount){var M=d.d.get(e.pubkeys.feeAccount);if(w&&M&&M.info.mint.toBase58()===e.pubkeys.mint.toBase58()){var L=(null===M||void 0===M?void 0:M.info.amount.toNumber())/(null===w||void 0===w?void 0:w.supply.toNumber());if(0!==(T=(k=(L*E+L*O)/4e-4)*x.a)){var C=L*E/4e-4,_=L*O/4e-4,P=Math.floor((r.getTime()-N.getTime())/864e5),R=parseFloat(C/P*x.a*356)/E,W=parseFloat(_/P*x.a*356)/O;I+=Math.max(R,W),B+=parseFloat(S*x.a*356)/E}}}var D=d.d.getMint(e.pubkeys.mint),F=Object(h.j)(a,e),U="#/?pair=".concat(Object(h.j)(a,e,!1).replace("/","-"));return{key:e.pubkeys.account.toBase58(),id:i,name:F,names:u.map((function(e){return Object(h.l)(a,e)})),accounts:[null===p||void 0===p?void 0:p.pubkey,null===v||void 0===v?void 0:v.pubkey],address:e.pubkeys.mint.toBase58(),link:U,mints:u,liquidityA:Object(h.c)(p,s),liquidityAinUsd:E,liquidityB:Object(h.c)(v,m),liquidityBinUsd:O,supply:D&&((null===D||void 0===D?void 0:D.supply.toNumber())/Math.pow(10,(null===D||void 0===D?void 0:D.decimals)||0)).toFixed(9),fees:T,fees24h:A,liquidity:E+O,volume:k,volume24h:S,apy:Number.isFinite(I)?I:0,apy24h:Number.isFinite(B)?B:0,map:n,extra:null===n||void 0===n?void 0:n.get(e.pubkeys.account.toBase58()),raw:e}}})).filter((function(e){return void 0!==e}))}(e,m,f,n))},r=u.onMarket(a);return a(),function(){r&&r(),t.forEach((function(e){return e&&e()}))}}}),[n,f,b,l,u,m]),o};var _=function(e){var t=Object(a.useContext)(I),n=t.midPriceInUSD,r=t.subscribeToMarket,i=t.marketEmitter,o=Object(a.useState)(0),c=Object(y.a)(o,2),l=c[0],u=c[1];return Object(a.useEffect)((function(){var t=r(e),a=function(){n&&u(n(e))};a();var o=i.onMarket(a);return function(){t(),o()}}),[n,e,i,r]),{price:l,isBase:1===l}},q=function(e,t){var n,a,r,i,o=O.TOKEN_MINTS.find((function(e){return e.address.toBase58()===t}));if(h.a.has((null===o||void 0===o?void 0:o.name)||""))return 1;if(!e)return 0;var c=d.d.get(e);if(!c)return 0;var l=c.info,u=(null===(n=d.d.get(l.baseMint))||void 0===n?void 0:n.info.decimals)||0,s=(null===(a=d.d.get(l.quoteMint))||void 0===a?void 0:a.info.decimals)||0,m=new O.Market(l,u,s,void 0,l.programId),f=null===(r=d.d.get(l.bids))||void 0===r?void 0:r.info,b=null===(i=d.d.get(l.asks))||void 0===i?void 0:i.info;if(f&&b){var p=new O.Orderbook(m,f.accountFlags,f.slab),v=new O.Orderbook(m,b.accountFlags,b.slab),y=p.getL2(1),E=v.getL2(1);if(y.length>0&&E.length>0)return(y[0][0]+E[0][0])/2}return 0},P=function(){var e=Object(p.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.abrupt("return",Object(d.f)(t,n,"single").then((function(e){var t=e.keys;return e.array.map((function(e,n){var a=t[n];return d.d.add(new w.d(a),e)}))})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),R=n(22),W=n(36),D=n(93),F=function(){return d.d.byParser(W.e).map((function(e){return d.d.get(e)})).filter((function(e){return void 0!==e}))};function U(){var e=Object(a.useState)(F()),t=Object(y.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){var e=d.d.emitter.onCache((function(e){e.parser===W.e&&r(F())}));return function(){e()}}),[r]),{reserveAccounts:n}}function K(e){var t=Object(a.useMemo)((function(){return"string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58()}),[e]),n=Object(a.useState)(d.d.get(t||"")),r=Object(y.a)(n,2),i=r[0],o=r[1];return Object(a.useEffect)((function(){var e=d.d.emitter.onCache((function(e){e.id===t&&o(d.d.get(t))}));return function(){e()}}),[t,o]),i}function G(e){var t=Object(s.e)().tokenMap,n="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();return Object(h.l)(t,n)}function z(e,t){var n=Object(a.useMemo)((function(){return"string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58()}),[e]),r=Object(D.a)().userAccounts,i=Object(a.useState)(0),o=Object(y.a)(i,2),c=o[0],l=o[1],u=L(),s=u.marketEmitter,m=u.midPriceInUSD,f=Object(d.j)(n),b=Object(a.useMemo)((function(){return r.filter((function(e){return n===e.info.mint.toBase58()&&(!t||t.equals(e.pubkey))})).sort((function(e,t){return t.info.amount.sub(e.info.amount).toNumber()}))}),[r,n,t]),p=Object(a.useMemo)((function(){return b.reduce((function(e,t){return e+t.info.amount.toNumber()}),0)}),[b]),v=Object(a.useMemo)((function(){return Object(h.i)(p,f)}),[f,p]);return Object(a.useEffect)((function(){var e=function(){l(v*m(n||""))},t=s.onMarket((function(t){e()}));return e(),function(){t()}}),[v,m,s,n,l]),{balance:v,balanceLamports:p,balanceInUSD:c,accounts:b,hasBalance:b.length>0&&v>0}}function V(e,t){var n=Object(d.j)(null===e||void 0===e?void 0:e.collateralMint),r=z(null===e||void 0===e?void 0:e.collateralMint,t),i=r.balanceLamports,o=r.accounts,c=Object(a.useState)(0),l=Object(y.a)(c,2),u=l[0],s=l[1],m=L(),f=m.marketEmitter,b=m.midPriceInUSD,p=Object(a.useMemo)((function(){return e&&Q(e,i)}),[i,e]),v=Object(a.useMemo)((function(){return Object(h.i)(p,n)}),[p,n]);return Object(a.useEffect)((function(){var t=function(){var t;s(v*b((null===e||void 0===e||null===(t=e.liquidityMint)||void 0===t?void 0:t.toBase58())||""))},n=f.onMarket((function(n){n.ids.has((null===e||void 0===e?void 0:e.dexMarket.toBase58())||"")&&t()}));return t(),function(){n()}}),[v,b,f,n,s,e]),{balance:v,balanceLamports:p,balanceInUSD:u,mint:null===e||void 0===e?void 0:e.collateralMint,accounts:o,hasBalance:o.length>0&&v>0}}function Q(e,t){return Object(W.q)(e)*(t/((null===e||void 0===e?void 0:e.collateralMintSupply.toNumber())||1))}var H,Y=function(){return d.d.byParser(W.d).map((function(e){return d.d.get(e)})).filter((function(e){return void 0!==e}))};function $(){var e=function(){var e=Object(a.useState)(Y()),t=Object(y.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){var e=d.d.emitter.onCache((function(e){e.parser===W.d&&r(Y())}));return function(){e()}}),[r]),{obligations:n}}().obligations,t=U().reserveAccounts,n=Object(s.e)().tokenMap,r=L(),i=r.marketEmitter,o=r.midPriceInUSD,c=Object(a.useMemo)((function(){return t.reduce((function(e,t){return e.set(t.pubkey.toBase58(),t),e}),new Map)}),[t]),l=Object(a.useCallback)((function(){return 0===c.size?[]:e.map((function(e){return{obligation:e,reserve:c.get(e.info.borrowReserve.toBase58()),collateralReserve:c.get(e.info.collateralReserve.toBase58())}})).filter((function(e){return e.reserve})).filter((function(e){return Object(h.p)(e.obligation.info.borrowAmountWad).toNumber()>0})).map((function(e){var t=e.obligation,a=e.reserve.info,r=e.reserve.info,i=0,c=0,l=0,u=0;if(d.d.get(a.liquidityMint)){var s=d.d.get(e.collateralReserve.info.liquidityMint),f=Object(h.i)(Object(W.j)(t.info.depositedCollateral,e.reserve.info),null===s||void 0===s?void 0:s.info),b=Object(h.p)(t.info.borrowAmountWad).toNumber(),p=function(e,t,n){var a,r,i,o=d.d.get(t.liquidityMint),c=d.d.get(t.collateralMint);if(!o||!c)return 0;var l=d.d.get(n);if(!l)return 0;var u=l.info,s=(null===(a=d.d.get(u.baseMint))||void 0===a?void 0:a.info.decimals)||0,f=(null===(r=d.d.get(u.quoteMint))||void 0===r?void 0:r.info.decimals)||0,b=d.d.get(t.lendingMarket),p=new O.Market(u,s,f,void 0,u.programId),v=b.info.quoteMint.equals(t.liquidityMint)?null===u||void 0===u?void 0:u.bids:null===u||void 0===u?void 0:u.asks,E=null===(i=d.d.get(v))||void 0===i?void 0:i.info;if(!E)return 0;var g=new O.Orderbook(p,E.accountFlags,E.slab),w=0,j=Object(h.i)(e,o.info);if(g){var k,S,A,T=g.getL2(1e3),x=g.isBids?function(e,t){return t/e}:function(e,t){return t*e},N=Object(m.a)(T);try{for(N.s();!(A=N.n()).done;){var I=Object(y.a)(A.value,2);k=I[0];var B=j>(S=I[1])?S:j;if(w+=x(k,B),(j-=B)<=0)break}}catch(M){N.e(M)}finally{N.f()}}return w}(b,e.reserve.info,e.reserve.info.dexMarketOption?e.reserve.info.dexMarket:e.collateralReserve.info.dexMarket),v=e.reserve.info.liquidityMint.toBase58(),E=d.d.get(v);l=Object(h.i)(b,E.info)*o(v),u=f*o((null===s||void 0===s?void 0:s.pubkey.toBase58())||""),i=100*p/f,c=f*e.reserve.info.config.liquidationThreshold/100/p}return{account:t,info:Object(k.a)(Object(k.a)({},t.info),{},{ltv:i,health:c,borrowedInQuote:l,collateralInQuote:u,liquidationThreshold:e.reserve.info.config.liquidationThreshold,repayName:Object(h.l)(n,a.liquidityMint),collateralName:Object(h.l)(n,r.liquidityMint)})}})).sort((function(e,t){return e.info.health-t.info.health}))}),[e,c,o,n]),u=Object(a.useState)(l()),f=Object(y.a)(u,2),b=f[0],p=f[1];return Object(a.useEffect)((function(){var e=i.onMarket((function(){p(l())}));return function(){e()}}),[l,p,i,o]),{obligations:b}}function J(e){var t="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),n=$().obligations;return Object(a.useMemo)((function(){return n.find((function(e){return e.account.pubkey.toBase58()===t}))}),[n,t])}function X(){var e=Object(D.a)().userAccounts,t=$().obligations,n=Object(a.useMemo)((function(){return e.reduce((function(e,t){var n=t.info.mint.toBase58();return e.set(n,[].concat(Object(v.a)(e.get(n)||[]),[t])),e}),new Map)}),[e]),r=Object(a.useMemo)((function(){return 0===n.size?[]:t.filter((function(e){return void 0!==n.get(e.info.tokenMint.toBase58())})).map((function(e){return{obligation:e,userAccounts:Object(v.a)(n.get(e.info.tokenMint.toBase58()))}})).sort((function(e,t){return t.obligation.info.borrowedInQuote-e.obligation.info.borrowedInQuote}))}),[n,t]);return{userObligations:r,totalInQuote:r.reduce((function(e,t){return e+t.obligation.info.borrowedInQuote}),0)}}function Z(e,t){var n=X().userObligations;return{userObligationsByReserve:Object(a.useMemo)((function(){var a="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),r="string"===typeof t?t:null===t||void 0===t?void 0:t.toBase58();return n.filter((function(e){return a&&r?e.obligation.info.borrowReserve.toBase58()===a&&e.obligation.info.collateralReserve.toBase58()===r:a&&e.obligation.info.borrowReserve.toBase58()===a||r&&e.obligation.info.collateralReserve.toBase58()===r}))}),[e,t,n])}}function ee(e,t){var n=Object(D.a)().userAccounts,r=U().reserveAccounts,i=Object(a.useState)([]),o=Object(y.a)(i,2),c=o[0],l=o[1],u=L(),m=u.marketEmitter,f=u.midPriceInUSD,b=Object(s.e)().tokenMap,p=Object(a.useMemo)((function(){return r.reduce((function(n,a){var r=a.pubkey.toBase58();return e&&e.has(r)||t&&!t.has(r)||n.set(a.info.collateralMint.toBase58(),a),n}),new Map)}),[r,e,t]);return Object(a.useEffect)((function(){var e=new Set(r.map((function(e){return e.info.dexMarket.toBase58()}))),t=function(){return n.filter((function(e){return p.has(null===e||void 0===e?void 0:e.info.mint.toBase58())})).map((function(e){var t=p.get(null===e||void 0===e?void 0:e.info.mint.toBase58()),n=d.d.get(t.info.collateralMint),a=Q(t.info,null===e||void 0===e?void 0:e.info.amount.toNumber()),r=Object(h.i)(a,null===n||void 0===n?void 0:n.info);return{account:e,info:{amount:r,amountInQuote:f(t.info.liquidityMint.toBase58())*r,apy:Object(W.h)(t.info),name:Object(h.l)(b,t.info.liquidityMint)},reserve:t}})).sort((function(e,t){return t.info.amountInQuote-e.info.amountInQuote}))},a=m.onMarket((function(n){Object(v.a)(n.ids.values()).every((function(t){return!e.has(t)}))||l(t())}));return l(t()),function(){a()}}),[n,r,p,b,f,m]),{userDeposits:c,totalInQuote:c.reduce((function(e,t){return e+t.info.amountInQuote}),0)}}!function(e){e[e.AbsoluteValue=0]="AbsoluteValue",e[e.Percent=1]="Percent"}(H||(H={}));var te=function(e){var t=Object(a.useState)(""),n=Object(y.a)(t,2),r=n[0],i=n[1],o=Object(a.useState)(0),c=Object(y.a)(o,2),l=c[0],u=c[1],s=Object(a.useState)(H.Percent),d=Object(y.a)(s,2),m=d[0],f=d[1];return{value:r,setValue:Object(a.useCallback)((function(t){f(H.AbsoluteValue),i(t),u(e(t))}),[f,i,u,e]),pct:l,setPct:Object(a.useCallback)((function(t){f(H.Percent),u(t),i(e(t))}),[f,i,u,e]),type:m}};function ne(e){var t="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),n=Object(a.useState)(d.d.get(t||"")),r=Object(y.a)(n,2),i=r[0],o=r[1];return Object(a.useEffect)((function(){var e=d.d.emitter.onCache((function(e){e.id===t&&o(d.d.get(t))}));return function(){e()}}),[t,o]),i}function ae(e){var t,n,r=Object(a.useMemo)((function(){return"string"===typeof e?e:e.toBase58()}),[e]),i=K(r),o=null===i||void 0===i?void 0:i.info.liquidityMint,c=null===o||void 0===o?void 0:o.toBase58(),l=ne(null===i||void 0===i?void 0:i.info.lendingMarket),u=null===l||void 0===l||null===(t=l.info)||void 0===t||null===(n=t.quoteMint)||void 0===n?void 0:n.toBase58(),s=c!==u,d=Object(a.useMemo)((function(){return new Set([r])}),[r]),m=Object(a.useMemo)((function(){var e=F().find((function(e){return e.info.liquidityMint.toBase58()===u}));return s&&e?new Set([e.pubkey.toBase58()]):void 0}),[s,u]),f=ee(d,m),b=f.totalInQuote,p=_(c).price,v=X(),y=v.totalInQuote,E=y+b,g=0===E?0:y/E;return c===u?{borrowingPower:b,totalInQuote:b,utilization:g}:{borrowingPower:b/p,totalInQuote:b,utilization:g}}var re=r.a.createContext(null);function ie(e){var t=e.children,n=void 0===t?null:t,a=oe().accounts;return r.a.createElement(re.Provider,{value:{accounts:a}},n)}var oe=function(){var e=Object(s.d)(),t=Object(a.useState)([]),n=Object(y.a)(t,2),r=n[0],i=n[1],o=U().reserveAccounts,c=L().precacheMarkets,l=Object(a.useCallback)((function(e){return Object(W.p)(e.account)?d.d.add(e.pubkey.toBase58(),e.account,W.e):Object(W.n)(e.account)?d.d.add(e.pubkey.toBase58(),e.account,W.b):Object(W.o)(e.account)?d.d.add(e.pubkey.toBase58(),e.account,W.d):void 0}),[]);return Object(a.useEffect)((function(){o.length>0&&c(o.map((function(e){return e.info.liquidityMint.toBase58()})))}),[o,c]),Object(a.useEffect)((function(){i([]);var t=function(){var t=Object(p.a)(b.a.mark((function t(){var n,a,r,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getProgramAccounts(R.a);case 2:return n=t.sent,a=n.map(l).filter((function(e){return void 0!==e})),r=a.filter((function(e){return void 0!==(null===e||void 0===e?void 0:e.info).lendingMarket})).map((function(e){return e})),i=Object(v.a)(r.map((function(e){return[d.d.registerParser(null===e||void 0===e?void 0:e.info.collateralMint.toBase58(),d.b),d.d.registerParser(null===e||void 0===e?void 0:e.info.liquidityMint.toBase58(),d.b),d.d.registerParser((null===e||void 0===e?void 0:e.info.dexMarketOption)?null===e||void 0===e?void 0:e.info.dexMarket.toBase58():"",T)].filter((function(e){return e}))}))).flat(),t.next=8,Object(d.f)(e,i,"single").then((function(e){var t=e.keys;return e.array.map((function(e,n){var a=t[n];return d.d.add(a,e),e}))}));case 8:return n.map(l).filter((function(e){return void 0!==e})),t.abrupt("return",a);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Promise.all([t()]).then((function(e){i(e.flat())}))}),[e,l]),Object(a.useEffect)((function(){var t=e.onProgramAccountChange(R.a,function(){var e=Object(p.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.accountId,a={pubkey:new w.d(n),account:t.accountInfo},l(a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"singleGossip");return function(){e.removeProgramAccountChangeListener(t)}}),[e,r,l]),{accounts:r}},ce=n(115),le=n(1092),ue=n(1102),se=n(1103),de=n(1104),me=n(1105),fe=n(1106),be=n(1107),pe=n(533),ve=n(206),ye=n(538),Ee=n(515),ge=n.n(Ee),he=n(27),Oe=n.n(he),we=(n(679),function(e){var t,n=e.style,i=e.className,o="string"===typeof e.address?e.address:null===(t=e.address)||void 0===t?void 0:t.toBase58(),c=Object(a.useRef)();return Object(a.useEffect)((function(){o&&c.current&&(c.current.innerHTML="",c.current.className=i||"",c.current.appendChild(ge()((null===n||void 0===n?void 0:n.width)||16,parseInt(Oe.a.decode(o).toString("hex").slice(5,15),16))))}),[o,n,i]),r.a.createElement("div",{className:"identicon-wrapper",ref:c,style:e.style})}),je=function(e){var t,n=Object(u.c)().wallet,a=Object(d.k)().account;return n&&n.publicKey?r.a.createElement("div",{className:"wallet-wrapper"},r.a.createElement("span",null,h.e.format(((null===a||void 0===a?void 0:a.lamports)||0)/w.c)," SOL"),r.a.createElement("div",{className:"wallet-key"},Object(h.m)("".concat(n.publicKey)),r.a.createElement(we,{address:null===(t=n.publicKey)||void 0===t?void 0:t.toBase58(),style:{marginLeft:"0.5rem",display:"flex"}}))):null},ke=n(1101),Se=n(1096),Ae=function(){var e=Object(u.c)(),t=e.providerUrl,n=e.setProvider,a=Object(s.e)(),i=a.endpoint,o=a.setEndpoint;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"grid"}},"Network:"," ",r.a.createElement(Se.a,{onSelect:o,value:i,style:{marginRight:8}},s.b.map((function(e){var t=e.name,n=e.endpoint;return r.a.createElement(Se.a.Option,{value:n,key:n},t)})))),r.a.createElement("div",{style:{display:"grid"}},"Wallet:"," ",r.a.createElement(Se.a,{onSelect:n,value:t},u.a.map((function(e){var t=e.name,n=e.url;return r.a.createElement(Se.a.Option,{value:n,key:n},t)})))))},Te=n(15),xe=function(e){var t=Object(u.c)(),n=t.connected,a=t.wallet;return r.a.createElement("div",{className:"App-Bar-right"},r.a.createElement(je,null),r.a.createElement("div",null,!n&&r.a.createElement(ve.a,{type:"text",size:"large",onClick:n?a.disconnect:a.connect,style:{color:"#2abdd2"}},Te.b.CONNECT_BUTTON),n&&r.a.createElement(ye.a,{placement:"bottomRight",title:Te.b.WALLET_TOOLTIP,trigger:"click"})),r.a.createElement(ye.a,{placement:"topRight",title:Te.b.SETTINGS_TOOLTIP,content:r.a.createElement(Ae,null),trigger:"click"},r.a.createElement(ve.a,{shape:"circle",size:"large",type:"text",icon:r.a.createElement(ke.a,null)})),e.right)},Ne=n(518);ce.a.Item.whyDidYouRender=!0;var Ie=r.a.memo((function(e){var t=Object(s.e)().env,n=Object(l.g)(),a={"/dashboard":"2","/deposit":"3","/borrow":"4","/liquidate":"5","/margin":"6","/faucet":"7"},i=a[Object(v.a)(Object.keys(a)).find((function(e){return n.pathname.startsWith(e)}))||""]||"1";return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"Banner"},r.a.createElement("div",{className:"Banner-description"},Te.b.AUDIT_WARNING)),r.a.createElement(pe.a,{title:Te.b.APP_TITLE,footerRender:function(){return r.a.createElement("div",{className:"footer",title:Te.b.FOOTER},Te.b.FOOTER)},navTheme:"light",headerTheme:"light",theme:"light",layout:"mix",fixSiderbar:!0,primaryColor:"#d83aeb",logo:r.a.createElement("div",{className:"App-logo"}),rightContentRender:function(){return r.a.createElement(xe,null)},links:[r.a.createElement(ce.a.Item,{key:"15",onItemHover:function(){},icon:r.a.createElement(le.a,null)},r.a.createElement("a",{title:"Gtihub",href:Ne.repository.url,target:"_blank"},"Github")),,],menuContentRender:function(){return r.a.createElement(ce.a,{theme:"light",defaultSelectedKeys:[i],mode:"inline"},r.a.createElement(ce.a.Item,{key:"1",onItemHover:function(){},icon:r.a.createElement(ue.a,null)},r.a.createElement(c.b,{to:{pathname:"/"}},Te.b.MENU_HOME)),r.a.createElement(ce.a.Item,{key:"2",onItemHover:function(){},icon:r.a.createElement(se.a,null)},r.a.createElement(c.b,{to:{pathname:"/dashboard"}},Te.b.MENU_DASHBOARD)),r.a.createElement(ce.a.Item,{key:"3",onItemHover:function(){},icon:r.a.createElement(de.a,null)},r.a.createElement(c.b,{to:{pathname:"/deposit"}},Te.b.MENU_DEPOSIT)),r.a.createElement(ce.a.Item,{key:"4",onItemHover:function(){},icon:r.a.createElement(me.a,null)},r.a.createElement(c.b,{to:{pathname:"/borrow"}},Te.b.MENU_BORROW)),r.a.createElement(ce.a.Item,{key:"5",onItemHover:function(){},icon:r.a.createElement(fe.a,null)},r.a.createElement(c.b,{to:{pathname:"/liquidate"}},Te.b.MENU_LIQUIDATE)),"mainnet-beta"!==t&&r.a.createElement(ce.a.Item,{key:"7",onItemHover:function(){},icon:r.a.createElement(be.a,null)},r.a.createElement(c.b,{to:{pathname:"/faucet"}},Te.b.MENU_FAUCET)))}},e.children))})),Be=n(207),Me=n(121),Le=n(1100),Ce=n(1097),_e=n(46),qe=function(e){var t,n,a=Object(s.e)().tokenMap,i=Object(h.k)(a,e.mintAddress),o=e.size||20;return i?r.a.createElement("img",{alt:"Token icon",className:e.className,key:i,width:(null===(t=e.style)||void 0===t?void 0:t.width)||o.toString(),height:(null===(n=e.style)||void 0===n?void 0:n.height)||o.toString(),src:i,style:Object(k.a)({marginRight:"0.5rem",marginTop:"0.11rem",borderRadius:"10rem",backgroundColor:"white",backgroundClip:"padding-box"},e.style)}):r.a.createElement(we,{address:e.mintAddress,style:Object(k.a)({marginRight:"0.5rem",width:o,height:o,marginTop:2},e.style)})},Pe=function(e){var t,n,i=G(e.reserve.liquidityMint),o=Object(d.j)(e.reserve.liquidityMint),l=Object(h.i)(e.reserve.availableLiquidity.toNumber(),o),u=Object(a.useMemo)((function(){return Object(h.i)(Object(h.p)(e.reserve.borrowedLiquidityWad),o)}),[e.reserve,o]),s=Object(a.useMemo)((function(){return Object(W.g)(e.reserve)}),[e.reserve]),m=Object(a.useMemo)((function(){return Object(W.h)(e.reserve)}),[e.reserve]),f=l+u;return r.a.createElement(c.b,{to:"/reserve/".concat(e.address.toBase58())},r.a.createElement("div",{className:"home-item"},r.a.createElement("span",{style:{display:"flex"}},r.a.createElement(qe,{mintAddress:e.reserve.liquidityMint}),i),r.a.createElement("div",{title:f.toString()},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("em",null,h.e.format(f))," ",i),r.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.e.format(null===(t=e.item)||void 0===t?void 0:t.marketSize)))),r.a.createElement("div",{title:u.toString()},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("em",null,h.e.format(u))," ",i),r.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.e.format(null===(n=e.item)||void 0===n?void 0:n.borrowed)))),r.a.createElement("div",{title:m.toString()},h.f.format(m)),r.a.createElement("div",{title:s.toString()},h.f.format(s))))},Re=function(e){var t=["#003f5c","#2f4b7c","#665191","#a05195","#d45087","#f95d6a","#ff7c43","#ffa600"].reverse();return r.a.createElement(Ce.a,{title:e.title,valueRender:function(){return r.a.createElement("div",{style:{width:"100%",height:37,display:"flex",backgroundColor:"lightgrey",fontSize:12,lineHeight:"37px"}},e.items.map((function(n,a){return r.a.createElement("div",{key:e.name(n),title:e.name(n),style:{overflow:"hidden",width:"".concat(100*e.getPct(n),"%"),backgroundColor:e.color&&e.color(n)||t[a%e.items.length]}},e.name(n))})))}})},We=(n(745),function(){var e=U().reserveAccounts,t=L(),n=t.marketEmitter,i=t.midPriceInUSD,o=Object(s.e)().tokenMap,c=Object(a.useState)({marketSize:0,borrowed:0,lentOutPct:0,items:[]}),l=Object(y.a)(c,2),u=l[0],m=l[1];return Object(a.useEffect)((function(){var t=function(){var t={marketSize:0,borrowed:0,lentOutPct:0,items:[]};e.forEach((function(e){var n,a=Object(_e.reserveMarketCap)(e.info),r=d.d.get(e.info.liquidityMint.toBase58());if(r){var c=i(null===r||void 0===r?void 0:r.pubkey.toBase58()),l={key:e.pubkey.toBase58(),marketSize:Object(h.i)(a,null===r||void 0===r?void 0:r.info)*c,borrowed:Object(h.i)(Object(h.p)(null===(n=e.info)||void 0===n?void 0:n.borrowedLiquidityWad).toNumber(),r.info)*c,name:Object(h.l)(o,e.info.liquidityMint.toBase58())};t.items.push(l),t.marketSize=t.marketSize+l.marketSize,t.borrowed=t.borrowed+l.borrowed}})),t.lentOutPct=t.borrowed/t.marketSize,t.lentOutPct=Number.isFinite(t.lentOutPct)?t.lentOutPct:0,t.items=t.items.sort((function(e,t){return t.marketSize-e.marketSize})),m(t)},a=n.onMarket((function(){t()}));return t(),function(){a()}}),[n,i,m,e,o]),r.a.createElement("div",{className:"flexColumn"},r.a.createElement(Be.a,{gutter:Te.a,className:"home-info-row"},r.a.createElement(Me.a,{xs:24,xl:5},r.a.createElement(Le.a,null,r.a.createElement(Ce.a,{title:"Current market size",value:u.marketSize,precision:2,valueStyle:{color:"#3f8600"},prefix:"$"}))),r.a.createElement(Me.a,{xs:24,xl:5},r.a.createElement(Le.a,null,r.a.createElement(Ce.a,{title:"Total borrowed",value:u.borrowed,precision:2,prefix:"$"}))),r.a.createElement(Me.a,{xs:24,xl:5},r.a.createElement(Le.a,null,r.a.createElement(Ce.a,{title:"% Lent out",value:100*u.lentOutPct,precision:2,suffix:"%"}))),r.a.createElement(Me.a,{xs:24,xl:9},r.a.createElement(Le.a,null,r.a.createElement(Re,{title:"Market composition",name:function(e){return e.name},getPct:function(e){return e.marketSize/u.marketSize},items:u.items})))),r.a.createElement(Le.a,null,r.a.createElement("div",{className:"home-item home-header"},r.a.createElement("div",null,Te.b.TABLE_TITLE_ASSET),r.a.createElement("div",null,Te.b.TABLE_TITLE_MARKET_SIZE),r.a.createElement("div",null,Te.b.TABLE_TITLE_TOTAL_BORROWED),r.a.createElement("div",null,Te.b.TABLE_TITLE_DEPOSIT_APY),r.a.createElement("div",null,Te.b.TABLE_TITLE_BORROW_APY)),e.map((function(e){return r.a.createElement(Pe,{reserve:e.info,address:e.pubkey,item:u.items.find((function(t){return t.key===e.pubkey.toBase58()}))})}))))}),De=function(e){var t=G(e.reserve.liquidityMint),n=_(e.reserve.liquidityMint.toBase58()).price,a=ae(e.address),i=a.borrowingPower,o=a.totalInQuote,l=Object(W.g)(e.reserve);return r.a.createElement(c.b,{to:"/borrow/".concat(e.address.toBase58())},r.a.createElement("div",{className:"borrow-item"},r.a.createElement("span",{style:{display:"flex"}},r.a.createElement(qe,{mintAddress:e.reserve.liquidityMint}),t),r.a.createElement("div",null,"$",h.e.format(n)),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("em",null,h.e.format(i))," ",t),r.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.e.format(o)))),r.a.createElement("div",null,h.f.format(l)),r.a.createElement("div",null,r.a.createElement(ve.a,{type:"primary"},r.a.createElement("span",null,Te.b.BORROW_ACTION)))))},Fe=(n(746),function(){var e=U().reserveAccounts;return r.a.createElement("div",{className:"flexColumn"},r.a.createElement(Le.a,null,r.a.createElement("div",{className:"borrow-item deposit-header"},r.a.createElement("div",null,Te.b.TABLE_TITLE_ASSET),r.a.createElement("div",null,"Serum Dex Price"),r.a.createElement("div",null,Te.b.TABLE_TITLE_MAX_BORROW),r.a.createElement("div",null,Te.b.TABLE_TITLE_APY),r.a.createElement("div",null)),e.map((function(e){return r.a.createElement(De,{reserve:e.info,address:e.pubkey})}))))}),Ue=(n(747),n(86)),Ke=n(94),Ge=n(128),ze=n(127),Ve=n(1099),Qe=function(e){Object(Ge.a)(n,e);var t=Object(ze.a)(n);function n(){var e;Object(Ue.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onChange=function(t){var n=t.target.value;(/^-?\d*(\.\d*)?$/.test(n)||""===n||"-"===n)&&e.props.onChange(n)},e.onBlur=function(){var t=e.props,n=t.value,a=t.onBlur,r=t.onChange,i=n;void 0!==n&&null!==n&&(!n.charAt||"."!==n.charAt(n.length-1)&&"-"!==n||(i=n.slice(0,-1)),n.startsWith&&(n.startsWith(".")||n.startsWith("-."))&&(i=i.replace(".","0.")),i.replace&&(null===r||void 0===r||r(i.replace(/0*(\d+)/,"$1"))),a&&a())},e}return Object(Ke.a)(n,[{key:"render",value:function(){return r.a.createElement(Ve.a,Object.assign({},this.props,{onChange:this.onChange,onBlur:this.onBlur,maxLength:25}))}}]),n}(r.a.Component),He=n(48),Ye=n(31);function $e(e,t,n,a,r,i){if(!n.info.isNative)return n.pubkey;var o=et(e,a,r,i);return e.push(Ye.c.createInitAccountInstruction(R.d,R.e,o,a)),t.push(Ye.c.createCloseAccountInstruction(R.d,o,a,a,[])),o}function Je(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:65528,r=new w.a;return e.push(w.g.createAccount({fromPubkey:t,newAccountPubkey:r.publicKey,lamports:0,space:a,programId:R.d})),n.push(r),r.publicKey}function Xe(e,t,n,a){var r=new w.a;return e.push(w.g.createAccount({fromPubkey:t,newAccountPubkey:r.publicKey,lamports:n,space:_e.LendingObligationLayout.span,programId:R.a})),a.push(r),r.publicKey}function Ze(e,t,n,a){var r=new w.a;return e.push(w.g.createAccount({fromPubkey:t,newAccountPubkey:r.publicKey,lamports:n,space:Ye.b.span,programId:R.d})),a.push(r),r.publicKey}function et(e,t,n,a){var r=new w.a;return e.push(w.g.createAccount({fromPubkey:t,newAccountPubkey:r.publicKey,lamports:n,space:Ye.a.span,programId:R.d})),a.push(r),r.publicKey}function tt(e,t,n,a,r,i,o,c){var l,u=i.toBase58(),s=d.d.byParser(d.c).map((function(e){return d.d.get(e)})).find((function(e){return void 0!==e&&e.info.mint.toBase58()===u&&e.info.owner.toBase58()===t.toBase58()&&(void 0===c||!c.has(e.pubkey.toBase58()))})),m=u===R.e.toBase58();return s&&!m?l=s.pubkey:(l=function(e,t,n,a,r,i){var o=et(e,t,n,i);return e.push(Ye.c.createInitAccountInstruction(R.d,a,o,r)),o}(n,e,r,i,t,o),m&&a.push(Ye.c.createCloseAccountInstruction(R.d,l,e,e,[]))),l}var nt,at=function(){var e=Object(p.a)(b.a.mark((function e(t,n,a,r,i,o,c,l,u){var m,f,p,E,g,O,j,k,S,A,T,x,N,I,B,M,L,C,_,q,P,W,D,F;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(He.a)({message:"Borrowing funds...",description:"Please review transactions to approve.",type:"warn"}),m=[],f=[],p=[],e.next=6,t.getMinimumBalanceForRentExemption(Ye.a.span);case 6:if(E=e.sent,!l){e.next=11;break}e.t0=l.pubkey,e.next=19;break;case 11:return e.t1=Xe,e.t2=f,e.t3=n.publicKey,e.next=16,t.getMinimumBalanceForRentExemption(_e.LendingObligationLayout.span);case 16:e.t4=e.sent,e.t5=m,e.t0=(0,e.t1)(e.t2,e.t3,e.t4,e.t5);case 19:if(g=e.t0,!l){e.next=24;break}e.t6=l.info.tokenMint,e.next=32;break;case 24:return e.t7=Ze,e.t8=f,e.t9=n.publicKey,e.next=29,t.getMinimumBalanceForRentExemption(Ye.b.span);case 29:e.t10=e.sent,e.t11=m,e.t6=(0,e.t7)(e.t8,e.t9,e.t10,e.t11);case 32:return O=e.t6,j=u||et(f,n.publicKey,E,m),e.next=36,tt(n.publicKey,n.publicKey,f,p,E,o.info.liquidityMint,m);case 36:if(k=e.sent,!(f.length>0)){e.next=42;break}return e.next=40,Object(s.c)(t,n,f,Object(v.a)(m));case 40:S=e.sent,Object(He.a)({message:"Obligation accounts created",description:"Transaction ".concat(S),type:"success"});case 42:return Object(He.a)({message:"Borrowing funds...",description:"Please review transactions to approve.",type:"warn"}),m=[],f=[],p=[],e.next=48,w.d.findProgramAddress([c.info.lendingMarket.toBuffer()],R.a);case 48:if(A=e.sent,T=Object(y.a)(A,1),x=T[0],N=0,I=0,i!==_e.BorrowAmountType.LiquidityBorrowAmount){e.next=62;break}return B=a.info.amount.toNumber(),I=B-E,e.next=58,d.d.query(t,o.info.liquidityMint,d.b);case 58:M=e.sent,N=Object(h.n)(r,null===M||void 0===M?void 0:M.info),e.next=68;break;case 62:if(i!==_e.BorrowAmountType.CollateralDepositAmount){e.next=68;break}return e.next=65,d.d.query(t,c.info.collateralMint,d.b);case 65:L=e.sent,N=Object(h.n)(r,null===L||void 0===L?void 0:L.info),I=N;case 68:if(C=$e(f,p,a,n.publicKey,I+E,m),Object(_e.approve)(f,p,C,x,n.publicKey,I),_=o.info.dexMarketOption?o.info.dexMarket:c.info.dexMarket,q=d.d.get(_)){e.next=74;break}throw new Error("Dex market doesn't exist.");case 74:return P=d.d.get(c.info.lendingMarket),W=P.info.quoteMint.equals(c.info.liquidityMint)?null===q||void 0===q?void 0:q.info.bids:null===q||void 0===q?void 0:q.info.asks,D=Je(f,n.publicKey,m),f.push(Object(_e.borrowInstruction)(N,i,C,k,c.pubkey,c.info.collateralSupply,o.pubkey,o.info.liquiditySupply,g,O,j,n.publicKey,x,_,W,D)),e.prev=78,e.next=81,Object(s.c)(t,n,f.concat(p),m,!0);case 81:F=e.sent,Object(He.a)({message:"Funds borrowed.",type:"success",description:"Transaction - ".concat(F)}),e.next=88;break;case 85:throw e.prev=85,e.t12=e.catch(78),new Error;case 88:case"end":return e.stop()}}),e,null,[[78,85]])})));return function(t,n,a,r,i,o,c,l,u){return e.apply(this,arguments)}}(),rt=function(){var e=Object(p.a)(b.a.mark((function e(t,n,a,r,i,o){var c,l,u,d,m,f,p,v,E,g,h;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(He.a)({message:"Depositing funds...",description:"Please review transactions to approve.",type:"warn"}),c=!0,l=[],u=[],d=[],e.next=7,i.getMinimumBalanceForRentExemption(Ye.a.span);case 7:return m=e.sent,e.next=10,w.d.findProgramAddress([a.lendingMarket.toBuffer()],R.a);case 10:if(f=e.sent,p=Object(y.a)(f,1),v=p[0],E=$e(u,d,t,o.publicKey,n+m,l),Object(_e.approve)(u,d,E,v,o.publicKey,n),!c){e.next=21;break}return e.next=18,tt(o.publicKey,o.publicKey,u,d,m,a.collateralMint,l);case 18:g=e.sent,e.next=22;break;case 21:g=et(u,o.publicKey,m,l);case 22:return c?u.push(Object(W.k)(n,E,g,v,r,a.liquiditySupply,a.collateralMint)):(80,u.push(Object(W.m)(n,80,E,g,r,a.liquidityMint,a.liquiditySupply,a.collateralMint,a.collateralSupply,a.lendingMarket,v,a.dexMarket))),e.prev=23,e.next=26,Object(s.c)(i,o,u.concat(d),l,!0);case 26:h=e.sent,Object(He.a)({message:"Funds deposited.",type:"success",description:"Transaction - ".concat(h)}),e.next=33;break;case 30:throw e.prev=30,e.t0=e.catch(23),new Error;case 33:case"end":return e.stop()}}),e,null,[[23,30]])})));return function(t,n,a,r,i,o){return e.apply(this,arguments)}}(),it=n(530),ot=function(){var e=Object(p.a)(b.a.mark((function e(t,n,a,r,i,o,c,l){var u,d,m,f,p,v,E,g,h,O;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(He.a)({message:"Repaing funds...",description:"Please review transactions to approve.",type:"warn"}),u=[],d=[],m=[],e.next=6,c.getMinimumBalanceForRentExemption(Ye.a.span);case 6:return f=e.sent,e.next=9,w.d.findProgramAddress([i.info.lendingMarket.toBuffer()],R.a);case 9:return p=e.sent,v=Object(y.a)(p,1),E=v[0],g=t.pubkey,Object(_e.approve)(d,m,g,E,l.publicKey,n),e.next=16,tt(l.publicKey,l.publicKey,d,m,f,o.info.collateralMint,u);case 16:return h=e.sent,Object(_e.approve)(d,m,r.pubkey,E,l.publicKey,r.info.amount.toNumber()),d.push(Object(it.a)(n,g,h,i.pubkey,i.info.liquiditySupply,o.pubkey,o.info.collateralSupply,a.pubkey,a.info.tokenMint,r.pubkey,E)),e.next=21,Object(s.c)(c,l,d.concat(m),u,!0);case 21:O=e.sent,Object(He.a)({message:"Funds repaid.",type:"success",description:"Transaction - ".concat(O)});case 23:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i,o,c,l){return e.apply(this,arguments)}}(),ct=function(){var e=Object(p.a)(b.a.mark((function e(t,n,a,r,i,o){var c,l,u,d,m,f,p,v,E,g;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(He.a)({message:"Withdrawing funds...",description:"Please review transactions to approve.",type:"warn"}),c=[],l=[],u=[],e.next=6,i.getMinimumBalanceForRentExemption(Ye.a.span);case 6:return d=e.sent,e.next=9,w.d.findProgramAddress([a.lendingMarket.toBuffer()],R.a);case 9:return m=e.sent,f=Object(y.a)(m,1),p=f[0],v=t.pubkey,Object(_e.approve)(l,u,v,p,o.publicKey,n),e.next=16,tt(o.publicKey,o.publicKey,l,u,d,a.liquidityMint,c);case 16:return E=e.sent,l.push(Object(W.r)(n,v,E,r,a.collateralMint,a.liquiditySupply,p)),e.prev=18,e.next=21,Object(s.c)(i,o,l.concat(u),c,!0);case 21:g=e.sent,Object(He.a)({message:"Funds deposited.",type:"success",description:"Transaction - ".concat(g)}),e.next=27;break;case 25:e.prev=25,e.t0=e.catch(18);case 27:case"end":return e.stop()}}),e,null,[[18,25]])})));return function(t,n,a,r,i,o){return e.apply(this,arguments)}}(),lt=n(531),ut=function(){var e=Object(p.a)(b.a.mark((function e(t,n,a,r,i,o,c){var l,u,m,f,p,v,E,g,h,O,j,k,S,A,T;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(He.a)({message:"Repaing funds...",description:"Please review transactions to approve.",type:"warn"}),l=[],u=[],m=[],e.next=6,t.getMinimumBalanceForRentExemption(Ye.a.span);case 6:return f=e.sent,e.next=9,w.d.findProgramAddress([o.info.lendingMarket.toBuffer()],R.a);case 9:return p=e.sent,v=Object(y.a)(p,1),E=v[0],g=$e(u,m,a,n.publicKey,r+f,l),Object(_e.approve)(u,m,g,E,n.publicKey,r),e.next=16,tt(n.publicKey,n.publicKey,u,m,f,c.info.collateralMint,l);case 16:if(h=e.sent,O=o.info.dexMarketOption?o.info.dexMarket:c.info.dexMarket,j=d.d.get(O)){e.next=21;break}throw new Error("Dex market doesn't exist.");case 21:return k=d.d.get(c.info.lendingMarket),S=k.info.quoteMint.equals(o.info.liquidityMint)?null===j||void 0===j?void 0:j.info.bids:null===j||void 0===j?void 0:j.info.asks,console.log(O.toBase58()),A=Je(u,n.publicKey,l),u.push(Object(lt.a)(r,g,h,o.pubkey,o.info.liquiditySupply,c.pubkey,c.info.collateralSupply,i.pubkey,E,O,S,A)),e.next=28,Object(s.c)(t,n,u.concat(m),l,!0);case 28:T=e.sent,Object(He.a)({message:"Funds liquidated.",type:"success",description:"Transaction - ".concat(T)});case 30:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i,o,c){return e.apply(this,arguments)}}(),st=Se.a.Option,dt=function(e){var t=e.mint,n=e.name,a=e.userDeposit;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(qe,{mintAddress:t}),n,r.a.createElement("span",{className:"token-balance"},"\xa0"," ",a?Object(h.d)(a.info.amount):"--")))},mt=function(e){var t,n,a,i,o,c=U().reserveAccounts,l=Object(s.e)().tokenMap,u=ee().userDeposits,m=d.d.get(null===(t=e.reserve)||void 0===t?void 0:t.lendingMarket);if(!m)return null;var f=null===m||void 0===m||null===(n=m.info)||void 0===n||null===(a=n.quoteMint)||void 0===a?void 0:a.toBase58(),b=(null===(i=e.reserve)||void 0===i||null===(o=i.liquidityMint)||void 0===o?void 0:o.toBase58())!==f;return r.a.createElement(Se.a,{size:"large",showSearch:!0,style:{minWidth:300,margin:"5px 0px"},placeholder:"Collateral",value:e.collateralReserve,disabled:e.disabled,defaultValue:e.collateralReserve,onChange:function(t){e.onCollateralReserve&&e.onCollateralReserve(t)},filterOption:function(e,t){var n;return(null===t||void 0===t||null===(n=t.name)||void 0===n?void 0:n.toLowerCase().indexOf(e.toLowerCase()))>=0}},c.filter((function(t){return t.info!==e.reserve})).filter((function(e){return!b||e.info.liquidityMint.equals(m.info.quoteMint)})).map((function(e){var t=e.info.liquidityMint.toBase58(),n=e.pubkey.toBase58(),a=Object(h.l)(l,t);return r.a.createElement(st,{key:n,value:n,name:a,title:n},r.a.createElement(dt,{reserve:e,userDeposit:u.find((function(e){return e.reserve.pubkey.toBase58()===n})),mint:t,name:a}))})))},ft=(n(752),n(410),function(e){return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center"}},r.a.createElement("h2",null,"Congratulations!"),r.a.createElement("div",null,"Your action has been successfully executed"),r.a.createElement("div",{className:"success-icon"}),r.a.createElement(c.b,{to:"/dashboard"},r.a.createElement(ve.a,{type:"primary"},Te.b.DASHBOARD_ACTION)),r.a.createElement(ve.a,{type:"text",onClick:e.onClose},Te.b.GO_BACK_ACTION))}),bt=function(){var e=Object(l.f)();return r.a.createElement(ve.a,{type:"text",onClick:e.goBack},Te.b.GO_BACK_ACTION)},pt=n(196),vt=function(e){var t=Object(u.c)(),n=t.wallet,a=t.connected,i=e.onClick,o=(e.children,e.disabled),c=Object(pt.a)(e,["onClick","children","disabled"]);return r.a.createElement(ve.a,Object.assign({},c,{onClick:a?i:n.connect,disabled:a&&o}),a?e.children:Te.b.CONNECT_LABEL)},yt=function(e){var t=Object(s.d)(),n=Object(u.c)().wallet,i=Object(a.useState)(""),o=Object(y.a)(i,2),c=o[0],l=o[1],m=Object(a.useState)(!1),f=Object(y.a)(m,2),v=f[0],E=f[1],g=Object(a.useState)(!1),h=Object(y.a)(g,2),O=h[0],w=h[1],j=e.reserve,k=Object(a.useState)(),S=Object(y.a)(k,2),A=S[0],T=S[1],x=Object(a.useMemo)((function(){var e=d.d.byParser(_e.LendingReserveParser).find((function(e){return e===A}))||"";return d.d.get(e)}),[A]),N=G(null===j||void 0===j?void 0:j.info.liquidityMint),I=z(null===x||void 0===x?void 0:x.info.collateralMint).accounts,B=Z(null===j||void 0===j?void 0:j.pubkey,null===x||void 0===x?void 0:x.pubkey).userObligationsByReserve,M=Object(a.useCallback)((function(){x&&(E(!0),Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,at(t,n,I[0],parseFloat(c),_e.BorrowAmountType.LiquidityBorrowAmount,j,x,B.length>0?B[0].obligation.account:void 0,B.length>0?B[0].userAccounts[0].pubkey:void 0);case 3:l(""),w(!0),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:return e.prev=9,E(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,7,9,12]])})))())}),[t,n,c,x,j,I,B,E,w]);return r.a.createElement(Le.a,{className:e.className,bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},O?r.a.createElement(ft,{onClose:function(){return w(!1)}}):r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},r.a.createElement("div",{className:"borrow-input-title"},Te.b.SELECT_COLLATERAL),r.a.createElement(mt,{reserve:j.info,collateralReserve:A,onCollateralReserve:T}),r.a.createElement("div",{className:"borrow-input-title"},Te.b.BORROW_QUESTION),r.a.createElement("div",{className:"token-input"},r.a.createElement(qe,{mintAddress:null===j||void 0===j?void 0:j.info.liquidityMint}),r.a.createElement(Qe,{value:c,onChange:function(e){l(e)},style:{fontSize:20,boxShadow:"none",borderColor:"transparent",outline:"transparent"},placeholder:"0.00"}),r.a.createElement("div",null,N)),r.a.createElement(vt,{type:"primary",onClick:M,loading:v,disabled:0===I.length},0===I.length?Te.b.NO_DEPOSITS:Te.b.BORROW_ACTION),r.a.createElement(bt,null)))},Et=n(1095),gt=Et.a.Text;!function(e){e.Deposit="deposit",e.Borrow="borrow"}(nt||(nt={}));var ht=function(e){var t=e.reserve.info,n=e.mode,a=G(null===t||void 0===t?void 0:t.liquidityMint),i=Object(d.j)(t.liquidityMint),o=Object(h.i)(t.availableLiquidity.toNumber(),i),l=Object(W.h)(t),u=Object(W.g)(t),s=Object(W.i)(t),m=t.config.liquidationThreshold/100,f=t.config.liquidationBonus/100,b=t.config.loanToValueRatio/100,p=null;return n===nt.Deposit?p=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card-row"},r.a.createElement(gt,{type:"secondary",className:"card-cell "},Te.b.TABLE_TITLE_DEPOSIT_APY,":"),r.a.createElement("div",{className:"card-cell "},h.f.format(l))),r.a.createElement("div",{className:"card-row"},r.a.createElement(gt,{type:"secondary",className:"card-cell "},"Maximum LTV:"),r.a.createElement("div",{className:"card-cell "},h.f.format(b))),r.a.createElement("div",{className:"card-row"},r.a.createElement(gt,{type:"secondary",className:"card-cell "},"Liquidation threshold:"),r.a.createElement("div",{className:"card-cell "},h.f.format(m))),r.a.createElement("div",{className:"card-row"},r.a.createElement(gt,{type:"secondary",className:"card-cell "},"Liquidation penalty:"),r.a.createElement("div",{className:"card-cell "},h.f.format(f)))):n===nt.Borrow&&(p=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card-row"},r.a.createElement(gt,{type:"secondary",className:"card-cell "},Te.b.TABLE_TITLE_BORROW_APY,":"),r.a.createElement("div",{className:"card-cell "},h.f.format(u))))),r.a.createElement(Le.a,{className:e.className,title:r.a.createElement("div",{style:{display:"flex",alignItems:"center",fontSize:"1.2rem",justifyContent:"center"}},r.a.createElement(c.b,{to:"/reserve/".concat(e.reserve.pubkey)},r.a.createElement(qe,{mintAddress:null===t||void 0===t?void 0:t.liquidityMint,style:{width:30,height:30}})," ",a," Reserve Overview"))},r.a.createElement("div",{className:"card-row"},r.a.createElement(gt,{type:"secondary",className:"card-cell "},"Utilization rate:"),r.a.createElement("div",{className:"card-cell "},h.f.format(s))),r.a.createElement("div",{className:"card-row"},r.a.createElement(gt,{type:"secondary",className:"card-cell "},"Available liquidity:"),r.a.createElement("div",{className:"card-cell "},h.e.format(o)," ",a)),p)},Ot=function(){var e=Object(l.h)().id,t=K(e),n=X(),a=n.userObligations,i=n.totalInQuote,o=ae(e),c=o.totalInQuote,u=o.utilization;return t?r.a.createElement("div",{className:"borrow-reserve"},r.a.createElement(Be.a,{gutter:Te.a},r.a.createElement(Me.a,{xs:24,xl:5},r.a.createElement(Le.a,null,r.a.createElement(Ce.a,{title:Te.b.BORROWED_VALUE,value:i,precision:2,prefix:"$"}))),r.a.createElement(Me.a,{xs:24,xl:5},r.a.createElement(Le.a,null,r.a.createElement(Ce.a,{title:Te.b.BORROWING_POWER_USED,value:100*u,precision:2,suffix:"%"}))),r.a.createElement(Me.a,{xs:24,xl:5},r.a.createElement(Le.a,null,r.a.createElement(Ce.a,{title:Te.b.BORROWING_POWER_VALUE,value:c,valueStyle:{color:"#3f8600"},precision:2,prefix:"$"}))),r.a.createElement(Me.a,{xs:24,xl:9},r.a.createElement(Le.a,null,r.a.createElement(Re,{title:"Your Loans",items:a,getPct:function(e){return e.obligation.info.borrowedInQuote/i},name:function(e){return e.obligation.info.repayName}})))),r.a.createElement(Be.a,{gutter:Te.a,className:"flexColumn"},r.a.createElement(Me.a,{xs:24,xl:15},r.a.createElement(yt,{className:"card-fill",reserve:t})),r.a.createElement(Me.a,{xs:24,xl:9},r.a.createElement(ht,{className:"card-fill",reserve:t,mode:nt.Borrow})))):null},wt=function(e){var t=e.obligation,n=d.d.get(t.info.borrowReserve),i=d.d.get(t.info.collateralReserve),o=Object(d.j)(n.info.liquidityMint),l=Object(d.j)(i.info.liquidityMint),u=Object(h.i)(Object(h.p)(t.info.borrowAmountWad),o),s=Object(a.useMemo)((function(){return Object(W.g)(n.info)}),[n]),m=Object(W.j)(t.info.depositedCollateral,n.info),f=Object(h.i)(m,l),b=G(null===n||void 0===n?void 0:n.info.liquidityMint),p=G(null===i||void 0===i?void 0:i.info.liquidityMint);return r.a.createElement("div",{className:"dashboard-item"},r.a.createElement("span",{style:{display:"flex",marginLeft:5}},r.a.createElement("div",{style:{display:"flex"},title:"".concat(p,"\u2192").concat(b)},r.a.createElement(qe,{mintAddress:null===i||void 0===i?void 0:i.info.liquidityMint,style:{marginRight:"-0.5rem"}}),r.a.createElement(qe,{mintAddress:null===n||void 0===n?void 0:n.info.liquidityMint}))),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("em",null,h.e.format(u))," ",b),r.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.e.format(t.info.borrowedInQuote)))),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("em",null,h.e.format(f))," ",p),r.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.e.format(t.info.collateralInQuote)))),r.a.createElement("div",null,h.f.format(s)),r.a.createElement("div",{style:{color:Object(W.l)(t.info.health)}},h.f.format(t.info.ltv/100)),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},r.a.createElement(c.b,{to:"/borrow/".concat(n.pubkey.toBase58())},r.a.createElement(ve.a,{type:"primary"},r.a.createElement("span",null,"Borrow"))),r.a.createElement(c.b,{to:"/repay/loan/".concat(t.account.pubkey.toBase58())},r.a.createElement(ve.a,{type:"text"},r.a.createElement("span",null,"Repay")))))},jt=function(){var e=X(),t=e.userObligations,n=e.totalInQuote;return r.a.createElement(Le.a,{title:r.a.createElement("div",{className:"dashboard-title"},r.a.createElement("div",null,Te.b.DASHBOARD_TITLE_LOANS),r.a.createElement("div",null,r.a.createElement("span",null,Te.b.TOTAL_TITLE,": "),"$",h.e.format(n)))},r.a.createElement(Re,{items:t,getPct:function(e){return e.obligation.info.borrowedInQuote/n},name:function(e){return e.obligation.info.repayName}}),r.a.createElement("div",{className:"dashboard-item dashboard-header"},r.a.createElement("div",null,Te.b.TABLE_TITLE_ASSET),r.a.createElement("div",null,Te.b.TABLE_TITLE_YOUR_LOAN_BALANCE),r.a.createElement("div",null,Te.b.TABLE_TITLE_COLLATERAL_BALANCE),r.a.createElement("div",null,Te.b.TABLE_TITLE_APY),r.a.createElement("div",null,Te.b.TABLE_TITLE_LTV),r.a.createElement("div",null)),t.map((function(e){return r.a.createElement(wt,{obligation:e.obligation})})))},kt=function(e){var t=e.userDeposit,n=t.reserve,i=t.info,o=n.info.liquidityMint,l=G(o),u=Object(a.useMemo)((function(){return Object(W.h)(n.info)}),[n]);return r.a.createElement("div",{className:"dashboard-item"},r.a.createElement("span",{style:{display:"flex"}},r.a.createElement(qe,{mintAddress:o}),l),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("em",null,h.e.format(i.amount))," ",l),r.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.e.format(i.amountInQuote)))),r.a.createElement("div",null,h.f.format(u)),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},r.a.createElement(c.b,{to:"/deposit/".concat(n.pubkey.toBase58())},r.a.createElement(ve.a,{type:"primary"},r.a.createElement("span",null,Te.b.DEPOSIT_ACTION))),r.a.createElement(c.b,{to:"/withdraw/".concat(n.pubkey.toBase58())},r.a.createElement(ve.a,{type:"text"},r.a.createElement("span",null,Te.b.WITHDRAW_ACTION)))))},St=function(){var e=ee(),t=e.userDeposits,n=e.totalInQuote;return r.a.createElement(Le.a,{title:r.a.createElement("div",{className:"dashboard-title"},r.a.createElement("div",null,Te.b.DASHBOARD_TITLE_DEPOSITS),r.a.createElement("div",null,r.a.createElement("span",null,Te.b.TOTAL_TITLE,": "),"$",h.e.format(n)))},r.a.createElement(Re,{items:t,getPct:function(e){return e.info.amountInQuote/n},name:function(e){return e.info.name}}),r.a.createElement("div",{className:"dashboard-item dashboard-header"},r.a.createElement("div",null,Te.b.TABLE_TITLE_ASSET),r.a.createElement("div",null,Te.b.TABLE_TITLE_DEPOSIT_BALANCE),r.a.createElement("div",null,Te.b.TABLE_TITLE_APY),r.a.createElement("div",null)),t.map((function(e){return r.a.createElement(kt,{userDeposit:e})})))},At=(n(753),function(){var e=Object(u.c)().connected,t=X().userObligations,n=ee().userDeposits;return r.a.createElement("div",{className:"dashboard-container"},!e&&r.a.createElement("div",{className:"dashboard-info"},r.a.createElement("img",{src:"splash.svg",alt:"connect your wallet",className:"dashboard-splash"}),Te.b.DASHBOARD_INFO),e&&0===n.length&&0===t.length&&r.a.createElement("div",{className:"dashboard-info"},r.a.createElement("img",{src:"splash.svg",alt:"connect your wallet",className:"dashboard-splash"}),Te.b.NO_LOANS_NO_DEPOSITS),e&&r.a.createElement(Be.a,{gutter:Te.a},n.length>0&&r.a.createElement(Me.a,{md:24,xl:12,span:24},r.a.createElement(St,null)),t.length>0&&r.a.createElement(Me.a,{md:24,xl:12,span:24},r.a.createElement(jt,null))))}),Tt=function(e){var t=G(e.reserve.liquidityMint),n=z(e.reserve.liquidityMint),a=n.balance,i=n.balanceInUSD,o=V(e.reserve),l=o.balance,u=o.balanceInUSD,s=Object(W.h)(e.reserve);return r.a.createElement(c.b,{to:"/deposit/".concat(e.address.toBase58())},r.a.createElement("div",{className:"deposit-item"},r.a.createElement("span",{style:{display:"flex"}},r.a.createElement(qe,{mintAddress:e.reserve.liquidityMint}),t),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("em",null,h.e.format(a))," ",t),r.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.e.format(i)))),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("em",null,h.e.format(l))," ",t),r.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.e.format(u)))),r.a.createElement("div",null,h.f.format(s)),r.a.createElement("div",null,r.a.createElement(ve.a,{type:"primary"},r.a.createElement("span",null,Te.b.DEPOSIT_ACTION)))))},xt=(n(754),function(){var e=U().reserveAccounts;return r.a.createElement("div",{className:"flexColumn"},r.a.createElement(Le.a,null,r.a.createElement("div",{className:"deposit-item deposit-header"},r.a.createElement("div",null,"Asset"),r.a.createElement("div",null,"Your wallet balance"),r.a.createElement("div",null,"Your balance in Oyster"),r.a.createElement("div",null,"APY"),r.a.createElement("div",null)),e.map((function(e){return r.a.createElement(Tt,{reserve:e.info,address:e.pubkey})}))))}),Nt=(n(755),n(1093)),It=(n(756),function(e){var t=Object(s.d)(),n=Object(u.c)().wallet,i=Object(a.useState)(!1),o=Object(y.a)(i,2),c=o[0],l=o[1],d=Object(a.useState)(!1),m=Object(y.a)(d,2),f=m[0],v=m[1],E=e.reserve,g=e.address,h=G(null===E||void 0===E?void 0:E.liquidityMint),O=z(null===E||void 0===E?void 0:E.liquidityMint),w=O.accounts,j=O.balance,k=O.balanceLamports,S=Object(a.useCallback)((function(e){return"string"===typeof e?parseFloat(e)/j*100:(e*j/100).toFixed(2)}),[j]),A=te(S),T=A.value,x=A.setValue,N=A.pct,I=A.setPct,B=A.type,M=Object(a.useCallback)((function(){l(!0),Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,rt(w[0],B===H.Percent?N*k/100:Math.ceil(k*(parseFloat(T)/j)),E,g,t,n);case 3:x(""),v(!0),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:return e.prev=9,l(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,7,9,12]])})))()}),[t,x,k,j,n,T,N,B,E,w,g]);return r.a.createElement(Le.a,{className:e.className,bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},f?r.a.createElement(ft,{onClose:function(){return v(!1)}}):r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},r.a.createElement("div",{className:"deposit-input-title"},Te.b.DEPOSIT_QUESTION),r.a.createElement("div",{className:"token-input"},r.a.createElement(qe,{mintAddress:null===E||void 0===E?void 0:E.liquidityMint}),r.a.createElement(Qe,{value:T,onChange:x,autoFocus:!0,style:{fontSize:20,boxShadow:"none",borderColor:"transparent",outline:"transparent"},placeholder:"0.00"}),r.a.createElement("div",null,h)),r.a.createElement(Nt.a,{marks:Te.e,value:N,onChange:I}),r.a.createElement(vt,{type:"primary",onClick:M,loading:c,disabled:0===w.length},Te.b.DEPOSIT_ACTION)))}),Bt=(n(757),function(e){var t=G(e.reserve.liquidityMint),n=z(e.reserve.liquidityMint).balance,a=V(e.reserve).balance;return r.a.createElement(Le.a,{className:e.className,bodyStyle:{display:"flex",justifyContent:"space-around"}},r.a.createElement("div",{className:"deposit-info-line-item "},r.a.createElement("div",null,"Your balance in Oyster"),r.a.createElement("div",null,h.e.format(a)," ",t)),r.a.createElement("div",{className:"deposit-info-line-item "},r.a.createElement("div",null,"Your wallet balance"),r.a.createElement("div",null,h.e.format(n)," ",t)),r.a.createElement("div",{className:"deposit-info-line-item "},r.a.createElement("div",null,"Health factor"),r.a.createElement("div",null,"--")))}),Mt=function(){var e=K(Object(l.h)().id),t=null===e||void 0===e?void 0:e.info;return t&&e?r.a.createElement("div",{className:"deposit-reserve"},r.a.createElement(Bt,{className:"deposit-reserve-item",reserve:t,address:e.pubkey}),r.a.createElement("div",{className:"deposit-reserve-container"},r.a.createElement(It,{className:"deposit-reserve-item deposit-reserve-item-left",reserve:t,address:e.pubkey}),r.a.createElement(ht,{className:"deposit-reserve-item deposit-reserve-item-right",reserve:e,mode:nt.Deposit}))):null},Lt=(n(758),Et.a.Text),Ct=function(e){var t=e.reserve,n=e.address,i=G(null===t||void 0===t?void 0:t.liquidityMint),o=z(e.reserve.liquidityMint),l=o.balance,u=o.balanceInUSD,m=V(e.reserve),f=m.balance,v=m.balanceInUSD,E=function(e){var t=Object(s.d)(),n=Z(e).userObligationsByReserve,r=Object(a.useState)({borrowedLamports:0,borrowedInUSD:0,colateralInUSD:0,ltv:0,health:0}),i=Object(y.a)(r,2),o=i[0],c=i[1],l=K(e),u=Object(d.j)(null===l||void 0===l?void 0:l.info.liquidityMint);return Object(a.useEffect)((function(){c({borrowedLamports:0,borrowedInUSD:0,colateralInUSD:0,ltv:0,health:0}),Object(p.a)(b.a.mark((function e(){var a,r,i,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(t,n.map((function(e){return e.obligation.info.tokenMint.toBase58()})),"single");case 2:a=e.sent,r=a.keys,a.array.forEach((function(e,t){var n=r[t];d.d.add(new w.d(n),e,d.b)})),i={borrowedLamports:0,borrowedInUSD:0,colateralInUSD:0,ltv:0,health:0},o=0,n.forEach((function(e){var t=Object(h.p)(e.obligation.info.borrowAmountWad).toNumber(),n=e.userAccounts.reduce((function(e,t){return e+t.info.amount.toNumber()}),0),a=d.d.get(e.obligation.info.tokenMint);i.borrowedLamports+=t*(n/(null===a||void 0===a?void 0:a.info.supply.toNumber())),i.borrowedInUSD+=e.obligation.info.borrowedInQuote,i.colateralInUSD+=e.obligation.info.collateralInQuote,o=e.obligation.info.liquidationThreshold}),0),1===n.length?(i.ltv=n[0].obligation.info.ltv,i.health=n[0].obligation.info.health):(i.ltv=100*i.borrowedInUSD/i.colateralInUSD,i.health=i.colateralInUSD*o/100/i.borrowedInUSD,i.health=Number.isFinite(i.health)?i.health:0),c(i);case 11:case"end":return e.stop()}}),e)})))()}),[t,n,c]),Object(k.a)({borrowed:Object(h.i)(o.borrowedLamports,u)},o)}(n),g=E.borrowed,O=E.borrowedInUSD,j=E.ltv,S=E.health,A=ae(n),T=A.totalInQuote,x=A.borrowingPower;return r.a.createElement(Le.a,{className:e.className,title:r.a.createElement("div",{style:{display:"flex",alignItems:"center",fontSize:"1.2rem",justifyContent:"center"}},"Your Information")},r.a.createElement("h3",null,"Borrows"),r.a.createElement("div",{className:"card-row"},r.a.createElement(Lt,{type:"secondary",className:"card-cell "},"Borrowed"),r.a.createElement("div",{className:"card-cell "},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("em",null,h.e.format(g))," ",i),r.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.e.format(O))))),r.a.createElement("div",{className:"card-row"},r.a.createElement(Lt,{type:"secondary",className:"card-cell "},"Health factor:"),r.a.createElement("div",{className:"card-cell "},S.toFixed(2))),r.a.createElement("div",{className:"card-row"},r.a.createElement(Lt,{type:"secondary",className:"card-cell "},"Loan to value:"),r.a.createElement("div",{className:"card-cell "},h.e.format(j))),r.a.createElement("div",{className:"card-row"},r.a.createElement(Lt,{type:"secondary",className:"card-cell "},"Available to you:"),r.a.createElement("div",{className:"card-cell "},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("em",null,h.e.format(x))," ",i),r.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.e.format(T))))),r.a.createElement("h3",null,"Deposits"),r.a.createElement("div",{className:"card-row"},r.a.createElement(Lt,{type:"secondary",className:"card-cell "},"Wallet balance:"),r.a.createElement("div",{className:"card-cell "},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("em",null,h.e.format(l))," ",i),r.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.e.format(u))))),r.a.createElement("div",{className:"card-row"},r.a.createElement(Lt,{type:"secondary",className:"card-cell "},"You already deposited:"),r.a.createElement("div",{className:"card-cell "},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("em",null,h.e.format(f))," ",i),r.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.e.format(v))))),r.a.createElement("div",{className:"card-row",style:{marginTop:20,justifyContent:"space-evenly"}},r.a.createElement(c.b,{to:"/deposit/".concat(n)},r.a.createElement(ve.a,null,"Deposit")),r.a.createElement(c.b,{to:"/borrow/".concat(n)},r.a.createElement(ve.a,null,"Borrow")),r.a.createElement(c.b,{to:"/withdraw/".concat(n)},r.a.createElement(ve.a,null,"Withdraw")),r.a.createElement(c.b,{to:"/repay/".concat(n)},r.a.createElement(ve.a,null,"Repay"))))},_t=(n(759),n(760),function(e){var t=Object(a.useRef)(),n=Object(a.useRef)(),i=Object(a.useState)(1),o=Object(y.a)(i,2),c=o[0],l=o[1],u=e.percent,s=e.title,d=e.style,m=e.color,f=e.showPercent,b=d.height,p=Object(a.useCallback)((function(){var e,t=(null===(e=n.current)||void 0===e?void 0:e.parentNode).offsetWidth;l(t<b?t/b:1)}),[b]);return Object(a.useEffect)((function(){return p(),window.addEventListener("resize",p),function(){window.removeEventListener("resize",p)}}),[p]),Object(a.useEffect)((function(){var e=0;return qt(t.current,u,(function(t){e=t}),m),function(){cancelAnimationFrame(e)}}),[u,m]),r.a.createElement("div",{className:"waterWave",ref:n,style:{transform:"scale(".concat(c,")")}},r.a.createElement("div",{style:{width:b,height:b,overflow:"hidden"}},r.a.createElement("canvas",{className:"waterWaveCanvasWrapper",ref:t,width:2*b,height:2*b})),r.a.createElement("div",{className:"text",style:{width:b}},s,r.a.createElement("h4",null,f&&"".concat(u.toFixed(2),"%"))))}),qt=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#1890FF",r=t/100;if(e&&r){var i=e.getContext("2d");if(i){var o=e.width,c=e.height,l=o/2,u=2,s=l-u;i.beginPath(),i.lineWidth=2*u;var d=o-u,m=d/8,f=.2,b=f,p=u,v=0,y=0,E=.005,g=l-u,h=-Math.PI/2,O=!0,w=[l+g*Math.cos(h),l+g*Math.sin(h)];i.strokeStyle=a,i.moveTo(w[0],w[1]);var j=function(){i.beginPath(),i.save();for(var e=[],t=p;t<=p+d;t+=20/d){var n=v+(p+t)/m,a=Math.sin(n)*b,r=t,o=2*s*(1-y)+(l-s)-m*a;i.lineTo(r,o),e.push([r,o])}var u=e.shift();if(u){i.lineTo(p+d,c),i.lineTo(p,c),i.lineTo(u[0],u[1]);var f=i.createLinearGradient(0,0,0,c);f.addColorStop(0,"#ffffff"),f.addColorStop(1,"#1890FF"),i.fillStyle=f,i.fill(),i.restore()}},k=function e(){if(i.clearRect(0,0,o,c),O)O=!1,i.globalCompositeOperation="destination-over",i.beginPath(),i.save(),i.arc(l,l,l-3*u,0,2*Math.PI,!0),i.stroke(),i.restore(),i.clip(),i.fillStyle="#1890FF";else{if(r>=.85){if(b>f/4)b-=.01*f}else if(r<=.1){if(b<1.5*f)b+=.01*f}else{if(b<=f)b+=.01*f;if(b>=f)b-=.01*f}r-y>0&&(y+=E),r-y<0&&(y-=E),v+=.07,j()}n(requestAnimationFrame(e))};k()}}},Pt=function(e){var t,n=null===(t=e.reserve.liquidityMint)||void 0===t?void 0:t.toBase58(),i=Object(d.j)(n),o=Object(h.i)(e.reserve.availableLiquidity.toNumber(),i),c=100*o/(o+Object(a.useMemo)((function(){return Object(h.i)(Object(h.p)(e.reserve.borrowedLiquidityWad),i)}),[e.reserve,i]));return r.a.createElement(_t,{style:{height:300},showPercent:!1,title:r.a.createElement(Ce.a,{title:"Utilization",value:c,suffix:"%",precision:2}),percent:c})},Rt=function(e){var t,n=null===(t=e.reserve.liquidityMint)||void 0===t?void 0:t.toBase58(),i=Object(d.j)(n),o=_(n).price,c=Object(h.i)(e.reserve.availableLiquidity.toNumber(),i),l=o*c,u=Object(a.useMemo)((function(){return Object(h.i)(Object(h.p)(e.reserve.borrowedLiquidityWad),i)}),[e.reserve,i]),s=o*u,m=Object(a.useMemo)((function(){return Object(W.h)(e.reserve)}),[e.reserve]),f=e.reserve.config.liquidationThreshold,b=e.reserve.config.liquidationBonus,p=e.reserve.config.loanToValueRatio;return r.a.createElement(Le.a,{className:e.className,title:r.a.createElement(r.a.Fragment,null,r.a.createElement(qe,{style:{marginRight:0,marginTop:0,position:"absolute",left:15},mintAddress:n,size:30}),Te.b.RESERVE_STATUS_TITLE),bodyStyle:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("div",{className:"flexColumn"},r.a.createElement(Be.a,{gutter:Te.a},r.a.createElement(Me.a,{span:12},r.a.createElement(Ce.a,{title:"Available Liquidity",value:c,valueRender:function(e){return r.a.createElement("div",null,e,r.a.createElement("div",{className:"dashboard-amount-quote-stat"},"$",h.e.format(l)))},precision:2})),r.a.createElement(Me.a,{span:12},r.a.createElement(Ce.a,{title:"Total Borrowed",value:u,valueRender:function(e){return r.a.createElement("div",null,e,r.a.createElement("div",{className:"dashboard-amount-quote-stat"},"$",h.e.format(s)))},precision:2}))),r.a.createElement(Be.a,{gutter:Te.a},r.a.createElement(Me.a,{span:24,style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},r.a.createElement(Pt,{reserve:e.reserve}))),r.a.createElement(Be.a,{gutter:Te.a},r.a.createElement(Me.a,{span:6},r.a.createElement(Ce.a,{title:"Maximum LTV",className:"small-statisitc",value:p,precision:2,suffix:"%"})),r.a.createElement(Me.a,{span:6},r.a.createElement(Ce.a,{title:"Liquidation threashold",className:"small-statisitc",value:f,precision:2,suffix:"%"})),r.a.createElement(Me.a,{span:6},r.a.createElement(Ce.a,{title:"Liquidation penalty",className:"small-statisitc",value:b,precision:2,suffix:"%"})),r.a.createElement(Me.a,{span:6},r.a.createElement(Ce.a,{title:"APY",className:"small-statisitc",value:100*m,precision:2,suffix:"%"})))))},Wt=function(){var e=K(Object(l.h)().id),t=null===e||void 0===e?void 0:e.info;return t&&e?r.a.createElement("div",{className:"flexColumn"},r.a.createElement(Be.a,{gutter:Te.a},r.a.createElement(Me.a,{sm:24,md:12,lg:14,xl:15,xxl:18},r.a.createElement(Rt,{reserve:t,address:e.pubkey})),r.a.createElement(Me.a,{sm:24,md:12,lg:10,xl:9,xxl:6},r.a.createElement(Ct,{className:"user-lending-card",reserve:t,address:e.pubkey})))):null},Dt=(n(761),n(762),function(e){var t=Object(s.d)(),n=Object(u.c)().wallet,i=Object(a.useState)(!1),o=Object(y.a)(i,2),c=o[0],l=o[1],d=Object(a.useState)(!1),m=Object(y.a)(d,2),f=m[0],v=m[1],E=e.reserve,g=e.address,h=G(null===E||void 0===E?void 0:E.liquidityMint),O=z(null===E||void 0===E?void 0:E.collateralMint),w=O.balanceLamports,j=O.accounts,k=V(E).balance,S=Object(a.useCallback)((function(e){return"string"===typeof e?parseFloat(e)/k*100:(e*k/100).toFixed(2)}),[k]),A=te(S),T=A.value,x=A.setValue,N=A.pct,I=A.setPct,B=A.type,M=Object(a.useCallback)((function(){l(!0),Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ct(j[0],B===H.Percent?N*w/100:Math.ceil(w*(parseFloat(T)/k)),E,g,t,n);case 3:x(""),v(!0),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:return e.prev=9,l(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,7,9,12]])})))()}),[g,k,w,t,j,N,E,x,B,T,n]);return r.a.createElement(Le.a,{className:e.className,bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},f?r.a.createElement(ft,{onClose:function(){return v(!1)}}):r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},r.a.createElement("div",{className:"withdraw-input-title"},Te.b.WITHDRAW_QUESTION),r.a.createElement("div",{className:"token-input"},r.a.createElement(qe,{mintAddress:null===E||void 0===E?void 0:E.liquidityMint}),r.a.createElement(Qe,{value:T,onChange:x,autoFocus:!0,style:{fontSize:20,boxShadow:"none",borderColor:"transparent",outline:"transparent"},placeholder:"0.00"}),r.a.createElement("div",null,h)),r.a.createElement(Nt.a,{marks:Te.e,value:N,onChange:I}),r.a.createElement(vt,{type:"primary",onClick:M,loading:c,disabled:0===j.length},0===j.length?Te.b.NO_DEPOSITS:Te.b.WITHDRAW_ACTION)))}),Ft=function(){var e=K(Object(l.h)().id),t=null===e||void 0===e?void 0:e.info;return t&&e?r.a.createElement("div",{className:"deposit-reserve"},r.a.createElement(Bt,{className:"deposit-reserve-item",reserve:t,address:e.pubkey}),r.a.createElement("div",{className:"deposit-reserve-container"},r.a.createElement(Dt,{className:"deposit-reserve-item deposit-reserve-item-left",reserve:t,address:e.pubkey}),r.a.createElement(ht,{className:"deposit-reserve-item deposit-reserve-item-right",reserve:e,mode:nt.Deposit}))):null},Ut=function(){var e=Object(s.d)(),t=Object(u.c)().wallet,n=Object(a.useCallback)((function(){e.requestAirdrop(t.publicKey,2*w.c).then((function(){Object(He.a)({message:Te.b.ACCOUNT_FUNDED,type:"success"})}))}),[t,e]);return r.a.createElement("div",{className:"flexColumn",style:{flex:1}},r.a.createElement(Le.a,{title:"Faucet",bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"},style:{flex:1}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center"}},r.a.createElement("div",{className:"deposit-input-title",style:{margin:10}},Te.b.FAUCET_INFO),r.a.createElement(vt,{type:"primary",onClick:n},Te.b.GIVE_SOL))))},Kt=(n(763),function(e){var t=Object(s.d)(),n=Object(u.c)().wallet,i=Object(a.useState)(!1),o=Object(y.a)(i,2),c=o[0],l=o[1],m=Object(a.useState)(!1),f=Object(y.a)(m,2),v=f[0],E=f[1],g=e.borrowReserve,O=e.obligation,w=Object(d.j)(g.info.liquidityMint),j=Object(h.p)(O.info.borrowAmountWad).toNumber(),k=Object(h.i)(j,w),S=e.collateralReserve,A=G(null===g||void 0===g?void 0:g.info.liquidityMint),T=z(g.info.liquidityMint).accounts,x=function(e){var t=Object(D.a)().userAccounts,n="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),a=t.findIndex((function(e){return e.info.mint.toBase58()===n}));if(-1!==a)return t[a]}(null===O||void 0===O?void 0:O.info.tokenMint),N=Object(a.useCallback)((function(e){return"string"===typeof e?parseFloat(e)/k*100:(e*k/100).toFixed(2)}),[k]),I=te(N),B=I.value,M=I.setValue,L=I.pct,C=I.setPct,_=I.type,q=Object(a.useCallback)((function(){S&&O&&g&&x&&(l(!0),Object(p.a)(b.a.mark((function e(){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=_===H.Percent?L*j/100:Math.ceil(j*(parseFloat(B)/k)),e.next=4,ot(T[0],a,O.account,x,g,S,t,n);case 4:M(""),E(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Object(He.a)({message:"Unable to repay loan.",type:"error",description:e.t0.message});case 11:return e.prev=11,l(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))())}),[L,B,k,j,_,t,n,O,S,g,T,x,M]);return r.a.createElement(Le.a,{className:e.className,bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},v?r.a.createElement(ft,{onClose:function(){return E(!1)}}):r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},r.a.createElement("div",{className:"repay-input-title"},Te.b.REPAY_QUESTION),r.a.createElement("div",{className:"token-input"},r.a.createElement(qe,{mintAddress:null===g||void 0===g?void 0:g.info.liquidityMint}),r.a.createElement(Qe,{value:B,onChange:M,autoFocus:!0,style:{fontSize:20,boxShadow:"none",borderColor:"transparent",outline:"transparent"},placeholder:"0.00"}),r.a.createElement("div",null,A)),r.a.createElement(Nt.a,{marks:Te.e,value:L,onChange:C}),r.a.createElement("div",{className:"repay-input-title"},Te.b.COLLATERAL),r.a.createElement(mt,{reserve:g.info,collateralReserve:null===S||void 0===S?void 0:S.pubkey.toBase58(),disabled:!0}),r.a.createElement(vt,{type:"primary",onClick:q,loading:c,disabled:0===T.length},Te.b.REPAY_ACTION)))}),Gt=(n(764),function(){var e=Object(l.h)(),t=e.reserve,n=e.obligation,a=J(n),i=K(n?null===a||void 0===a?void 0:a.info.borrowReserve:t),o=K(n?null===a||void 0===a?void 0:a.info.collateralReserve:t);return(null===i||void 0===i?void 0:i.info)&&i&&a?r.a.createElement("div",{className:"repay-reserve"},r.a.createElement("div",{className:"repay-reserve-container"},r.a.createElement(Kt,{className:"repay-reserve-item repay-reserve-item-left",borrowReserve:i,collateralReserve:o,obligation:a}),r.a.createElement(ht,{className:"repay-reserve-item repay-reserve-item-right",reserve:i,mode:nt.Borrow}))):null}),zt=function(e){var t=e.item.info,n=d.d.get(t.borrowReserve),i=d.d.get(t.collateralReserve),o=Object(d.j)(n.info.liquidityMint),l=Object(d.j)(i.info.liquidityMint),u=Object(h.i)(Object(h.p)(t.borrowAmountWad),o),s=Object(a.useMemo)((function(){return Object(W.g)(n.info)}),[n]),m=Object(W.j)(t.depositedCollateral,n.info),f=Object(h.i)(m,l),b=G(null===n||void 0===n?void 0:n.info.liquidityMint),p=G(null===i||void 0===i?void 0:i.info.liquidityMint);return r.a.createElement(c.b,{to:"/liquidate/".concat(e.item.account.pubkey.toBase58())},r.a.createElement("div",{className:"liquidate-item"},r.a.createElement("span",{style:{display:"flex"}},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(qe,{mintAddress:null===i||void 0===i?void 0:i.info.liquidityMint,style:{marginRight:"-0.5rem"}}),r.a.createElement(qe,{mintAddress:null===n||void 0===n?void 0:n.info.liquidityMint})),p,"\u2192",b),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("em",null,h.e.format(u))," ",b),r.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.e.format(t.borrowedInQuote)))),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("em",null,h.e.format(f))," ",p),r.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.e.format(t.collateralInQuote)))),r.a.createElement("div",null,h.f.format(s)),r.a.createElement("div",null,h.f.format(t.ltv/100)),r.a.createElement("div",null,t.health.toFixed(2)),r.a.createElement("div",null,r.a.createElement(ve.a,{type:"primary"},r.a.createElement("span",null,Te.b.LIQUIDATE_ACTION)))))},Vt=(n(765),function(){var e=$().obligations,t=Object(a.useMemo)((function(){return e.filter((function(e){return e.info.health<1}))}),[e]),n=Object(a.useMemo)((function(){return t.reduce((function(e,t){return e+t.info.collateralInQuote}),0)}),[t]),i=Object(a.useMemo)((function(){return t.length}),[t]),o=Object(a.useMemo)((function(){return t.length/e.length}),[t,e]),c=Object(a.useMemo)((function(){return t.reduce((function(e,t){return e.set(t.info.repayName,(e.get(t.info.collateralName)||0)+t.info.collateralInQuote),e}),new Map)}),[t]),l=Object(a.useMemo)((function(){return Object(v.a)(c.keys())}),[c]);return r.a.createElement("div",{className:"liquidate-container"},0===t.length?r.a.createElement("div",{className:"liquidate-info"},Te.b.LIQUIDATE_NO_LOANS):r.a.createElement("div",{className:"flexColumn"},r.a.createElement(Be.a,{gutter:Te.a},r.a.createElement(Me.a,{span:24},r.a.createElement(Le.a,null,r.a.createElement(Et.a,null,Te.b.LIQUIDATION_INFO)))),r.a.createElement(Be.a,{gutter:Te.a},r.a.createElement(Me.a,{xs:24,xl:5},r.a.createElement(Le.a,null,r.a.createElement(Ce.a,{title:"Value at risk",value:n,precision:2,valueStyle:{color:"#3f8600"},prefix:"$"}))),r.a.createElement(Me.a,{xs:24,xl:5},r.a.createElement(Le.a,null,r.a.createElement(Ce.a,{title:"Loans at risk",value:i,precision:0}))),r.a.createElement(Me.a,{xs:24,xl:5},r.a.createElement(Le.a,null,r.a.createElement(Ce.a,{title:"% loans at risk",value:100*o,precision:2,suffix:"%"}))),r.a.createElement(Me.a,{xs:24,xl:9},r.a.createElement(Le.a,null,r.a.createElement(Re,{title:"At risk loan composition",name:function(e){return e},getPct:function(e){return(c.get(e)||0)/n},items:l})))),r.a.createElement(Be.a,{gutter:Te.a},r.a.createElement(Me.a,{span:24},r.a.createElement(Le.a,{className:"card-fill"},r.a.createElement("div",{className:"liquidate-item liquidate-header"},r.a.createElement("div",null,Te.b.TABLE_TITLE_ASSET),r.a.createElement("div",null,Te.b.TABLE_TITLE_LOAN_BALANCE),r.a.createElement("div",null,Te.b.TABLE_TITLE_COLLATERAL_BALANCE),r.a.createElement("div",null,Te.b.TABLE_TITLE_APY),r.a.createElement("div",null,Te.b.TABLE_TITLE_LTV),r.a.createElement("div",null,Te.b.TABLE_TITLE_HEALTH),r.a.createElement("div",null,Te.b.TABLE_TITLE_ACTION)),t.map((function(e){return r.a.createElement(zt,{key:e.account.pubkey.toBase58(),item:e})})))))))}),Qt=n(290),Ht=n.n(Qt),Yt=(n(766),function(e){var t=Object(s.d)(),n=Object(u.c)().wallet,i=e.repayReserve,o=e.withdrawReserve,c=e.obligation,l=Object(a.useState)(!1),d=Object(y.a)(l,2),m=d[0],f=d[1],v=Object(a.useState)(!1),E=Object(y.a)(v,2),g=E[0],O=E[1],w=z(null===i||void 0===i?void 0:i.info.liquidityMint).accounts,j=Object(a.useCallback)((function(){o&&(f(!0),Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ut(t,n,w[0],Object(h.p)(c.info.borrowAmountWad).toNumber(),c.account,i,o);case 3:O(!0),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:return e.prev=8,f(!1),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[0,6,8,11]])})))())}),[o,w,c,i,n,t]);return r.a.createElement(Ht.a,{className:e.className,bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},g?r.a.createElement(ft,{onClose:function(){return O(!1)}}):r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},r.a.createElement("div",{className:"liquidate-input-title"},Te.b.SELECT_COLLATERAL),r.a.createElement(mt,{reserve:i.info,collateralReserve:null===o||void 0===o?void 0:o.pubkey.toBase58(),disabled:!0}),r.a.createElement(ve.a,{type:"primary",onClick:j,disabled:0===w.length,loading:m},Te.b.LIQUIDATE_ACTION),r.a.createElement(bt,null)))}),$t=(n(791),function(){var e=J(Object(l.h)().id),t=K(null===e||void 0===e?void 0:e.info.borrowReserve),n=K(null===e||void 0===e?void 0:e.info.collateralReserve);return e&&t?r.a.createElement("div",{className:"liquidate-reserve"},r.a.createElement("div",{className:"liquidate-reserve-container"},r.a.createElement(Yt,{className:"liquidate-reserve-item liquidate-reserve-item-left",obligation:e,withdrawReserve:n,repayReserve:t}),r.a.createElement(ht,{className:"liquidate-reserve-item liquidate-reserve-item-right",reserve:t,mode:nt.Deposit}))):null}),Jt=(n(792),function(e){var t=G(e.reserve.liquidityMint),n=_(e.reserve.liquidityMint.toBase58()).price,a=Object(W.g)(e.reserve),i=ae(e.address,!1,!1),o=i.totalInQuote,l=i.borrowingPower;return r.a.createElement(c.b,{to:"/margin/".concat(e.address.toBase58())},r.a.createElement("div",{className:"choose-margin-item"},r.a.createElement("span",{style:{display:"flex"}},r.a.createElement(qe,{mintAddress:e.reserve.liquidityMint}),t),r.a.createElement("div",null,"$",h.e.format(n)),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("em",null,h.e.format(l))," ",t),r.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.e.format(o)))),r.a.createElement("div",null,h.f.format(a)),r.a.createElement("div",null,r.a.createElement(ve.a,{type:"primary"},r.a.createElement("span",null,Te.b.MARGIN_TRADE_ACTION)))))}),Xt=function(){var e=U().reserveAccounts;return r.a.createElement("div",{className:"flexColumn"},r.a.createElement(Le.a,null,r.a.createElement("div",{className:"choose-margin-item choose-margin-header"},r.a.createElement("div",null,Te.b.TABLE_TITLE_ASSET),r.a.createElement("div",null,"Serum Dex Price"),r.a.createElement("div",null,Te.b.TABLE_TITLE_BUYING_POWER),r.a.createElement("div",null,Te.b.TABLE_TITLE_APY),r.a.createElement("div",null)),e.map((function(e){return r.a.createElement(Jt,{reserve:e.info,address:e.pubkey})}))))},Zt=(n(793),n(275));function en(e){var t,n,a,r,i=e.collateral.type,o=e.asset.type,c=e.collateral.value||0,l=e.asset.value||0,u=Object(x.c)([null===i||void 0===i||null===(t=i.info)||void 0===t||null===(n=t.liquidityMint)||void 0===n?void 0:n.toBase58(),null===o||void 0===o||null===(a=o.info)||void 0===a||null===(r=a.liquidityMint)||void 0===r?void 0:r.toBase58()]),s=ee().userDeposits.find((function(e){var t,n;return e.reserve.info.liquidityMint.toBase58()===(null===i||void 0===i||null===(t=i.info)||void 0===t||null===(n=t.liquidityMint)||void 0===n?void 0:n.toBase58())}));return{enrichedPools:C(u?[u]:[]),collateralDeposit:s,collType:i,desiredType:o,collValue:c,desiredValue:l,leverage:e.leverage,pool:u}}n(794);var tn=function(e){var t=e.showBalance,n=e.mintAddress,a=e.name,i=e.icon,o=Object(d.j)(n),c=Object(d.g)(n),l=0,u=!1;return t&&c&&o&&(u=(l=c.info.amount.toNumber()/Math.pow(10,o.decimals))>0),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{title:n,key:n,style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},i||r.a.createElement(qe,{mintAddress:n}),a),t?r.a.createElement("span",{title:l.toString(),key:n,className:"token-balance"},"\xa0 ",u?l<.001?"<0.001":l.toFixed(3):"-"):null))},nn=Se.a.Option;function an(e){var t,n,i,o,c,l=U().reserveAccounts,u=Object(s.e)().tokenMap,m=Object(a.useState)(),f=Object(y.a)(m,2),b=f[0],p=f[1],v=Object(a.useState)(0),E=Object(y.a)(v,2),g=E[0],O=E[1],w=Object(a.useState)(""),j=Object(y.a)(w,2),k=j[0],S=j[1],A=ee();Object(a.useEffect)((function(){var e=d.d.byParser(_e.LendingReserveParser).find((function(e){return e===b}))||"",t=d.d.get(e);if(t){var n=A.userDeposits.find((function(e){return e.reserve.info.liquidityMint.toBase58()===t.info.liquidityMint.toBase58()}));O(n?n.info.amount:0)}}),[b,A]);var T=d.d.get(e.reserve.lendingMarket);if(!T)return null;var x=!(null===(t=e.reserve)||void 0===t||null===(n=t.liquidityMint)||void 0===n?void 0:n.equals(null===T||void 0===T||null===(i=T.info)||void 0===i?void 0:i.quoteMint)),N=l.filter((function(t){return t.info!==e.reserve})).filter((function(e){return!x||e.info.liquidityMint.equals(T.info.quoteMint)})).map((function(e){var t=e.info.liquidityMint.toBase58(),n=e.pubkey.toBase58(),a=Object(h.l)(u,t);return r.a.createElement(nn,{key:n,value:n,name:a,title:n},r.a.createElement("div",{key:n,style:{display:"flex",alignItems:"center"}},r.a.createElement(qe,{mintAddress:t}),a))}));return r.a.createElement(Le.a,{className:"ccy-input",style:{borderRadius:20},bodyStyle:{padding:0}},r.a.createElement("div",{className:"ccy-input-header"},r.a.createElement("div",{className:"ccy-input-header-left"},e.title),!e.hideBalance&&r.a.createElement("div",{className:"ccy-input-header-right",onClick:function(t){return e.onInputChange&&e.onInputChange(g)}},"Balance: ",g.toFixed(6))),r.a.createElement("div",{className:"ccy-input-header",style:{padding:"0px 10px 5px 7px"}},r.a.createElement(Qe,{value:parseFloat(k||"0.00")===e.amount?k:null===(o=e.amount)||void 0===o||null===(c=o.toFixed(6))||void 0===c?void 0:c.toString(),onChange:function(t){e.onInputChange&&parseFloat(t)!==e.amount&&(t&&parseFloat(t)?e.onInputChange(parseFloat(t)):e.onInputChange(null)),S(t)},style:{fontSize:20,boxShadow:"none",borderColor:"transparent",outline:"transparent"},placeholder:"0.00"}),r.a.createElement("div",{className:"ccy-input-header-right",style:{display:"flex"}},e.showLeverageSelector&&r.a.createElement(Se.a,{size:"large",showSearch:!0,style:{width:80},placeholder:"CCY",value:e.leverage,onChange:function(t){e.onLeverage&&e.onLeverage(t)},notFoundContent:null,onSearch:function(t){e.onLeverage&&t.match(/^\d+$/)&&e.onLeverage(parseFloat(t))},filterOption:function(e,t){var n;return(null===t||void 0===t||null===(n=t.name)||void 0===n?void 0:n.toLowerCase().indexOf(e.toLowerCase()))>=0}},[1,2,3,4,5].map((function(e){return r.a.createElement(nn,{key:e,value:e,name:e+"x",title:e+"x"},r.a.createElement("div",{key:e,style:{display:"flex",alignItems:"center"}},e+"x"))}))),e.disabled?r.a.createElement(tn,{key:e.reserve.liquidityMint.toBase58(),name:Object(h.l)(u,e.reserve.liquidityMint.toBase58()),mintAddress:e.reserve.liquidityMint.toBase58(),showBalance:!1}):r.a.createElement(Se.a,{size:"large",showSearch:!0,style:{minWidth:150},placeholder:"CCY",value:b,onChange:function(t){e.onCollateralReserve&&e.onCollateralReserve(t),p(t)},filterOption:function(e,t){var n;return(null===t||void 0===t||null===(n=t.name)||void 0===n?void 0:n.toLowerCase().indexOf(e.toLowerCase()))>=0}},N))))}var rn=n(1108);function on(e){var t=e.newPosition,n=e.setNewPosition,a=e.collateralDeposit,r=e.enrichedPools;if(n(t),a&&r.length){var i=r[0].liquidityB/r[0].liquidityA,o=(t.collateral.value||0)*t.leverage*i;n(Object(k.a)(Object(k.a)({},t),{},{asset:Object(k.a)(Object(k.a)({},t.asset),{},{value:o})}))}}function cn(e){var t=e.lendingReserve,n=e.newPosition,i=e.setNewPosition,o=Object(a.useState)(!1),c=Object(y.a)(o,2),l=c[0],s=c[1],m=en(n),f=m.enrichedPools,b=m.collateralDeposit;!function(e){var t=e.newPosition,n=e.setNewPosition,r=en(t),i=r.enrichedPools,o=r.collateralDeposit,c=r.collType,l=r.desiredType,u=r.collValue,s=r.desiredValue,d=r.leverage;Object(a.useEffect)((function(){if(c)if(o){if(l&&t.asset.value&&i&&0!==i.length){var e=i[0].liquidityB/i[0].liquidityA,a=t.leverage,r=o.info.amount*e,d=s/a;if(d>r)n(Object(k.a)(Object(k.a)({},t),{},{error:Te.b.NOT_ENOUGH_MARGIN_MESSAGE}));else if(d>u)n(Object(k.a)(Object(k.a)({},t),{},{error:Te.b.SET_MORE_MARGIN_MESSAGE}));else{var m=i[0].liquidityA,f=i[0].liquidityB,b=m/f,p=(m-s/e)/(f+s),v=Math.abs(100-p/b*100);n(100/a<v&&1!==a?Object(k.a)(Object(k.a)({},t),{},{error:Te.b.LEVERAGE_LIMIT_MESSAGE}):Object(k.a)(Object(k.a)({},t),{},{error:""}))}}}else n(Object(k.a)(Object(k.a)({},t),{},{error:Te.b.NO_DEPOSIT_MESSAGE}));else n(Object(k.a)(Object(k.a)({},t),{},{error:Te.b.NO_COLL_TYPE_MESSAGE}))}),[c,l,s,d,i,u,o])}({newPosition:n,setNewPosition:i});var p=Object(u.c)(),v=p.wallet,E=p.connected;return r.a.createElement(Le.a,{className:"new-position-item new-position-item-top-left",bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},l?r.a.createElement(ft,{onClose:function(){return s(!1)}}):r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}},r.a.createElement(an,{title:"Collateral",reserve:t.info,amount:n.collateral.value,onInputChange:function(e){on({newPosition:Object(k.a)(Object(k.a)({},n),{},{collateral:Object(k.a)(Object(k.a)({},n.collateral),{},{value:e})}),setNewPosition:i,enrichedPools:f,collateralDeposit:b})},onCollateralReserve:function(e){var t=d.d.byParser(Zt.a).find((function(t){return t===e}))||"",a=d.d.get(t);on({newPosition:Object(k.a)(Object(k.a)({},n),{},{collateral:{value:n.collateral.value,type:a}}),setNewPosition:i,enrichedPools:f,collateralDeposit:b})},showLeverageSelector:!0,onLeverage:function(e){on({newPosition:Object(k.a)(Object(k.a)({},n),{},{leverage:e}),setNewPosition:i,enrichedPools:f,collateralDeposit:b})},leverage:n.leverage})),r.a.createElement(rn.a,null),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"stretch"}},n.asset.type&&r.a.createElement(an,{title:"Choose trade",reserve:n.asset.type.info,amount:n.asset.value,onInputChange:function(e){!function(e){var t=e.newPosition,n=e.setNewPosition,a=e.collateralDeposit,r=e.enrichedPools;if(n(t),a&&r.length){var i=r[0].liquidityB/r[0].liquidityA,o=(t.asset.value||0)/(i*t.leverage);n(Object(k.a)(Object(k.a)({},t),{},{collateral:Object(k.a)(Object(k.a)({},t.collateral),{},{value:o})}))}}({newPosition:Object(k.a)(Object(k.a)({},n),{},{asset:Object(k.a)(Object(k.a)({},n.asset),{},{value:e})}),setNewPosition:i,enrichedPools:f,collateralDeposit:b})},disabled:!0,hideBalance:!0}),r.a.createElement(ve.a,{className:"trade-button",type:"primary",size:"large",onClick:E?null:v.connect,style:{width:"100%"},disabled:E&&!!n.error},r.a.createElement("span",null,function(e,t){return e?t.error?t.error:Te.b.TRADING_ADD_POSITION:Te.b.CONNECT_LABEL}(E,n))))))}var ln=n(1094),un=n(1109),sn=n(240),dn=n(532),mn=n.n(dn),fn=[{x:0,y:65},{x:1,y:80},{x:2,y:60},{x:3,y:30},{x:4,y:20},{x:5,y:35},{x:6,y:25},{x:7,y:40},{x:8,y:36},{x:9,y:34},{x:10,y:50},{x:11,y:33},{x:12,y:37},{x:13,y:45},{x:14,y:35},{x:15,y:37},{x:16,y:50},{x:17,y:43},{x:18,y:50},{x:19,y:45},{x:20,y:55},{x:21,y:50},{x:22,y:45},{x:23,y:50},{x:24,y:45},{x:25,y:40},{x:26,y:35},{x:27,y:40},{x:28,y:37},{x:29,y:45},{x:30,y:50},{x:31,y:60},{x:32,y:55},{x:33,y:50},{x:34,y:53},{x:35,y:55},{x:36,y:50},{x:37,y:45},{x:38,y:40},{x:39,y:45},{x:40,y:50},{x:41,y:55},{x:42,y:65},{x:43,y:62},{x:44,y:54},{x:45,y:65},{x:46,y:48},{x:47,y:55},{x:48,y:60},{x:49,y:63},{x:50,y:65}];function bn(){var e=vn();return{datasets:[{backgroundColor:"transparent",borderColor:"rgb(39, 107, 251)",borderWidth:4,radius:0,data:JSON.parse(JSON.stringify(fn.slice(0,Math.floor(fn.length)/2+1)))},{backgroundColor:"transparent",borderWidth:4,radius:0,data:e,borderDash:[15,3],label:"LEVERAGE"},{backgroundColor:"transparent",borderColor:"rgb(86, 169, 255)",borderWidth:2,radius:0,data:e,borderDash:[8,4],label:"HOLD"}]}}var pn={},vn=function(){return JSON.parse(JSON.stringify(fn.slice(Math.floor(fn.length)/2)))};function yn(e){var t=e.item,n=e.priceChange,a=e.chart;if((null===a||void 0===a?void 0:a.data.datasets)&&!((null===a||void 0===a?void 0:a.data.datasets.length)<2)){pn.afterDraw=function(e){!function(e,t,n){var a;if(!e.config||!e.config.data||!e.config.data.datasets||!e.canvas)return;var r=e.ctx;if(!r)return;r.save(),r.font="normal normal bold 15px /1.5 Muli",r.textBaseline="bottom";var i=e.config.data.datasets,o=null===e||void 0===e||null===(a=e.canvas)||void 0===a?void 0:a.parentNode;i.forEach((function(a,i){var c=a.label;r.fillStyle=a.borderColor;var l,u=e.getDatasetMeta(i),s=u.data.length-1,d=Math.floor(s/2)-Math.floor(.2*s),m=u.data[d]._model.x,f=u.data[d]._model.y;(l="HOLD"===c?t*n>0?1.2*f:.8*f:t*n>0?.8*f:1.2*f)>o.offsetHeight&&(o.style.height="".concat(1.3*l,"px")),l<0&&(l=5),c&&r.fillText(c,m,l)})),r.restore()}(e,t.leverage,n)};var r=vn(),i=t.leverage,o=r.map((function(e,t){if(0===t)return{x:e.x,y:e.y};var a=n*i/100;return{x:e.x,y:e.y*(1+a)}}));a.data.datasets[1].data=o,a.data.datasets[1].borderColor=n>=0?"rgb(51, 223, 204)":"rgb(255,79,79)",r.forEach((function(e,t){0!==t&&(e.y+=e.y*n/100)})),a.data.datasets[2].data=r,null===a||void 0===a||a.update()}}function En(e){var t=e.item,n=e.priceChange,i=Object(a.useRef)(),o=Object(a.useRef)();return Object(a.useEffect)((function(){o.current&&!i.current&&(i.current=new mn.a(o.current,{type:"line",data:bn(),plugins:[pn],options:{responsive:!0,maintainAspectRatio:!0,scaleShowLabels:!1,layout:{padding:{top:30,bottom:80}},labels:{render:"title",fontColor:["green","white","red"],precision:2},animation:{easing:"easeOutExpo",duration:500},scales:{xAxes:[{display:!1,gridLines:{display:!1},type:"linear",position:"bottom"}],yAxes:[{display:!1,gridLines:{display:!1}}]},legend:{display:!1}}}))}),[]),Object(a.useEffect)((function(){i.current&&yn({item:t,priceChange:n,chart:i.current})}),[n,t]),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"center"}},r.a.createElement("canvas",{ref:o}),r.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}},r.a.createElement("span",null,"past"),r.a.createElement("span",null,"today"),r.a.createElement("span",null,"future")))}function gn(e){var t=e.item,n=en(t),i=n.enrichedPools,o=n.leverage,c=0===i.length?1:i[0].liquidityB/i[0].liquidityA,l=t.collateral.value||0,u=(t.collateral.value||0)*o-l,s=sn.find((function(e){var n,a,r;return e.mintAddress===(null===(n=t.asset.type)||void 0===n||null===(a=n.info)||void 0===a||null===(r=a.liquidityMint)||void 0===r?void 0:r.toBase58())})),d=sn.find((function(e){var n,a,r;return e.mintAddress===(null===(n=t.collateral.type)||void 0===n||null===(a=n.info)||void 0===a||null===(r=a.liquidityMint)||void 0===r?void 0:r.toBase58())})),m=Object(a.useState)(10),f=Object(y.a)(m,2),b=f[0],p=f[1],v=(l+u)*(b/100),E=null;if(v>0){var g=v+l+u;E=r.a.createElement(ln.a,{percent:l/g*100+u/g*100,success:{percent:u/g*100,strokeColor:"brown"},strokeColor:"blue",trailColor:"green",showInfo:!1})}else{var h=(l+=v)+u;E=l<0?r.a.createElement("p",null,"Your position has been liquidated at this price swing."):r.a.createElement(ln.a,{showInfo:!1,success:{percent:u/h*100,strokeColor:"brown"},trailColor:"blue"})}return r.a.createElement("div",{className:"new-position-item new-position-item-top-right"},r.a.createElement(Le.a,{className:"new-position-item new-position-item-top-right"},r.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center"}},r.a.createElement(Le.a,null,r.a.createElement(Ce.a,{title:"Borrowed",value:u*c,precision:2,valueStyle:{color:"brown"},suffix:null===s||void 0===s?void 0:s.tokenSymbol})),r.a.createElement(Le.a,null,r.a.createElement(Ce.a,{title:"My Collateral",value:l,precision:2,valueStyle:{color:"blue"},suffix:null===d||void 0===d?void 0:d.tokenSymbol})),r.a.createElement(Le.a,null,r.a.createElement(Ce.a,{title:"Profit/Loss",value:v*c,precision:2,valueStyle:{color:v>0?"green":"red"},suffix:null===s||void 0===s?void 0:s.tokenSymbol,prefix:v>0?r.a.createElement(un.a,null):r.a.createElement(rn.a,null)}))),r.a.createElement("br",null),E),r.a.createElement(Le.a,{className:"new-position-item new-position-item-bottom-right"},r.a.createElement(En,{item:t,priceChange:b}),r.a.createElement(Nt.a,{tooltipVisible:!0,defaultValue:10,tipFormatter:function(e){return r.a.createElement("span",null,e,"%")},max:100,min:-100,tooltipPlacement:"top",onChange:function(e){p(e)},style:{marginBottom:"20px"}})))}var hn=function(e){var t=e.pool,n=Object(a.useMemo)((function(){return[e.pool].filter((function(e){return e}))}),[e.pool]),i=C(n)[0],o=Object(D.a)().userAccounts,c=Object(d.j)(t.pubkeys.mint),l=o.filter((function(e){return t.pubkeys.mint.equals(e.info.mint)})).reduce((function(e,t){return t.info.amount.toNumber()+e}),0)/((null===c||void 0===c?void 0:c.supply.toNumber())||0);return i?r.a.createElement(Le.a,{className:"ccy-input",style:{borderRadius:20,width:"100%"},bodyStyle:{padding:"7px"},size:"small",title:"Prices and pool share"},r.a.createElement(Be.a,{style:{width:"100%"}},r.a.createElement(Me.a,{span:8},h.g.format(parseFloat(i.liquidityA)/parseFloat(i.liquidityB))),r.a.createElement(Me.a,{span:8},h.g.format(parseFloat(i.liquidityB)/parseFloat(i.liquidityA))),r.a.createElement(Me.a,{span:8},100*l<.001&&l>0?"<":"","\xa0",h.g.format(100*l),"%")),r.a.createElement(Be.a,{style:{width:"100%"}},r.a.createElement(Me.a,{span:8},i.names[0]," per ",i.names[1]),r.a.createElement(Me.a,{span:8},i.names[1]," per ",i.names[0]),r.a.createElement(Me.a,{span:8},"Share of pool"))):null},On=n(295),wn=n.n(On),jn=function(e){var t=e.pool,n=Object(a.useMemo)((function(){return t?[t]:[]}),[t]),i=C(n),o=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=o.current;return function(){var t=e&&wn.a.getInstanceByDom(e);t&&t.dispose()}}),[]),Object(a.useEffect)((function(){if(o.current&&0!==i.length){var e=wn.a.getInstanceByDom(o.current);e||(e=wn.a.init(o.current));var t=[{name:i[0].names[0],value:i[0].liquidityAinUsd,tokens:i[0].liquidityA},{name:i[0].names[1],value:i[0].liquidityBinUsd,tokens:i[0].liquidityB}];e.setOption({tooltip:{trigger:"item",formatter:function(e){var t=h.h.format(e.value),n=h.e.format(e.data.tokens);return"".concat(e.name,": \n").concat(t,"\n(").concat(n,")")}},series:[{name:"Liquidity",type:"pie",top:0,bottom:0,left:0,right:0,animation:!1,label:{fontSize:14,show:!0,formatter:function(e){var t=h.h.format(e.value),n=h.e.format(e.data.tokens);return"{c|".concat(e.name,"}\n{r|").concat(n,"}\n{r|").concat(t,"}")},rich:{c:{color:"black",lineHeight:22,align:"center"},r:{color:"black",align:"right"}},color:"rgba(255, 255, 255, 0.5)"},itemStyle:{normal:{borderColor:"#000"}},data:t}]})}}),[i]),0===i.length?null:r.a.createElement("div",{ref:o,style:{height:150,width:"100%"}})};function kn(e){var t=en(e.newPosition).pool;return r.a.createElement(Ht.a,{className:"new-position-item new-position-item-bottom-left"},!t&&r.a.createElement("span",null,"Choose a CCY to see exchange rate information."),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(hn,{pool:t}),r.a.createElement(jn,{pool:t})))}var Sn=function(){var e=K(Object(l.h)().id),t=Object(a.useState)({id:null,leverage:5,collateral:{},asset:{}}),n=Object(y.a)(t,2),i=n[0],o=n[1];return e?(i.asset.type||o(Object(k.a)(Object(k.a)({},i),{},{asset:{value:i.asset.value,type:e}})),r.a.createElement("div",{className:"new-position"},r.a.createElement("div",{className:"new-position-container"},r.a.createElement("div",{className:"new-position-item-left"},r.a.createElement(cn,{lendingReserve:e,newPosition:i,setNewPosition:o}),r.a.createElement(kn,{newPosition:i})),r.a.createElement(gn,{item:i})))):null};function An(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a,{basename:"/"},r.a.createElement(s.a,null,r.a.createElement(u.b,null,r.a.createElement(d.a,null,r.a.createElement(M,null,r.a.createElement(ie,null,r.a.createElement(Ie,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",component:function(){return r.a.createElement(We,null)}}),r.a.createElement(l.a,{exact:!0,path:"/dashboard",children:r.a.createElement(At,null)}),r.a.createElement(l.a,{path:"/reserve/:id",children:r.a.createElement(Wt,null)}),r.a.createElement(l.a,{exact:!0,path:"/deposit",component:function(){return r.a.createElement(xt,null)}}),r.a.createElement(l.a,{path:"/deposit/:id",children:r.a.createElement(Mt,null)}),r.a.createElement(l.a,{path:"/withdraw/:id",children:r.a.createElement(Ft,null)}),r.a.createElement(l.a,{exact:!0,path:"/borrow",children:r.a.createElement(Fe,null)}),r.a.createElement(l.a,{path:"/borrow/:id",children:r.a.createElement(Ot,null)}),r.a.createElement(l.a,{path:"/repay/loan/:obligation",children:r.a.createElement(Gt,null)}),r.a.createElement(l.a,{path:"/repay/:reserve",children:r.a.createElement(Gt,null)}),r.a.createElement(l.a,{exact:!0,path:"/liquidate",children:r.a.createElement(Vt,null)}),r.a.createElement(l.a,{path:"/liquidate/:id",children:r.a.createElement($t,null)}),r.a.createElement(l.a,{exact:!0,path:"/margin",children:r.a.createElement(Xt,null)}),r.a.createElement(l.a,{path:"/margin/:id",children:r.a.createElement(Sn,null)}),r.a.createElement(l.a,{exact:!0,path:"/faucet",children:r.a.createElement(Ut,null)}))))))))))}var Tn=function(){return r.a.createElement(An,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Tn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},11:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return T})),n.d(t,"c",(function(){return x})),n.d(t,"d",(function(){return I})),n.d(t,"h",(function(){return B})),n.d(t,"i",(function(){return M})),n.d(t,"e",(function(){return L})),n.d(t,"a",(function(){return P})),n.d(t,"k",(function(){return R})),n.d(t,"f",(function(){return W})),n.d(t,"j",(function(){return F})),n.d(t,"g",(function(){return U}));var a=n(196),r=n(21),i=n(241),o=n(29),c=n(13),l=n.n(c),u=n(23),s=n(0),d=n.n(s),m=n(26),f=n(63),b=n(18),p=n(31),v=n(12),y=n(285),E=n(93),g=n(120),h=n(22),O=d.a.createContext(null),w=new Map,j=new Map,k=new Map,S=new Map,A=function(){var t=Object(u.a)(l.a.mark((function t(n,a){var r,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getAccountInfo(a);case 2:if(null!==(r=t.sent)){t.next=5;break}throw new Error("Failed to find mint account");case 5:return i=e.from(r.data),t.abrupt("return",G(i));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),T=function(t,n){var a=e.from(n.data),r=G(a);return{pubkey:t,account:Object(o.a)({},n),info:r}},x=function(t,n){var a=e.from(n.data),r=K(a);return{pubkey:t,account:Object(o.a)({},n),info:r}},N=new Map,I={emitter:new y.a,query:function(){var e=Object(u.a)(l.a.mark((function e(t,n,a){var r,i,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="string"===typeof n?new b.d(n):n,i=r.toBase58(),!(o=j.get(i))){e.next=5;break}return e.abrupt("return",o);case 5:if(!(c=w.get(i))){e.next=8;break}return e.abrupt("return",c);case 8:return c=t.getAccountInfo(r).then((function(e){if(!e)throw new Error("Account not found");return I.add(r,e,a)})),w.set(i,c),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),add:function(e,t,n){var a="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),r=n||N.get(a);if(!r)throw new Error("Deserializer needs to be registered or passed as a parameter");I.registerParser(e,r),w.delete(a);var i=r(new b.d(a),t);if(i){var o=!j.has(a);return j.set(a,i),I.emitter.raiseCacheUpdated(a,o,r),i}},get:function(e){var t;return t="string"!==typeof e?e.toBase58():e,j.get(t)},delete:function(e){var t;return t="string"!==typeof e?e.toBase58():e,!!j.get(t)&&(j.delete(t),I.emitter.raiseCacheDeleted(t),!0)},byParser:function(e){var t,n=[],a=Object(i.a)(N.keys());try{for(a.s();!(t=a.n()).done;){var r=t.value;N.get(r)===e&&n.push(r)}}catch(o){a.e(o)}finally{a.f()}return n},registerParser:function(e,t){if(e){var n="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();N.set(n,t)}return e},queryMint:function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a,r,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="string"===typeof n?new b.d(n):n,r=a.toBase58(),!(i=S.get(r))){e.next=5;break}return e.abrupt("return",i);case 5:if(!(o=k.get(r))){e.next=8;break}return e.abrupt("return",o);case 8:return o=A(t,a).then((function(e){return k.delete(r),S.set(r,e),e})),k.set(r,o),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getMint:function(e){var t;return t="string"!==typeof e?e.toBase58():e,S.get(t)},addMint:function(e,t){var n=G(t.data),a=e.toBase58();return S.set(a,n),n}},B=function(){return Object(s.useContext)(O)};function M(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(s.useContext)(O),n=t.pools,a=Object(s.useMemo)((function(){return n.filter((function(t){return t.legacy===e}))}),[n,e]);return{pools:a}}var L=function(e){var t,n=Object(i.a)(j.values());try{for(n.s();!(t=n.n()).done;){var a=t.value;if(e(a))return a}}catch(r){n.e(r)}finally{n.f()}},C=function(){var e=Object(m.d)(),t=Object(f.c)().wallet,n=Object(s.useState)(),a=Object(r.a)(n,2),i=a[0],o=a[1],c=Object(s.useCallback)((function(e){var n=function(e,t){if(t)return{pubkey:e,account:t,info:{mint:h.e,owner:e,amount:new p.d(t.lamports),delegate:null,delegatedAmount:new p.d(0),isInitialized:!0,isFrozen:!1,isNative:!0,rentExemptReserve:null,closeAuthority:null}}}(t.publicKey,e);if(void 0!==n&&t){var a,r=null===(a=t.publicKey)||void 0===a?void 0:a.toBase58();I.registerParser(r,x),j.set(r,n),I.emitter.raiseCacheUpdated(r,!1,x)}}),[t]);return Object(s.useEffect)((function(){e&&(null===t||void 0===t?void 0:t.publicKey)&&(e.getAccountInfo(t.publicKey).then((function(e){e&&(c(e),o(e))})),e.onAccountChange(t.publicKey,(function(e){e&&(c(e),o(e))})))}),[o,t,t.publicKey,e,c]),{nativeAccount:i}},_=new Set,q=function(){var e=Object(u.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return _.add(n.toBase58()),e.next=5,t.getTokenAccountsByOwner(n,{programId:Object(h.f)().token});case 5:e.sent.value.forEach((function(e){I.add(e.pubkey.toBase58(),e.account,x)}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function P(e){var t=e.children,n=void 0===t?null:t,a=Object(m.d)(),i=Object(f.c)(),o=i.wallet,c=i.connected,l=Object(s.useState)([]),u=Object(r.a)(l,2),v=u[0],y=u[1],E=Object(s.useState)([]),w=Object(r.a)(E,2),j=w[0],k=w[1],S=C().nativeAccount,A=Object(g.d)().pools,T=Object(s.useCallback)((function(){return I.byParser(x).map((function(e){return I.get(e)})).filter((function(e){var t;return e&&e.info.owner.toBase58()===(null===(t=o.publicKey)||void 0===t?void 0:t.toBase58())})).map((function(e){return e}))}),[o]);Object(s.useEffect)((function(){var e=T().filter((function(e){return void 0!==e}));k(e)}),[S,o,v,T]),Object(s.useEffect)((function(){var e=[];return I.emitter.onCache((function(e){if(e.isNew){var t=e.id,n=e.parser;a.onAccountChange(new b.d(t),(function(e){I.add(t,e,n)}))}})),function(){e.forEach((function(e){return a.removeAccountChangeListener(e)}))}}),[a]);var N=null===o||void 0===o?void 0:o.publicKey;return Object(s.useEffect)((function(){if(a&&N){q(a,N).then((function(){y(T())}));var e=a.onProgramAccountChange(Object(h.f)().token,(function(e){var t=e.accountId;if(e.accountInfo.data.length===p.a.span){var n=K(e.accountInfo.data);_.has(n.owner.toBase58())&&(I.add(t,e.accountInfo,x),y(T()))}}),"singleGossip");return function(){a.removeProgramAccountChangeListener(e)}}y([])}),[a,c,N,T]),d.a.createElement(O.Provider,{value:{userAccounts:j,pools:A,nativeAccount:S}},n)}function R(){return{account:Object(s.useContext)(O).nativeAccount}}var W=function(){var t=Object(u.a)(l.a.mark((function t(n,r,i){var c,u;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(Object(v.b)(r,99).map((function(e){return D(n,e,i)})));case 2:return c=t.sent,u=c.map((function(t){return t.array.map((function(t){if(t){var n=t.data,r=Object(a.a)(t,["data"]);return Object(o.a)(Object(o.a)({},r),{},{data:e.from(n[0],"base64")})}})).filter((function(e){return e}))})).flat(),t.abrupt("return",{keys:r,array:u});case 5:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),D=function(){var e=Object(u.a)(l.a.mark((function e(t,n,a){var r,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._buildArgs([n],a,"base64"),e.next=3,t._rpcRequest("getMultipleAccounts",r);case 3:if(!(i=e.sent).error){e.next=6;break}throw new Error("failed to get info about account "+i.error.message);case 6:if(!i.result.value){e.next=9;break}return o=i.result.value,e.abrupt("return",{keys:n,array:o});case 9:throw new Error;case 10:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();function F(e){var t=Object(m.d)(),n=Object(s.useState)(),a=Object(r.a)(n,2),i=a[0],o=a[1],c="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();return Object(s.useEffect)((function(){if(c){I.query(t,c,T).then((function(e){return o(e.info)})).catch((function(e){return console.log(e)}));var e=I.emitter.onCache((function(e){e.id===c&&I.query(t,c,T).then((function(e){return o(e.info)}))}));return function(){e()}}}),[t,c]),i}var U=function(e){var t=Object(E.a)().userAccounts,n=t.findIndex((function(t){return t.info.mint.toBase58()===e}));if(-1!==n)return t[n]};var K=function(e){var t=p.a.decode(e);return t.mint=new b.d(t.mint),t.owner=new b.d(t.owner),t.amount=p.d.fromBuffer(t.amount),0===t.delegateOption?(t.delegate=null,t.delegatedAmount=new p.d(0)):(t.delegate=new b.d(t.delegate),t.delegatedAmount=p.d.fromBuffer(t.delegatedAmount)),t.isInitialized=0!==t.state,t.isFrozen=2===t.state,1===t.isNativeOption?(t.rentExemptReserve=p.d.fromBuffer(t.isNative),t.isNative=!0):(t.rentExemptReserve=null,t.isNative=!1),0===t.closeAuthorityOption?t.closeAuthority=null:t.closeAuthority=new b.d(t.closeAuthority),t},G=function(e){if(e.length!==p.b.span)throw new Error("Not a valid Mint");var t=p.b.decode(e);return 0===t.mintAuthorityOption?t.mintAuthority=null:t.mintAuthority=new b.d(t.mintAuthority),t.supply=p.d.fromBuffer(t.supply),t.isInitialized=0!==t.isInitialized,0===t.freezeAuthorityOption?t.freezeAuthority=null:t.freezeAuthority=new b.d(t.freezeAuthority),t}}).call(this,n(58).Buffer)},12:function(e,t,n){"use strict";n.d(t,"g",(function(){return l})),n.d(t,"o",(function(){return u})),n.d(t,"m",(function(){return s})),n.d(t,"l",(function(){return d})),n.d(t,"k",(function(){return m})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return b})),n.d(t,"n",(function(){return p})),n.d(t,"p",(function(){return v})),n.d(t,"i",(function(){return y})),n.d(t,"d",(function(){return h})),n.d(t,"h",(function(){return O})),n.d(t,"e",(function(){return j})),n.d(t,"f",(function(){return k})),n.d(t,"c",(function(){return S})),n.d(t,"j",(function(){return A}));var a=n(21),r=n(0),i=n(44),o=n.n(i),c=n(15),l=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:8});function u(e,t){var n=Object(r.useState)((function(){var n=localStorage.getItem(e);return n?JSON.parse(n):t})),i=Object(a.a)(n,2),o=i[0],c=i[1],l=Object(r.useCallback)((function(t){o!==t&&(c(t),null===t?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(t)))}),[o,e]);return[o,l]}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return"".concat(e.slice(0,t),"...").concat(e.slice(-t))}function d(e,t){var n,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r="string"===typeof t?t:null===t||void 0===t?void 0:t.toBase58();if(!r)return"N/A";var i=null===(n=e.get(r))||void 0===n?void 0:n.tokenSymbol;return i||(a?"".concat(r.substring(0,5),"..."):r)}function m(e,t){var n,a="string"===typeof t?t:null===t||void 0===t?void 0:t.toBase58();if(a)return null===(n=e.get(a))||void 0===n?void 0:n.icon}var f=new Set(["USDC","wUSDC","USDT"]);function b(e,t){return Array.apply(0,new Array(Math.ceil(e.length/t))).map((function(n,a){return e.slice(a*t,(a+1)*t)}))}function p(e,t){var n;if(!e)return 0;var a="number"===typeof e?e:null===(n=e.info.amount)||void 0===n?void 0:n.toNumber(),r=Math.pow(10,(null===t||void 0===t?void 0:t.decimals)||0);return Math.floor(a*r)}function v(e){return(null===e||void 0===e?void 0:e.div(c.c))||c.d}function y(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!e)return 0;var a=Math.floor("number"===typeof e?e:o.a.isBN(e)?e.toNumber():e.info.amount.toNumber()),r=Math.pow(10,(null===t||void 0===t?void 0:t.decimals)||0);return a/r*n}var E=["","k","M","G","T","P","E"],g=function(e,t){var n=Math.log10(e)/3|0,a=e,r=E[n];0!==n&&(a=e/Math.pow(10,3*n));return a.toFixed(t)+r},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?g(e,t):e.toFixed(t)};var O=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),w=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),j={format:function(e){return e?w.format(e):"--"}},k=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2});function S(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!e)return 0;var r="number"===typeof e?e:null===(n=e.info.amount)||void 0===n?void 0:n.toNumber(),i=Math.pow(10,(null===t||void 0===t?void 0:t.decimals)||0),o=r/i*a;return o}function A(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=t.pubkeys.holdingMints.map((function(e){return e.toBase58()})).sort();return a.map((function(t){return d(e,t,n)})).join("/")}},120:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return y})),n.d(t,"d",(function(){return h})),n.d(t,"c",(function(){return O}));var a,r=n(30),i=n(21),o=n(13),c=n.n(o),l=n(23),u=n(18),s=n(0),d=n(31),m=(n(48),n(22)),f=n(46),b=n(26),p=n(11),v=(n(93),.003),y=5e-4,E=function(e,t){return t.map((function(t){return p.d.query(e,new u.d(t))}))},g=function(e,t){return{pubkeys:{account:e.pubkey,program:t,mint:e.data.tokenPool,holdingMints:[],holdingAccounts:[e.data.tokenAccountA,e.data.tokenAccountB]},legacy:!1,raw:e}},h=function(){var e=Object(b.d)(),t=Object(s.useState)([]),n=Object(i.a)(t,2),a=n[0],o=n[1];return Object(s.useEffect)((function(){o([]);var t=function(){var t=Object(l.a)(c.a.mark((function t(n){var a,i,o,s=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=s.length>1&&void 0!==s[1]&&s[1],i=[],t.next=4,e.getProgramAccounts(n);case 4:return t.sent.filter((function(e){return e.account.data.length===f.TokenSwapLayout.span||e.account.data.length===f.TokenSwapLayoutV1.span||e.account.data.length===f.TokenSwapLayoutLegacyV0.span})).map((function(t){var r={data:void 0,account:t.account,pubkey:t.pubkey,init:function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},o=t.account.data.length===f.TokenSwapLayout.span?f.TokenSwapLayout:t.account.data.length===f.TokenSwapLayoutV1.span?f.TokenSwapLayoutV1:f.TokenSwapLayoutLegacyV0;if(o===f.TokenSwapLayoutLegacyV0){r.data=o.decode(t.account.data);var u=g(r,n);u.legacy=a,i.push(u),r.init=Object(l.a)(c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all(E(e,[r.data.tokenAccountA,r.data.tokenAccountB]));case 3:n=t.sent,u.pubkeys.holdingMints=[n[0].info.mint,n[1].info.mint],t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))}else{r.data=o.decode(t.account.data);var s=g(r,n);s.legacy=a,s.pubkeys.feeAccount=r.data.feeAccount,s.pubkeys.holdingMints=[r.data.mintA,r.data.mintB],i.push(s)}return r})),o=i.map((function(e){var t;return[].concat(Object(r.a)(e.pubkeys.holdingAccounts.map((function(e){return e.toBase58()}))),Object(r.a)(e.pubkeys.holdingMints.map((function(e){return e.toBase58()}))),[null===(t=e.pubkeys.feeAccount)||void 0===t?void 0:t.toBase58(),e.pubkeys.mint.toBase58()]).filter((function(e){return e}))})).flat(),t.next=8,Object(p.f)(e,o,"single").then((function(e){var t=e.keys;return e.array.map((function(e,n){var a=t[n];return e.data.length===d.a.span?p.d.add(a,e,p.c):e.data.length!==d.b.span||p.d.getMint(a)?e:p.d.addMint(new u.d(a),e)}))}));case 8:return t.abrupt("return",i);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Promise.all([t(Object(m.f)().swap)].concat(Object(r.a)(Object(m.f)().swap_legacy.map((function(e){return t(e,!0)}))))).then((function(e){o(e.flat())}))}),[e]),Object(s.useEffect)((function(){var t=e.onProgramAccountChange(Object(m.f)().swap,function(){var e=Object(l.a)(c.a.mark((function e(t){var n,i,l,s,d,f;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.accountId,t.accountInfo.data.length===Object(m.f)().swapLayout.span&&(i=t.accountInfo,l={data:Object(m.f)().swapLayout.decode(i.data),account:i,pubkey:new u.d(n)},(s=a&&a.findIndex((function(e){return e.pubkeys.account.toBase58()===n})))&&s>=0&&a?(d=a.filter((function(e,t){return t!==s})),o([].concat(Object(r.a)(d),[g(l,Object(m.f)().swap)]))):((f=g(l,Object(m.f)().swap)).pubkeys.feeAccount=l.data.feeAccount,f.pubkeys.holdingMints=[l.data.mintA,l.data.mintB],o([].concat(Object(r.a)(a),[f]))));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"singleGossip");return function(){e.removeProgramAccountChangeListener(t)}}),[e,a]),{pools:a}},O=function(e){var t=Object(b.d)(),n=Object(p.i)().pools,a=Object(s.useState)(),o=Object(i.a)(a,2),u=o[0],d=o[1],m=Object(s.useMemo)((function(){return Object(r.a)(e).sort()}),Object(r.a)(e));return Object(s.useEffect)((function(){Object(l.a)(c.a.mark((function e(){var a,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(void 0),a=n.filter((function(e){return!e.legacy})).filter((function(e){return e.pubkeys.holdingMints.map((function(e){return e.toBase58()})).sort().every((function(e,t){return e===m[t]}))})),r=0;case 3:if(!(r<a.length)){e.next=14;break}return i=a[r],e.next=7,p.d.query(t,i.pubkeys.holdingAccounts[0]);case 7:if(e.sent.info.amount.eqn(0)){e.next=11;break}return d(i),e.abrupt("return");case 11:r++,e.next=3;break;case 14:case"end":return e.stop()}}),e)})))()}),[t,m,n]),u};!function(e){e[e.Add=0]="Add",e[e.SwapGivenInput=1]="SwapGivenInput",e[e.SwapGivenProceeds=2]="SwapGivenProceeds"}(a||(a={}))},15:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"a",(function(){return s}));var a={CONNECT_LABEL:"Connect Wallet",BORROWING_POWER_USED:"Borrowing Power Used",BORROWING_POWER_VALUE:"Borrowing Power",BORROWED_VALUE:"You borrowed",GIVE_SOL:"Give me SOL",LIQUIDATION_INFO:"This view displays all loans that can be liquidated. A liquidation is a process where borrower collateral does not cover value of the loan. It is represented by health factor falling below 1.0. When a loan is liquidated, an liquidator can purchase collateral at a discount by repaing the portio of the loan. ",FAUCET_INFO:"This faucet will help you fund your accounts outside of Solana main network.",ACCOUNT_FUNDED:"Account funded.",REPAY_QUESTION:"How much would you like to repay?",REPAY_ACTION:"Repay",RESERVE_STATUS_TITLE:"Reserve Status & Configuration",AUDIT_WARNING:"Oyster is an unaudited software project used for internal purposes at the Solana Foundation. This app is not for public use.",FOOTER:'This page was produced by the Solana Foundation ("SF") for internal educational and inspiration purposes only. SF does not encourage, induce or sanction the deployment, integration or use of Oyster or any similar application (including its code) in violation of applicable laws or regulations and hereby prohibits any such deployment, integration or use. Anyone using this code or a derivation thereof must comply with applicable laws and regulations when releasing related software.',MENU_HOME:"Home",MENU_DASHBOARD:"Dashboard",DASHBOARD_INFO:"Connect to a wallet to view your deposits/loans.",NO_LOANS_NO_DEPOSITS:"No loans or deposits.",MENU_DEPOSIT:"Deposit",MENU_BORROW:"Borrow",MENU_LIQUIDATE:"Liquidate",MENU_FAUCET:"Faucet",MARGIN_TRADING:"Margin Trading",APP_TITLE:"Oyster Lending",CONNECT_BUTTON:"Connect",WALLET_TOOLTIP:"Wallet public key",SETTINGS_TOOLTIP:"Settings",SELECT_COLLATERAL:"Select collateral",COLLATERAL:"Collateral",BORROW_QUESTION:"How much would you like to borrow?",BORROW_ACTION:"Borrow",NO_DEPOSITS:"No collateral",LIQUIDATE_ACTION:"Liquidate",LIQUIDATE_NO_LOANS:"There are no loans to liquidate.",TABLE_TITLE_ASSET:"Asset",TABLE_TITLE_YOUR_LOAN_BALANCE:"Loan balance",TABLE_TITLE_LOAN_BALANCE:"Loan balance",TABLE_TITLE_COLLATERAL_BALANCE:"Collateral",TABLE_TITLE_DEPOSIT_BALANCE:"Your deposits",TABLE_TITLE_APY:"APY",TABLE_TITLE_LTV:"LTV",TABLE_TITLE_HEALTH:"Health Factor",TABLE_TITLE_BORROW_APY:"Borrow APY",TABLE_TITLE_DEPOSIT_APY:"Deposit APY",TABLE_TITLE_TOTAL_BORROWED:"Total Borrowed",TABLE_TITLE_MARKET_SIZE:"Market Size",TABLE_TITLE_ACTION:"Action",TABLE_TITLE_MAX_BORROW:"Available for you",DASHBOARD_TITLE_LOANS:"Loans",DASHBOARD_TITLE_DEPOSITS:"Deposits",DEPOSIT_QUESTION:"How much would you like to deposit?",WITHDRAW_ACTION:"Withdraw",WITHDRAW_QUESTION:"How much would you like to withdraw?",DASHBOARD_ACTION:"Go to dashboard",GO_BACK_ACTION:"Go back",DEPOSIT_ACTION:"Deposit",TOTAL_TITLE:"Total",TRADING_TABLE_TITLE_MY_COLLATERAL:"Chosen Collateral",TRADING_TABLE_TITLE_DESIRED_ASSET:"Desired Asset",TRADING_TABLE_TITLE_MULTIPLIER:"Leverage",TRADING_TABLE_TITLE_ASSET_PRICE:"Asset Price",TRADING_TABLE_TITLE_LIQUIDATION_PRICE:"Liquidation Price",TRADING_TABLE_TITLE_APY:"APY",TRADING_TABLE_TITLE_ACTIONS:"Action",TRADING_ADD_POSITION:"Add Position",MARGIN_TRADE_ACTION:"Margin Trade",MARGIN_TRADE_CHOOSE_COLLATERAL_AND_LEVERAGE:"Please choose your collateral and leverage.",MARGIN_TRADE_QUESTION:"Please choose how much of this asset you wish to purchase.",TABLE_TITLE_BUYING_POWER:"Total Buying Power",NOT_ENOUGH_MARGIN_MESSAGE:"Not enough buying power in oyster to make this trade at this leverage.",SET_MORE_MARGIN_MESSAGE:"You need more margin to match this leverage amount to make this trade.",LEVERAGE_LIMIT_MESSAGE:"You will need more margin to make this trade.",NO_DEPOSIT_MESSAGE:"You need to deposit coin of this type into oyster before trading with it on margin.",NO_COLL_TYPE_MESSAGE:"Choose Collateral CCY"},r=n(44),i=n.n(r),o=new i.a(10),c=o.pow(new i.a(18)),l=(o.pow(new i.a(27)),new i.a(0)),u={0:"0%",25:"25%",50:"50%",75:"75%",100:"100%"},s=[16,{xs:8,sm:16,md:16,lg:16}]},22:function(e,t,n){"use strict";n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return m})),n.d(t,"g",(function(){return b})),n.d(t,"f",(function(){return p}));var a,r,i,o=n(18),c=n(46),l=new o.d("So11111111111111111111111111111111111111112"),u=new o.d("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),s=new o.d("TokenLend1ng1111111111111111111111111111111"),d=new o.d("HfoTxFR1Tm6kGmWgYWD6J7YHVy1UwqSULUGVLXkJqaKN"),m=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SWAP_HOST_FEE_ADDRESS?new o.d("".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SWAP_HOST_FEE_ADDRESS)):d;console.debug("Host address: ".concat(null===m||void 0===m?void 0:m.toBase58())),console.debug("Owner address: ".concat(null===d||void 0===d?void 0:d.toBase58()));var f=[{name:"mainnet-beta",swap:function(){return{current:{pubkey:new o.d("9qvG1zUp8xF1Bi4m6UdRNby1BAAuaDrUxSpv4CmRRMjL"),layout:c.TokenSwapLayoutV1},legacy:[]}}},{name:"testnet",swap:function(){return{current:{pubkey:new o.d("2n2dsFSgmPcZ8jkmBZLGUM2nzuFqcBGQ3JEEj6RJJcEg"),layout:c.TokenSwapLayoutV1},legacy:[]}}},{name:"devnet",swap:function(){return{current:{pubkey:new o.d("6Cust2JhvweKLh4CVo1dt21s2PJ86uNGkziudpkNPaCj"),layout:c.TokenSwapLayout},legacy:[new o.d("BSfTAcBdqmvX5iE2PW88WFNNp2DHhLUaBKk5WrnxVkcJ")]}}},{name:"localnet",swap:function(){return{current:{pubkey:new o.d("369YmCWHGxznT7GGBhcLZDRcRoGWmGKFWdmtiPy78yj7"),layout:c.TokenSwapLayoutV1},legacy:[]}}}],b=function(e){var t=f.find((function(t){return t.name===e}));if(t){var n=t.swap();a=n.current.pubkey,i=n.current.layout,r=n.legacy,"mainnet-beta"===e&&(s=new o.d("2KfJP7pZ6QSpXa26RmsN6kKVQteDEdQmizLSvuyryeiW"))}},p=function(){return{token:u,swap:a,swapLayout:i,swap_legacy:r,lending:s}}},233:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a;!function(e){e[e.ConstantProduct=0]="ConstantProduct",e[e.ConstantPrice=1]="ConstantPrice",e[e.Stable=2]="Stable",e[e.ConstantProductWithOffset=3]="ConstantProductWithOffset"}(a||(a={}))},240:function(e){e.exports=JSON.parse('[{"tokenSymbol":"SOL","mintAddress":"So11111111111111111111111111111111111111112","tokenName":"Solana","icon":"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/solana/info/logo.png"},{"tokenSymbol":"USDC","mintAddress":"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v","tokenName":"USDC","icon":"https://raw.githubusercontent.com/trustwallet/assets/f3ffd0b9ae2165336279ce2f8db1981a55ce30f8/blockchains/ethereum/assets/0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48/logo.png"},{"tokenSymbol":"SRM","mintAddress":"SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt","tokenName":"SRM","icon":"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x476c5E26a75bd202a9683ffD34359C0CC15be0fF/logo.png"}]')},25:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return s}));var a=n(30),r=n(18),i=n(44),o=n.n(i),c=n(1),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"publicKey",t=c.blob(32,e),n=t.decode.bind(t),a=t.encode.bind(t);return t.decode=function(e,t){var a=n(e,t);return new r.d(a)},t.encode=function(e,t,n){return a(e.toBuffer(),t,n)},t},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uint64",n=c.blob(8,t),r=n.decode.bind(n),i=n.encode.bind(n);return n.decode=function(e,t){var n=r(e,t);return new o.a(Object(a.a)(n).reverse().map((function(e){return"00".concat(e.toString(16)).slice(-2)})).join(""),16)},n.encode=function(t,n,a){var r=t.toArray().reverse(),o=e.from(r);if(8!==o.length){var c=e.alloc(8);o.copy(c),o=c}return i(o,n,a)},n},s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uint128",n=c.blob(16,t),r=n.decode.bind(n),i=n.encode.bind(n);return n.decode=function(e,t){var n=r(e,t);return new o.a(Object(a.a)(n).reverse().map((function(e){return"00".concat(e.toString(16)).slice(-2)})).join(""),16)},n.encode=function(t,n,a){var r=t.toArray().reverse(),o=e.from(r);if(16!==o.length){var c=e.alloc(16);o.copy(c),o=c}return i(o,n,a)},n}}).call(this,n(58).Buffer)},26:function(e,t,n){"use strict";n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return h})),n.d(t,"d",(function(){return O})),n.d(t,"e",(function(){return w})),n.d(t,"c",(function(){return k}));var a=n(13),r=n.n(a),i=n(23),o=n(30),c=n(21),l=n(12),u=n(18),s=n(0),d=n.n(s),m=n(48),f=n(1095),b=function(e){var t,n,a=e.type,r=e.code,i="string"===typeof e.address?e.address:null===(t=e.address)||void 0===t?void 0:t.toBase58();if(!i)return null;var o=null!==(n=e.length)&&void 0!==n?n:9;return d.a.createElement("a",{href:"https://explorer.solana.com/".concat(a,"/").concat(i),target:"_blank",title:i,style:e.style},r?d.a.createElement(f.a.Text,{style:e.style,code:!0},Object(l.m)(i,o)):Object(l.m)(i,o))},p=n(240),v=n(22),y=[{name:"mainnet-beta",endpoint:"https://solana-api.projectserum.com/"},{name:"lending",endpoint:"https://tln.solana.com"},{name:"testnet",endpoint:Object(u.j)("testnet")},{name:"devnet",endpoint:Object(u.j)("devnet")},{name:"localnet",endpoint:"http://127.0.0.1:8899"}],E=y[0].endpoint,g=d.a.createContext({endpoint:E,setEndpoint:function(){},slippage:.25,setSlippage:function(e){},connection:new u.b(E,"recent"),sendConnection:new u.b(E,"recent"),env:y[0].name,tokens:[],tokenMap:new Map});function h(e){var t,n=e.children,a=void 0===n?void 0:n,r=Object(l.o)("connectionEndpts",y[0].endpoint),i=Object(c.a)(r,2),m=i[0],f=i[1],b=Object(l.o)("slippage",.25.toString()),E=Object(c.a)(b,2),h=E[0],O=E[1],w=Object(s.useMemo)((function(){return new u.b(m,"recent")}),[m]),j=Object(s.useMemo)((function(){return new u.b(m,"recent")}),[m]),k=(null===(t=y.find((function(e){return e.endpoint===m})))||void 0===t?void 0:t.name)||y[0].name,S=Object(s.useState)([]),A=Object(c.a)(S,2),T=A[0],x=A[1],N=Object(s.useState)(new Map),I=Object(c.a)(N,2),B=I[0],M=I[1];return Object(s.useEffect)((function(){window.fetch("https://raw.githubusercontent.com/solana-labs/token-list/main/src/tokens/".concat(k,".json")).then((function(e){return e.json()})).catch((function(e){return[]})).then((function(e){var t=[].concat(Object(o.a)(p),Object(o.a)(e)).reduce((function(e,t){return e.set(t.mintAddress,t),e}),new Map);M(t),x(e)}))}),[k]),Object(v.g)(k),Object(s.useEffect)((function(){var e=w.onAccountChange((new u.a).publicKey,(function(){}));return function(){w.removeAccountChangeListener(e)}}),[w]),Object(s.useEffect)((function(){var e=w.onSlotChange((function(){return null}));return function(){w.removeSlotChangeListener(e)}}),[w]),Object(s.useEffect)((function(){var e=j.onAccountChange((new u.a).publicKey,(function(){}));return function(){j.removeAccountChangeListener(e)}}),[j]),Object(s.useEffect)((function(){var e=j.onSlotChange((function(){return null}));return function(){j.removeSlotChangeListener(e)}}),[j]),d.a.createElement(g.Provider,{value:{endpoint:m,setEndpoint:f,slippage:parseFloat(h),setSlippage:function(e){return O(e.toString())},connection:w,sendConnection:j,tokens:T,tokenMap:B,env:k}},a)}function O(){return Object(s.useContext)(g).connection}function w(){var e=Object(s.useContext)(g);return{endpoint:e.endpoint,setEndpoint:e.setEndpoint,env:e.env,tokens:e.tokens,tokenMap:e.tokenMap}}var j=function(){var e=Object(i.a)(r.a.mark((function e(t,n){var a,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.confirmTransaction(n,"max");case 2:return e.next=4,t.getParsedConfirmedTransaction(n);case 4:return a=e.sent,i=[],(null===a||void 0===a?void 0:a.meta)&&a.meta.logMessages&&a.meta.logMessages.forEach((function(e){for(var t,n=/Error: (.*)/gm;null!==(t=n.exec(e));)t.index===n.lastIndex&&n.lastIndex++,t.length>1&&i.push(t[1])})),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(i.a)(r.a.mark((function e(t,n,a,i){var c,l,s,f,p,v,y,E,g,h=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=!(h.length>4&&void 0!==h[4])||h[4],s=new u.h,a.forEach((function(e){return s.add(e)})),e.next=5,t.getRecentBlockhash("max");case 5:return s.recentBlockhash=e.sent.blockhash,(c=s).setSigners.apply(c,[n.publicKey].concat(Object(o.a)(i.map((function(e){return e.publicKey}))))),i.length>0&&(f=s).partialSign.apply(f,Object(o.a)(i)),e.next=10,n.signTransaction(s);case 10:return s=e.sent,p=s.serialize(),v={skipPreflight:!0,commitment:"singleGossip"},e.next=15,t.sendRawTransaction(p,v);case 15:if(y=e.sent,!l){e.next=26;break}return e.next=19,t.confirmTransaction(y,v&&v.commitment);case 19:if(!(null===(E=e.sent.value)||void 0===E?void 0:E.err)){e.next=26;break}return e.next=23,j(t,y);case 23:throw g=e.sent,Object(m.a)({message:"Transaction failed...",description:d.a.createElement(d.a.Fragment,null,g.map((function(e){return d.a.createElement("div",null,e)})),d.a.createElement(b,{address:y,type:"transaction"})),type:"error"}),new Error("Raw transaction ".concat(y," failed (").concat(JSON.stringify(E),")"));case 26:return e.abrupt("return",y);case 27:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},275:function(e,t,n){"use strict";(function(e){n.d(t,"e",(function(){return f})),n.d(t,"a",(function(){return b})),n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return v})),n.d(t,"f",(function(){return y})),n.d(t,"c",(function(){return g}));var a=n(29),r=n(18),i=n(44),o=n.n(i),c=n(1),l=n(22),u=n(12),s=n(25),d=n(92),m=c.struct([s.c("lastUpdateSlot"),s.a("lendingMarket"),s.a("liquidityMint"),c.u8("liquidityMintDecimals"),s.a("liquiditySupply"),s.a("collateralMint"),s.a("collateralSupply"),c.u32("dexMarketOption"),s.a("dexMarket"),c.struct([c.u8("optimalUtilizationRate"),c.u8("loanToValueRatio"),c.u8("liquidationBonus"),c.u8("liquidationThreshold"),c.u8("minBorrowRate"),c.u8("optimalBorrowRate"),c.u8("maxBorrowRate")],"config"),s.b("cumulativeBorrowRateWad"),s.b("borrowedLiquidityWad"),s.c("availableLiquidity"),s.c("collateralMintSupply")]),f=function(e){return e.data.length===m.span},b=function(t,n){var r=e.from(n.data),i=m.decode(r);if(0!==i.lastUpdateSlot.toNumber())return{pubkey:t,account:Object(a.a)({},n),info:i}},p=function(t,n,a,i,u,m,f,b,p,v,y,E){var g=c.struct([c.u8("instruction"),s.c("liquidityAmount"),c.u8("maxUtilizationRate")]),h=e.alloc(g.span);g.encode({instruction:d.a.InitReserve,liquidityAmount:new o.a(t),maxUtilizationRate:n},h);var O=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!0,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!1},{pubkey:r.e,isSigner:!1,isWritable:!1},{pubkey:r.f,isSigner:!1,isWritable:!1},{pubkey:l.d,isSigner:!1,isWritable:!1},{pubkey:E,isSigner:!1,isWritable:!1}];return new r.i({keys:O,programId:l.a,data:h})},v=function(e){var t=Object(u.p)(e.borrowedLiquidityWad).toNumber();return t/(e.availableLiquidity.toNumber()+t)},y=function(e){return((null===e||void 0===e?void 0:e.availableLiquidity.toNumber())||0)+Object(u.p)(null===e||void 0===e?void 0:e.borrowedLiquidityWad).toNumber()},E=function(e){return((null===e||void 0===e?void 0:e.collateralMintSupply.toNumber())||1)/y(e)},g=function(e,t){var n="number"===typeof e?e:e.toNumber();return Math.floor(n/E(t))}}).call(this,n(58).Buffer)},276:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return f}));var a,r=n(18),i=n(44),o=n.n(i),c=n(1),l=n(22),u=n(12),s=n(25),d=n(92);!function(e){e[e.LiquidityBorrowAmount=0]="LiquidityBorrowAmount",e[e.CollateralDepositAmount=1]="CollateralDepositAmount"}(a||(a={}));var m=function(t,n,a,i,u,m,f,b,p,v,y,E,g,h,O,w){var j=c.struct([c.u8("instruction"),s.c("amount"),c.u8("amountType")]),k=e.alloc(j.span);j.encode({instruction:d.a.BorrowLiquidity,amount:new o.a(t),amountType:n},k);var S=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:E,isSigner:!1,isWritable:!1},{pubkey:g,isSigner:!1,isWritable:!1},{pubkey:h,isSigner:!1,isWritable:!1},{pubkey:O,isSigner:!1,isWritable:!1},{pubkey:w,isSigner:!1,isWritable:!1},{pubkey:r.e,isSigner:!1,isWritable:!1},{pubkey:r.f,isSigner:!1,isWritable:!1},{pubkey:l.d,isSigner:!1,isWritable:!1}];return new r.i({keys:S,programId:l.a,data:k})},f=function(e){var t,n=Object(u.p)(e.borrowedLiquidityWad).toNumber(),a=n/(e.availableLiquidity.toNumber()+n),r=e.config.optimalUtilizationRate/100;if(1===r||a<r){var i=a/r,o=e.config.optimalBorrowRate/100,c=e.config.minBorrowRate/100;t=i*(o-c)+c}else{var l=(a-r)/(1-r),s=e.config.optimalBorrowRate/100;t=l*(e.config.maxBorrowRate/100-s)+s}return t}}).call(this,n(58).Buffer)},285:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(94),r=n(86),i=n(147),o=function e(t,n,a){Object(r.a)(this,e),this.id=void 0,this.parser=void 0,this.isNew=void 0,this.id=t,this.parser=a,this.isNew=n};o.type="CacheUpdate";var c=function e(t){Object(r.a)(this,e),this.id=void 0,this.id=t};c.type="CacheUpdate";var l=function e(t){Object(r.a)(this,e),this.ids=void 0,this.ids=t};l.type="MarketUpdate";var u=function(){function e(){Object(r.a)(this,e),this.emitter=new i.EventEmitter}return Object(a.a)(e,[{key:"onMarket",value:function(e){var t=this;return this.emitter.on(l.type,e),function(){return t.emitter.removeListener(l.type,e)}}},{key:"onCache",value:function(e){var t=this;return this.emitter.on(o.type,e),function(){return t.emitter.removeListener(o.type,e)}}},{key:"raiseMarketUpdated",value:function(e){this.emitter.emit(l.type,new l(e))}},{key:"raiseCacheUpdated",value:function(e,t,n){this.emitter.emit(o.type,new o(e,t,n))}},{key:"raiseCacheDeleted",value:function(e){this.emitter.emit(c.type,new c(e))}}]),e}()},36:function(e,t,n){"use strict";var a=n(390);n.d(t,"b",(function(){return a.a})),n.d(t,"n",(function(){return a.b}));var r=n(275);n.d(t,"e",(function(){return r.a})),n.d(t,"i",(function(){return r.b})),n.d(t,"j",(function(){return r.c})),n.d(t,"m",(function(){return r.d})),n.d(t,"p",(function(){return r.e})),n.d(t,"q",(function(){return r.f}));var i=n(391);n.d(t,"c",(function(){return i.a})),n.d(t,"d",(function(){return i.b})),n.d(t,"l",(function(){return i.c})),n.d(t,"o",(function(){return i.d}));n(92);var o=n(276);n.d(t,"a",(function(){return o.a})),n.d(t,"f",(function(){return o.b})),n.d(t,"g",(function(){return o.c}));var c=n(392);n.d(t,"h",(function(){return c.a})),n.d(t,"k",(function(){return c.b}));var l=n(393);n.d(t,"r",(function(){return l.a}))},362:function(e,t,n){},389:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(31),r=n(22);function i(e,t,n,i,o,c){var l=r.d;e.push(a.c.createApproveInstruction(l,n,i,o,[],c)),t.push(a.c.createRevokeInstruction(l,n,o,[]))}},390:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var a=n(29),r=n(1),i=n(25),o=r.struct([r.u8("isInitialized"),i.a("quoteMint")]),c=function(e){return e.data.length===o.span},l=function(t,n){var r=e.from(n.data),i=o.decode(r);return{pubkey:t,account:Object(a.a)({},n),info:i}}}).call(this,n(58).Buffer)},391:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u}));var a=n(29),r=n(1),i=n(25),o=r.struct([i.c("lastUpdateSlot"),i.c("depositedCollateral"),i.a("collateralReserve"),i.b("cumulativeBorrowRateWad"),i.b("borrowAmountWad"),i.a("borrowReserve"),i.a("tokenMint")]),c=function(e){return e.data.length===o.span},l=function(t,n){var r=e.from(n.data),i=o.decode(r);return{pubkey:t,account:Object(a.a)({},n),info:i}},u=function(e){return""}}).call(this,n(58).Buffer)},392:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return f}));var a=n(18),r=n(44),i=n.n(r),o=n(1),c=n(22),l=n(12),u=n(25),s=n(276),d=n(92),m=function(t,n,r,l,s,m,f){var b=o.struct([o.u8("instruction"),u.c("liquidityAmount")]),p=e.alloc(b.span);b.encode({instruction:d.a.DepositReserveLiquidity,liquidityAmount:new i.a(t)},p);var v=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:a.e,isSigner:!1,isWritable:!1},{pubkey:c.d,isSigner:!1,isWritable:!1}];return new a.i({keys:v,programId:c.a,data:p})},f=function(e){var t=Object(l.p)(e.borrowedLiquidityWad).toNumber();return t/(e.availableLiquidity.toNumber()+t)*Object(s.c)(e)}}).call(this,n(58).Buffer)},393:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var a=n(18),r=n(44),i=n.n(r),o=n(1),c=n(22),l=n(25),u=n(92),s=function(t,n,r,s,d,m,f){var b=o.struct([o.u8("instruction"),l.c("collateralAmount")]),p=e.alloc(b.span);b.encode({instruction:u.a.WithdrawReserveLiquidity,collateralAmount:new i.a(t)},p);var v=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!1},{pubkey:a.e,isSigner:!1,isWritable:!1},{pubkey:c.d,isSigner:!1,isWritable:!1}];return new a.i({keys:v,programId:c.a,data:p})}}).call(this,n(58).Buffer)},394:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return p})),n.d(t,"d",(function(){return v})),n.d(t,"f",(function(){return y})),n.d(t,"e",(function(){return E})),n.d(t,"i",(function(){return g})),n.d(t,"h",(function(){return h})),n.d(t,"g",(function(){return O}));var a=n(29),r=n(196),i=n(90),o=n(18),c=n(1),l=n(22),u=n(25),s=n(233),d=c.struct([c.nu64("tradeFeeNumerator"),c.nu64("tradeFeeDenominator"),c.nu64("ownerTradeFeeNumerator"),c.nu64("ownerTradeFeeDenominator"),c.nu64("ownerWithdrawFeeNumerator"),c.nu64("ownerWithdrawFeeDenominator"),c.nu64("hostFeeNumerator"),c.nu64("hostFeeDenominator")],"fees"),m=c.struct([c.u8("isInitialized"),c.u8("nonce"),Object(u.a)("tokenAccountA"),Object(u.a)("tokenAccountB"),Object(u.a)("tokenPool"),Object(u.c)("feesNumerator"),Object(u.c)("feesDenominator")]),f=c.struct([c.u8("isInitialized"),c.u8("nonce"),Object(u.a)("tokenProgramId"),Object(u.a)("tokenAccountA"),Object(u.a)("tokenAccountB"),Object(u.a)("tokenPool"),Object(u.a)("mintA"),Object(u.a)("mintB"),Object(u.a)("feeAccount"),c.u8("curveType"),Object(u.c)("tradeFeeNumerator"),Object(u.c)("tradeFeeDenominator"),Object(u.c)("ownerTradeFeeNumerator"),Object(u.c)("ownerTradeFeeDenominator"),Object(u.c)("ownerWithdrawFeeNumerator"),Object(u.c)("ownerWithdrawFeeDenominator"),c.blob(16,"padding")]),b=c.union(c.u8(),c.blob(32),"curve");b.addVariant(0,c.struct([]),"constantProduct"),b.addVariant(1,c.struct([c.nu64("token_b_price")]),"constantPrice"),b.addVariant(2,c.struct([]),"stable"),b.addVariant(3,c.struct([c.nu64("token_b_offset")]),"offset");var p=c.struct([c.u8("isInitialized"),c.u8("nonce"),Object(u.a)("tokenProgramId"),Object(u.a)("tokenAccountA"),Object(u.a)("tokenAccountB"),Object(u.a)("tokenPool"),Object(u.a)("mintA"),Object(u.a)("mintB"),Object(u.a)("feeAccount"),d,b]),v=function(t,n,i,u,d,m,f,b,v,y,E){var g=[{pubkey:t.publicKey,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:u,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!1}],h=e.alloc(1024);if(Object(l.f)().swapLayout===p){var O=[c.u8("instruction"),c.u8("nonce"),c.nu64("tradeFeeNumerator"),c.nu64("tradeFeeDenominator"),c.nu64("ownerTradeFeeNumerator"),c.nu64("ownerTradeFeeDenominator"),c.nu64("ownerWithdrawFeeNumerator"),c.nu64("ownerWithdrawFeeDenominator"),c.nu64("hostFeeNumerator"),c.nu64("hostFeeDenominator"),c.u8("curveType")];E.curveType===s.a.ConstantProductWithOffset?(O.push(c.nu64("token_b_offset")),O.push(c.blob(24,"padding"))):E.curveType===s.a.ConstantPrice?(O.push(c.nu64("token_b_price")),O.push(c.blob(24,"padding"))):O.push(c.blob(32,"padding"));var w=c.struct(O),j=E.fees,k=Object(r.a)(E,["fees"]),S=w.encode(Object(a.a)(Object(a.a)({instruction:0,nonce:y},j),k),h);h=h.slice(0,S)}else{var A=c.struct([c.u8("instruction"),c.u8("nonce"),c.u8("curveType"),c.nu64("tradeFeeNumerator"),c.nu64("tradeFeeDenominator"),c.nu64("ownerTradeFeeNumerator"),c.nu64("ownerTradeFeeDenominator"),c.nu64("ownerWithdrawFeeNumerator"),c.nu64("ownerWithdrawFeeDenominator"),c.blob(16,"padding")]).encode({instruction:0,nonce:y,curveType:E.curveType,tradeFeeNumerator:E.fees.tradeFeeNumerator,tradeFeeDenominator:E.fees.tradeFeeDenominator,ownerTradeFeeNumerator:E.fees.ownerTradeFeeNumerator,ownerTradeFeeDenominator:E.fees.ownerTradeFeeDenominator,ownerWithdrawFeeNumerator:E.fees.ownerWithdrawFeeNumerator,ownerWithdrawFeeDenominator:E.fees.ownerWithdrawFeeDenominator},h);h=h.slice(0,A)}return new o.i({keys:g,programId:v,data:h})},y=function(t,n,a,r,l,s,d,m,f,b,p,v,y){var E=c.struct([c.u8("instruction"),Object(u.c)("poolTokenAmount"),Object(u.c)("maximumTokenA"),Object(u.c)("maximumTokenB")]),g=e.alloc(E.span);E.encode({instruction:2,poolTokenAmount:new i.a(p).toBuffer(),maximumTokenA:new i.a(v).toBuffer(),maximumTokenB:new i.a(y).toBuffer()},g);var h=[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!1}];return new o.i({keys:h,programId:f,data:g})},E=function(t,n,a,r,l,s,d,m,f,b,p){var v=c.struct([c.u8("instruction"),Object(u.c)("sourceTokenAmount"),Object(u.c)("minimumPoolTokenAmount")]),y=e.alloc(v.span);v.encode({instruction:4,sourceTokenAmount:new i.a(b).toBuffer(),minimumPoolTokenAmount:new i.a(p).toBuffer()},y);var E=[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!1}];return new o.i({keys:E,programId:m,data:y})},g=function(t,n,a,r,l,s,d,m,f,b,p,v,y,E){var g=c.struct([c.u8("instruction"),Object(u.c)("poolTokenAmount"),Object(u.c)("minimumTokenA"),Object(u.c)("minimumTokenB")]),h=e.alloc(g.span);g.encode({instruction:3,poolTokenAmount:new i.a(v).toBuffer(),minimumTokenA:new i.a(y).toBuffer(),minimumTokenB:new i.a(E).toBuffer()},h);var O=[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0}];return r&&O.push({pubkey:r,isSigner:!1,isWritable:!0}),O.push({pubkey:p,isSigner:!1,isWritable:!1}),new o.i({keys:O,programId:b,data:h})},h=function(t,n,a,r,l,s,d,m,f,b,p,v){var y=c.struct([c.u8("instruction"),Object(u.c)("sourceTokenAmount"),Object(u.c)("maximumTokenAmount")]),E=e.alloc(y.span);y.encode({instruction:5,sourceTokenAmount:new i.a(p).toBuffer(),maximumTokenAmount:new i.a(v).toBuffer()},E);var g=[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0}];return m&&g.push({pubkey:m,isSigner:!1,isWritable:!0}),g.push({pubkey:b,isSigner:!1,isWritable:!1}),new o.i({keys:g,programId:f,data:E})},O=function(t,n,a,r,l,s,d,m,f,b,p,v,y){var E=c.struct([c.u8("instruction"),Object(u.c)("amountIn"),Object(u.c)("minimumAmountOut")]),g=[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!1}];y&&g.push({pubkey:y,isSigner:!1,isWritable:!0});var h=e.alloc(E.span);return E.encode({instruction:1,amountIn:new i.a(p).toBuffer(),minimumAmountOut:new i.a(v).toBuffer()},h),new o.i({keys:g,programId:f,data:h})}}).call(this,n(58).Buffer)},395:function(e,t){},410:function(e,t,n){},46:function(e,t,n){"use strict";var a=n(389);n.d(t,"approve",(function(){return a.a}));var r=n(36);n.d(t,"BorrowAmountType",(function(){return r.a})),n.d(t,"LendingObligationLayout",(function(){return r.c})),n.d(t,"LendingReserveParser",(function(){return r.e})),n.d(t,"borrowInstruction",(function(){return r.f})),n.d(t,"reserveMarketCap",(function(){return r.q}));var i=n(394);n.d(t,"TokenSwapLayout",(function(){return i.a})),n.d(t,"TokenSwapLayoutLegacyV0",(function(){return i.b})),n.d(t,"TokenSwapLayoutV1",(function(){return i.c})),n.d(t,"createInitSwapInstruction",(function(){return i.d})),n.d(t,"depositExactOneInstruction",(function(){return i.e})),n.d(t,"depositPoolInstruction",(function(){return i.f})),n.d(t,"swapInstruction",(function(){return i.g})),n.d(t,"withdrawExactOneInstruction",(function(){return i.h})),n.d(t,"withdrawPoolInstruction",(function(){return i.i}));n(233),n(395)},48:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n.n(a),i=n(360);function o(e){var t=e.message,n=void 0===t?"":t,a=e.description,o=void 0===a?void 0:a,c=e.txid,l=void 0===c?"":c,u=e.type,s=void 0===u?"info":u,d=e.placement,m=void 0===d?"bottomLeft":d;l&&(o=r.a.createElement(r.a.Fragment,null)),i.a[s]({message:r.a.createElement("span",{style:{color:"black"}},n),description:r.a.createElement("span",{style:{color:"black",opacity:.5}},o),placement:m,style:{backgroundColor:"white"}})}},518:function(e){e.exports=JSON.parse('{"name":"token-lending-ui","version":"0.1.0","private":true,"dependencies":{"@ant-design/pro-layout":"^6.7.0","@craco/craco":"^5.7.0","@project-serum/serum":"^0.13.11","@project-serum/sol-wallet-adapter":"^0.1.4","@solana/spl-token":"0.0.11","@solana/spl-token-swap":"0.0.2","@solana/web3.js":"^0.86.2","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.5.0","@testing-library/user-event":"^7.2.1","@types/chart.js":"^2.9.29","@types/echarts":"^4.9.0","@types/react-router-dom":"^5.1.6","@welldone-software/why-did-you-render":"^6.0.5","antd":"^4.6.6","bn.js":"^5.1.3","bs58":"^4.0.1","buffer-layout":"^1.2.0","chart.js":"^2.9.4","craco-less":"^1.17.0","echarts":"^4.9.0","eventemitter3":"^4.0.7","identicon.js":"^2.3.3","jazzicon":"^1.5.0","lodash":"^4.17.20","react":"^16.13.1","react-dom":"^16.13.1","react-github-btn":"^1.2.0","react-intl":"^5.10.2","react-router-dom":"^5.2.0","react-scripts":"3.4.3","typescript":"^4.0.0"},"scripts":{"start":"craco start","build":"craco build","test":"craco test","eject":"react-scripts eject","localnet:update":"solana-localnet update","localnet:up":"rm client/util/store/config.json; set -x; solana-localnet down; set -e; solana-localnet up","localnet:down":"solana-localnet down","localnet:logs":"solana-localnet logs -f","predeploy":"git pull --ff-only && yarn && yarn build","deploy":"gh-pages -d build","deploy:ar":"arweave deploy-dir build --key-file ","format:fix":"prettier --write \\"**/*.+(js|jsx|ts|tsx|json|css|md)\\""},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"repository":{"type":"git","url":"https://github.com/solana-labs/oyster-lending"},"homepage":".","devDependencies":{"@types/bn.js":"^4.11.6","@types/bs58":"^4.0.1","@types/identicon.js":"^2.3.0","@types/jest":"^24.9.1","@types/node":"^12.12.62","@types/react":"^16.9.50","@types/react-dom":"^16.9.8","arweave-deploy":"^1.9.1","gh-pages":"^3.1.0","prettier":"^2.1.2"}}')},530:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var a=n(18),r=n(44),i=n.n(r),o=n(92),c=n(1),l=n(25),u=n(22),s=function(t,n,r,s,d,m,f,b,p,v,y){var E=c.struct([c.u8("instruction"),l.c("liquidityAmount")]),g=e.alloc(E.span);E.encode({instruction:o.a.RepayOblogationLiquidity,liquidityAmount:new i.a(t)},g);var h=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!1},{pubkey:a.e,isSigner:!1,isWritable:!1},{pubkey:u.d,isSigner:!1,isWritable:!1}];return new a.i({keys:h,programId:u.a,data:g})}}).call(this,n(58).Buffer)},531:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var a=n(18),r=n(44),i=n.n(r),o=n(92),c=n(1),l=n(25),u=n(22),s=function(t,n,r,s,d,m,f,b,p,v,y,E){var g=c.struct([c.u8("instruction"),l.c("liquidityAmount")]),h=e.alloc(g.span);g.encode({instruction:o.a.LiquidateObligation,liquidityAmount:new i.a(t)},h);var O=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!1},{pubkey:v,isSigner:!1,isWritable:!1},{pubkey:y,isSigner:!1,isWritable:!1},{pubkey:E,isSigner:!1,isWritable:!1},{pubkey:a.e,isSigner:!1,isWritable:!1},{pubkey:u.d,isSigner:!1,isWritable:!1}];return new a.i({keys:O,programId:u.a,data:h})}}).call(this,n(58).Buffer)},541:function(e,t,n){e.exports=n(1090)},546:function(e,t,n){},549:function(e,t){},550:function(e,t){},579:function(e,t){},581:function(e,t){},593:function(e,t){},594:function(e,t){},63:function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return k})),n.d(t,"c",(function(){return S}));var a=n(21),r=n(0),i=n.n(r),o=n(508),c=n(48),l=n(26),u=n(12),s=n(13),d=n.n(s),m=n(23),f=n(86),b=n(94),p=n(188),v=n(128),y=n(127),E=n(147),g=n.n(E),h=n(18),O=function(e){Object(v.a)(n,e);var t=Object(y.a)(n);function n(e,a){var r;return Object(f.a)(this,n),(r=t.call(this))._publicKey=void 0,r._onProcess=void 0,r._publicKey=null,r._onProcess=!1,r.connect=r.connect.bind(Object(p.a)(r)),r}return Object(b.a)(n,[{key:"signTransaction",value:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.solong.signTransaction(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=this;this._onProcess||(void 0!==window.solong?(this._onProcess=!0,window.solong.selectAccount().then((function(t){e._publicKey=new h.d(t),e.emit("connect",e._publicKey)})).catch((function(){e.disconnect()})).finally((function(){e._onProcess=!1}))):Object(c.a)({message:"Solong Error",description:"Please install solong wallet from Chrome "}))}},{key:"disconnect",value:function(){this._publicKey&&(this._publicKey=null,this.emit("disconnect"))}},{key:"publicKey",get:function(){return this._publicKey}}]),n}(g.a),w=[{name:"sollet.io",url:"https://www.sollet.io"},{name:"solongwallet.com",url:"http://solongwallet.com"},{name:"solflare.com",url:"https://solflare.com/access-wallet"},{name:"mathwallet.org",url:"https://www.mathwallet.org"}],j=i.a.createContext(null);function k(e){var t,n,s=e.children,d=void 0===s?null:s,m=Object(l.e)().endpoint,f=Object(u.o)("walletProvider","https://www.sollet.io"),b=Object(a.a)(f,2),p=b[0],v=b[1],y=Object(r.useMemo)((function(){return"http://solongwallet.com"===p?new O(p,m):new o.a(p,m)}),[p,m]),E=Object(r.useState)(!1),g=Object(a.a)(E,2),h=g[0],k=g[1];return Object(r.useEffect)((function(){return y.on("connect",(function(){k(!0);var e=y.publicKey.toBase58(),t=e.length>20?"".concat(e.substring(0,7),".....").concat(e.substring(e.length-7,e.length)):e;Object(c.a)({message:"Wallet update",description:"Connected to wallet "+t})})),y.on("disconnect",(function(){k(!1),Object(c.a)({message:"Wallet update",description:"Disconnected from wallet"})})),function(){y.disconnect(),k(!1)}}),[y]),i.a.createElement(j.Provider,{value:{wallet:y,connected:h,providerUrl:p,setProviderUrl:v,providerName:null!==(t=null===(n=w.find((function(e){return e.url===p})))||void 0===n?void 0:n.name)&&void 0!==t?t:p}},d)}function S(){var e=Object(r.useContext)(j);return{connected:e.connected,wallet:e.wallet,providerUrl:e.providerUrl,setProvider:e.setProviderUrl,providerName:e.providerName}}},679:function(e,t,n){},745:function(e,t,n){},746:function(e,t,n){},747:function(e,t,n){},752:function(e,t,n){},753:function(e,t,n){},754:function(e,t,n){},755:function(e,t,n){},756:function(e,t,n){},757:function(e,t,n){},758:function(e,t,n){},759:function(e,t,n){},760:function(e,t,n){},761:function(e,t,n){},762:function(e,t,n){},763:function(e,t,n){},764:function(e,t,n){},765:function(e,t,n){},766:function(e,t,n){},791:function(e,t,n){},792:function(e,t,n){},793:function(e,t,n){},794:function(e,t,n){},92:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e[e.InitLendingMarket=0]="InitLendingMarket",e[e.InitReserve=1]="InitReserve",e[e.DepositReserveLiquidity=2]="DepositReserveLiquidity",e[e.WithdrawReserveLiquidity=3]="WithdrawReserveLiquidity",e[e.BorrowLiquidity=4]="BorrowLiquidity",e[e.RepayOblogationLiquidity=5]="RepayOblogationLiquidity",e[e.LiquidateObligation=6]="LiquidateObligation"}(a||(a={}))},93:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(11);function r(){return{userAccounts:Object(a.h)().userAccounts}}}},[[541,1,2]]]);