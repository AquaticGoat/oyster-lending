(this["webpackJsonptoken-lending-ui"]=this["webpackJsonptoken-lending-ui"]||[]).push([[0],{11:function(e,t,n){"use strict";n.d(t,"k",(function(){return l})),n.d(t,"i",(function(){return u})),n.d(t,"h",(function(){return s})),n.d(t,"g",(function(){return d})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return m})),n.d(t,"j",(function(){return b})),n.d(t,"l",(function(){return v})),n.d(t,"f",(function(){return p})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return w}));var a=n(19),r=n(0),i=n(39),o=n.n(i),c=n(14);function l(e,t){var n=Object(r.useState)((function(){var n=localStorage.getItem(e);return n?JSON.parse(n):t})),i=Object(a.a)(n,2),o=i[0],c=i[1],l=Object(r.useCallback)((function(t){o!==t&&(c(t),null===t?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(t)))}),[o,e]);return[o,l]}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return"".concat(e.slice(0,t),"...").concat(e.slice(-t))}function s(e,t){var n,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r="string"===typeof t?t:null===t||void 0===t?void 0:t.toBase58();if(!r)return"N/A";var i=null===(n=e.get(r))||void 0===n?void 0:n.tokenSymbol;return i||(a?"".concat(r.substring(0,5),"..."):r)}function d(e,t){var n,a="string"===typeof t?t:null===t||void 0===t?void 0:t.toBase58();if(a)return null===(n=e.get(a))||void 0===n?void 0:n.icon}var f=new Set(["USDC","wUSDC","USDT"]);function m(e,t){return Array.apply(0,new Array(Math.ceil(e.length/t))).map((function(n,a){return e.slice(a*t,(a+1)*t)}))}function b(e,t){var n;if(!e)return 0;var a="number"===typeof e?e:null===(n=e.info.amount)||void 0===n?void 0:n.toNumber(),r=Math.pow(10,(null===t||void 0===t?void 0:t.decimals)||0);return Math.floor(a*r)}function v(e){return(null===e||void 0===e?void 0:e.div(c.d))||c.e}function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!e)return 0;var a=Math.floor("number"===typeof e?e:o.a.isBN(e)?e.toNumber():e.info.amount.toNumber()),r=Math.pow(10,(null===t||void 0===t?void 0:t.decimals)||0);return a/r*n}var E=["","k","M","G","T","P","E"],y=function(e,t){var n=Math.log10(e)/3|0,a=e,r=E[n];0!==n&&(a=e/Math.pow(10,3*n));return a.toFixed(t)+r},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?y(e,t):e.toFixed(t)};new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});var O=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),h={format:function(e){return e?O.format(e):"--"}},w=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2})},12:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return w})),n.d(t,"c",(function(){return j})),n.d(t,"d",(function(){return A})),n.d(t,"f",(function(){return S})),n.d(t,"a",(function(){return M})),n.d(t,"h",(function(){return I})),n.d(t,"e",(function(){return B})),n.d(t,"g",(function(){return C}));var a=n(200),r=n(19),i=n(193),o=n(13),c=n.n(o),l=n(20),u=n(61),s=n(0),d=n.n(s),f=n(25),m=n(54),b=n(18),v=n(29),p=n(48),E=n(11),y=n(194),g=d.a.createContext(null),O=new Map,h=new Map,w=function(t,n){var a=e.from(n.data),r=q(a);return{pubkey:t,account:Object(u.a)({},n),info:r}},j=function(t,n){var a=e.from(n.data),r=_(a);return{pubkey:t,account:Object(u.a)({},n),info:r}},k=new Map,A={emitter:new y.a,query:function(){var e=Object(l.a)(c.a.mark((function e(t,n,a){var r,i,o,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="string"===typeof n?new b.d(n):n,i=r.toBase58(),!(o=h.get(i))){e.next=5;break}return e.abrupt("return",o);case 5:if(!(l=O.get(i))){e.next=8;break}return e.abrupt("return",l);case 8:return l=t.getAccountInfo(r).then((function(e){if(!e)throw new Error("Account not found");return A.add(r,e,a)})),O.set(i,l),e.abrupt("return",l);case 11:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),add:function(e,t,n){var a="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),r=n||k.get(a);if(!r)throw new Error("Deserializer needs to be registered or passed as a parameter");A.registerParser(e,r),O.delete(a);var i=r(new b.d(a),t);if(i){var o=!h.has(a);return h.set(a,i),A.emitter.raiseCacheUpdated(a,o,r),i}},get:function(e){var t;return t="string"!==typeof e?e.toBase58():e,h.get(t)},byParser:function(e){var t,n=[],a=Object(i.a)(k.keys());try{for(a.s();!(t=a.n()).done;){var r=t.value;k.get(r)===e&&n.push(r)}}catch(o){a.e(o)}finally{a.f()}return n},registerParser:function(e,t){if(e){var n="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();k.set(n,t)}return e}},S=function(){return Object(s.useContext)(g)};var T=function(){var e=Object(f.d)(),t=Object(m.c)().wallet,n=Object(s.useState)(),a=Object(r.a)(n,2),i=a[0],o=a[1],c=Object(s.useCallback)((function(e){var n=function(e,t){if(t)return{pubkey:e,account:t,info:{mint:v.c,owner:e,amount:new p.d(t.lamports),delegate:null,delegatedAmount:new p.d(0),isInitialized:!0,isFrozen:!1,isNative:!0,rentExemptReserve:null,closeAuthority:null}}}(t.publicKey,e);if(void 0!==n&&t){var a,r=null===(a=t.publicKey)||void 0===a?void 0:a.toBase58();A.registerParser(r,j),h.set(r,n),A.emitter.raiseCacheUpdated(r,!1,j)}}),[t]);return Object(s.useEffect)((function(){e&&(null===t||void 0===t?void 0:t.publicKey)&&(e.getAccountInfo(t.publicKey).then((function(e){e&&(c(e),o(e))})),e.onAccountChange(t.publicKey,(function(e){e&&(c(e),o(e))})))}),[o,t,t.publicKey,e,c]),{nativeAccount:i}},N=new Set,x=function(){var e=Object(l.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return N.add(n.toBase58()),e.next=5,t.getTokenAccountsByOwner(n,{programId:Object(v.d)().token});case 5:e.sent.value.forEach((function(e){A.add(e.pubkey.toBase58(),e.account,j)}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function M(e){var t=e.children,n=void 0===t?null:t,a=Object(f.d)(),i=Object(m.c)(),o=i.wallet,c=i.connected,l=Object(s.useState)([]),u=Object(r.a)(l,2),E=u[0],y=u[1],O=Object(s.useState)([]),h=Object(r.a)(O,2),w=h[0],k=h[1],S=T().nativeAccount,M=Object(s.useCallback)((function(){return A.byParser(j).map((function(e){return A.get(e)})).filter((function(e){var t;return e&&e.info.owner.toBase58()===(null===(t=o.publicKey)||void 0===t?void 0:t.toBase58())})).map((function(e){return e}))}),[o]);Object(s.useEffect)((function(){var e=M().filter((function(e){return void 0!==e}));k(e)}),[S,o,E,M]),Object(s.useEffect)((function(){var e=[];return A.emitter.onCache((function(e){if(e.isNew){var t=e.id,n=e.parser;a.onAccountChange(new b.d(t),(function(e){A.add(t,e,n)}))}})),function(){e.forEach((function(e){return a.removeAccountChangeListener(e)}))}}),[a]);var I=null===o||void 0===o?void 0:o.publicKey;return Object(s.useEffect)((function(){if(a&&I){x(a,I).then((function(){y(M())}));var e=a.onProgramAccountChange(Object(v.d)().token,(function(e){var t=e.accountId;if(e.accountInfo.data.length===p.a.span){var n=_(e.accountInfo.data);N.has(n.owner.toBase58())&&(A.add(t,e.accountInfo,j),y(M()))}}),"singleGossip");return function(){a.removeProgramAccountChangeListener(e)}}y([])}),[a,c,I,M]),d.a.createElement(g.Provider,{value:{userAccounts:w,nativeAccount:S}},n)}function I(){return{account:Object(s.useContext)(g).nativeAccount}}var B=function(){var t=Object(l.a)(c.a.mark((function t(n,r,i){var o,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(Object(E.b)(r,99).map((function(e){return L(n,e,i)})));case 2:return o=t.sent,l=o.map((function(t){return t.array.map((function(t){if(t){var n=t.data,r=Object(a.a)(t,["data"]);return Object(u.a)(Object(u.a)({},r),{},{data:e.from(n[0],"base64")})}})).filter((function(e){return e}))})).flat(),t.abrupt("return",{keys:r,array:l});case 5:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),L=function(){var e=Object(l.a)(c.a.mark((function e(t,n,a){var r,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._buildArgs([n],a,"base64"),e.next=3,t._rpcRequest("getMultipleAccounts",r);case 3:if(!(i=e.sent).error){e.next=6;break}throw new Error("failed to get info about account "+i.error.message);case 6:if(!i.result.value){e.next=9;break}return o=i.result.value,e.abrupt("return",{keys:n,array:o});case 9:throw new Error;case 10:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();function C(e){var t=Object(f.d)(),n=Object(s.useState)(),a=Object(r.a)(n,2),i=a[0],o=a[1],c="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();return Object(s.useEffect)((function(){if(c){A.query(t,c,w).then((function(e){return o(e.info)})).catch((function(e){return console.log(e)}));var e=A.emitter.onCache((function(e){e.id===c&&A.query(t,c,w).then((function(e){return o(e.info)}))}));return function(){e()}}}),[t,c]),i}var _=function(e){var t=p.a.decode(e);return t.mint=new b.d(t.mint),t.owner=new b.d(t.owner),t.amount=p.d.fromBuffer(t.amount),0===t.delegateOption?(t.delegate=null,t.delegatedAmount=new p.d(0)):(t.delegate=new b.d(t.delegate),t.delegatedAmount=p.d.fromBuffer(t.delegatedAmount)),t.isInitialized=0!==t.state,t.isFrozen=2===t.state,1===t.isNativeOption?(t.rentExemptReserve=p.d.fromBuffer(t.isNative),t.isNative=!0):(t.rentExemptReserve=null,t.isNative=!1),0===t.closeAuthorityOption?t.closeAuthority=null:t.closeAuthority=new b.d(t.closeAuthority),t},q=function(e){if(e.length!==p.b.span)throw new Error("Not a valid Mint");var t=p.b.decode(e);return 0===t.mintAuthorityOption?t.mintAuthority=null:t.mintAuthority=new b.d(t.mintAuthority),t.supply=p.d.fromBuffer(t.supply),t.isInitialized=0!==t.isInitialized,0===t.freezeAuthorityOption?t.freezeAuthority=null:t.freezeAuthority=new b.d(t.freezeAuthority),t}}).call(this,n(51).Buffer)},14:function(e,t,n){"use strict";n.d(t,"c",(function(){return a.b})),n.d(t,"b",(function(){return r})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return s})),n.d(t,"a",(function(){return d}));var a=n(29),r={CONNECT_LABEL:"Connect Wallet",GIVE_SOL:"Give me SOL",LIQUIDATION_INFO:"This view displays all loans that can be liquidated. A liquidation is a process where borrower collateral does not cover value of the loan. It is represented by health factor falling below 1.o. When a loan is liquidated, an liquidator can purchase collateral at a discount by repaing the portio of the loan. ",FAUCET_INFO:"This faucet will help you fund your accounts outside of Solana main network.",ACCOUNT_FUNDED:"Account funded.",REPAY_QUESTION:"How much would you like to repay?",REPAY_ACTION:"Repay",RESERVE_STATUS_TITLE:"Reserve Status & Configuration",AUDIT_WARNING:"Oyster is an unaudited software project used for internal purposes at the Solana Foundation. This app is not for public use.",FOOTER:'This page was produced by the Solana Foundation ("SF") for internal educational and inspiration purposes only. SF does not encourage, induce or sanction the deployment, integration or use of Oyster or any similar application (including its code) in violation of applicable laws or regulations and hereby prohibits any such deployment, integration or use. Anyone using this code or a derivation thereof must comply with applicable laws and regulations when releasing related software.',MENU_HOME:"Home",MENU_DASHBOARD:"Dashboard",DASHBOARD_INFO:"Connect to a wallet to view your deposits/loans.",NO_LOANS_NO_DEPOSITS:"No loans or deposits.",MENU_DEPOSIT:"Deposit",MENU_BORROW:"Borrow",MENU_LIQUIDATE:"Liquidate",MENU_FAUCET:"Faucet",APP_TITLE:"Oyster Lending",CONNECT_BUTTON:"Connect",WALLET_TOOLTIP:"Wallet public key",SETTINGS_TOOLTIP:"Settings",SELECT_COLLATERAL:"Select collateral",COLLATERAL:"Collateral",BORROW_QUESTION:"How much would you like to borrow?",BORROW_ACTION:"Borrow",NO_DEPOSITS:"No collateral",LIQUIDATE_ACTION:"Liquidate",LIQUIDATE_NO_LOANS:"There are no loans to liquidate.",TABLE_TITLE_ASSET:"Asset",TABLE_TITLE_YOUR_LOAN_BALANCE:"Loan balance",TABLE_TITLE_LOAN_BALANCE:"Loan balance",TABLE_TITLE_COLLATERAL_BALANCE:"Collateral",TABLE_TITLE_DEPOSIT_BALANCE:"Your deposits",TABLE_TITLE_APY:"APY",TABLE_TITLE_LTV:"LTV",TABLE_TITLE_HEALTH:"Health Factor",TABLE_TITLE_BORROW_APY:"Borrow APY",TABLE_TITLE_DEPOSIT_APY:"Deposit APY",TABLE_TITLE_TOTAL_BORROWED:"Total Borrowed",TABLE_TITLE_MARKET_SIZE:"Market Size",TABLE_TITLE_ACTION:"Action",TABLE_TITLE_MAX_BORROW:"Available for you",DASHBOARD_TITLE_LOANS:"Loans",DASHBOARD_TITLE_DEPOSITS:"Deposits",DEPOSIT_QUESTION:"How much would you like to deposit?",WITHDRAW_ACTION:"Withdraw",WITHDRAW_QUESTION:"How much would you like to withdraw?",DASHBOARD_ACTION:"Go to dashboard",GO_BACK_ACTION:"Go back",DEPOSIT_ACTION:"Deposit",TOTAL_TITLE:"Total"},i=n(39),o=n.n(i),c=new o.a(10),l=c.pow(new o.a(18)),u=(c.pow(new o.a(27)),new o.a(0)),s={0:"0%",25:"25%",50:"50%",75:"75%",100:"100%"},d=[16,{xs:8,sm:16,md:16,lg:16}]},182:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return m}));var a,r=n(18),i=n(39),o=n.n(i),c=n(1),l=n(29),u=n(11),s=n(49),d=n(75);!function(e){e[e.LiquidityBorrowAmount=0]="LiquidityBorrowAmount",e[e.CollateralDepositAmount=1]="CollateralDepositAmount"}(a||(a={}));var f=function(t,n,a,i,u,f,m,b,v,p,E,y,g,O,h,w){var j=c.struct([c.u8("instruction"),s.c("amount"),c.u8("amountType")]),k=e.alloc(j.span);j.encode({instruction:d.a.BorrowLiquidity,amount:new o.a(t),amountType:n},k);var A=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:E,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!1},{pubkey:g,isSigner:!1,isWritable:!1},{pubkey:O,isSigner:!1,isWritable:!1},{pubkey:h,isSigner:!1,isWritable:!1},{pubkey:w,isSigner:!1,isWritable:!1},{pubkey:r.e,isSigner:!1,isWritable:!1},{pubkey:r.f,isSigner:!1,isWritable:!1},{pubkey:l.b,isSigner:!1,isWritable:!1}];return new r.i({keys:A,programId:l.a,data:k})},m=function(e){var t,n=Object(u.l)(e.borrowedLiquidityWad).toNumber(),a=n/(e.availableLiquidity.toNumber()+n),r=e.config.optimalUtilizationRate/100;if(1===r||a<r){var i=a/r,o=e.config.optimalBorrowRate/100,c=e.config.minBorrowRate/100;t=i*(o-c)+c}else{var l=(a-r)/(1-r),s=e.config.optimalBorrowRate/100;t=l*(e.config.maxBorrowRate/100-s)+s}return t}}).call(this,n(51).Buffer)},194:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(89),r=n(80),i=n(108),o=function e(t,n,a){Object(r.a)(this,e),this.id=void 0,this.parser=void 0,this.isNew=void 0,this.id=t,this.parser=a,this.isNew=n};o.type="CacheUpdate";var c=function e(t){Object(r.a)(this,e),this.ids=void 0,this.ids=t};c.type="MarketUpdate";var l=function(){function e(){Object(r.a)(this,e),this.emitter=new i.EventEmitter}return Object(a.a)(e,[{key:"onMarket",value:function(e){var t=this;return this.emitter.on(c.type,e),function(){return t.emitter.removeListener(c.type,e)}}},{key:"onCache",value:function(e){var t=this;return this.emitter.on(o.type,e),function(){return t.emitter.removeListener(o.type,e)}}},{key:"raiseMarketUpdated",value:function(e){this.emitter.emit(c.type,new c(e))}},{key:"raiseCacheUpdated",value:function(e,t,n){this.emitter.emit(o.type,new o(e,t,n))}}]),e}()},235:function(e,t,n){},25:function(e,t,n){"use strict";n.d(t,"b",(function(){return E})),n.d(t,"a",(function(){return O})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return w})),n.d(t,"c",(function(){return k}));var a=n(13),r=n.n(a),i=n(20),o=n(34),c=n(19),l=n(11),u=n(18),s=n(0),d=n.n(s),f=n(29),m=n(55),b=n(592),v=function(e){var t,n,a=e.type,r=e.code,i="string"===typeof e.address?e.address:null===(t=e.address)||void 0===t?void 0:t.toBase58();if(!i)return null;var o=null!==(n=e.length)&&void 0!==n?n:9;return d.a.createElement("a",{href:"https://explorer.solana.com/".concat(a,"/").concat(i),target:"_blank",title:i,style:e.style},r?d.a.createElement(b.a.Text,{style:e.style,code:!0},Object(l.i)(i,o)):Object(l.i)(i,o))},p=n(308),E=[{name:"mainnet-beta",endpoint:"https://solana-api.projectserum.com/"},{name:"lending",endpoint:"https://tln.solana.com"},{name:"testnet",endpoint:Object(u.j)("testnet")},{name:"devnet",endpoint:Object(u.j)("devnet")},{name:"localnet",endpoint:"http://127.0.0.1:8899"}],y=E[0].endpoint,g=d.a.createContext({endpoint:y,setEndpoint:function(){},slippage:.25,setSlippage:function(e){},connection:new u.b(y,"recent"),sendConnection:new u.b(y,"recent"),env:E[0].name,tokens:[],tokenMap:new Map});function O(e){var t,n=e.children,a=void 0===n?void 0:n,r=Object(l.k)("connectionEndpts",E[0].endpoint),i=Object(c.a)(r,2),m=i[0],b=i[1],v=Object(l.k)("slippage",.25.toString()),y=Object(c.a)(v,2),O=y[0],h=y[1],w=Object(s.useMemo)((function(){return new u.b(m,"recent")}),[m]),j=Object(s.useMemo)((function(){return new u.b(m,"recent")}),[m]),k=(null===(t=E.find((function(e){return e.endpoint===m})))||void 0===t?void 0:t.name)||E[0].name,A=Object(s.useState)([]),S=Object(c.a)(A,2),T=S[0],N=S[1],x=Object(s.useState)(new Map),M=Object(c.a)(x,2),I=M[0],B=M[1];return Object(s.useEffect)((function(){window.fetch("https://raw.githubusercontent.com/solana-labs/token-list/main/src/tokens/".concat(k,".json")).then((function(e){return e.json()})).catch((function(e){return[]})).then((function(e){var t=[].concat(Object(o.a)(p),Object(o.a)(e)).reduce((function(e,t){return e.set(t.mintAddress,t),e}),new Map);B(t),N(e)}))}),[k]),Object(f.e)(k),Object(s.useEffect)((function(){var e=w.onAccountChange((new u.a).publicKey,(function(){}));return function(){w.removeAccountChangeListener(e)}}),[w]),Object(s.useEffect)((function(){var e=w.onSlotChange((function(){return null}));return function(){w.removeSlotChangeListener(e)}}),[w]),Object(s.useEffect)((function(){var e=j.onAccountChange((new u.a).publicKey,(function(){}));return function(){j.removeAccountChangeListener(e)}}),[j]),Object(s.useEffect)((function(){var e=j.onSlotChange((function(){return null}));return function(){j.removeSlotChangeListener(e)}}),[j]),d.a.createElement(g.Provider,{value:{endpoint:m,setEndpoint:b,slippage:parseFloat(O),setSlippage:function(e){return h(e.toString())},connection:w,sendConnection:j,tokens:T,tokenMap:I,env:k}},a)}function h(){return Object(s.useContext)(g).connection}function w(){var e=Object(s.useContext)(g);return{endpoint:e.endpoint,setEndpoint:e.setEndpoint,env:e.env,tokens:e.tokens,tokenMap:e.tokenMap}}var j=function(){var e=Object(i.a)(r.a.mark((function e(t,n){var a,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.confirmTransaction(n,"max");case 2:return e.next=4,t.getParsedConfirmedTransaction(n);case 4:return a=e.sent,i=[],(null===a||void 0===a?void 0:a.meta)&&a.meta.logMessages&&a.meta.logMessages.forEach((function(e){for(var t,n=/Error: (.*)/gm;null!==(t=n.exec(e));)t.index===n.lastIndex&&n.lastIndex++,t.length>1&&i.push(t[1])})),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(i.a)(r.a.mark((function e(t,n,a,i){var c,l,s,f,b,p,E,y,g,O=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=!(O.length>4&&void 0!==O[4])||O[4],s=new u.h,a.forEach((function(e){return s.add(e)})),e.next=5,t.getRecentBlockhash("max");case 5:return s.recentBlockhash=e.sent.blockhash,(c=s).setSigners.apply(c,[n.publicKey].concat(Object(o.a)(i.map((function(e){return e.publicKey}))))),i.length>0&&(f=s).partialSign.apply(f,Object(o.a)(i)),e.next=10,n.signTransaction(s);case 10:return s=e.sent,b=s.serialize(),p={skipPreflight:!0,commitment:"singleGossip"},e.next=15,t.sendRawTransaction(b,p);case 15:if(E=e.sent,!l){e.next=26;break}return e.next=19,t.confirmTransaction(E,p&&p.commitment);case 19:if(!(null===(y=e.sent.value)||void 0===y?void 0:y.err)){e.next=26;break}return e.next=23,j(t,E);case 23:throw g=e.sent,Object(m.a)({message:"Transaction failed...",description:d.a.createElement(d.a.Fragment,null,g.map((function(e){return d.a.createElement("div",null,e)})),d.a.createElement(v,{address:E,type:"transaction"})),type:"error"}),new Error("Raw transaction ".concat(E," failed (").concat(JSON.stringify(y),")"));case 26:return e.abrupt("return",E);case 27:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},271:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var a=n(61),r=n(1),i=n(49),o=r.struct([r.u8("isInitialized"),i.a("quoteMint")]),c=function(e){return e.data.length===o.span},l=function(t,n){var r=e.from(n.data),i=o.decode(r);return{pubkey:t,account:Object(a.a)({},n),info:i}}}).call(this,n(51).Buffer)},272:function(e,t,n){"use strict";(function(e){n.d(t,"e",(function(){return m})),n.d(t,"a",(function(){return b})),n.d(t,"d",(function(){return v})),n.d(t,"b",(function(){return p})),n.d(t,"f",(function(){return E})),n.d(t,"c",(function(){return g}));var a=n(61),r=n(18),i=n(39),o=n.n(i),c=n(1),l=n(29),u=n(11),s=n(49),d=n(75),f=c.struct([s.c("lastUpdateSlot"),s.a("lendingMarket"),s.a("liquidityMint"),c.u8("liquidityMintDecimals"),s.a("liquiditySupply"),s.a("collateralMint"),s.a("collateralSupply"),c.u32("dexMarketOption"),s.a("dexMarket"),c.struct([c.u8("optimalUtilizationRate"),c.u8("loanToValueRatio"),c.u8("liquidationBonus"),c.u8("liquidationThreshold"),c.u8("minBorrowRate"),c.u8("optimalBorrowRate"),c.u8("maxBorrowRate")],"config"),s.b("cumulativeBorrowRateWad"),s.b("borrowedLiquidityWad"),s.c("availableLiquidity"),s.c("collateralMintSupply")]),m=function(e){return e.data.length===f.span},b=function(t,n){var r=e.from(n.data),i=f.decode(r);if(0!==i.lastUpdateSlot.toNumber())return{pubkey:t,account:Object(a.a)({},n),info:i}},v=function(t,n,a,i,u,f,m,b,v,p,E,y){var g=c.struct([c.u8("instruction"),s.c("liquidityAmount"),c.u8("maxUtilizationRate")]),O=e.alloc(g.span);g.encode({instruction:d.a.InitReserve,liquidityAmount:new o.a(t),maxUtilizationRate:n},O);var h=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!0,isWritable:!0},{pubkey:E,isSigner:!1,isWritable:!1},{pubkey:r.e,isSigner:!1,isWritable:!1},{pubkey:r.f,isSigner:!1,isWritable:!1},{pubkey:l.b,isSigner:!1,isWritable:!1},{pubkey:y,isSigner:!1,isWritable:!1}];return new r.i({keys:h,programId:l.a,data:O})},p=function(e){var t=Object(u.l)(e.borrowedLiquidityWad).toNumber();return t/(e.availableLiquidity.toNumber()+t)},E=function(e){return((null===e||void 0===e?void 0:e.availableLiquidity.toNumber())||0)+Object(u.l)(null===e||void 0===e?void 0:e.borrowedLiquidityWad).toNumber()},y=function(e){return((null===e||void 0===e?void 0:e.collateralMintSupply.toNumber())||1)/E(e)},g=function(e,t){var n="number"===typeof e?e:e.toNumber();return Math.floor(n/y(t))}}).call(this,n(51).Buffer)},273:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u}));var a=n(61),r=n(1),i=n(49),o=r.struct([i.c("lastUpdateSlot"),i.c("depositedCollateral"),i.a("collateralReserve"),i.b("cumulativeBorrowRateWad"),i.b("borrowAmountWad"),i.a("borrowReserve"),i.a("tokenMint")]),c=function(e){return e.data.length===o.span},l=function(t,n){var r=e.from(n.data),i=o.decode(r);return{pubkey:t,account:Object(a.a)({},n),info:i}},u=function(e){return""}}).call(this,n(51).Buffer)},274:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return m}));var a=n(18),r=n(39),i=n.n(r),o=n(1),c=n(29),l=n(11),u=n(49),s=n(182),d=n(75),f=function(t,n,r,l,s,f,m){var b=o.struct([o.u8("instruction"),u.c("liquidityAmount")]),v=e.alloc(b.span);b.encode({instruction:d.a.DepositReserveLiquidity,liquidityAmount:new i.a(t)},v);var p=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:a.e,isSigner:!1,isWritable:!1},{pubkey:c.b,isSigner:!1,isWritable:!1}];return new a.i({keys:p,programId:c.a,data:v})},m=function(e){var t=Object(l.l)(e.borrowedLiquidityWad).toNumber();return t/(e.availableLiquidity.toNumber()+t)*Object(s.c)(e)}}).call(this,n(51).Buffer)},275:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var a=n(18),r=n(39),i=n.n(r),o=n(1),c=n(29),l=n(49),u=n(75),s=function(t,n,r,s,d,f,m){var b=o.struct([o.u8("instruction"),l.c("collateralAmount")]),v=e.alloc(b.span);b.encode({instruction:u.a.WithdrawReserveLiquidity,collateralAmount:new i.a(t)},v);var p=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:a.e,isSigner:!1,isWritable:!1},{pubkey:c.b,isSigner:!1,isWritable:!1}];return new a.i({keys:p,programId:c.a,data:v})}}).call(this,n(51).Buffer)},283:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(48),r=n(14);function i(e,t,n,i,o,c){var l=r.c;e.push(a.c.createApproveInstruction(l,n,i,o,[],c)),t.push(a.c.createRevokeInstruction(l,n,o,[]))}},284:function(e,t){},289:function(e,t,n){},29:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"d",(function(){return l}));var a=n(18),r=new a.d("So11111111111111111111111111111111111111112"),i=new a.d("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),o=new a.d("TokenLend1ng1111111111111111111111111111111"),c=function(e){"mainnet-beta"===e&&(o=new a.d("2KfJP7pZ6QSpXa26RmsN6kKVQteDEdQmizLSvuyryeiW"))},l=function(){return{token:i,lending:o}}},308:function(e){e.exports=JSON.parse('[{"tokenSymbol":"SOL","mintAddress":"So11111111111111111111111111111111111111112","tokenName":"Solana","icon":"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/solana/info/logo.png"},{"tokenSymbol":"USDC","mintAddress":"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v","tokenName":"USDC","icon":"https://raw.githubusercontent.com/trustwallet/assets/f3ffd0b9ae2165336279ce2f8db1981a55ce30f8/blockchains/ethereum/assets/0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48/logo.png"},{"tokenSymbol":"SRM","mintAddress":"SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt","tokenName":"SRM","icon":"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x476c5E26a75bd202a9683ffD34359C0CC15be0fF/logo.png"}]')},32:function(e,t,n){"use strict";var a=n(271);n.d(t,"b",(function(){return a.a})),n.d(t,"n",(function(){return a.b}));var r=n(272);n.d(t,"e",(function(){return r.a})),n.d(t,"i",(function(){return r.b})),n.d(t,"j",(function(){return r.c})),n.d(t,"m",(function(){return r.d})),n.d(t,"p",(function(){return r.e})),n.d(t,"q",(function(){return r.f}));var i=n(273);n.d(t,"c",(function(){return i.a})),n.d(t,"d",(function(){return i.b})),n.d(t,"l",(function(){return i.c})),n.d(t,"o",(function(){return i.d}));n(75);var o=n(182);n.d(t,"a",(function(){return o.a})),n.d(t,"f",(function(){return o.b})),n.d(t,"g",(function(){return o.c}));var c=n(274);n.d(t,"h",(function(){return c.a})),n.d(t,"k",(function(){return c.b}));var l=n(275);n.d(t,"r",(function(){return l.a}))},323:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var a=n(18),r=n(39),i=n.n(r),o=n(29),c=n(75),l=n(1),u=n(49),s=function(t,n,r,s,d,f,m,b,v,p,E){var y=l.struct([l.u8("instruction"),u.c("liquidityAmount")]),g=e.alloc(y.span);y.encode({instruction:c.a.RepayOblogationLiquidity,liquidityAmount:new i.a(t)},g);var O=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:E,isSigner:!1,isWritable:!1},{pubkey:a.e,isSigner:!1,isWritable:!1},{pubkey:o.b,isSigner:!1,isWritable:!1}];return new a.i({keys:O,programId:o.a,data:g})}}).call(this,n(51).Buffer)},324:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var a=n(18),r=n(39),i=n.n(r),o=n(29),c=n(75),l=n(1),u=n(49),s=function(t,n,r,s,d,f,m,b,v,p,E,y){var g=l.struct([l.u8("instruction"),u.c("liquidityAmount")]),O=e.alloc(g.span);g.encode({instruction:c.a.LiquidateObligation,liquidityAmount:new i.a(t)},O);var h=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!1,isWritable:!1},{pubkey:E,isSigner:!1,isWritable:!1},{pubkey:y,isSigner:!1,isWritable:!1},{pubkey:a.e,isSigner:!1,isWritable:!1},{pubkey:o.b,isSigner:!1,isWritable:!1}];return new a.i({keys:h,programId:o.a,data:O})}}).call(this,n(51).Buffer)},336:function(e,t,n){e.exports=n(590)},341:function(e,t,n){},344:function(e,t){},345:function(e,t){},374:function(e,t){},376:function(e,t){},387:function(e,t){},388:function(e,t){},408:function(e,t){},410:function(e,t){},455:function(e,t){},465:function(e,t){},478:function(e,t,n){},49:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return s}));var a=n(34),r=n(18),i=n(39),o=n.n(i),c=n(1),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"publicKey",t=c.blob(32,e),n=t.decode.bind(t),a=t.encode.bind(t);return t.decode=function(e,t){var a=n(e,t);return new r.d(a)},t.encode=function(e,t,n){return a(e.toBuffer(),t,n)},t},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uint64",n=c.blob(8,t),r=n.decode.bind(n),i=n.encode.bind(n);return n.decode=function(e,t){var n=r(e,t);return new o.a(Object(a.a)(n).reverse().map((function(e){return"00".concat(e.toString(16)).slice(-2)})).join(""),16)},n.encode=function(t,n,a){var r=t.toArray().reverse(),o=e.from(r);if(8!==o.length){var c=e.alloc(8);o.copy(c),o=c}return i(o,n,a)},n},s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uint128",n=c.blob(16,t),r=n.decode.bind(n),i=n.encode.bind(n);return n.decode=function(e,t){var n=r(e,t);return new o.a(Object(a.a)(n).reverse().map((function(e){return"00".concat(e.toString(16)).slice(-2)})).join(""),16)},n.encode=function(t,n,a){var r=t.toArray().reverse(),o=e.from(r);if(16!==o.length){var c=e.alloc(16);o.copy(c),o=c}return i(o,n,a)},n}}).call(this,n(51).Buffer)},54:function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return k})),n.d(t,"c",(function(){return A}));var a=n(19),r=n(0),i=n.n(r),o=n(302),c=n(55),l=n(25),u=n(11),s=n(13),d=n.n(s),f=n(20),m=n(80),b=n(89),v=n(131),p=n(111),E=n(110),y=n(108),g=n.n(y),O=n(18),h=function(e){Object(p.a)(n,e);var t=Object(E.a)(n);function n(e,a){var r;return Object(m.a)(this,n),(r=t.call(this))._publicKey=void 0,r._onProcess=void 0,r._publicKey=null,r._onProcess=!1,r.connect=r.connect.bind(Object(v.a)(r)),r}return Object(b.a)(n,[{key:"signTransaction",value:function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.solong.signTransaction(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=this;this._onProcess||(void 0!==window.solong?(this._onProcess=!0,window.solong.selectAccount().then((function(t){e._publicKey=new O.d(t),e.emit("connect",e._publicKey)})).catch((function(){e.disconnect()})).finally((function(){e._onProcess=!1}))):Object(c.a)({message:"Solong Error",description:"Please install solong wallet from Chrome "}))}},{key:"disconnect",value:function(){this._publicKey&&(this._publicKey=null,this.emit("disconnect"))}},{key:"publicKey",get:function(){return this._publicKey}}]),n}(g.a),w=[{name:"sollet.io",url:"https://www.sollet.io"},{name:"solongwallet.com",url:"http://solongwallet.com"},{name:"solflare.com",url:"https://solflare.com/access-wallet"},{name:"mathwallet.org",url:"https://www.mathwallet.org"}],j=i.a.createContext(null);function k(e){var t,n,s=e.children,d=void 0===s?null:s,f=Object(l.e)().endpoint,m=Object(u.k)("walletProvider","https://www.sollet.io"),b=Object(a.a)(m,2),v=b[0],p=b[1],E=Object(r.useMemo)((function(){return"http://solongwallet.com"===v?new h(v,f):new o.a(v,f)}),[v,f]),y=Object(r.useState)(!1),g=Object(a.a)(y,2),O=g[0],k=g[1];return Object(r.useEffect)((function(){return E.on("connect",(function(){k(!0);var e=E.publicKey.toBase58(),t=e.length>20?"".concat(e.substring(0,7),".....").concat(e.substring(e.length-7,e.length)):e;Object(c.a)({message:"Wallet update",description:"Connected to wallet "+t})})),E.on("disconnect",(function(){k(!1),Object(c.a)({message:"Wallet update",description:"Disconnected from wallet"})})),function(){E.disconnect(),k(!1)}}),[E]),i.a.createElement(j.Provider,{value:{wallet:E,connected:O,providerUrl:v,setProviderUrl:p,providerName:null!==(t=null===(n=w.find((function(e){return e.url===v})))||void 0===n?void 0:n.name)&&void 0!==t?t:v}},d)}function A(){var e=Object(r.useContext)(j);return{connected:e.connected,wallet:e.wallet,providerUrl:e.providerUrl,setProvider:e.setProviderUrl,providerName:e.providerName}}},543:function(e,t,n){},544:function(e,t,n){},545:function(e,t,n){},55:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n.n(a),i=n(233);function o(e){var t=e.message,n=void 0===t?"":t,a=e.description,o=void 0===a?void 0:a,c=e.txid,l=void 0===c?"":c,u=e.type,s=void 0===u?"info":u,d=e.placement,f=void 0===d?"bottomLeft":d;l&&(o=r.a.createElement(r.a.Fragment,null)),i.a[s]({message:r.a.createElement("span",{style:{color:"black"}},n),description:r.a.createElement("span",{style:{color:"black",opacity:.5}},o),placement:f,style:{backgroundColor:"white"}})}},550:function(e,t,n){},551:function(e,t,n){},552:function(e,t,n){},553:function(e,t,n){},554:function(e,t,n){},555:function(e,t,n){},556:function(e,t,n){},557:function(e,t,n){},558:function(e,t,n){},559:function(e,t,n){},560:function(e,t,n){},561:function(e,t,n){},562:function(e,t,n){},563:function(e,t,n){},564:function(e,t,n){},589:function(e,t,n){},590:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(43),o=n.n(i),c=(n(341),n(235),n(40)),l=n(65),u=n(54),s=n(25),d=n(12),f=n(193),m=n(13),b=n.n(m),v=n(20),p=n(34),E=n(19),y={},g=n(11),O=n(83),h=n(18),w=n(194),j=n(61),k=function(e,t){var n=O.Orderbook.LAYOUT.decode(t.data);return{pubkey:e,account:Object(j.a)({},t),info:n}},A=new h.d("EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"),S=function(e,t){var n=O.MARKETS.find((function(t){return t.address.equals(e)})),a=O.Market.getLayout((null===n||void 0===n?void 0:n.programId)||A).decode(t.data),r={pubkey:e,account:Object(j.a)({},t),info:a};return d.d.registerParser(r.info.baseMint,d.b),d.d.registerParser(r.info.quoteMint,d.b),d.d.registerParser(r.info.bids,k),d.d.registerParser(r.info.asks,k),r},T=r.a.createContext(null),N=new w.a;function x(e){var t=e.children,n=void 0===t?null:t,i=Object(s.e)().endpoint,o=Object(a.useMemo)((function(){return new Map}),[]),c=Object(a.useState)([]),l=Object(E.a)(c,2),u=l[0],f=l[1],m=Object(a.useMemo)((function(){return new h.b(i,"recent")}),[i]),g=Object(a.useMemo)((function(){return Object(p.a)(new Set(u).values()).reduce((function(e,t){var n=t,a=O.TOKEN_MINTS.find((function(e){return e.address.toBase58()===n})),r=y[n],i="".concat(null===a||void 0===a?void 0:a.name,"/USDC"),o=O.MARKETS.find((function(e){return e.name===i||e.address.toBase58()===r}));return o&&e.set(n,{marketInfo:o}),e}),new Map)}),[u]);Object(a.useEffect)((function(){var e=0,t=function(){var n=Object(v.a)(b.a.mark((function n(){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,L(m,Object(p.a)(o.keys()));case 2:N.raiseMarketUpdated(new Set(Object(p.a)(g.keys()))),e=window.setTimeout((function(){return t()}),3e4);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return function(){var e=Object(v.a)(b.a.mark((function e(){var n,a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Map,Object(p.a)(g.keys()).forEach((function(e){var t=g.get(e);t&&n.set(t.marketInfo.address.toBase58(),e)})),a=Object(p.a)(g.values()).map((function(e){return e.marketInfo.address.toBase58()})),e.next=5,Object(d.e)(m,a.filter((function(e){return void 0===d.d.get(e)})),"single").then((function(e){var t=e.keys,r=e.array;return a.forEach((function(){})),r.map((function(e,a){var r=t[a],i=n.get(r);if(i){var o=g.get(i);if(o){var c=o.marketInfo.address;d.d.add(c,e,S)}}return e}))}));case 5:return r=new Set,a.forEach((function(e){var t=d.d.get(e);if(t){var n=t;d.d.get(n.info.baseMint)||r.add(n.info.baseMint.toBase58()),d.d.get(n.info.baseMint)||r.add(n.info.quoteMint.toBase58()),r.add(n.info.bids.toBase58()),r.add(n.info.asks.toBase58())}})),e.next=9,L(m,Object(p.a)(r.keys()));case 9:N.raiseMarketUpdated(new Set(Object(p.a)(g.keys()))),t();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){window.clearTimeout(e)}}),[g,o,m]);var w=Object(a.useCallback)((function(e){var t;return B(null===(t=g.get(e))||void 0===t?void 0:t.marketInfo.address.toBase58(),e)}),[g]),j=Object(a.useCallback)((function(e){var t=g.get(e),n=d.d.get((null===t||void 0===t?void 0:t.marketInfo.address.toBase58())||"");if(!n)return function(){};var a=n.info.bids.toBase58(),r=n.info.asks.toBase58();return o.set(a,(o.get(a)||0)+1),o.set(r,(o.get(r)||0)+1),function(){o.set(a,(o.get(a)||0)-1),o.set(r,(o.get(r)||0)-1),Object(p.a)(o.keys()).forEach((function(e){(o.get(e)||0)<=0&&o.delete(e)}))}}),[g,o]),k=Object(a.useCallback)((function(e){var t=Object(p.a)(new Set([].concat(Object(p.a)(u),Object(p.a)(e))).values());u.length!==t.length&&f(t)}),[f,u]);return r.a.createElement(T.Provider,{value:{midPriceInUSD:w,marketEmitter:N,accountsToObserve:o,marketByMint:g,subscribeToMarket:j,precacheMarkets:k}},n)}var M=function(){return Object(a.useContext)(T)},I=function(e){var t=Object(a.useContext)(T),n=t.midPriceInUSD,r=t.subscribeToMarket,i=t.marketEmitter,o=Object(a.useState)(0),c=Object(E.a)(o,2),l=c[0],u=c[1];return Object(a.useEffect)((function(){var t=r(e),a=function(){n&&u(n(e))};a();var o=i.onMarket(a);return function(){t(),o()}}),[n,e,i,r]),{price:l,isBase:1===l}},B=function(e,t){var n,a,r,i,o=O.TOKEN_MINTS.find((function(e){return e.address.toBase58()===t}));if(g.a.has((null===o||void 0===o?void 0:o.name)||""))return 1;if(!e)return 0;var c=d.d.get(e);if(!c)return 0;var l=c.info,u=(null===(n=d.d.get(l.baseMint))||void 0===n?void 0:n.info.decimals)||0,s=(null===(a=d.d.get(l.quoteMint))||void 0===a?void 0:a.info.decimals)||0,f=new O.Market(l,u,s,void 0,l.programId),m=null===(r=d.d.get(l.bids))||void 0===r?void 0:r.info,b=null===(i=d.d.get(l.asks))||void 0===i?void 0:i.info;if(m&&b){var v=new O.Orderbook(f,m.accountFlags,m.slab),p=new O.Orderbook(f,b.accountFlags,b.slab),E=v.getL2(1),y=p.getL2(1);if(E.length>0&&y.length>0)return(E[0][0]+y[0][0])/2}return 0},L=function(){var e=Object(v.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.abrupt("return",Object(d.e)(t,n,"single").then((function(e){var t=e.keys;return e.array.map((function(e,n){var a=t[n];return d.d.add(new h.d(a),e)}))})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=n(29),_=n(32);function q(){return{userAccounts:Object(d.f)().userAccounts}}var R=function(){return d.d.byParser(_.e).map((function(e){return d.d.get(e)})).filter((function(e){return void 0!==e}))};function P(){var e=Object(a.useState)(R()),t=Object(E.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){var e=d.d.emitter.onCache((function(e){e.parser===_.e&&r(R())}));return function(){e()}}),[r]),{reserveAccounts:n}}function D(e){var t=Object(a.useMemo)((function(){return"string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58()}),[e]),n=Object(a.useState)(d.d.get(t||"")),r=Object(E.a)(n,2),i=r[0],o=r[1];return Object(a.useEffect)((function(){var e=d.d.emitter.onCache((function(e){e.id===t&&o(d.d.get(t))}));return function(){e()}}),[t,o]),i}function W(e){var t=Object(s.e)().tokenMap,n="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();return Object(g.h)(t,n)}function U(e,t){var n=Object(a.useMemo)((function(){return"string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58()}),[e]),r=q().userAccounts,i=Object(a.useState)(0),o=Object(E.a)(i,2),c=o[0],l=o[1],u=M(),s=u.marketEmitter,f=u.midPriceInUSD,m=Object(d.g)(n),b=Object(a.useMemo)((function(){return r.filter((function(e){return n===e.info.mint.toBase58()&&(!t||t.equals(e.pubkey))})).sort((function(e,t){return t.info.amount.sub(e.info.amount).toNumber()}))}),[r,n,t]),v=Object(a.useMemo)((function(){return b.reduce((function(e,t){return e+t.info.amount.toNumber()}),0)}),[b]),p=Object(a.useMemo)((function(){return Object(g.f)(v,m)}),[m,v]);return Object(a.useEffect)((function(){var e=function(){l(p*f(n||""))},t=s.onMarket((function(t){e()}));return e(),function(){t()}}),[p,f,s,n,l]),{balance:p,balanceLamports:v,balanceInUSD:c,accounts:b,hasBalance:b.length>0&&p>0}}function F(e,t){var n=Object(d.g)(null===e||void 0===e?void 0:e.collateralMint),r=U(null===e||void 0===e?void 0:e.collateralMint,t),i=r.balanceLamports,o=r.accounts,c=Object(a.useState)(0),l=Object(E.a)(c,2),u=l[0],s=l[1],f=M(),m=f.marketEmitter,b=f.midPriceInUSD,v=Object(a.useMemo)((function(){return e&&K(e,i)}),[i,e]),p=Object(a.useMemo)((function(){return Object(g.f)(v,n)}),[v,n]);return Object(a.useEffect)((function(){var t=function(){var t;s(p*b((null===e||void 0===e||null===(t=e.liquidityMint)||void 0===t?void 0:t.toBase58())||""))},n=m.onMarket((function(n){n.ids.has((null===e||void 0===e?void 0:e.dexMarket.toBase58())||"")&&t()}));return t(),function(){n()}}),[p,b,m,n,s,e]),{balance:p,balanceLamports:v,balanceInUSD:u,mint:null===e||void 0===e?void 0:e.collateralMint,accounts:o,hasBalance:o.length>0&&p>0}}function K(e,t){return Object(_.q)(e)*(t/((null===e||void 0===e?void 0:e.collateralMintSupply.toNumber())||1))}var Q,z=function(){return d.d.byParser(_.d).map((function(e){return d.d.get(e)})).filter((function(e){return void 0!==e}))};function H(){var e=function(){var e=Object(a.useState)(z()),t=Object(E.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){var e=d.d.emitter.onCache((function(e){e.parser===_.d&&r(z())}));return function(){e()}}),[r]),{obligations:n}}().obligations,t=P().reserveAccounts,n=Object(s.e)().tokenMap,r=M(),i=r.marketEmitter,o=r.midPriceInUSD,c=Object(a.useMemo)((function(){return t.reduce((function(e,t){return e.set(t.pubkey.toBase58(),t),e}),new Map)}),[t]),l=Object(a.useCallback)((function(){return 0===c.size?[]:e.map((function(e){return{obligation:e,reserve:c.get(e.info.borrowReserve.toBase58()),collateralReserve:c.get(e.info.collateralReserve.toBase58())}})).filter((function(e){return e.reserve})).filter((function(e){return Object(g.l)(e.obligation.info.borrowAmountWad).toNumber()>0})).map((function(e){var t=e.obligation,a=e.reserve.info,r=e.reserve.info,i=0,c=0,l=0,u=0;if(d.d.get(a.liquidityMint)){var s=d.d.get(e.collateralReserve.info.liquidityMint),m=Object(g.f)(Object(_.j)(t.info.depositedCollateral,e.reserve.info),null===s||void 0===s?void 0:s.info),b=Object(g.l)(t.info.borrowAmountWad).toNumber(),v=function(e,t,n){var a,r,i,o=d.d.get(t.liquidityMint),c=d.d.get(t.collateralMint);if(!o||!c)return 0;var l=d.d.get(n);if(!l)return 0;var u=l.info,s=(null===(a=d.d.get(u.baseMint))||void 0===a?void 0:a.info.decimals)||0,m=(null===(r=d.d.get(u.quoteMint))||void 0===r?void 0:r.info.decimals)||0,b=d.d.get(t.lendingMarket),v=new O.Market(u,s,m,void 0,u.programId),p=b.info.quoteMint.equals(t.liquidityMint)?null===u||void 0===u?void 0:u.bids:null===u||void 0===u?void 0:u.asks,y=null===(i=d.d.get(p))||void 0===i?void 0:i.info;if(!y)return 0;var h=new O.Orderbook(v,y.accountFlags,y.slab),w=0,j=Object(g.f)(e,o.info);if(h){var k,A,S,T=h.getL2(1e3),N=h.isBids?function(e,t){return t/e}:function(e,t){return t*e},x=Object(f.a)(T);try{for(x.s();!(S=x.n()).done;){var M=Object(E.a)(S.value,2);k=M[0];var I=j>(A=M[1])?A:j;if(w+=N(k,I),(j-=I)<=0)break}}catch(B){x.e(B)}finally{x.f()}}return w}(b,e.reserve.info,e.reserve.info.dexMarketOption?e.reserve.info.dexMarket:e.collateralReserve.info.dexMarket),p=e.reserve.info.liquidityMint.toBase58(),y=d.d.get(p);l=Object(g.f)(b,y.info)*o(p),u=m*o((null===s||void 0===s?void 0:s.pubkey.toBase58())||""),i=100*v/m,c=m*e.reserve.info.config.liquidationThreshold/100/v}return{account:t,info:Object(j.a)(Object(j.a)({},t.info),{},{ltv:i,health:c,borrowedInQuote:l,collateralInQuote:u,liquidationThreshold:e.reserve.info.config.liquidationThreshold,repayName:Object(g.h)(n,a.liquidityMint),collateralName:Object(g.h)(n,r.liquidityMint)})}})).sort((function(e,t){return e.info.health-t.info.health}))}),[e,c,o,n]),u=Object(a.useState)(l()),m=Object(E.a)(u,2),b=m[0],v=m[1];return Object(a.useEffect)((function(){var e=i.onMarket((function(){v(l())}));return function(){e()}}),[l,v,i,o]),{obligations:b}}function Y(e){var t="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),n=H().obligations;return Object(a.useMemo)((function(){return n.find((function(e){return e.account.pubkey.toBase58()===t}))}),[n,t])}function $(){var e=q().userAccounts,t=H().obligations,n=Object(a.useMemo)((function(){return e.reduce((function(e,t){var n=t.info.mint.toBase58();return e.set(n,[].concat(Object(p.a)(e.get(n)||[]),[t])),e}),new Map)}),[e]),r=Object(a.useMemo)((function(){return 0===n.size?[]:t.filter((function(e){return void 0!==n.get(e.info.tokenMint.toBase58())})).map((function(e){return{obligation:e,userAccounts:Object(p.a)(n.get(e.info.tokenMint.toBase58()))}})).sort((function(e,t){return t.obligation.info.borrowedInQuote-e.obligation.info.borrowedInQuote}))}),[n,t]);return{userObligations:r,totalInQuote:r.reduce((function(e,t){return e+t.obligation.info.borrowedInQuote}),0)}}function V(e,t){var n=$().userObligations;return{userObligationsByReserve:Object(a.useMemo)((function(){var a="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),r="string"===typeof t?t:null===t||void 0===t?void 0:t.toBase58();return n.filter((function(e){return a&&r?e.obligation.info.borrowReserve.toBase58()===a&&e.obligation.info.collateralReserve.toBase58()===r:a&&e.obligation.info.borrowReserve.toBase58()===a||r&&e.obligation.info.collateralReserve.toBase58()===r}))}),[e,t,n])}}function G(e,t){var n=q().userAccounts,r=P().reserveAccounts,i=Object(a.useState)([]),o=Object(E.a)(i,2),c=o[0],l=o[1],u=M(),f=u.marketEmitter,m=u.midPriceInUSD,b=Object(s.e)().tokenMap,v=Object(a.useMemo)((function(){return r.reduce((function(n,a){var r=a.pubkey.toBase58();return e&&e.has(r)||t&&!t.has(r)||n.set(a.info.collateralMint.toBase58(),a),n}),new Map)}),[r,e,t]);return Object(a.useEffect)((function(){var e=new Set(r.map((function(e){return e.info.dexMarket.toBase58()}))),t=function(){return n.filter((function(e){return v.has(null===e||void 0===e?void 0:e.info.mint.toBase58())})).map((function(e){var t=v.get(null===e||void 0===e?void 0:e.info.mint.toBase58()),n=d.d.get(t.info.collateralMint),a=K(t.info,null===e||void 0===e?void 0:e.info.amount.toNumber()),r=Object(g.f)(a,null===n||void 0===n?void 0:n.info);return{account:e,info:{amount:r,amountInQuote:m(t.info.liquidityMint.toBase58())*r,apy:Object(_.h)(t.info),name:Object(g.h)(b,t.info.liquidityMint)},reserve:t}})).sort((function(e,t){return t.info.amountInQuote-e.info.amountInQuote}))},a=f.onMarket((function(n){Object(p.a)(n.ids.values()).every((function(t){return!e.has(t)}))||l(t())}));return l(t()),function(){a()}}),[n,r,v,b,m,f]),{userDeposits:c,totalInQuote:c.reduce((function(e,t){return e+t.info.amountInQuote}),0)}}!function(e){e[e.AbsoluteValue=0]="AbsoluteValue",e[e.Percent=1]="Percent"}(Q||(Q={}));var J=function(e){var t=Object(a.useState)(""),n=Object(E.a)(t,2),r=n[0],i=n[1],o=Object(a.useState)(0),c=Object(E.a)(o,2),l=c[0],u=c[1],s=Object(a.useState)(Q.Percent),d=Object(E.a)(s,2),f=d[0],m=d[1];return{value:r,setValue:Object(a.useCallback)((function(t){m(Q.AbsoluteValue),i(t),u(e(t))}),[m,i,u,e]),pct:l,setPct:Object(a.useCallback)((function(t){m(Q.Percent),u(t),i(e(t))}),[m,i,u,e]),type:f}};function X(e){var t="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),n=Object(a.useState)(d.d.get(t||"")),r=Object(E.a)(n,2),i=r[0],o=r[1];return Object(a.useEffect)((function(){var e=d.d.emitter.onCache((function(e){e.id===t&&o(d.d.get(t))}));return function(){e()}}),[t,o]),i}function Z(e){var t,n,r,i=Object(a.useMemo)((function(){return"string"===typeof e?e:e.toBase58()}),[e]),o=D(i),c=null===o||void 0===o?void 0:o.info.liquidityMint,l=null===c||void 0===c?void 0:c.toBase58(),u=X(null===o||void 0===o?void 0:o.info.lendingMarket),s=null===u||void 0===u||null===(t=u.info)||void 0===t||null===(n=t.quoteMint)||void 0===n?void 0:n.toBase58(),d=l!==s,f=Object(a.useMemo)((function(){return new Set([i])}),[i]),m=Object(a.useMemo)((function(){var e=R().find((function(e){return e.info.liquidityMint.toBase58()===s}));return d&&e?new Set([e.pubkey.toBase58()]):void 0}),[d,s]),b=G(f,m),v=b.totalInQuote,p=I(l).price;return l===(null===u||void 0===u||null===(r=u.info.quoteMint)||void 0===r?void 0:r.toBase58())?{borrowingPower:v,totalInQuote:v}:{borrowingPower:v/p,totalInQuote:v}}var ee=r.a.createContext(null);function te(e){var t=e.children,n=void 0===t?null:t,a=ne().accounts;return r.a.createElement(ee.Provider,{value:{accounts:a}},n)}var ne=function(){var e=Object(s.d)(),t=Object(a.useState)([]),n=Object(E.a)(t,2),r=n[0],i=n[1],o=P().reserveAccounts,c=M().precacheMarkets,l=Object(a.useCallback)((function(e){return Object(_.p)(e.account)?d.d.add(e.pubkey.toBase58(),e.account,_.e):Object(_.n)(e.account)?d.d.add(e.pubkey.toBase58(),e.account,_.b):Object(_.o)(e.account)?d.d.add(e.pubkey.toBase58(),e.account,_.d):void 0}),[]);return Object(a.useEffect)((function(){o.length>0&&c(o.map((function(e){return e.info.liquidityMint.toBase58()})))}),[o,c]),Object(a.useEffect)((function(){i([]);var t=function(){var t=Object(v.a)(b.a.mark((function t(){var n,a,r,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getProgramAccounts(C.a);case 2:return n=t.sent,a=n.map(l).filter((function(e){return void 0!==e})),r=a.filter((function(e){return void 0!==(null===e||void 0===e?void 0:e.info).lendingMarket})).map((function(e){return e})),i=Object(p.a)(r.map((function(e){return[d.d.registerParser(null===e||void 0===e?void 0:e.info.collateralMint.toBase58(),d.b),d.d.registerParser(null===e||void 0===e?void 0:e.info.liquidityMint.toBase58(),d.b),d.d.registerParser((null===e||void 0===e?void 0:e.info.dexMarketOption)?null===e||void 0===e?void 0:e.info.dexMarket.toBase58():"",S)].filter((function(e){return e}))}))).flat(),t.next=8,Object(d.e)(e,i,"single").then((function(e){var t=e.keys;return e.array.map((function(e,n){var a=t[n];return d.d.add(a,e),e}))}));case 8:return n.map(l).filter((function(e){return void 0!==e})),t.abrupt("return",a);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Promise.all([t()]).then((function(e){i(e.flat())}))}),[e,l]),Object(a.useEffect)((function(){var t=e.onProgramAccountChange(C.a,function(){var e=Object(v.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.accountId,a={pubkey:new h.d(n),account:t.accountInfo},l(a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"singleGossip");return function(){e.removeProgramAccountChangeListener(t)}}),[e,r,l]),{accounts:r}},ae=n(87),re=n(598),ie=n(599),oe=n(600),ce=n(601),le=n(602),ue=n(603),se=n(604),de=n(326),fe=n(125),me=n(333),be=n(309),ve=n.n(be),pe=n(27),Ee=n.n(pe),ye=(n(478),function(e){var t,n=e.style,i=e.className,o="string"===typeof e.address?e.address:null===(t=e.address)||void 0===t?void 0:t.toBase58(),c=Object(a.useRef)();return Object(a.useEffect)((function(){o&&c.current&&(c.current.innerHTML="",c.current.className=i||"",c.current.appendChild(ve()((null===n||void 0===n?void 0:n.width)||16,parseInt(Ee.a.decode(o).toString("hex").slice(5,15),16))))}),[o,n,i]),r.a.createElement("div",{className:"identicon-wrapper",ref:c,style:e.style})}),ge=function(e){var t,n=Object(u.c)().wallet,a=Object(d.h)().account;return n&&n.publicKey?r.a.createElement("div",{className:"wallet-wrapper"},r.a.createElement("span",null,g.d.format(((null===a||void 0===a?void 0:a.lamports)||0)/h.c)," SOL"),r.a.createElement("div",{className:"wallet-key"},Object(g.i)("".concat(n.publicKey)),r.a.createElement(ye,{address:null===(t=n.publicKey)||void 0===t?void 0:t.toBase58(),style:{marginLeft:"0.5rem",display:"flex"}}))):null},Oe=n(597),he=n(593),we=function(){var e=Object(u.c)(),t=e.providerUrl,n=e.setProvider,a=Object(s.e)(),i=a.endpoint,o=a.setEndpoint;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"grid"}},"Network:"," ",r.a.createElement(he.a,{onSelect:o,value:i,style:{marginRight:8}},s.b.map((function(e){var t=e.name,n=e.endpoint;return r.a.createElement(he.a.Option,{value:n,key:n},t)})))),r.a.createElement("div",{style:{display:"grid"}},"Wallet:"," ",r.a.createElement(he.a,{onSelect:n,value:t},u.a.map((function(e){var t=e.name,n=e.url;return r.a.createElement(he.a.Option,{value:n,key:n},t)})))))},je=n(14),ke=function(e){var t=Object(u.c)(),n=t.connected,a=t.wallet;return r.a.createElement("div",{className:"App-Bar-right"},r.a.createElement(ge,null),r.a.createElement("div",null,!n&&r.a.createElement(fe.a,{type:"text",size:"large",onClick:n?a.disconnect:a.connect,style:{color:"#2abdd2"}},je.b.CONNECT_BUTTON),n&&r.a.createElement(me.a,{placement:"bottomRight",title:je.b.WALLET_TOOLTIP,trigger:"click"})),r.a.createElement(me.a,{placement:"topRight",title:je.b.SETTINGS_TOOLTIP,content:r.a.createElement(we,null),trigger:"click"},r.a.createElement(fe.a,{shape:"circle",size:"large",type:"text",icon:r.a.createElement(Oe.a,null)})),e.right)},Ae=function(e){var t=Object(s.e)().env,n=Object(l.g)(),a={"/dashboard":"2","/deposit":"3","/borrow":"4","/liquidate":"5","/faucet":"6"},i=a[Object(p.a)(Object.keys(a)).find((function(e){return n.pathname.startsWith(e)}))||""]||"1";return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"Banner"},r.a.createElement("div",{className:"Banner-description"},je.b.AUDIT_WARNING)),r.a.createElement(de.a,{title:je.b.APP_TITLE,footerRender:function(){return r.a.createElement("div",{className:"footer",title:je.b.FOOTER},je.b.FOOTER)},navTheme:"light",headerTheme:"light",theme:"light",layout:"mix",fixSiderbar:!0,primaryColor:"#d83aeb",logo:r.a.createElement("div",{className:"App-logo"}),rightContentRender:function(){return r.a.createElement(ke,null)},links:[r.a.createElement("div",{title:"Fork"},r.a.createElement(re.a,null))],menuContentRender:function(){return r.a.createElement(ae.a,{theme:"light",defaultSelectedKeys:[i],mode:"inline"},r.a.createElement(ae.a.Item,{key:"1",icon:r.a.createElement(ie.a,null)},r.a.createElement(c.b,{to:{pathname:"/"}},je.b.MENU_HOME)),r.a.createElement(ae.a.Item,{key:"2",icon:r.a.createElement(oe.a,null)},r.a.createElement(c.b,{to:{pathname:"/dashboard"}},je.b.MENU_DASHBOARD)),r.a.createElement(ae.a.Item,{key:"3",icon:r.a.createElement(ce.a,null)},r.a.createElement(c.b,{to:{pathname:"/deposit"}},je.b.MENU_DEPOSIT)),r.a.createElement(ae.a.Item,{key:"4",icon:r.a.createElement(le.a,null)},r.a.createElement(c.b,{to:{pathname:"/borrow"}},je.b.MENU_BORROW)),r.a.createElement(ae.a.Item,{key:"5",icon:r.a.createElement(ue.a,null)},r.a.createElement(c.b,{to:{pathname:"/liquidate"}},je.b.MENU_LIQUIDATE)),"mainnet-beta"!==t&&r.a.createElement(ae.a.Item,{key:"6",icon:r.a.createElement(se.a,null)},r.a.createElement(c.b,{to:{pathname:"/faucet"}},je.b.MENU_FAUCET)))}},e.children))},Se=n(153),Te=n(94),Ne=n(596),xe=n(594),Me=n(64),Ie=function(e){var t,n,a=Object(s.e)().tokenMap,i=Object(g.g)(a,e.mintAddress);return i?r.a.createElement("img",{alt:"Token icon",className:e.className,key:i,width:(null===(t=e.style)||void 0===t?void 0:t.width)||"20",height:(null===(n=e.style)||void 0===n?void 0:n.height)||"20",src:i,style:Object(j.a)({marginRight:"0.5rem",marginTop:"0.11rem",borderRadius:"10rem",backgroundColor:"white",backgroundClip:"padding-box"},e.style)}):r.a.createElement(ye,{address:e.mintAddress,style:Object(j.a)({marginRight:"0.5rem",width:20,height:20,marginTop:2},e.style)})},Be=function(e){var t,n,i=W(e.reserve.liquidityMint),o=Object(d.g)(e.reserve.liquidityMint),l=Object(g.f)(e.reserve.availableLiquidity.toNumber(),o),u=Object(a.useMemo)((function(){return Object(g.f)(Object(g.l)(e.reserve.borrowedLiquidityWad),o)}),[e.reserve,o]),s=Object(a.useMemo)((function(){return Object(_.g)(e.reserve)}),[e.reserve]),f=Object(a.useMemo)((function(){return Object(_.h)(e.reserve)}),[e.reserve]),m=l+u;return r.a.createElement(c.b,{to:"/reserve/".concat(e.address.toBase58())},r.a.createElement("div",{className:"home-item"},r.a.createElement("span",{style:{display:"flex"}},r.a.createElement(Ie,{mintAddress:e.reserve.liquidityMint}),i),r.a.createElement("div",{title:m.toString()},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("em",null,g.d.format(m))," ",i),r.a.createElement("div",{className:"dashboard-amount-quote"},"$",g.d.format(null===(t=e.item)||void 0===t?void 0:t.marketSize)))),r.a.createElement("div",{title:u.toString()},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("em",null,g.d.format(u))," ",i),r.a.createElement("div",{className:"dashboard-amount-quote"},"$",g.d.format(null===(n=e.item)||void 0===n?void 0:n.borrowed)))),r.a.createElement("div",{title:f.toString()},g.e.format(f)),r.a.createElement("div",{title:s.toString()},g.e.format(s))))},Le=function(e){var t=["#003f5c","#2f4b7c","#665191","#a05195","#d45087","#f95d6a","#ff7c43","#ffa600"].reverse();return r.a.createElement(xe.a,{title:e.title,valueRender:function(){return r.a.createElement("div",{style:{width:"100%",height:37,display:"flex",backgroundColor:"lightgrey",fontSize:12,lineHeight:"37px"}},e.items.map((function(n,a){return r.a.createElement("div",{key:e.name(n),title:e.name(n),style:{overflow:"hidden",width:"".concat(100*e.getPct(n),"%"),backgroundColor:e.color&&e.color(n)||t[a%e.items.length]}},e.name(n))})))}})},Ce=(n(543),function(){var e=P().reserveAccounts,t=M(),n=t.marketEmitter,i=t.midPriceInUSD,o=Object(s.e)().tokenMap,c=Object(a.useState)({marketSize:0,borrowed:0,lentOutPct:0,items:[]}),l=Object(E.a)(c,2),u=l[0],f=l[1];return Object(a.useEffect)((function(){var t=function(){var t={marketSize:0,borrowed:0,lentOutPct:0,items:[]};e.forEach((function(e){var n,a=Object(Me.reserveMarketCap)(e.info),r=d.d.get(e.info.liquidityMint.toBase58());if(r){var c={key:e.pubkey.toBase58(),marketSize:Object(g.f)(a,null===r||void 0===r?void 0:r.info)*i(null===r||void 0===r?void 0:r.pubkey.toBase58()),borrowed:Object(g.f)(Object(g.l)(null===(n=e.info)||void 0===n?void 0:n.borrowedLiquidityWad).toNumber(),r.info),name:Object(g.h)(o,e.info.liquidityMint.toBase58())};t.items.push(c),t.marketSize=t.marketSize+c.marketSize,t.borrowed=t.borrowed+c.borrowed}})),t.lentOutPct=t.borrowed/t.marketSize,t.lentOutPct=Number.isFinite(t.lentOutPct)?t.lentOutPct:0,t.items=t.items.sort((function(e,t){return t.marketSize-e.marketSize})),f(t)},a=n.onMarket((function(){t()}));return t(),function(){a()}}),[n,i,f,e,o]),r.a.createElement("div",{className:"flexColumn"},r.a.createElement(Se.a,{gutter:je.a,className:"home-info-row"},r.a.createElement(Te.a,{xs:24,xl:5},r.a.createElement(Ne.a,null,r.a.createElement(xe.a,{title:"Current market size",value:u.marketSize,precision:2,valueStyle:{color:"#3f8600"},prefix:"$"}))),r.a.createElement(Te.a,{xs:24,xl:5},r.a.createElement(Ne.a,null,r.a.createElement(xe.a,{title:"Total borrowed",value:u.borrowed,precision:2,prefix:"$"}))),r.a.createElement(Te.a,{xs:24,xl:5},r.a.createElement(Ne.a,null,r.a.createElement(xe.a,{title:"% Lent out",value:100*u.lentOutPct,precision:2,suffix:"%"}))),r.a.createElement(Te.a,{xs:24,xl:9},r.a.createElement(Ne.a,null,r.a.createElement(Le,{title:"Market composition",name:function(e){return e.name},getPct:function(e){return e.marketSize/u.marketSize},items:u.items})))),r.a.createElement(Ne.a,null,r.a.createElement("div",{className:"home-item home-header"},r.a.createElement("div",null,je.b.TABLE_TITLE_ASSET),r.a.createElement("div",null,je.b.TABLE_TITLE_MARKET_SIZE),r.a.createElement("div",null,je.b.TABLE_TITLE_TOTAL_BORROWED),r.a.createElement("div",null,je.b.TABLE_TITLE_DEPOSIT_APY),r.a.createElement("div",null,je.b.TABLE_TITLE_BORROW_APY)),e.map((function(e){return r.a.createElement(Be,{reserve:e.info,address:e.pubkey,item:u.items.find((function(t){return t.key===e.pubkey.toBase58()}))})}))))}),_e=function(e){var t=W(e.reserve.liquidityMint),n=I(e.reserve.liquidityMint.toBase58()).price,a=Z(e.address),i=a.borrowingPower,o=a.totalInQuote,l=Object(_.g)(e.reserve);return r.a.createElement(c.b,{to:"/borrow/".concat(e.address.toBase58())},r.a.createElement("div",{className:"borrow-item"},r.a.createElement("span",{style:{display:"flex"}},r.a.createElement(Ie,{mintAddress:e.reserve.liquidityMint}),t),r.a.createElement("div",null,"$",g.d.format(n)),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("em",null,g.d.format(i))," ",t),r.a.createElement("div",{className:"dashboard-amount-quote"},"$",g.d.format(o)))),r.a.createElement("div",null,g.e.format(l)),r.a.createElement("div",null,r.a.createElement(fe.a,{type:"primary"},r.a.createElement("span",null,je.b.BORROW_ACTION)))))},qe=(n(544),function(){var e=P().reserveAccounts;return r.a.createElement("div",{className:"flexColumn"},r.a.createElement(Ne.a,null,r.a.createElement("div",{className:"borrow-item deposit-header"},r.a.createElement("div",null,je.b.TABLE_TITLE_ASSET),r.a.createElement("div",null,"Serum Dex Price"),r.a.createElement("div",null,je.b.TABLE_TITLE_MAX_BORROW),r.a.createElement("div",null,je.b.TABLE_TITLE_APY),r.a.createElement("div",null)),e.map((function(e){return r.a.createElement(_e,{reserve:e.info,address:e.pubkey})}))))}),Re=(n(545),n(80)),Pe=n(89),De=n(111),We=n(110),Ue=n(595),Fe=function(e){Object(De.a)(n,e);var t=Object(We.a)(n);function n(){var e;Object(Re.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onChange=function(t){var n=t.target.value;(/^-?\d*(\.\d*)?$/.test(n)||""===n||"-"===n)&&e.props.onChange(n)},e.onBlur=function(){var t=e.props,n=t.value,a=t.onBlur,r=t.onChange,i=n;"."!==n.charAt(n.length-1)&&"-"!==n||(i=n.slice(0,-1)),(n.startsWith(".")||n.startsWith("-."))&&(i=i.replace(".","0.")),r(i.replace(/0*(\d+)/,"$1")),a&&a()},e}return Object(Pe.a)(n,[{key:"render",value:function(){return r.a.createElement(Ue.a,Object.assign({},this.props,{onChange:this.onChange,onBlur:this.onBlur,maxLength:25}))}}]),n}(r.a.Component),Ke=n(55),Qe=n(48);function ze(e,t,n,a,r,i){if(!n.info.isNative)return n.pubkey;var o=Ve(e,a,r,i);return e.push(Qe.c.createInitAccountInstruction(C.b,C.c,o,a)),t.push(Qe.c.createCloseAccountInstruction(C.b,o,a,a,[])),o}function He(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:65528,r=new h.a;return e.push(h.g.createAccount({fromPubkey:t,newAccountPubkey:r.publicKey,lamports:0,space:a,programId:C.b})),n.push(r),r.publicKey}function Ye(e,t,n,a){var r=new h.a;return e.push(h.g.createAccount({fromPubkey:t,newAccountPubkey:r.publicKey,lamports:n,space:Me.LendingObligationLayout.span,programId:C.a})),a.push(r),r.publicKey}function $e(e,t,n,a){var r=new h.a;return e.push(h.g.createAccount({fromPubkey:t,newAccountPubkey:r.publicKey,lamports:n,space:Qe.b.span,programId:C.b})),a.push(r),r.publicKey}function Ve(e,t,n,a){var r=new h.a;return e.push(h.g.createAccount({fromPubkey:t,newAccountPubkey:r.publicKey,lamports:n,space:Qe.a.span,programId:C.b})),a.push(r),r.publicKey}function Ge(e,t,n,a,r,i,o,c){var l,u=i.toBase58(),s=d.d.byParser(d.c).map((function(e){return d.d.get(e)})).find((function(e){return void 0!==e&&e.info.mint.toBase58()===u&&e.info.owner.toBase58()===t.toBase58()&&(void 0===c||!c.has(e.pubkey.toBase58()))})),f=u===C.c.toBase58();return s&&!f?l=s.pubkey:(l=function(e,t,n,a,r,i){var o=Ve(e,t,n,i);return e.push(Qe.c.createInitAccountInstruction(C.b,a,o,r)),o}(n,e,r,i,t,o),f&&a.push(Qe.c.createCloseAccountInstruction(C.b,l,e,e,[]))),l}var Je,Xe=function(){var e=Object(v.a)(b.a.mark((function e(t,n,a,r,i,o,c,l,u){var f,m,v,y,O,w,j,k,A,S,T,N,x,M,I,B,L,_,q,R,P,D,W,U;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(Ke.a)({message:"Borrowing funds...",description:"Please review transactions to approve.",type:"warn"}),f=[],m=[],v=[],e.next=6,t.getMinimumBalanceForRentExemption(Qe.a.span);case 6:if(y=e.sent,!l){e.next=11;break}e.t0=l.pubkey,e.next=19;break;case 11:return e.t1=Ye,e.t2=m,e.t3=n.publicKey,e.next=16,t.getMinimumBalanceForRentExemption(Me.LendingObligationLayout.span);case 16:e.t4=e.sent,e.t5=f,e.t0=(0,e.t1)(e.t2,e.t3,e.t4,e.t5);case 19:if(O=e.t0,!l){e.next=24;break}e.t6=l.info.tokenMint,e.next=32;break;case 24:return e.t7=$e,e.t8=m,e.t9=n.publicKey,e.next=29,t.getMinimumBalanceForRentExemption(Qe.b.span);case 29:e.t10=e.sent,e.t11=f,e.t6=(0,e.t7)(e.t8,e.t9,e.t10,e.t11);case 32:return w=e.t6,j=u||Ve(m,n.publicKey,y,f),e.next=36,Ge(n.publicKey,n.publicKey,m,v,y,o.info.liquidityMint,f);case 36:if(k=e.sent,!(m.length>0)){e.next=42;break}return e.next=40,Object(s.c)(t,n,m,Object(p.a)(f));case 40:A=e.sent,Object(Ke.a)({message:"Obligation accounts created",description:"Transaction ".concat(A),type:"success"});case 42:return Object(Ke.a)({message:"Borrowing funds...",description:"Please review transactions to approve.",type:"warn"}),f=[],m=[],v=[],e.next=48,h.d.findProgramAddress([c.info.lendingMarket.toBuffer()],C.a);case 48:if(S=e.sent,T=Object(E.a)(S,1),N=T[0],x=0,M=0,i!==Me.BorrowAmountType.LiquidityBorrowAmount){e.next=62;break}return I=a.info.amount.toNumber(),M=I-y,e.next=58,d.d.query(t,o.info.liquidityMint,d.b);case 58:B=e.sent,x=Object(g.j)(r,null===B||void 0===B?void 0:B.info),e.next=68;break;case 62:if(i!==Me.BorrowAmountType.CollateralDepositAmount){e.next=68;break}return e.next=65,d.d.query(t,c.info.collateralMint,d.b);case 65:L=e.sent,x=Object(g.j)(r,null===L||void 0===L?void 0:L.info),M=x;case 68:if(_=ze(m,v,a,n.publicKey,M+y,f),Object(Me.approve)(m,v,_,N,n.publicKey,M),q=o.info.dexMarketOption?o.info.dexMarket:c.info.dexMarket,R=d.d.get(q)){e.next=74;break}throw new Error("Dex market doesn't exist.");case 74:return P=d.d.get(c.info.lendingMarket),D=P.info.quoteMint.equals(c.info.liquidityMint)?null===R||void 0===R?void 0:R.info.bids:null===R||void 0===R?void 0:R.info.asks,W=He(m,n.publicKey,f),m.push(Object(Me.borrowInstruction)(x,i,_,k,c.pubkey,c.info.collateralSupply,o.pubkey,o.info.liquiditySupply,O,w,j,n.publicKey,N,q,D,W)),e.prev=78,e.next=81,Object(s.c)(t,n,m.concat(v),f,!0);case 81:U=e.sent,Object(Ke.a)({message:"Funds borrowed.",type:"success",description:"Transaction - ".concat(U)}),e.next=88;break;case 85:throw e.prev=85,e.t12=e.catch(78),new Error;case 88:case"end":return e.stop()}}),e,null,[[78,85]])})));return function(t,n,a,r,i,o,c,l,u){return e.apply(this,arguments)}}(),Ze=function(){var e=Object(v.a)(b.a.mark((function e(t,n,a,r,i,o){var c,l,u,d,f,m,v,p,y,g,O;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(Ke.a)({message:"Depositing funds...",description:"Please review transactions to approve.",type:"warn"}),c=!0,l=[],u=[],d=[],e.next=7,i.getMinimumBalanceForRentExemption(Qe.a.span);case 7:return f=e.sent,e.next=10,h.d.findProgramAddress([a.lendingMarket.toBuffer()],C.a);case 10:if(m=e.sent,v=Object(E.a)(m,1),p=v[0],y=ze(u,d,t,o.publicKey,n+f,l),Object(Me.approve)(u,d,y,p,o.publicKey,n),!c){e.next=21;break}return e.next=18,Ge(o.publicKey,o.publicKey,u,d,f,a.collateralMint,l);case 18:g=e.sent,e.next=22;break;case 21:g=Ve(u,o.publicKey,f,l);case 22:return c?u.push(Object(_.k)(n,y,g,p,r,a.liquiditySupply,a.collateralMint)):(80,u.push(Object(_.m)(n,80,y,g,r,a.liquidityMint,a.liquiditySupply,a.collateralMint,a.collateralSupply,a.lendingMarket,p,a.dexMarket))),e.prev=23,e.next=26,Object(s.c)(i,o,u.concat(d),l,!0);case 26:O=e.sent,Object(Ke.a)({message:"Funds deposited.",type:"success",description:"Transaction - ".concat(O)}),e.next=33;break;case 30:throw e.prev=30,e.t0=e.catch(23),new Error;case 33:case"end":return e.stop()}}),e,null,[[23,30]])})));return function(t,n,a,r,i,o){return e.apply(this,arguments)}}(),et=n(323),tt=function(){var e=Object(v.a)(b.a.mark((function e(t,n,a,r,i,o,c,l){var u,d,f,m,v,p,y,g,O,w;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(Ke.a)({message:"Repaing funds...",description:"Please review transactions to approve.",type:"warn"}),u=[],d=[],f=[],e.next=6,c.getMinimumBalanceForRentExemption(Qe.a.span);case 6:return m=e.sent,e.next=9,h.d.findProgramAddress([i.info.lendingMarket.toBuffer()],C.a);case 9:return v=e.sent,p=Object(E.a)(v,1),y=p[0],g=t.pubkey,Object(Me.approve)(d,f,g,y,l.publicKey,n),e.next=16,Ge(l.publicKey,l.publicKey,d,f,m,o.info.collateralMint,u);case 16:return O=e.sent,Object(Me.approve)(d,f,r.pubkey,y,l.publicKey,r.info.amount.toNumber()),d.push(Object(et.a)(n,g,O,i.pubkey,i.info.liquiditySupply,o.pubkey,o.info.collateralSupply,a.pubkey,a.info.tokenMint,r.pubkey,y)),e.next=21,Object(s.c)(c,l,d.concat(f),u,!0);case 21:w=e.sent,Object(Ke.a)({message:"Funds repaid.",type:"success",description:"Transaction - ".concat(w)});case 23:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i,o,c,l){return e.apply(this,arguments)}}(),nt=function(){var e=Object(v.a)(b.a.mark((function e(t,n,a,r,i,o){var c,l,u,d,f,m,v,p,y,g;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(Ke.a)({message:"Withdrawing funds...",description:"Please review transactions to approve.",type:"warn"}),c=[],l=[],u=[],e.next=6,i.getMinimumBalanceForRentExemption(Qe.a.span);case 6:return d=e.sent,e.next=9,h.d.findProgramAddress([a.lendingMarket.toBuffer()],C.a);case 9:return f=e.sent,m=Object(E.a)(f,1),v=m[0],p=t.pubkey,Object(Me.approve)(l,u,p,v,o.publicKey,n),e.next=16,Ge(o.publicKey,o.publicKey,l,u,d,a.liquidityMint,c);case 16:return y=e.sent,l.push(Object(_.r)(n,p,y,r,a.collateralMint,a.liquiditySupply,v)),e.prev=18,e.next=21,Object(s.c)(i,o,l.concat(u),c,!0);case 21:g=e.sent,Object(Ke.a)({message:"Funds deposited.",type:"success",description:"Transaction - ".concat(g)}),e.next=27;break;case 25:e.prev=25,e.t0=e.catch(18);case 27:case"end":return e.stop()}}),e,null,[[18,25]])})));return function(t,n,a,r,i,o){return e.apply(this,arguments)}}(),at=n(324),rt=function(){var e=Object(v.a)(b.a.mark((function e(t,n,a,r,i,o,c){var l,u,f,m,v,p,y,g,O,w,j,k,A,S,T;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(Ke.a)({message:"Repaing funds...",description:"Please review transactions to approve.",type:"warn"}),l=[],u=[],f=[],e.next=6,t.getMinimumBalanceForRentExemption(Qe.a.span);case 6:return m=e.sent,e.next=9,h.d.findProgramAddress([o.info.lendingMarket.toBuffer()],C.a);case 9:return v=e.sent,p=Object(E.a)(v,1),y=p[0],g=ze(u,f,a,n.publicKey,r+m,l),Object(Me.approve)(u,f,g,y,n.publicKey,r),e.next=16,Ge(n.publicKey,n.publicKey,u,f,m,c.info.collateralMint,l);case 16:if(O=e.sent,w=o.info.dexMarketOption?o.info.dexMarket:c.info.dexMarket,j=d.d.get(w)){e.next=21;break}throw new Error("Dex market doesn't exist.");case 21:return k=d.d.get(c.info.lendingMarket),A=k.info.quoteMint.equals(o.info.liquidityMint)?null===j||void 0===j?void 0:j.info.bids:null===j||void 0===j?void 0:j.info.asks,console.log(w.toBase58()),S=He(u,n.publicKey,l),u.push(Object(at.a)(r,g,O,o.pubkey,o.info.liquiditySupply,c.pubkey,c.info.collateralSupply,i.pubkey,y,w,A,S)),e.next=28,Object(s.c)(t,n,u.concat(f),l,!0);case 28:T=e.sent,Object(Ke.a)({message:"Funds liquidated.",type:"success",description:"Transaction - ".concat(T)});case 30:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i,o,c){return e.apply(this,arguments)}}(),it=he.a.Option,ot=function(e){var t=e.mint,n=e.name,a=e.userDeposit;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(Ie,{mintAddress:t}),n,r.a.createElement("span",{className:"token-balance"},"\xa0"," ",a?Object(g.c)(a.info.amount):"--")))},ct=function(e){var t,n,a,i,o,c=P().reserveAccounts,l=Object(s.e)().tokenMap,u=G().userDeposits,f=d.d.get(null===(t=e.reserve)||void 0===t?void 0:t.lendingMarket),m=(null===(n=e.reserve)||void 0===n||null===(a=n.liquidityMint)||void 0===a?void 0:a.toBase58())!==(null===f||void 0===f||null===(i=f.info)||void 0===i||null===(o=i.quoteMint)||void 0===o?void 0:o.toBase58());return r.a.createElement(he.a,{size:"large",showSearch:!0,style:{minWidth:300,margin:"5px 0px"},placeholder:"Collateral",value:e.collateralReserve,disabled:e.disabled,defaultValue:e.collateralReserve,onChange:function(t){e.onCollateralReserve&&e.onCollateralReserve(t)},filterOption:function(e,t){var n;return(null===t||void 0===t||null===(n=t.name)||void 0===n?void 0:n.toLowerCase().indexOf(e.toLowerCase()))>=0}},c.filter((function(t){return t.info!==e.reserve})).filter((function(e){return!m||e.info.liquidityMint.equals(f.info.quoteMint)})).map((function(e){var t=e.info.liquidityMint.toBase58(),n=e.pubkey.toBase58(),a=Object(g.h)(l,t);return r.a.createElement(it,{key:n,value:n,name:a,title:n},r.a.createElement(ot,{reserve:e,userDeposit:u.find((function(e){return e.reserve.pubkey.toBase58()===n})),mint:t,name:a}))})))},lt=(n(550),n(289),function(e){return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center"}},r.a.createElement("h2",null,"Congratulations!"),r.a.createElement("div",null,"Your action has been successfully executed"),r.a.createElement("div",{className:"success-icon"}),r.a.createElement(c.b,{to:"/dashboard"},r.a.createElement(fe.a,{type:"primary"},je.b.DASHBOARD_ACTION)),r.a.createElement(fe.a,{type:"text",onClick:e.onClose},je.b.GO_BACK_ACTION))}),ut=function(){var e=Object(l.f)();return r.a.createElement(fe.a,{type:"text",onClick:e.goBack},je.b.GO_BACK_ACTION)},st=n(200),dt=function(e){var t=Object(u.c)(),n=t.wallet,a=t.connected,i=e.onClick,o=(e.children,e.disabled),c=Object(st.a)(e,["onClick","children","disabled"]);return r.a.createElement(fe.a,Object.assign({},c,{onClick:a?i:n.connect,disabled:a&&o}),a?e.children:je.b.CONNECT_LABEL)},ft=function(e){var t=Object(s.d)(),n=Object(u.c)().wallet,i=Object(a.useState)(""),o=Object(E.a)(i,2),c=o[0],l=o[1],f=Object(a.useState)(!1),m=Object(E.a)(f,2),p=m[0],y=m[1],g=Object(a.useState)(!1),O=Object(E.a)(g,2),h=O[0],w=O[1],j=e.reserve,k=Object(a.useState)(),A=Object(E.a)(k,2),S=A[0],T=A[1],N=Object(a.useMemo)((function(){var e=d.d.byParser(Me.LendingReserveParser).find((function(e){return e===S}))||"";return d.d.get(e)}),[S]),x=W(null===j||void 0===j?void 0:j.info.liquidityMint),M=U(null===N||void 0===N?void 0:N.info.collateralMint).accounts,I=V(null===j||void 0===j?void 0:j.pubkey,null===N||void 0===N?void 0:N.pubkey).userObligationsByReserve,B=Object(a.useCallback)((function(){N&&(y(!0),Object(v.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xe(t,n,M[0],parseFloat(c),Me.BorrowAmountType.LiquidityBorrowAmount,j,N,I.length>0?I[0].obligation.account:void 0,I.length>0?I[0].userAccounts[0].pubkey:void 0);case 3:l(""),w(!0),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:return e.prev=9,y(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,7,9,12]])})))())}),[t,n,c,N,j,M,I,y,w]);return r.a.createElement(Ne.a,{className:e.className,bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},h?r.a.createElement(lt,{onClose:function(){return w(!1)}}):r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},r.a.createElement("div",{className:"borrow-input-title"},je.b.SELECT_COLLATERAL),r.a.createElement(ct,{reserve:j.info,collateralReserve:S,onCollateralReserve:T}),r.a.createElement("div",{className:"borrow-input-title"},je.b.BORROW_QUESTION),r.a.createElement("div",{className:"token-input"},r.a.createElement(Ie,{mintAddress:null===j||void 0===j?void 0:j.info.liquidityMint}),r.a.createElement(Fe,{value:c,onChange:function(e){l(e)},style:{fontSize:20,boxShadow:"none",borderColor:"transparent",outline:"transparent"},placeholder:"0.00"}),r.a.createElement("div",null,x)),r.a.createElement(dt,{type:"primary",onClick:B,loading:p,disabled:0===M.length},0===M.length?je.b.NO_DEPOSITS:je.b.BORROW_ACTION),r.a.createElement(ut,null)))},mt=n(592),bt=mt.a.Text;!function(e){e.Deposit="deposit",e.Borrow="borrow"}(Je||(Je={}));var vt=function(e){var t=e.reserve.info,n=e.mode,a=W(null===t||void 0===t?void 0:t.liquidityMint),i=Object(d.g)(t.liquidityMint),o=Object(g.f)(t.availableLiquidity.toNumber(),i),l=Object(_.h)(t),u=Object(_.g)(t),s=Object(_.i)(t),f=t.config.liquidationThreshold/100,m=t.config.liquidationBonus/100,b=t.config.loanToValueRatio/100,v=null;return n===Je.Deposit?v=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card-row"},r.a.createElement(bt,{type:"secondary",className:"card-cell "},je.b.TABLE_TITLE_DEPOSIT_APY,":"),r.a.createElement("div",{className:"card-cell "},g.e.format(l))),r.a.createElement("div",{className:"card-row"},r.a.createElement(bt,{type:"secondary",className:"card-cell "},"Maximum LTV:"),r.a.createElement("div",{className:"card-cell "},g.e.format(b))),r.a.createElement("div",{className:"card-row"},r.a.createElement(bt,{type:"secondary",className:"card-cell "},"Liquidation threshold:"),r.a.createElement("div",{className:"card-cell "},g.e.format(f))),r.a.createElement("div",{className:"card-row"},r.a.createElement(bt,{type:"secondary",className:"card-cell "},"Liquidation penalty:"),r.a.createElement("div",{className:"card-cell "},g.e.format(m)))):n===Je.Borrow&&(v=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card-row"},r.a.createElement(bt,{type:"secondary",className:"card-cell "},je.b.TABLE_TITLE_BORROW_APY,":"),r.a.createElement("div",{className:"card-cell "},g.e.format(u))))),r.a.createElement(Ne.a,{className:e.className,title:r.a.createElement("div",{style:{display:"flex",alignItems:"center",fontSize:"1.2rem",justifyContent:"center"}},r.a.createElement(c.b,{to:"/reserve/".concat(e.reserve.pubkey)},r.a.createElement(Ie,{mintAddress:null===t||void 0===t?void 0:t.liquidityMint,style:{width:30,height:30}})," ",a," Reserve Overview"))},r.a.createElement("div",{className:"card-row"},r.a.createElement(bt,{type:"secondary",className:"card-cell "},"Utilization rate:"),r.a.createElement("div",{className:"card-cell "},g.e.format(s))),r.a.createElement("div",{className:"card-row"},r.a.createElement(bt,{type:"secondary",className:"card-cell "},"Available liquidity:"),r.a.createElement("div",{className:"card-cell "},g.d.format(o)," ",a)),v)},pt=function(){var e=Object(l.h)().id,t=D(e),n=$(),a=n.userObligations,i=n.totalInQuote,o=Z(e).totalInQuote;if(!t)return null;var c=a.filter((function(e){return e.obligation.info.collateralInQuote>0})).length;return r.a.createElement("div",{className:"borrow-reserve"},r.a.createElement(Se.a,{gutter:je.a},r.a.createElement(Te.a,{xs:24,xl:5},r.a.createElement(Ne.a,null,r.a.createElement(xe.a,{title:"Your loans value",value:i,precision:2,prefix:"$"}))),r.a.createElement(Te.a,{xs:24,xl:5},r.a.createElement(Ne.a,null,r.a.createElement(xe.a,{title:"Number of loans",value:c,precision:0}))),r.a.createElement(Te.a,{xs:24,xl:5},r.a.createElement(Ne.a,null,r.a.createElement(xe.a,{title:"Borrowing power",value:o,valueStyle:{color:"#3f8600"},precision:2,prefix:"$"}))),r.a.createElement(Te.a,{xs:24,xl:9},r.a.createElement(Ne.a,null,r.a.createElement(Le,{title:"Your Loans",items:a,getPct:function(e){return e.obligation.info.borrowedInQuote/i},name:function(e){return e.obligation.info.repayName}})))),r.a.createElement(Se.a,{gutter:je.a,className:"flexColumn"},r.a.createElement(Te.a,{xs:24,xl:15},r.a.createElement(ft,{className:"card-fill",reserve:t})),r.a.createElement(Te.a,{xs:24,xl:9},r.a.createElement(vt,{className:"card-fill",reserve:t,mode:Je.Borrow}))))},Et=function(e){var t=e.obligation,n=d.d.get(t.info.borrowReserve),i=d.d.get(t.info.collateralReserve),o=Object(d.g)(n.info.liquidityMint),l=Object(d.g)(i.info.liquidityMint),u=Object(g.f)(Object(g.l)(t.info.borrowAmountWad),o),s=Object(a.useMemo)((function(){return Object(_.g)(n.info)}),[n]),f=Object(_.j)(t.info.depositedCollateral,n.info),m=Object(g.f)(f,l),b=W(null===n||void 0===n?void 0:n.info.liquidityMint),v=W(null===i||void 0===i?void 0:i.info.liquidityMint);return r.a.createElement("div",{className:"dashboard-item"},r.a.createElement("span",{style:{display:"flex",marginLeft:5}},r.a.createElement("div",{style:{display:"flex"},title:"".concat(v,"\u2192").concat(b)},r.a.createElement(Ie,{mintAddress:null===i||void 0===i?void 0:i.info.liquidityMint,style:{marginRight:"-0.5rem"}}),r.a.createElement(Ie,{mintAddress:null===n||void 0===n?void 0:n.info.liquidityMint}))),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("em",null,g.d.format(u))," ",b),r.a.createElement("div",{className:"dashboard-amount-quote"},"$",g.d.format(t.info.borrowedInQuote)))),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("em",null,g.d.format(m))," ",v),r.a.createElement("div",{className:"dashboard-amount-quote"},"$",g.d.format(t.info.collateralInQuote)))),r.a.createElement("div",null,g.e.format(s)),r.a.createElement("div",{style:{color:Object(_.l)(t.info.health)}},g.e.format(t.info.ltv/100)),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},r.a.createElement(c.b,{to:"/borrow/".concat(n.pubkey.toBase58())},r.a.createElement(fe.a,{type:"primary"},r.a.createElement("span",null,"Borrow"))),r.a.createElement(c.b,{to:"/repay/loan/".concat(t.account.pubkey.toBase58())},r.a.createElement(fe.a,{type:"text"},r.a.createElement("span",null,"Repay")))))},yt=function(){var e=$(),t=e.userObligations,n=e.totalInQuote;return r.a.createElement(Ne.a,{title:r.a.createElement("div",{className:"dashboard-title"},r.a.createElement("div",null,je.b.DASHBOARD_TITLE_LOANS),r.a.createElement("div",null,r.a.createElement("span",null,je.b.TOTAL_TITLE,": "),"$",g.d.format(n)))},r.a.createElement(Le,{items:t,getPct:function(e){return e.obligation.info.borrowedInQuote/n},name:function(e){return e.obligation.info.repayName}}),r.a.createElement("div",{className:"dashboard-item dashboard-header"},r.a.createElement("div",null,je.b.TABLE_TITLE_ASSET),r.a.createElement("div",null,je.b.TABLE_TITLE_YOUR_LOAN_BALANCE),r.a.createElement("div",null,je.b.TABLE_TITLE_COLLATERAL_BALANCE),r.a.createElement("div",null,je.b.TABLE_TITLE_APY),r.a.createElement("div",null,je.b.TABLE_TITLE_LTV),r.a.createElement("div",null)),t.map((function(e){return r.a.createElement(Et,{obligation:e.obligation})})))},gt=function(e){var t=e.userDeposit,n=t.reserve,i=t.info,o=n.info.liquidityMint,l=W(o),u=Object(a.useMemo)((function(){return Object(_.h)(n.info)}),[n]);return r.a.createElement("div",{className:"dashboard-item"},r.a.createElement("span",{style:{display:"flex"}},r.a.createElement(Ie,{mintAddress:o}),l),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("em",null,g.d.format(i.amount))," ",l),r.a.createElement("div",{className:"dashboard-amount-quote"},"$",g.d.format(i.amountInQuote)))),r.a.createElement("div",null,g.e.format(u)),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},r.a.createElement(c.b,{to:"/deposit/".concat(n.pubkey.toBase58())},r.a.createElement(fe.a,{type:"primary"},r.a.createElement("span",null,je.b.DEPOSIT_ACTION))),r.a.createElement(c.b,{to:"/withdraw/".concat(n.pubkey.toBase58())},r.a.createElement(fe.a,{type:"text"},r.a.createElement("span",null,je.b.WITHDRAW_ACTION)))))},Ot=function(){var e=G(),t=e.userDeposits,n=e.totalInQuote;return r.a.createElement(Ne.a,{title:r.a.createElement("div",{className:"dashboard-title"},r.a.createElement("div",null,je.b.DASHBOARD_TITLE_DEPOSITS),r.a.createElement("div",null,r.a.createElement("span",null,je.b.TOTAL_TITLE,": "),"$",g.d.format(n)))},r.a.createElement(Le,{items:t,getPct:function(e){return e.info.amountInQuote/n},name:function(e){return e.info.name}}),r.a.createElement("div",{className:"dashboard-item dashboard-header"},r.a.createElement("div",null,je.b.TABLE_TITLE_ASSET),r.a.createElement("div",null,je.b.TABLE_TITLE_DEPOSIT_BALANCE),r.a.createElement("div",null,je.b.TABLE_TITLE_APY),r.a.createElement("div",null)),t.map((function(e){return r.a.createElement(gt,{userDeposit:e})})))},ht=(n(551),function(){var e=Object(u.c)().connected,t=$().userObligations,n=G().userDeposits;return r.a.createElement("div",{className:"dashboard-container"},!e&&r.a.createElement("div",{className:"dashboard-info"},r.a.createElement("img",{src:"splash.svg",alt:"connect your wallet",className:"dashboard-splash"}),je.b.DASHBOARD_INFO),e&&0===n.length&&0===t.length&&r.a.createElement("div",{className:"dashboard-info"},r.a.createElement("img",{src:"splash.svg",alt:"connect your wallet",className:"dashboard-splash"}),je.b.NO_LOANS_NO_DEPOSITS),e&&r.a.createElement(Se.a,{gutter:je.a},n.length>0&&r.a.createElement(Te.a,{md:24,xl:12,span:24},r.a.createElement(Ot,null)),t.length>0&&r.a.createElement(Te.a,{md:24,xl:12,span:24},r.a.createElement(yt,null))))}),wt=function(e){var t=W(e.reserve.liquidityMint),n=U(e.reserve.liquidityMint),a=n.balance,i=n.balanceInUSD,o=F(e.reserve),l=o.balance,u=o.balanceInUSD,s=Object(_.h)(e.reserve);return r.a.createElement(c.b,{to:"/deposit/".concat(e.address.toBase58())},r.a.createElement("div",{className:"deposit-item"},r.a.createElement("span",{style:{display:"flex"}},r.a.createElement(Ie,{mintAddress:e.reserve.liquidityMint}),t),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("em",null,g.d.format(a))," ",t),r.a.createElement("div",{className:"dashboard-amount-quote"},"$",g.d.format(i)))),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("em",null,g.d.format(l))," ",t),r.a.createElement("div",{className:"dashboard-amount-quote"},"$",g.d.format(u)))),r.a.createElement("div",null,g.e.format(s)),r.a.createElement("div",null,r.a.createElement(fe.a,{type:"primary"},r.a.createElement("span",null,je.b.DEPOSIT_ACTION)))))},jt=(n(552),function(){var e=P().reserveAccounts;return r.a.createElement("div",{className:"flexColumn"},r.a.createElement(Ne.a,null,r.a.createElement("div",{className:"deposit-item deposit-header"},r.a.createElement("div",null,"Asset"),r.a.createElement("div",null,"Your wallet balance"),r.a.createElement("div",null,"Your balance in Oyster"),r.a.createElement("div",null,"APY"),r.a.createElement("div",null)),e.map((function(e){return r.a.createElement(wt,{reserve:e.info,address:e.pubkey})}))))}),kt=(n(553),n(591)),At=(n(554),function(e){var t=Object(s.d)(),n=Object(u.c)().wallet,i=Object(a.useState)(!1),o=Object(E.a)(i,2),c=o[0],l=o[1],d=Object(a.useState)(!1),f=Object(E.a)(d,2),m=f[0],p=f[1],y=e.reserve,g=e.address,O=W(null===y||void 0===y?void 0:y.liquidityMint),h=U(null===y||void 0===y?void 0:y.liquidityMint),w=h.accounts,j=h.balance,k=h.balanceLamports,A=Object(a.useCallback)((function(e){return"string"===typeof e?parseFloat(e)/j*100:(e*j/100).toFixed(2)}),[j]),S=J(A),T=S.value,N=S.setValue,x=S.pct,M=S.setPct,I=S.type,B=Object(a.useCallback)((function(){l(!0),Object(v.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ze(w[0],I===Q.Percent?x*k/100:Math.ceil(k*(parseFloat(T)/j)),y,g,t,n);case 3:N(""),p(!0),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:return e.prev=9,l(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,7,9,12]])})))()}),[t,N,k,j,n,T,x,I,y,w,g]);return r.a.createElement(Ne.a,{className:e.className,bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},m?r.a.createElement(lt,{onClose:function(){return p(!1)}}):r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},r.a.createElement("div",{className:"deposit-input-title"},je.b.DEPOSIT_QUESTION),r.a.createElement("div",{className:"token-input"},r.a.createElement(Ie,{mintAddress:null===y||void 0===y?void 0:y.liquidityMint}),r.a.createElement(Fe,{value:T,onChange:N,autoFocus:!0,style:{fontSize:20,boxShadow:"none",borderColor:"transparent",outline:"transparent"},placeholder:"0.00"}),r.a.createElement("div",null,O)),r.a.createElement(kt.a,{marks:je.f,value:x,onChange:M}),r.a.createElement(dt,{type:"primary",onClick:B,loading:c,disabled:0===w.length},je.b.DEPOSIT_ACTION)))}),St=(n(555),function(e){var t=W(e.reserve.liquidityMint),n=U(e.reserve.liquidityMint).balance,a=F(e.reserve).balance;return r.a.createElement(Ne.a,{className:e.className,bodyStyle:{display:"flex",justifyContent:"space-around"}},r.a.createElement("div",{className:"deposit-info-line-item "},r.a.createElement("div",null,"Your balance in Oyster"),r.a.createElement("div",null,g.d.format(a)," ",t)),r.a.createElement("div",{className:"deposit-info-line-item "},r.a.createElement("div",null,"Your wallet balance"),r.a.createElement("div",null,g.d.format(n)," ",t)),r.a.createElement("div",{className:"deposit-info-line-item "},r.a.createElement("div",null,"Health factor"),r.a.createElement("div",null,"--")))}),Tt=function(){var e=D(Object(l.h)().id),t=null===e||void 0===e?void 0:e.info;return t&&e?r.a.createElement("div",{className:"deposit-reserve"},r.a.createElement(St,{className:"deposit-reserve-item",reserve:t,address:e.pubkey}),r.a.createElement("div",{className:"deposit-reserve-container"},r.a.createElement(At,{className:"deposit-reserve-item deposit-reserve-item-left",reserve:t,address:e.pubkey}),r.a.createElement(vt,{className:"deposit-reserve-item deposit-reserve-item-right",reserve:e,mode:Je.Deposit}))):null},Nt=(n(556),mt.a.Text),xt=function(e){var t=e.reserve,n=e.address,i=W(null===t||void 0===t?void 0:t.liquidityMint),o=U(e.reserve.liquidityMint),l=o.balance,u=o.balanceInUSD,f=F(e.reserve),m=f.balance,p=f.balanceInUSD,y=function(e){var t=Object(s.d)(),n=V(e).userObligationsByReserve,r=Object(a.useState)({borrowedLamports:0,borrowedInUSD:0,colateralInUSD:0,ltv:0,health:0}),i=Object(E.a)(r,2),o=i[0],c=i[1],l=D(e),u=Object(d.g)(null===l||void 0===l?void 0:l.info.liquidityMint);return Object(a.useEffect)((function(){c({borrowedLamports:0,borrowedInUSD:0,colateralInUSD:0,ltv:0,health:0}),Object(v.a)(b.a.mark((function e(){var a,r,i,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.e)(t,n.map((function(e){return e.obligation.info.tokenMint.toBase58()})),"single");case 2:a=e.sent,r=a.keys,a.array.forEach((function(e,t){var n=r[t];d.d.add(new h.d(n),e,d.b)})),i={borrowedLamports:0,borrowedInUSD:0,colateralInUSD:0,ltv:0,health:0},o=0,n.forEach((function(e){var t=Object(g.l)(e.obligation.info.borrowAmountWad).toNumber(),n=e.userAccounts.reduce((function(e,t){return e+t.info.amount.toNumber()}),0),a=d.d.get(e.obligation.info.tokenMint);i.borrowedLamports+=t*(n/(null===a||void 0===a?void 0:a.info.supply.toNumber())),i.borrowedInUSD+=e.obligation.info.borrowedInQuote,i.colateralInUSD+=e.obligation.info.collateralInQuote,o=e.obligation.info.liquidationThreshold}),0),1===n.length?(i.ltv=n[0].obligation.info.ltv,i.health=n[0].obligation.info.health):(i.ltv=100*i.borrowedInUSD/i.colateralInUSD,i.health=i.colateralInUSD*o/100/i.borrowedInUSD,i.health=Number.isFinite(i.health)?i.health:0),c(i);case 11:case"end":return e.stop()}}),e)})))()}),[t,n,c]),Object(j.a)({borrowed:Object(g.f)(o.borrowedLamports,u)},o)}(n),O=y.borrowed,w=y.borrowedInUSD,k=y.ltv,A=y.health;return r.a.createElement(Ne.a,{className:e.className,title:r.a.createElement("div",{style:{display:"flex",alignItems:"center",fontSize:"1.2rem",justifyContent:"center"}},"Your Information")},r.a.createElement("h3",null,"Borrows"),r.a.createElement("div",{className:"card-row"},r.a.createElement(Nt,{type:"secondary",className:"card-cell "},"Borrowed"),r.a.createElement("div",{className:"card-cell "},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("em",null,g.d.format(O))," ",i),r.a.createElement("div",{className:"dashboard-amount-quote"},"$",g.d.format(w))))),r.a.createElement("div",{className:"card-row"},r.a.createElement(Nt,{type:"secondary",className:"card-cell "},"Health factor:"),r.a.createElement("div",{className:"card-cell "},A.toFixed(2))),r.a.createElement("div",{className:"card-row"},r.a.createElement(Nt,{type:"secondary",className:"card-cell "},"Loan to value:"),r.a.createElement("div",{className:"card-cell "},g.d.format(k))),r.a.createElement("div",{className:"card-row"},r.a.createElement(Nt,{type:"secondary",className:"card-cell "},"Available to you:"),r.a.createElement("div",{className:"card-cell "},g.d.format(0)," ",i)),r.a.createElement("h3",null,"Deposits"),r.a.createElement("div",{className:"card-row"},r.a.createElement(Nt,{type:"secondary",className:"card-cell "},"Wallet balance:"),r.a.createElement("div",{className:"card-cell "},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("em",null,g.d.format(l))," ",i),r.a.createElement("div",{className:"dashboard-amount-quote"},"$",g.d.format(u))))),r.a.createElement("div",{className:"card-row"},r.a.createElement(Nt,{type:"secondary",className:"card-cell "},"You already deposited:"),r.a.createElement("div",{className:"card-cell "},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("em",null,g.d.format(m))," ",i),r.a.createElement("div",{className:"dashboard-amount-quote"},"$",g.d.format(p))))),r.a.createElement("div",{className:"card-row",style:{marginTop:20,justifyContent:"space-evenly"}},r.a.createElement(c.b,{to:"/deposit/".concat(n)},r.a.createElement(fe.a,null,"Deposit")),r.a.createElement(c.b,{to:"/borrow/".concat(n)},r.a.createElement(fe.a,null,"Borrow")),r.a.createElement(c.b,{to:"/withdraw/".concat(n)},r.a.createElement(fe.a,null,"Withdraw")),r.a.createElement(c.b,{to:"/repay/".concat(n)},r.a.createElement(fe.a,null,"Repay"))))},Mt=(n(557),n(558),function(e){var t=Object(a.useRef)(),n=Object(a.useRef)(),i=Object(a.useState)(1),o=Object(E.a)(i,2),c=o[0],l=o[1],u=e.percent,s=e.title,d=e.style,f=e.color,m=d.height,b=Object(a.useCallback)((function(){var e,t=(null===(e=n.current)||void 0===e?void 0:e.parentNode).offsetWidth;l(t<m?t/m:1)}),[m]);return Object(a.useEffect)((function(){return b(),window.addEventListener("resize",b),function(){window.removeEventListener("resize",b)}}),[b]),Object(a.useEffect)((function(){var e=0;return It(t.current,u,(function(t){e=t}),f),function(){cancelAnimationFrame(e)}}),[u,f]),r.a.createElement("div",{className:"waterWave",ref:n,style:{transform:"scale(".concat(c,")")}},r.a.createElement("div",{style:{width:m,height:m,overflow:"hidden"}},r.a.createElement("canvas",{className:"waterWaveCanvasWrapper",ref:t,width:2*m,height:2*m})),r.a.createElement("div",{className:"text",style:{width:m}},s&&r.a.createElement("span",null,s),r.a.createElement("h4",null,u.toFixed(2),"%")))}),It=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#1890FF",r=t/100;if(e&&r){var i=e.getContext("2d");if(i){var o=e.width,c=e.height,l=o/2,u=2,s=l-u;i.beginPath(),i.lineWidth=2*u;var d=o-u,f=d/8,m=.2,b=m,v=u,p=0,E=0,y=.005,g=l-u,O=-Math.PI/2,h=!0,w=[l+g*Math.cos(O),l+g*Math.sin(O)];i.strokeStyle=a,i.moveTo(w[0],w[1]);var j=function(){i.beginPath(),i.save();for(var e=[],t=v;t<=v+d;t+=20/d){var n=p+(v+t)/f,a=Math.sin(n)*b,r=t,o=2*s*(1-E)+(l-s)-f*a;i.lineTo(r,o),e.push([r,o])}var u=e.shift();if(u){i.lineTo(v+d,c),i.lineTo(v,c),i.lineTo(u[0],u[1]);var m=i.createLinearGradient(0,0,0,c);m.addColorStop(0,"#ffffff"),m.addColorStop(1,"#1890FF"),i.fillStyle=m,i.fill(),i.restore()}},k=function e(){if(i.clearRect(0,0,o,c),h)h=!1,i.globalCompositeOperation="destination-over",i.beginPath(),i.save(),i.arc(l,l,l-3*u,0,2*Math.PI,!0),i.stroke(),i.restore(),i.clip(),i.fillStyle="#1890FF";else{if(r>=.85){if(b>m/4)b-=.01*m}else if(r<=.1){if(b<1.5*m)b+=.01*m}else{if(b<=m)b+=.01*m;if(b>=m)b-=.01*m}r-E>0&&(E+=y),r-E<0&&(E-=y),p+=.07,j()}n(requestAnimationFrame(e))};k()}}},Bt=function(e){var t=Object(d.g)(e.reserve.liquidityMint),n=Object(g.f)(e.reserve.availableLiquidity.toNumber(),t),i=Object(a.useMemo)((function(){return Object(g.f)(Object(g.l)(e.reserve.borrowedLiquidityWad),t)}),[e.reserve,t]);return r.a.createElement(Mt,{style:{height:300},percent:100*n/(n+i)})},Lt=function(e){return r.a.createElement(Ne.a,{className:e.className,title:r.a.createElement(r.a.Fragment,null,je.b.RESERVE_STATUS_TITLE),bodyStyle:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},r.a.createElement(Bt,{reserve:e.reserve})))},Ct=function(){var e=D(Object(l.h)().id),t=null===e||void 0===e?void 0:e.info;return t&&e?r.a.createElement("div",{className:"reserve-overview"},r.a.createElement("div",{className:"reserve-overview-container"},r.a.createElement(Lt,{className:"reserve-overview-item reserve-overview-item-left",reserve:t,address:e.pubkey}),r.a.createElement(xt,{className:"reserve-overview-item reserve-overview-item-right",reserve:t,address:e.pubkey}))):null},_t=(n(559),n(560),function(e){var t=Object(s.d)(),n=Object(u.c)().wallet,i=Object(a.useState)(!1),o=Object(E.a)(i,2),c=o[0],l=o[1],d=Object(a.useState)(!1),f=Object(E.a)(d,2),m=f[0],p=f[1],y=e.reserve,g=e.address,O=W(null===y||void 0===y?void 0:y.liquidityMint),h=U(null===y||void 0===y?void 0:y.collateralMint),w=h.balanceLamports,j=h.accounts,k=F(y).balance,A=Object(a.useCallback)((function(e){return"string"===typeof e?parseFloat(e)/k*100:(e*k/100).toFixed(2)}),[k]),S=J(A),T=S.value,N=S.setValue,x=S.pct,M=S.setPct,I=S.type,B=Object(a.useCallback)((function(){l(!0),Object(v.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,nt(j[0],I===Q.Percent?x*w/100:Math.ceil(w*(parseFloat(T)/k)),y,g,t,n);case 3:N(""),p(!0),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:return e.prev=9,l(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,7,9,12]])})))()}),[g,k,w,t,j,x,y,N,I,T,n]);return r.a.createElement(Ne.a,{className:e.className,bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},m?r.a.createElement(lt,{onClose:function(){return p(!1)}}):r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},r.a.createElement("div",{className:"withdraw-input-title"},je.b.WITHDRAW_QUESTION),r.a.createElement("div",{className:"token-input"},r.a.createElement(Ie,{mintAddress:null===y||void 0===y?void 0:y.liquidityMint}),r.a.createElement(Fe,{value:T,onChange:N,autoFocus:!0,style:{fontSize:20,boxShadow:"none",borderColor:"transparent",outline:"transparent"},placeholder:"0.00"}),r.a.createElement("div",null,O)),r.a.createElement(kt.a,{marks:je.f,value:x,onChange:M}),r.a.createElement(dt,{type:"primary",onClick:B,loading:c,disabled:0===j.length},0===j.length?je.b.NO_DEPOSITS:je.b.WITHDRAW_ACTION)))}),qt=function(){var e=D(Object(l.h)().id),t=null===e||void 0===e?void 0:e.info;return t&&e?r.a.createElement("div",{className:"deposit-reserve"},r.a.createElement(St,{className:"deposit-reserve-item",reserve:t,address:e.pubkey}),r.a.createElement("div",{className:"deposit-reserve-container"},r.a.createElement(_t,{className:"deposit-reserve-item deposit-reserve-item-left",reserve:t,address:e.pubkey}),r.a.createElement(vt,{className:"deposit-reserve-item deposit-reserve-item-right",reserve:e,mode:Je.Deposit}))):null},Rt=function(){var e=Object(s.d)(),t=Object(u.c)().wallet,n=Object(a.useCallback)((function(){e.requestAirdrop(t.publicKey,2*h.c).then((function(){Object(Ke.a)({message:je.b.ACCOUNT_FUNDED,type:"success"})}))}),[t,e]);return r.a.createElement("div",{className:"flexColumn",style:{flex:1}},r.a.createElement(Ne.a,{title:"Faucet",bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"},style:{flex:1}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center"}},r.a.createElement("div",{className:"deposit-input-title",style:{margin:10}},je.b.FAUCET_INFO),r.a.createElement(dt,{type:"primary",onClick:n},je.b.GIVE_SOL))))},Pt=(n(561),function(e){var t=Object(s.d)(),n=Object(u.c)().wallet,i=Object(a.useState)(!1),o=Object(E.a)(i,2),c=o[0],l=o[1],f=Object(a.useState)(!1),m=Object(E.a)(f,2),p=m[0],y=m[1],O=e.borrowReserve,h=e.obligation,w=Object(d.g)(O.info.liquidityMint),j=Object(g.l)(h.info.borrowAmountWad).toNumber(),k=Object(g.f)(j,w),A=e.collateralReserve,S=W(null===O||void 0===O?void 0:O.info.liquidityMint),T=U(O.info.liquidityMint).accounts,N=function(e){var t=q().userAccounts,n="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),a=t.findIndex((function(e){return e.info.mint.toBase58()===n}));if(-1!==a)return t[a]}(null===h||void 0===h?void 0:h.info.tokenMint),x=Object(a.useCallback)((function(e){return"string"===typeof e?parseFloat(e)/k*100:(e*k/100).toFixed(2)}),[k]),M=J(x),I=M.value,B=M.setValue,L=M.pct,C=M.setPct,_=M.type,R=Object(a.useCallback)((function(){A&&h&&O&&N&&(l(!0),Object(v.a)(b.a.mark((function e(){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=_===Q.Percent?L*j/100:Math.ceil(j*(parseFloat(I)/k)),e.next=4,tt(T[0],a,h.account,N,O,A,t,n);case 4:B(""),y(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Object(Ke.a)({message:"Unable to repay loan.",type:"error",description:e.t0.message});case 11:return e.prev=11,l(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))())}),[L,I,k,j,_,t,n,h,A,O,T,N,B]);return r.a.createElement(Ne.a,{className:e.className,bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},p?r.a.createElement(lt,{onClose:function(){return y(!1)}}):r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},r.a.createElement("div",{className:"repay-input-title"},je.b.REPAY_QUESTION),r.a.createElement("div",{className:"token-input"},r.a.createElement(Ie,{mintAddress:null===O||void 0===O?void 0:O.info.liquidityMint}),r.a.createElement(Fe,{value:I,onChange:B,autoFocus:!0,style:{fontSize:20,boxShadow:"none",borderColor:"transparent",outline:"transparent"},placeholder:"0.00"}),r.a.createElement("div",null,S)),r.a.createElement(kt.a,{marks:je.f,value:L,onChange:C}),r.a.createElement("div",{className:"repay-input-title"},je.b.COLLATERAL),r.a.createElement(ct,{reserve:O.info,collateralReserve:null===A||void 0===A?void 0:A.pubkey.toBase58(),disabled:!0}),r.a.createElement(dt,{type:"primary",onClick:R,loading:c,disabled:0===T.length},je.b.REPAY_ACTION)))}),Dt=(n(562),function(){var e=Object(l.h)(),t=e.reserve,n=e.obligation,a=Y(n),i=D(n?null===a||void 0===a?void 0:a.info.borrowReserve:t),o=D(n?null===a||void 0===a?void 0:a.info.collateralReserve:t);return(null===i||void 0===i?void 0:i.info)&&i&&a?r.a.createElement("div",{className:"repay-reserve"},r.a.createElement("div",{className:"repay-reserve-container"},r.a.createElement(Pt,{className:"repay-reserve-item repay-reserve-item-left",borrowReserve:i,collateralReserve:o,obligation:a}),r.a.createElement(vt,{className:"repay-reserve-item repay-reserve-item-right",reserve:i,mode:Je.Borrow}))):null}),Wt=function(e){var t=e.item.info,n=d.d.get(t.borrowReserve),i=d.d.get(t.collateralReserve),o=Object(d.g)(n.info.liquidityMint),l=Object(d.g)(i.info.liquidityMint),u=Object(g.f)(Object(g.l)(t.borrowAmountWad),o),s=Object(a.useMemo)((function(){return Object(_.g)(n.info)}),[n]),f=Object(_.j)(t.depositedCollateral,n.info),m=Object(g.f)(f,l),b=W(null===n||void 0===n?void 0:n.info.liquidityMint),v=W(null===i||void 0===i?void 0:i.info.liquidityMint);return r.a.createElement(c.b,{to:"/liquidate/".concat(e.item.account.pubkey.toBase58())},r.a.createElement("div",{className:"liquidate-item"},r.a.createElement("span",{style:{display:"flex"}},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(Ie,{mintAddress:null===i||void 0===i?void 0:i.info.liquidityMint,style:{marginRight:"-0.5rem"}}),r.a.createElement(Ie,{mintAddress:null===n||void 0===n?void 0:n.info.liquidityMint})),v,"\u2192",b),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("em",null,g.d.format(u))," ",b),r.a.createElement("div",{className:"dashboard-amount-quote"},"$",g.d.format(t.borrowedInQuote)))),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("em",null,g.d.format(m))," ",v),r.a.createElement("div",{className:"dashboard-amount-quote"},"$",g.d.format(t.collateralInQuote)))),r.a.createElement("div",null,g.e.format(s)),r.a.createElement("div",null,g.e.format(t.ltv/100)),r.a.createElement("div",null,t.health.toFixed(2)),r.a.createElement("div",null,r.a.createElement(fe.a,{type:"primary"},r.a.createElement("span",null,je.b.LIQUIDATE_ACTION)))))},Ut=(n(563),function(){var e=H().obligations,t=Object(a.useMemo)((function(){return e.filter((function(e){return e.info.health<1}))}),[e]),n=Object(a.useMemo)((function(){return t.reduce((function(e,t){return e+t.info.collateralInQuote}),0)}),[t]),i=Object(a.useMemo)((function(){return t.length}),[t]),o=Object(a.useMemo)((function(){return t.length/e.length}),[t,e]),c=Object(a.useMemo)((function(){return t.reduce((function(e,t){return e.set(t.info.repayName,(e.get(t.info.collateralName)||0)+t.info.collateralInQuote),e}),new Map)}),[t]),l=Object(a.useMemo)((function(){return Object(p.a)(c.keys())}),[c]);return r.a.createElement("div",{className:"liquidate-container"},0===t.length?r.a.createElement("div",{className:"liquidate-info"},je.b.LIQUIDATE_NO_LOANS):r.a.createElement("div",{className:"flexColumn"},r.a.createElement(Se.a,{gutter:je.a},r.a.createElement(Te.a,{span:24},r.a.createElement(Ne.a,null,r.a.createElement(mt.a,null,je.b.LIQUIDATION_INFO)))),r.a.createElement(Se.a,{gutter:je.a},r.a.createElement(Te.a,{xs:24,xl:5},r.a.createElement(Ne.a,null,r.a.createElement(xe.a,{title:"Value at risk",value:n,precision:2,valueStyle:{color:"#3f8600"},prefix:"$"}))),r.a.createElement(Te.a,{xs:24,xl:5},r.a.createElement(Ne.a,null,r.a.createElement(xe.a,{title:"Loans at risk",value:i,precision:0}))),r.a.createElement(Te.a,{xs:24,xl:5},r.a.createElement(Ne.a,null,r.a.createElement(xe.a,{title:"% loans at risk",value:100*o,precision:2,suffix:"%"}))),r.a.createElement(Te.a,{xs:24,xl:9},r.a.createElement(Ne.a,null,r.a.createElement(Le,{title:"At risk loan composition",name:function(e){return e},getPct:function(e){return(c.get(e)||0)/n},items:l})))),r.a.createElement(Se.a,{gutter:je.a},r.a.createElement(Te.a,{span:24},r.a.createElement(Ne.a,{className:"card-fill"},r.a.createElement("div",{className:"liquidate-item liquidate-header"},r.a.createElement("div",null,je.b.TABLE_TITLE_ASSET),r.a.createElement("div",null,je.b.TABLE_TITLE_LOAN_BALANCE),r.a.createElement("div",null,je.b.TABLE_TITLE_COLLATERAL_BALANCE),r.a.createElement("div",null,je.b.TABLE_TITLE_APY),r.a.createElement("div",null,je.b.TABLE_TITLE_LTV),r.a.createElement("div",null,je.b.TABLE_TITLE_HEALTH),r.a.createElement("div",null,je.b.TABLE_TITLE_ACTION)),t.map((function(e){return r.a.createElement(Wt,{key:e.account.pubkey.toBase58(),item:e})})))))))}),Ft=n(325),Kt=n.n(Ft),Qt=(n(564),function(e){var t=Object(s.d)(),n=Object(u.c)().wallet,i=e.repayReserve,o=e.withdrawReserve,c=e.obligation,l=Object(a.useState)(!1),d=Object(E.a)(l,2),f=d[0],m=d[1],p=Object(a.useState)(!1),y=Object(E.a)(p,2),O=y[0],h=y[1],w=U(null===i||void 0===i?void 0:i.info.liquidityMint).accounts,j=Object(a.useCallback)((function(){o&&(m(!0),Object(v.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,rt(t,n,w[0],Object(g.l)(c.info.borrowAmountWad).toNumber(),c.account,i,o);case 3:h(!0),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:return e.prev=8,m(!1),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[0,6,8,11]])})))())}),[o,w,c,i,n,t]);return r.a.createElement(Kt.a,{className:e.className,bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},O?r.a.createElement(lt,{onClose:function(){return h(!1)}}):r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},r.a.createElement("div",{className:"liquidate-input-title"},je.b.SELECT_COLLATERAL),r.a.createElement(ct,{reserve:i.info,collateralReserve:null===o||void 0===o?void 0:o.pubkey.toBase58(),disabled:!0}),r.a.createElement(fe.a,{type:"primary",onClick:j,disabled:0===w.length,loading:f},je.b.LIQUIDATE_ACTION),r.a.createElement(ut,null)))}),zt=(n(589),function(){var e=Y(Object(l.h)().id),t=D(null===e||void 0===e?void 0:e.info.borrowReserve),n=D(null===e||void 0===e?void 0:e.info.collateralReserve);return e&&t?r.a.createElement("div",{className:"liquidate-reserve"},r.a.createElement("div",{className:"liquidate-reserve-container"},r.a.createElement(Qt,{className:"liquidate-reserve-item liquidate-reserve-item-left",obligation:e,withdrawReserve:n,repayReserve:t}),r.a.createElement(vt,{className:"liquidate-reserve-item liquidate-reserve-item-right",reserve:t,mode:Je.Deposit}))):null});function Ht(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a,{basename:"/"},r.a.createElement(s.a,null,r.a.createElement(u.b,null,r.a.createElement(d.a,null,r.a.createElement(x,null,r.a.createElement(te,null,r.a.createElement(Ae,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",component:function(){return r.a.createElement(Ce,null)}}),r.a.createElement(l.a,{exact:!0,path:"/dashboard",children:r.a.createElement(ht,null)}),r.a.createElement(l.a,{path:"/reserve/:id",children:r.a.createElement(Ct,null)}),r.a.createElement(l.a,{exact:!0,path:"/deposit",component:function(){return r.a.createElement(jt,null)}}),r.a.createElement(l.a,{path:"/deposit/:id",children:r.a.createElement(Tt,null)}),r.a.createElement(l.a,{path:"/withdraw/:id",children:r.a.createElement(qt,null)}),r.a.createElement(l.a,{exact:!0,path:"/borrow",children:r.a.createElement(qe,null)}),r.a.createElement(l.a,{path:"/borrow/:id",children:r.a.createElement(pt,null)}),r.a.createElement(l.a,{path:"/repay/loan/:obligation",children:r.a.createElement(Dt,null)}),r.a.createElement(l.a,{path:"/repay/:reserve",children:r.a.createElement(Dt,null)}),r.a.createElement(l.a,{exact:!0,path:"/liquidate",children:r.a.createElement(Ut,null)}),r.a.createElement(l.a,{path:"/liquidate/:id",children:r.a.createElement(zt,null)}),r.a.createElement(l.a,{exact:!0,path:"/faucet",children:r.a.createElement(Rt,null)}))))))))))}var Yt=function(){return r.a.createElement(Ht,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Yt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},64:function(e,t,n){"use strict";var a=n(283);n.d(t,"approve",(function(){return a.a}));var r=n(32);n.d(t,"BorrowAmountType",(function(){return r.a})),n.d(t,"LendingObligationLayout",(function(){return r.c})),n.d(t,"LendingReserveParser",(function(){return r.e})),n.d(t,"borrowInstruction",(function(){return r.f})),n.d(t,"reserveMarketCap",(function(){return r.q}));n(284)},75:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e[e.InitLendingMarket=0]="InitLendingMarket",e[e.InitReserve=1]="InitReserve",e[e.DepositReserveLiquidity=2]="DepositReserveLiquidity",e[e.WithdrawReserveLiquidity=3]="WithdrawReserveLiquidity",e[e.BorrowLiquidity=4]="BorrowLiquidity",e[e.RepayOblogationLiquidity=5]="RepayOblogationLiquidity",e[e.LiquidateObligation=6]="LiquidateObligation"}(a||(a={}))}},[[336,1,2]]]);