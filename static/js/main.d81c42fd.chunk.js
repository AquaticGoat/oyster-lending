(this["webpackJsonptoken-lending-ui"]=this["webpackJsonptoken-lending-ui"]||[]).push([[0],{1017:function(e,t,n){},1018:function(e,t,n){},1019:function(e,t,n){},102:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e[e.InitLendingMarket=0]="InitLendingMarket",e[e.InitReserve=1]="InitReserve",e[e.DepositReserveLiquidity=2]="DepositReserveLiquidity",e[e.WithdrawReserveLiquidity=3]="WithdrawReserveLiquidity",e[e.BorrowLiquidity=4]="BorrowLiquidity",e[e.RepayOblogationLiquidity=5]="RepayOblogationLiquidity",e[e.LiquidateObligation=6]="LiquidateObligation"}(a||(a={}))},1020:function(e,t,n){},1021:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(48),o=n.n(i),c=(n(518),n(338),n(45)),u=n(76),l=n(62),s=n(31),d=n(18),f=n(11),m=n.n(f),b=n(23),p=n(33),v=n(24),y={},E=n(15),g=n(111),O=n(19),h=n(228),w=n(81),j=function(e,t){var n=g.Orderbook.LAYOUT.decode(t.data);return{pubkey:e,account:Object(w.a)({},t),info:n}},k=new O.d("EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"),A=function(e,t){var n=g.MARKETS.find((function(t){return t.address.equals(e)})),a=g.Market.getLayout((null===n||void 0===n?void 0:n.programId)||k).decode(t.data),r={pubkey:e,account:Object(w.a)({},t),info:a};return d.d.registerParser(r.info.baseMint,d.b),d.d.registerParser(r.info.quoteMint,d.b),d.d.registerParser(r.info.bids,j),d.d.registerParser(r.info.asks,j),r},S=r.a.createContext(null),N=new h.a;function T(e){var t=e.children,n=void 0===t?null:t,i=Object(s.e)().endpoint,o=Object(a.useMemo)((function(){return new Map}),[]),c=Object(a.useState)([]),u=Object(v.a)(c,2),l=u[0],f=u[1],E=Object(a.useMemo)((function(){return new O.b(i,"recent")}),[i]),h=Object(a.useMemo)((function(){return Object(p.a)(new Set(l).values()).reduce((function(e,t){var n=t,a=g.TOKEN_MINTS.find((function(e){return e.address.toBase58()===n})),r=y[n],i="".concat(null===a||void 0===a?void 0:a.name,"/USDC"),o=g.MARKETS.find((function(e){return e.name===i||e.address.toBase58()===r}));return o&&e.set(n,{marketInfo:o}),e}),new Map)}),[l]);Object(a.useEffect)((function(){var e=0,t=function(){var n=Object(b.a)(m.a.mark((function n(){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,M(E,Object(p.a)(o.keys()));case 2:N.raiseMarketUpdated(new Set(Object(p.a)(h.keys()))),e=window.setTimeout((function(){return t()}),3e4);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return function(){var e=Object(b.a)(m.a.mark((function e(){var n,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Map,Object(p.a)(h.keys()).forEach((function(e){var t=h.get(e);t&&n.set(t.marketInfo.address.toBase58(),e)})),a=Object(p.a)(h.values()).map((function(e){return e.marketInfo.address.toBase58()})),e.next=5,Object(d.e)(E,a.filter((function(e){return void 0===d.d.get(e)})),"single").then((function(e){var t=e.keys,r=e.array;return a.forEach((function(){})),r.map((function(e,a){var r=t[a],i=n.get(r);if(i){var o=h.get(i);if(o){var c=o.marketInfo.address;d.d.add(c,e,A)}}return e}))}));case 5:return r=new Set,a.forEach((function(e){var t=d.d.get(e);if(t){var n=t;d.d.get(n.info.baseMint)||r.add(n.info.baseMint.toBase58()),d.d.get(n.info.baseMint)||r.add(n.info.quoteMint.toBase58()),r.add(n.info.bids.toBase58()),r.add(n.info.asks.toBase58())}})),e.next=9,M(E,Object(p.a)(r.keys()));case 9:N.raiseMarketUpdated(new Set(Object(p.a)(h.keys()))),t();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){window.clearTimeout(e)}}),[h,o,E]);var w=Object(a.useCallback)((function(e){var t;return x(null===(t=h.get(e))||void 0===t?void 0:t.marketInfo.address.toBase58(),e)}),[h]),j=Object(a.useCallback)((function(e){var t=h.get(e),n=d.d.get((null===t||void 0===t?void 0:t.marketInfo.address.toBase58())||"");if(!n)return function(){};var a=n.info.bids.toBase58(),r=n.info.asks.toBase58();return o.set(a,(o.get(a)||0)+1),o.set(r,(o.get(r)||0)+1),function(){o.set(a,(o.get(a)||0)-1),o.set(r,(o.get(r)||0)-1),Object(p.a)(o.keys()).forEach((function(e){(o.get(e)||0)<=0&&o.delete(e)}))}}),[h,o]),k=Object(a.useCallback)((function(e){var t=Object(p.a)(new Set([].concat(Object(p.a)(l),Object(p.a)(e))).values());l.length!==t.length&&f(t)}),[f,l]);return r.a.createElement(S.Provider,{value:{midPriceInUSD:w,marketEmitter:N,accountsToObserve:o,marketByMint:h,subscribeToMarket:j,precacheMarkets:k}},n)}var B=function(){return Object(a.useContext)(S)},x=function(e,t){var n,a,r,i,o=g.TOKEN_MINTS.find((function(e){return e.address.toBase58()===t}));if(E.a.has((null===o||void 0===o?void 0:o.name)||""))return 1;if(!e)return 0;var c=d.d.get(e);if(!c)return 0;var u=c.info,l=(null===(n=d.d.get(u.baseMint))||void 0===n?void 0:n.info.decimals)||0,s=(null===(a=d.d.get(u.quoteMint))||void 0===a?void 0:a.info.decimals)||0,f=new g.Market(u,l,s,void 0,u.programId),m=null===(r=d.d.get(u.bids))||void 0===r?void 0:r.info,b=null===(i=d.d.get(u.asks))||void 0===i?void 0:i.info;if(m&&b){var p=new g.Orderbook(f,m.accountFlags,m.slab),v=new g.Orderbook(f,b.accountFlags,b.slab),y=p.getL2(1),O=v.getL2(1);if(y.length>0&&O.length>0)return(y[0][0]+O[0][0])/2}return 0},M=function(){var e=Object(b.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.abrupt("return",Object(d.e)(t,n,"single").then((function(e){var t=e.keys;return e.array.map((function(e,n){var a=t[n];return d.d.add(new O.d(a),e)}))})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=n(27),L=n(43);function I(){return{userAccounts:Object(d.f)().userAccounts}}var _=function(){return d.d.byParser(L.e).map((function(e){return d.d.get(e)})).filter((function(e){return void 0!==e}))};function R(){var e=Object(a.useState)([]),t=Object(v.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){r(_());var e=d.d.emitter.onCache((function(e){e.parser===L.e&&r(_())}));return function(){e()}}),[r]),{reserveAccounts:n}}function q(e){var t="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),n=Object(a.useState)(),r=Object(v.a)(n,2),i=r[0],o=r[1];return Object(a.useEffect)((function(){o(d.d.get(t||""));var e=d.d.emitter.onCache((function(e){e.id===t&&o(d.d.get(t))}));return function(){e()}}),[t,o]),i}function W(e){var t=Object(s.e)().tokenMap,n="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();return Object(E.h)(t,n)}function P(e,t){var n=I().userAccounts,r=Object(d.g)(e),i=Object(a.useMemo)((function(){return n.filter((function(n){return(null===e||void 0===e?void 0:e.equals(n.info.mint))&&(!t||t.equals(n.pubkey))})).sort((function(e,t){return t.info.amount.sub(e.info.amount).toNumber()}))}),[n,e,t]),o=Object(a.useMemo)((function(){return i.reduce((function(e,t){return e+t.info.amount.toNumber()}),0)}),[i]);return{balance:Object(E.f)(o,r),balanceLamports:o,accounts:i}}function D(e,t){var n=Object(d.g)(null===e||void 0===e?void 0:e.collateralMint),a=P(null===e||void 0===e?void 0:e.collateralMint,t),r=a.balanceLamports,i=a.accounts,o=Object(L.o)(e)*(r/((null===e||void 0===e?void 0:e.collateralMintSupply.toNumber())||1));return{balance:Object(E.f)(o,n),balanceLamports:o,accounts:i}}var U=function(){return d.d.byParser(L.d).map((function(e){return d.d.get(e)})).filter((function(e){return void 0!==e}))};function K(){var e=I().userAccounts,t=function(){var e=Object(a.useState)([]),t=Object(v.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){r(U());var e=d.d.emitter.onCache((function(e){e.parser===L.d&&r(U())}));return function(){e()}}),[r]),{obligations:n}}().obligations,n=Object(a.useMemo)((function(){return e.reduce((function(e,t){var n=t.info.mint.toBase58();return e.set(n,[].concat(Object(p.a)(e.get(n)||[]),[t])),e}),new Map)}),[e]);return{userObligations:Object(a.useMemo)((function(){return 0===n.size?[]:t.filter((function(e){return void 0!==n.get(e.info.tokenMint.toBase58())})).map((function(e){return{obligation:e,userAccounts:Object(p.a)(n.get(e.info.tokenMint.toBase58()))}}))}),[n,t])}}function F(e){var t=K().userObligations;return{userObligationsByReserve:Object(a.useMemo)((function(){var n="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();return t.filter((function(e){return e.obligation.info.borrowReserve.toBase58()===n}))}),[e,t])}}var z=r.a.createContext(null);function Y(e){var t=e.children,n=void 0===t?null:t,a=H().accounts;return r.a.createElement(z.Provider,{value:{accounts:a}},n)}var H=function(){var e=Object(s.d)(),t=Object(a.useState)([]),n=Object(v.a)(t,2),r=n[0],i=n[1],o=R().reserveAccounts,c=B().precacheMarkets,u=Object(a.useCallback)((function(e){return Object(L.n)(e.account)?d.d.add(e.pubkey.toBase58(),e.account,L.e):Object(L.l)(e.account)?d.d.add(e.pubkey.toBase58(),e.account,L.b):Object(L.m)(e.account)?d.d.add(e.pubkey.toBase58(),e.account,L.d):void 0}),[]);return Object(a.useEffect)((function(){o.length>0&&c(o.map((function(e){return e.info.liquidityMint.toBase58()})))}),[o,c]),Object(a.useEffect)((function(){i([]);var t=function(){var t=Object(b.a)(m.a.mark((function t(){var n,a,r,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getProgramAccounts(C.a);case 2:return n=t.sent,a=n.map(u).filter((function(e){return void 0!==e})),r=a.filter((function(e){return void 0!==(null===e||void 0===e?void 0:e.info).lendingMarket})).map((function(e){return e})),i=Object(p.a)(r.map((function(e){return[d.d.registerParser(null===e||void 0===e?void 0:e.info.collateralMint.toBase58(),d.b),d.d.registerParser(null===e||void 0===e?void 0:e.info.liquidityMint.toBase58(),d.b),d.d.registerParser((null===e||void 0===e?void 0:e.info.dexMarketOption)?null===e||void 0===e?void 0:e.info.dexMarket.toBase58():"",A)].filter((function(e){return e}))}))).flat(),t.next=8,Object(d.e)(e,i,"single").then((function(e){var t=e.keys;return e.array.map((function(e,n){var a=t[n];return d.d.add(a,e),e}))}));case 8:return n.map(u).filter((function(e){return void 0!==e})),t.abrupt("return",a);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Promise.all([t()]).then((function(e){i(e.flat())}))}),[e,u]),Object(a.useEffect)((function(){var t=e.onProgramAccountChange(C.a,function(){var e=Object(b.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.accountId,a={pubkey:new O.d(n),account:t.accountInfo},u(a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"singleGossip");return function(){e.removeProgramAccountChangeListener(t)}}),[e,r,u]),{accounts:r}},G=n(109),Q=n(1027),J=n(1028),V=n(1029),X=n(1030),Z=n(1031),$=n(1032),ee=n(502),te=n(165),ne=n(510),ae=n(487),re=n.n(ae),ie=n(29),oe=n.n(ie),ce=(n(655),function(e){var t,n=e.style,i=e.className,o="string"===typeof e.address?e.address:null===(t=e.address)||void 0===t?void 0:t.toBase58(),c=Object(a.useRef)();return Object(a.useEffect)((function(){o&&c.current&&(c.current.innerHTML="",c.current.className=i||"",c.current.appendChild(re()((null===n||void 0===n?void 0:n.width)||16,parseInt(oe.a.decode(o).toString("hex").slice(5,15),16))))}),[o,n,i]),r.a.createElement("div",{className:"identicon-wrapper",ref:c,style:e.style})}),ue=function(e){var t,n=Object(l.c)().wallet,a=Object(d.h)().account;return n&&n.publicKey?r.a.createElement("div",{className:"wallet-wrapper"},r.a.createElement("span",null,E.c.format(((null===a||void 0===a?void 0:a.lamports)||0)/O.c)," SOL"),r.a.createElement("div",{className:"wallet-key"},Object(E.i)("".concat(n.publicKey)),r.a.createElement(ce,{address:null===(t=n.publicKey)||void 0===t?void 0:t.toBase58(),style:{marginLeft:"0.5rem",display:"flex"}}))):null},le=n(1026),se=n(1023),de=function(){var e=Object(l.c)(),t=e.providerUrl,n=e.setProvider,a=Object(s.e)(),i=a.endpoint,o=a.setEndpoint;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"grid"}},"Network:"," ",r.a.createElement(se.a,{onSelect:o,value:i,style:{marginRight:8}},s.b.map((function(e){var t=e.name,n=e.endpoint;return r.a.createElement(se.a.Option,{value:n,key:n},t)})))),r.a.createElement("div",{style:{display:"grid"}},"Wallet:"," ",r.a.createElement(se.a,{onSelect:n,value:t},l.a.map((function(e){var t=e.name,n=e.url;return r.a.createElement(se.a.Option,{value:n,key:n},t)})))))},fe=n(20),me=function(e){var t=Object(l.c)(),n=t.connected,a=t.wallet;return r.a.createElement("div",{className:"App-Bar-right"},r.a.createElement(ue,null),r.a.createElement("div",null,!n&&r.a.createElement(te.a,{type:"text",size:"large",onClick:n?a.disconnect:a.connect,style:{color:"#2abdd2"}},fe.a.CONNECT_BUTTON),n&&r.a.createElement(ne.a,{placement:"bottomRight",title:fe.a.WALLET_TOOLTIP,trigger:"click"})),r.a.createElement(ne.a,{placement:"topRight",title:fe.a.SETTINGS_TOOLTIP,content:r.a.createElement(de,null),trigger:"click"},r.a.createElement(te.a,{shape:"circle",size:"large",type:"text",icon:r.a.createElement(le.a,null)})),e.right)},be=function(e){var t=Object(s.e)().env,n=Object(u.g)();console.log(n.pathname);var a={"/dashboard":"2","/deposit":"3","/borrow":"4","/faucet":"4"},i=a[Object(p.a)(Object.keys(a)).find((function(e){return n.pathname.startsWith(e)}))||""]||"1";return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"Banner"},r.a.createElement("div",{className:"Banner-description"},fe.a.AUDIT_WARNING)),r.a.createElement(ee.a,{title:fe.a.APP_TITLE,footerRender:function(){return r.a.createElement("div",{className:"footer"},fe.a.FOOTER)},navTheme:"realDark",headerTheme:"dark",theme:"dark",layout:"side",primaryColor:"#d83aeb",logo:r.a.createElement("div",{className:"App-logo"}),rightContentRender:function(){return r.a.createElement(me,null)},links:[r.a.createElement("div",{title:"Fork"},r.a.createElement(Q.a,null))],menuContentRender:function(){return r.a.createElement(G.a,{theme:"dark",defaultSelectedKeys:[i],mode:"inline"},r.a.createElement(G.a.Item,{key:"1",icon:r.a.createElement(J.a,null)},r.a.createElement(c.b,{to:{pathname:"/"}},fe.a.MENU_HOME)),r.a.createElement(G.a.Item,{key:"2",icon:r.a.createElement(V.a,null)},r.a.createElement(c.b,{to:{pathname:"/dashboard"}},fe.a.MENU_DASHBOARD)),r.a.createElement(G.a.Item,{key:"3",icon:r.a.createElement(X.a,null)},r.a.createElement(c.b,{to:{pathname:"/deposit"}},fe.a.MENU_DEPOSIT)),r.a.createElement(G.a.Item,{key:"4",icon:r.a.createElement(Z.a,null)},r.a.createElement(c.b,{to:{pathname:"/borrow"}},fe.a.MENU_BORROW)),"mainnet-beta"!==t&&r.a.createElement(G.a.Item,{key:"5",icon:r.a.createElement($.a,null)},r.a.createElement(c.b,{to:{pathname:"/faucet"}},fe.a.MENU_FAUCET)))}},e.children))},pe=n(91),ve=function(e){var t,n,a=Object(s.e)().tokenMap,i=Object(E.g)(a,e.mintAddress);return i?r.a.createElement("img",{alt:"Token icon",className:e.className,key:i,width:(null===(t=e.style)||void 0===t?void 0:t.width)||"20",height:(null===(n=e.style)||void 0===n?void 0:n.height)||"20",src:i,style:Object(w.a)({marginRight:"0.5rem",marginTop:"0.11rem",borderRadius:"10rem",backgroundColor:"white",backgroundClip:"padding-box"},e.style)}):r.a.createElement(ce,{address:e.mintAddress,style:Object(w.a)({marginRight:"0.5rem",width:20,height:20,marginTop:2},e.style)})},ye=n(1024),Ee=function(e){var t=W(e.reserve.liquidityMint),n=Object(d.g)(e.reserve.liquidityMint),i=Object(E.f)(e.reserve.availableLiquidity.toNumber(),n),o=Object(a.useMemo)((function(){return Object(E.f)(Object(E.l)(e.reserve.borrowedLiquidityWad),n)}),[e.reserve,n]),u=Object(a.useMemo)((function(){return Object(L.g)(e.reserve)}),[e.reserve]),l=Object(a.useMemo)((function(){return Object(L.h)(e.reserve)}),[e.reserve]),s=i+o;return r.a.createElement(c.b,{to:"/reserve/".concat(e.address.toBase58())},r.a.createElement(ye.a,null,r.a.createElement("div",{className:"home-item"},r.a.createElement("span",{style:{display:"flex"}},r.a.createElement(ve,{mintAddress:e.reserve.liquidityMint}),t),r.a.createElement("div",{title:s.toString()},E.c.format(s)," ",t),r.a.createElement("div",{title:o.toString()},E.c.format(o)," ",t),r.a.createElement("div",{title:l.toString()},E.d.format(l)),r.a.createElement("div",{title:u.toString()},E.d.format(u)))))},ge=(n(708),function(){var e=R().reserveAccounts,t=Object(a.useState)(0),n=Object(v.a)(t,2),i=n[0],o=n[1],c=B(),u=c.marketEmitter,l=c.midPriceInUSD;return Object(a.useEffect)((function(){var t=function(){var t=e.reduce((function(e,t){var n=Object(pe.reserveMarketCap)(t.info),a=d.d.get(t.info.liquidityMint.toBase58());return a?e+Object(E.f)(n,null===a||void 0===a?void 0:a.info)*l(null===a||void 0===a?void 0:a.pubkey.toBase58()):e}),0);o(t)},n=u.onMarket((function(){t()}));return t(),function(){n()}}),[u,l,o,e]),r.a.createElement("div",{className:"flexColumn"},r.a.createElement("h2",{className:"home-market-size"},"Current market size: ",E.e.format(i)),r.a.createElement("div",{className:"home-item home-header"},r.a.createElement("div",null,fe.a.TABLE_TITLE_ASSET),r.a.createElement("div",null,fe.a.TABLE_TITLE_MARKET_SIZE),r.a.createElement("div",null,fe.a.TABLE_TITLE_TOTAL_BORROWED),r.a.createElement("div",null,fe.a.TABLE_TITLE_DEPOSIT_APY),r.a.createElement("div",null,fe.a.TABLE_TITLE_BORROW_APY)),e.map((function(e){return r.a.createElement(Ee,{reserve:e.info,address:e.pubkey})})))}),Oe=function(e){var t=W(e.reserve.liquidityMint),n=function(e){var t=Object(a.useContext)(S),n=t.midPriceInUSD,r=t.subscribeToMarket,i=t.marketEmitter,o=Object(a.useState)(0),c=Object(v.a)(o,2),u=c[0],l=c[1];return Object(a.useEffect)((function(){var t=r(e),a=function(){n&&l(n(e))};a();var o=i.onMarket(a);return function(){t(),o()}}),[n,e,i,r]),{price:u,isBase:1===u}}(e.reserve.liquidityMint.toBase58()).price,i=D(e.reserve).balance,o=Object(L.g)(e.reserve);return r.a.createElement(c.b,{to:"/borrow/".concat(e.address.toBase58())},r.a.createElement(ye.a,null,r.a.createElement("div",{className:"borrow-item"},r.a.createElement("span",{style:{display:"flex"}},r.a.createElement(ve,{mintAddress:e.reserve.liquidityMint}),t),r.a.createElement("div",null,E.c.format(n)," USDC"),r.a.createElement("div",null,E.c.format(i)," ",t),r.a.createElement("div",null,E.d.format(o)),r.a.createElement("div",null,r.a.createElement(te.a,null,r.a.createElement("span",null,fe.a.BORROW_ACTION))))))},he=(n(709),function(){var e=R().reserveAccounts;return r.a.createElement("div",{className:"flexColumn"},r.a.createElement("div",{className:"borrow-item deposit-header"},r.a.createElement("div",null,fe.a.TABLE_TITLE_ASSET),r.a.createElement("div",null,"Serum Dex Price"),r.a.createElement("div",null,fe.a.TABLE_TITLE_MAX_BORROW),r.a.createElement("div",null,fe.a.TABLE_TITLE_APY),r.a.createElement("div",null,fe.a.TABLE_TITLE_ACTION)),e.map((function(e){return r.a.createElement(Oe,{reserve:e.info,address:e.pubkey})})))}),we=(n(710),n(494)),je=n(90),ke=n(106),Ae=n(143),Se=n(142),Ne=n(1025),Te=function(e){Object(Ae.a)(n,e);var t=Object(Se.a)(n);function n(){var e;Object(je.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onChange=function(t){var n=t.target.value;(/^-?\d*(\.\d*)?$/.test(n)||""===n||"-"===n)&&e.props.onChange(n)},e.onBlur=function(){var t=e.props,n=t.value,a=t.onBlur,r=t.onChange,i=n;"."!==n.charAt(n.length-1)&&"-"!==n||(i=n.slice(0,-1)),(n.startsWith(".")||n.startsWith("-."))&&(i=i.replace(".","0.")),r(i.replace(/0*(\d+)/,"$1")),a&&a()},e}return Object(ke.a)(n,[{key:"render",value:function(){return r.a.createElement(Ne.a,Object.assign({},this.props,{onChange:this.onChange,onBlur:this.onBlur,maxLength:25}))}}]),n}(r.a.Component),Be=n(69),xe=n(46);function Me(e,t,n,a,r,i){if(!n.info.isNative)return n.pubkey;var o=_e(e,a,r,i);return e.push(xe.c.createInitAccountInstruction(C.b,C.c,o,a)),t.push(xe.c.createCloseAccountInstruction(C.b,o,a,a,[])),o}function Ce(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:65528,r=new O.a;return e.push(O.g.createAccount({fromPubkey:t,newAccountPubkey:r.publicKey,lamports:0,space:a,programId:C.b})),n.push(r),r.publicKey}function Le(e,t,n,a){var r=new O.a;return e.push(O.g.createAccount({fromPubkey:t,newAccountPubkey:r.publicKey,lamports:n,space:pe.LendingObligationLayout.span,programId:C.a})),a.push(r),r.publicKey}function Ie(e,t,n,a){var r=new O.a;return e.push(O.g.createAccount({fromPubkey:t,newAccountPubkey:r.publicKey,lamports:n,space:xe.b.span,programId:C.b})),a.push(r),r.publicKey}function _e(e,t,n,a){var r=new O.a;return e.push(O.g.createAccount({fromPubkey:t,newAccountPubkey:r.publicKey,lamports:n,space:xe.a.span,programId:C.b})),a.push(r),r.publicKey}function Re(e,t,n,a,r,i,o,c){var u,l=i.toBase58(),s=d.d.byParser(d.c).map((function(e){return d.d.get(e)})).find((function(e){return void 0!==e&&e.info.mint.toBase58()===l&&e.info.owner.toBase58()===t.toBase58()&&(void 0===c||!c.has(e.pubkey.toBase58()))})),f=l===C.c.toBase58();return s&&!f?u=s.pubkey:(u=function(e,t,n,a,r,i){var o=_e(e,t,n,i);return e.push(xe.c.createInitAccountInstruction(C.b,a,o,r)),o}(n,e,r,i,t,o),f&&a.push(xe.c.createCloseAccountInstruction(C.b,u,e,e,[]))),u}var qe,We=function(){var e=Object(b.a)(m.a.mark((function e(t,n,a,r,i,o,c,u,l){var f,b,y,g,h,w,j,k,A,S,N,T,B,x,M,L,I,_,R,q,W,P,D,U;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(Be.a)({message:"Borrowing funds...",description:"Please review transactions to approve.",type:"warn"}),f=[],b=[],y=[],e.next=6,t.getMinimumBalanceForRentExemption(xe.a.span);case 6:if(g=e.sent,!u){e.next=11;break}e.t0=u.pubkey,e.next=19;break;case 11:return e.t1=Le,e.t2=b,e.t3=n.publicKey,e.next=16,t.getMinimumBalanceForRentExemption(pe.LendingObligationLayout.span);case 16:e.t4=e.sent,e.t5=f,e.t0=(0,e.t1)(e.t2,e.t3,e.t4,e.t5);case 19:if(h=e.t0,!u){e.next=24;break}e.t6=u.info.tokenMint,e.next=32;break;case 24:return e.t7=Ie,e.t8=b,e.t9=n.publicKey,e.next=29,t.getMinimumBalanceForRentExemption(xe.b.span);case 29:e.t10=e.sent,e.t11=f,e.t6=(0,e.t7)(e.t8,e.t9,e.t10,e.t11);case 32:return w=e.t6,j=l||_e(b,n.publicKey,g,f),e.next=36,Re(n.publicKey,n.publicKey,b,y,g,o.info.liquidityMint,f);case 36:if(k=e.sent,!(b.length>0)){e.next=42;break}return e.next=40,Object(s.c)(t,n,b,Object(p.a)(f));case 40:A=e.sent,Object(Be.a)({message:"Obligation accounts created",description:"Transaction ".concat(A),type:"success"});case 42:return Object(Be.a)({message:"Adding Liquidity...",description:"Please review transactions to approve.",type:"warn"}),f=[],b=[],y=[],e.next=48,O.d.findProgramAddress([c.info.lendingMarket.toBuffer()],C.a);case 48:if(S=e.sent,N=Object(v.a)(S,1),T=N[0],B=0,x=0,i!==pe.BorrowAmountType.LiquidityBorrowAmount){e.next=62;break}return M=a.info.amount.toNumber(),x=M-g,e.next=58,d.d.query(t,o.info.liquidityMint,d.b);case 58:L=e.sent,B=Object(E.j)(r,null===L||void 0===L?void 0:L.info),e.next=68;break;case 62:if(i!==pe.BorrowAmountType.CollateralDepositAmount){e.next=68;break}return e.next=65,d.d.query(t,c.info.collateralMint,d.b);case 65:I=e.sent,B=Object(E.j)(r,null===I||void 0===I?void 0:I.info),x=B;case 68:if(_=Me(b,y,a,n.publicKey,x+g,f),b.push(xe.c.createApproveInstruction(C.b,_,T,n.publicKey,[],x)),R=d.d.get(c.info.lendingMarket),q=o.info.dexMarketOption?o.info.dexMarket:c.info.dexMarket,W=d.d.get(q)){e.next=75;break}throw new Error("Dex market doesn't exist.");case 75:return P=R.info.quoteMint.equals(c.info.liquidityMint)?null===W||void 0===W?void 0:W.info.bids:null===W||void 0===W?void 0:W.info.asks,D=Ce(b,n.publicKey,f),b.push(Object(pe.borrowInstruction)(B,i,_,k,c.pubkey,c.info.collateralSupply,o.pubkey,o.info.liquiditySupply,h,w,j,n.publicKey,T,q,P,D)),e.prev=78,e.next=81,Object(s.c)(t,n,b.concat(y),f,!0);case 81:U=e.sent,Object(Be.a)({message:"Funds borrowed.",type:"success",description:"Transaction - ".concat(U)}),e.next=88;break;case 85:throw e.prev=85,e.t12=e.catch(78),new Error;case 88:case"end":return e.stop()}}),e,null,[[78,85]])})));return function(t,n,a,r,i,o,c,u,l){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(b.a)(m.a.mark((function e(t,n,a,r,i,o){var c,u,l,f,b,p,y,g,h,w,j,k,A,S;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=80,Object(Be.a)({message:"Depositing funds...",description:"Please review transactions to approve.",type:"warn"}),u=!0,l=[],f=[],b=[],e.next=8,i.getMinimumBalanceForRentExemption(xe.a.span);case 8:return p=e.sent,e.next=11,O.d.findProgramAddress([a.lendingMarket.toBuffer()],C.a);case 11:return y=e.sent,g=Object(v.a)(y,1),h=g[0],e.next=16,d.d.query(i,a.liquidityMint,d.b);case 16:if(w=e.sent,j=Object(E.j)(n,null===w||void 0===w?void 0:w.info),k=Me(f,b,t,o.publicKey,j+p,l),f.push(xe.c.createApproveInstruction(C.b,k,h,o.publicKey,[],j)),!u){e.next=26;break}return e.next=23,Re(o.publicKey,o.publicKey,f,b,p,a.collateralMint,l);case 23:A=e.sent,e.next=27;break;case 26:A=_e(f,o.publicKey,p,l);case 27:return u?f.push(Object(L.j)(j,k,A,h,r,a.liquiditySupply,a.collateralMint)):f.push(Object(L.k)(j,c,k,A,r,a.liquidityMint,a.liquiditySupply,a.collateralMint,a.collateralSupply,a.lendingMarket,h,a.dexMarket)),e.prev=28,e.next=31,Object(s.c)(i,o,f.concat(b),l,!0);case 31:S=e.sent,Object(Be.a)({message:"Funds deposited.",type:"success",description:"Transaction - ".concat(S)}),e.next=38;break;case 35:throw e.prev=35,e.t0=e.catch(28),new Error;case 38:case"end":return e.stop()}}),e,null,[[28,35]])})));return function(t,n,a,r,i,o){return e.apply(this,arguments)}}(),De=n(501),Ue=function(){var e=Object(b.a)(m.a.mark((function e(t,n,a,r,i,o,c,u){var l,d,f,b,p,y,g,h,w,j,k;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(Be.a)({message:"Repaing funds...",description:"Please review transactions to approve.",type:"warn"}),l=[],d=[],f=[],e.next=6,c.getMinimumBalanceForRentExemption(xe.a.span);case 6:return b=e.sent,e.next=9,O.d.findProgramAddress([i.info.lendingMarket.toBuffer()],C.a);case 9:return p=e.sent,y=Object(v.a)(p,1),g=y[0],h=t.pubkey,d.push(xe.c.createApproveInstruction(C.b,h,g,u.publicKey,[],n)),e.next=16,Re(u.publicKey,u.publicKey,d,f,b,o.info.collateralMint,l);case 16:return w=e.sent,j=n/Object(E.l)(a.info.borrowAmountWad).toNumber(),console.log(j),d.push(xe.c.createApproveInstruction(C.b,r.pubkey,g,u.publicKey,[],r.info.amount.toNumber())),d.push(Object(De.a)(n,h,w,i.pubkey,i.info.liquiditySupply,o.pubkey,o.info.collateralSupply,a.pubkey,a.info.tokenMint,r.pubkey,g)),e.prev=21,e.next=24,Object(s.c)(c,u,d.concat(f),l,!0);case 24:k=e.sent,Object(Be.a)({message:"Funds repaid.",type:"success",description:"Transaction - ".concat(k)}),e.next=30;break;case 28:e.prev=28,e.t0=e.catch(21);case 30:case"end":return e.stop()}}),e,null,[[21,28]])})));return function(t,n,a,r,i,o,c,u){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(b.a)(m.a.mark((function e(t,n,a,r,i,o){var c,u,l,d,f,b,p,y,E,g;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(Be.a)({message:"Withdrawing funds...",description:"Please review transactions to approve.",type:"warn"}),c=[],u=[],l=[],e.next=6,i.getMinimumBalanceForRentExemption(xe.a.span);case 6:return d=e.sent,e.next=9,O.d.findProgramAddress([a.lendingMarket.toBuffer()],C.a);case 9:return f=e.sent,b=Object(v.a)(f,1),p=b[0],y=t.pubkey,u.push(xe.c.createApproveInstruction(C.b,y,p,o.publicKey,[],n)),e.next=16,Re(o.publicKey,o.publicKey,u,l,d,a.liquidityMint,c);case 16:return E=e.sent,u.push(Object(L.p)(n,y,E,r,a.collateralMint,a.liquiditySupply,p)),e.prev=18,e.next=21,Object(s.c)(i,o,u.concat(l),c,!0);case 21:g=e.sent,Object(Be.a)({message:"Funds deposited.",type:"success",description:"Transaction - ".concat(g)}),e.next=27;break;case 25:e.prev=25,e.t0=e.catch(18);case 27:case"end":return e.stop()}}),e,null,[[18,25]])})));return function(t,n,a,r,i,o){return e.apply(this,arguments)}}(),Fe=se.a.Option,ze=function(e){var t=R().reserveAccounts,n=Object(s.e)().tokenMap,a=d.d.get(e.reserve.lendingMarket),i=!e.reserve.liquidityMint.equals(a.info.quoteMint);return r.a.createElement(se.a,{size:"large",showSearch:!0,style:{minWidth:120},placeholder:"Collateral",value:e.mint,onChange:function(t){e.onMintChange&&e.onMintChange(t)},filterOption:function(e,t){var n;return(null===t||void 0===t||null===(n=t.name)||void 0===n?void 0:n.toLowerCase().indexOf(e.toLowerCase()))>=0}},t.filter((function(t){return t.info!==e.reserve})).filter((function(e){return!i||e.info.liquidityMint.equals(a.info.quoteMint)})).map((function(e){var t=e.info.liquidityMint.toBase58(),a=e.pubkey.toBase58(),i=Object(E.h)(n,t);return r.a.createElement(Fe,{key:a,value:a,name:i,title:a},r.a.createElement("div",{key:a,style:{display:"flex",alignItems:"center"}},r.a.createElement(ve,{mintAddress:t}),i))})))},Ye=(n(715),n(1033)),He=(n(386),function(e){return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center"}},r.a.createElement("h2",null,"Congratulations!"),r.a.createElement("div",null,"Your action has been successfully executed"),r.a.createElement("div",{className:"success-icon"}),r.a.createElement(c.b,{to:"/dashboard"},r.a.createElement(te.a,{type:"primary"},fe.a.DASHBOARD_ACTION)),r.a.createElement(te.a,{type:"text",onClick:e.onClose},fe.a.GO_BACK_ACTION))}),Ge=function(){var e=Object(u.f)();return r.a.createElement(te.a,{type:"text",onClick:e.goBack},fe.a.GO_BACK_ACTION)},Qe=r.a.createElement(Ye.a,{style:{fontSize:24},spin:!0}),Je=function(e){var t=Object(s.d)(),n=Object(l.c)().wallet,i=Object(a.useState)(""),o=Object(v.a)(i,2),c=o[0],u=o[1],f=Object(a.useState)(!1),p=Object(v.a)(f,2),y=p[0],E=p[1],g=Object(a.useState)(!1),O=Object(v.a)(g,2),h=O[0],w=O[1],j=e.reserve,k=Object(a.useState)(),A=Object(v.a)(k,2),S=A[0],N=A[1],T=Object(a.useMemo)((function(){var e=d.d.byParser(pe.LendingReserveParser).find((function(e){return e===S}))||"";return d.d.get(e)}),[S]),B=W(null===j||void 0===j?void 0:j.info.liquidityMint),x=P(null===T||void 0===T?void 0:T.info.collateralMint).accounts,M=F(j.pubkey).userObligationsByReserve,C=Object(a.useCallback)((function(){T&&(E(!0),Object(b.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,We(t,n,x[0],parseFloat(c),pe.BorrowAmountType.LiquidityBorrowAmount,j,T,M.length>0?M[0].obligation:void 0,M.length>0?M[0].userAccounts[0].pubkey:void 0);case 3:u(""),w(!0),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:return e.prev=9,E(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,7,9,12]])})))())}),[t,n,c,T,j,x,M,E,w]);return r.a.createElement(ye.a,{className:e.className,bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},h?r.a.createElement(He,{onClose:function(){return w(!1)}}):r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},r.a.createElement("div",{className:"borrow-input-title"},fe.a.SELECT_COLLATERAL),r.a.createElement(ze,{reserve:j.info,mint:S,onMintChange:N}),r.a.createElement("div",{className:"borrow-input-title"},fe.a.BORROW_QUESTION),r.a.createElement("div",{className:"token-input"},r.a.createElement(ve,{mintAddress:null===j||void 0===j?void 0:j.info.liquidityMint}),r.a.createElement(Te,{value:c,onChange:function(e){u(e)},style:{fontSize:20,boxShadow:"none",borderColor:"transparent",outline:"transparent"},placeholder:"0.00"}),r.a.createElement("div",null,B)),r.a.createElement(te.a,{type:"primary",onClick:C,disabled:0===x.length||y},fe.a.BORROW_ACTION,y&&r.a.createElement(we.a,{indicator:Qe,className:"action-spinner"})),r.a.createElement(Ge,null)))},Ve=n(1022),Xe=Ve.a.Text;!function(e){e.Deposit="deposit",e.Borrow="borrow"}(qe||(qe={}));var Ze=function(e){var t=e.reserve.info,n=e.mode,a=W(null===t||void 0===t?void 0:t.liquidityMint),i=Object(d.g)(t.liquidityMint),o=Object(E.f)(t.availableLiquidity.toNumber(),i),u=Object(L.h)(t),l=Object(L.g)(t),s=Object(L.i)(t),f=t.config.liquidationThreshold/100,m=t.config.liquidationBonus/100,b=t.config.loanToValueRatio/100,p=null;return n===qe.Deposit?p=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card-row"},r.a.createElement(Xe,{type:"secondary",className:"card-cell "},fe.a.TABLE_TITLE_DEPOSIT_APY,":"),r.a.createElement("div",{className:"card-cell "},E.d.format(u))),r.a.createElement("div",{className:"card-row"},r.a.createElement(Xe,{type:"secondary",className:"card-cell "},"Maximum LTV:"),r.a.createElement("div",{className:"card-cell "},E.d.format(b))),r.a.createElement("div",{className:"card-row"},r.a.createElement(Xe,{type:"secondary",className:"card-cell "},"Liquidation threshold:"),r.a.createElement("div",{className:"card-cell "},E.d.format(f))),r.a.createElement("div",{className:"card-row"},r.a.createElement(Xe,{type:"secondary",className:"card-cell "},"Liquidation penalty:"),r.a.createElement("div",{className:"card-cell "},E.d.format(m)))):n===qe.Borrow&&(p=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card-row"},r.a.createElement(Xe,{type:"secondary",className:"card-cell "},fe.a.TABLE_TITLE_BORROW_APY,":"),r.a.createElement("div",{className:"card-cell "},E.d.format(l))))),r.a.createElement(ye.a,{className:e.className,title:r.a.createElement("div",{style:{display:"flex",alignItems:"center",fontSize:"1.2rem",justifyContent:"center"}},r.a.createElement(c.b,{to:"/reserve/".concat(e.reserve.pubkey)},r.a.createElement(ve,{mintAddress:null===t||void 0===t?void 0:t.liquidityMint,style:{width:30,height:30}})," ",a," Reserve Overview"))},r.a.createElement("div",{className:"card-row"},r.a.createElement(Xe,{type:"secondary",className:"card-cell "},"Utilization rate:"),r.a.createElement("div",{className:"card-cell "},E.d.format(s))),r.a.createElement("div",{className:"card-row"},r.a.createElement(Xe,{type:"secondary",className:"card-cell "},"Available liquidity:"),r.a.createElement("div",{className:"card-cell "},E.c.format(o)," ",a)),p)},$e=function(){var e=q(Object(u.h)().id);return e?r.a.createElement("div",{className:"borrow-reserve"},r.a.createElement("div",{className:"borrow-reserve-container"},r.a.createElement(Je,{className:"borrow-reserve-item borrow-reserve-item-left",reserve:e}),r.a.createElement(Ze,{className:"borrow-reserve-item borrow-reserve-item-right",reserve:e,mode:qe.Borrow}))):null},et=function(e){var t=e.reserve.info.liquidityMint,n=W(t),i=D(e.reserve.info,e.account.pubkey).balance,o=Object(a.useMemo)((function(){return Object(L.h)(e.reserve.info)}),[e.reserve]);return r.a.createElement(ye.a,null,r.a.createElement("div",{className:"dashboard-item"},r.a.createElement("span",{style:{display:"flex"}},r.a.createElement(ve,{mintAddress:t}),n),r.a.createElement("div",null,E.c.format(i)," ",n),r.a.createElement("div",null,E.d.format(o)),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},r.a.createElement(c.b,{to:"/deposit/".concat(e.reserve.pubkey.toBase58())},r.a.createElement(te.a,null,r.a.createElement("span",null,fe.a.DEPOSIT_ACTION))),r.a.createElement(c.b,{to:"/withdraw/".concat(e.reserve.pubkey.toBase58())},r.a.createElement(te.a,null,r.a.createElement("span",null,fe.a.WITHDRAW_ACTION))))))},tt=function(e){var t=e.obligation,n=d.d.get(t.info.borrowReserve),i=W(null===n||void 0===n?void 0:n.info.liquidityMint),o=Object(d.g)(n.info.liquidityMint),u=Object(E.f)(Object(E.l)(t.info.borrowAmountWad),o),l=Object(a.useMemo)((function(){return Object(L.g)(n.info)}),[n]);return r.a.createElement(ye.a,null,r.a.createElement("div",{className:"dashboard-item"},r.a.createElement("span",{style:{display:"flex"}},r.a.createElement(ve,{mintAddress:null===n||void 0===n?void 0:n.info.liquidityMint}),i),r.a.createElement("div",null,E.c.format(u)," ",i),r.a.createElement("div",null,E.d.format(l)),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},r.a.createElement(c.b,{to:"/borrow/".concat(n.pubkey.toBase58())},r.a.createElement(te.a,null,r.a.createElement("span",null,"Borrow"))),r.a.createElement(c.b,{to:"/repay/loan/".concat(t.pubkey.toBase58())},r.a.createElement(te.a,null,r.a.createElement("span",null,"Repay"))))))},nt=(n(716),function(){var e=Object(l.c)().connected,t=K().userObligations,n=function(){var e=I().userAccounts,t=R().reserveAccounts,n=Object(a.useMemo)((function(){return t.reduce((function(e,t){return e.set(t.info.collateralMint.toBase58(),t),e}),new Map)}),[t]);return{userDeposits:Object(a.useMemo)((function(){return e.filter((function(e){return n.has(e.info.mint.toBase58())})).map((function(e){return{account:e,reserve:n.get(e.info.mint.toBase58())}}))}),[e,n])}}().userDeposits;return r.a.createElement("div",{className:"dashboard-container"},!e&&r.a.createElement("div",{className:"dashboard-info"},fe.a.DASHBOARD_INFO),e&&0===n.length&&0===t.length&&r.a.createElement("div",{className:"dashboard-info"},fe.a.NO_LOANS_NO_DEPOSITS),n.length>0&&r.a.createElement("div",{className:"dashboard-left"},r.a.createElement("span",null,fe.a.DASHBOARD_TITLE_DEPOSITS),r.a.createElement("div",{className:"dashboard-item dashboard-header"},r.a.createElement("div",null,fe.a.TABLE_TITLE_ASSET),r.a.createElement("div",null,fe.a.TABLE_TITLE_DEPOSIT_BALANCE),r.a.createElement("div",null,fe.a.TABLE_TITLE_APY),r.a.createElement("div",null,fe.a.TABLE_TITLE_ACTION)),n.map((function(e){return r.a.createElement(et,{reserve:e.reserve,account:e.account})}))),t.length>0&&r.a.createElement("div",{className:"dashboard-right"},r.a.createElement("span",null,fe.a.DASHBOARD_TITLE_LOANS),r.a.createElement("div",{className:"dashboard-item dashboard-header"},r.a.createElement("div",null,fe.a.TABLE_TITLE_ASSET),r.a.createElement("div",null,fe.a.TABLE_TITLE_LOAN_BALANCE),r.a.createElement("div",null,fe.a.TABLE_TITLE_APY),r.a.createElement("div",null,fe.a.TABLE_TITLE_ACTION)),t.map((function(e){return r.a.createElement(tt,{obligation:e.obligation})}))))}),at=function(e){var t=W(e.reserve.liquidityMint),n=P(e.reserve.liquidityMint).balance,a=D(e.reserve).balance,i=Object(L.h)(e.reserve);return r.a.createElement(c.b,{to:"/deposit/".concat(e.address.toBase58())},r.a.createElement(ye.a,null,r.a.createElement("div",{className:"deposit-item"},r.a.createElement("span",{style:{display:"flex"}},r.a.createElement(ve,{mintAddress:e.reserve.liquidityMint}),t),r.a.createElement("div",null,E.c.format(n)," ",t),r.a.createElement("div",null,E.c.format(a)," ",t),r.a.createElement("div",null,E.d.format(i)),r.a.createElement("div",null,r.a.createElement(te.a,null,r.a.createElement("span",null,fe.a.DEPOSIT_ACTION))))))},rt=(n(717),function(){var e=R().reserveAccounts;return r.a.createElement("div",{className:"flexColumn"},r.a.createElement("div",{className:"deposit-item deposit-header"},r.a.createElement("div",null,"Asset"),r.a.createElement("div",null,"Your wallet balance"),r.a.createElement("div",null,"Your balance in Oyster"),r.a.createElement("div",null,"APY"),r.a.createElement("div",null,"Action")),e.map((function(e){return r.a.createElement(at,{reserve:e.info,address:e.pubkey})})))}),it=(n(718),n(719),r.a.createElement(Ye.a,{style:{fontSize:24},spin:!0})),ot=function(e){var t=Object(s.d)(),n=Object(l.c)().wallet,i=Object(a.useState)(""),o=Object(v.a)(i,2),c=o[0],u=o[1],d=Object(a.useState)(!1),f=Object(v.a)(d,2),p=f[0],y=f[1],E=Object(a.useState)(!1),g=Object(v.a)(E,2),O=g[0],h=g[1],w=e.reserve,j=e.address,k=W(null===w||void 0===w?void 0:w.liquidityMint),A=P(null===w||void 0===w?void 0:w.liquidityMint).accounts,S=Object(a.useCallback)((function(){y(!0),Object(b.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pe(A[0],parseFloat(c),w,j,t,n);case 3:u(""),h(!0),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:return e.prev=9,y(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,7,9,12]])})))()}),[t,n,c,w,A,j]);return r.a.createElement(ye.a,{className:e.className,bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},O?r.a.createElement(He,{onClose:function(){return h(!1)}}):r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},r.a.createElement("div",{className:"deposit-input-title"},"How much would you like to deposit?"),r.a.createElement("div",{className:"token-input"},r.a.createElement(ve,{mintAddress:null===w||void 0===w?void 0:w.liquidityMint}),r.a.createElement(Te,{value:c,onChange:function(e){u(e)},autoFocus:!0,style:{fontSize:20,boxShadow:"none",borderColor:"transparent",outline:"transparent"},placeholder:"0.00"}),r.a.createElement("div",null,k)),r.a.createElement(te.a,{type:"primary",onClick:S,disabled:0===A.length||p},"Deposit",p&&r.a.createElement(we.a,{indicator:it,className:"action-spinner"}))))},ct=(n(720),function(e){var t=W(e.reserve.liquidityMint),n=P(e.reserve.liquidityMint).balance,a=D(e.reserve).balance;return r.a.createElement(ye.a,{className:e.className,bodyStyle:{display:"flex",justifyContent:"space-around"}},r.a.createElement("div",{className:"deposit-info-line-item "},r.a.createElement("div",null,"Your balance in Oyster"),r.a.createElement("div",null,E.c.format(a)," ",t)),r.a.createElement("div",{className:"deposit-info-line-item "},r.a.createElement("div",null,"Your wallet balance"),r.a.createElement("div",null,E.c.format(n)," ",t)),r.a.createElement("div",{className:"deposit-info-line-item "},r.a.createElement("div",null,"Health factor"),r.a.createElement("div",null,"--")))}),ut=function(){var e=q(Object(u.h)().id),t=null===e||void 0===e?void 0:e.info;return t&&e?r.a.createElement("div",{className:"deposit-reserve"},r.a.createElement(ct,{className:"deposit-reserve-item",reserve:t,address:e.pubkey}),r.a.createElement("div",{className:"deposit-reserve-container"},r.a.createElement(ot,{className:"deposit-reserve-item deposit-reserve-item-left",reserve:t,address:e.pubkey}),r.a.createElement(Ze,{className:"deposit-reserve-item deposit-reserve-item-right",reserve:e,mode:qe.Deposit}))):null},lt=(n(721),Ve.a.Text),st=function(e){var t=e.reserve,n=e.address,i=W(null===t||void 0===t?void 0:t.liquidityMint),o=P(e.reserve.liquidityMint).balance,u=D(e.reserve).balance,l=function(e){var t=Object(s.d)(),n=F(e).userObligationsByReserve,r=Object(a.useState)(0),i=Object(v.a)(r,2),o=i[0],c=i[1],u=q(e),l=Object(d.g)(null===u||void 0===u?void 0:u.info.liquidityMint);return Object(a.useEffect)((function(){c(0),Object(b.a)(m.a.mark((function e(){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.e)(t,n.map((function(e){return e.obligation.info.tokenMint.toBase58()})),"single");case 2:a=e.sent,r=a.keys,a.array.forEach((function(e,t){var n=r[t];d.d.add(new O.d(n),e,d.b)})),c(n.reduce((function(e,t){var n=Object(E.l)(t.obligation.info.borrowAmountWad).toNumber(),a=t.userAccounts.reduce((function(e,t){return e+t.info.amount.toNumber()}),0),r=d.d.get(t.obligation.info.tokenMint);return e+=n*a/(null===r||void 0===r?void 0:r.info.supply.toNumber())}),0));case 7:case"end":return e.stop()}}),e)})))()}),[t,n]),{borrowed:Object(E.f)(o,l),borrowedLamports:o}}(n).borrowed;return r.a.createElement(ye.a,{className:e.className,title:r.a.createElement("div",{style:{display:"flex",alignItems:"center",fontSize:"1.2rem",justifyContent:"center"}},"Your Information")},r.a.createElement("h3",null,"Borrows"),r.a.createElement("div",{className:"card-row"},r.a.createElement(lt,{type:"secondary",className:"card-cell "},"Borrowed"),r.a.createElement("div",{className:"card-cell "},E.c.format(l)," ",i)),r.a.createElement("div",{className:"card-row"},r.a.createElement(lt,{type:"secondary",className:"card-cell "},"Health factor:"),r.a.createElement("div",{className:"card-cell "},"--")),r.a.createElement("div",{className:"card-row"},r.a.createElement(lt,{type:"secondary",className:"card-cell "},"Loan to value:"),r.a.createElement("div",{className:"card-cell "},E.c.format(0))),r.a.createElement("div",{className:"card-row"},r.a.createElement(lt,{type:"secondary",className:"card-cell "},"Available to you:"),r.a.createElement("div",{className:"card-cell "},E.c.format(0)," ",i)),r.a.createElement("h3",null,"Deposits"),r.a.createElement("div",{className:"card-row"},r.a.createElement(lt,{type:"secondary",className:"card-cell "},"Wallet balance:"),r.a.createElement("div",{className:"card-cell "},E.c.format(o)," ",i)),r.a.createElement("div",{className:"card-row"},r.a.createElement(lt,{type:"secondary",className:"card-cell "},"You already deposited:"),r.a.createElement("div",{className:"card-cell "},E.c.format(u)," ",i)),r.a.createElement("div",{className:"card-row",style:{marginTop:20,justifyContent:"space-evenly"}},r.a.createElement(c.b,{to:"/deposit/".concat(n)},r.a.createElement(te.a,null,"Deposit")),r.a.createElement(c.b,{to:"/borrow/".concat(n)},r.a.createElement(te.a,null,"Borrow")),r.a.createElement(c.b,{to:"/withdraw/".concat(n)},r.a.createElement(te.a,null,"Withdraw")),r.a.createElement(c.b,{to:"/repay/".concat(n)},r.a.createElement(te.a,null,"Repay"))))},dt=(n(722),n(280)),ft=n.n(dt),mt=function(e){var t=Object(a.useRef)(null);Object(a.useEffect)((function(){var e=t.current;return function(){var t=e&&ft.a.getInstanceByDom(e);t&&t.dispose()}}),[]);var n=Object(d.g)(e.reserve.liquidityMint),i=Object(E.f)(e.reserve.availableLiquidity.toNumber(),n),o=Object(a.useMemo)((function(){return Object(E.f)(Object(E.l)(e.reserve.borrowedLiquidityWad),n)}),[e.reserve,n]);return Object(a.useEffect)((function(){if(t.current){var e=ft.a.getInstanceByDom(t.current);e||(e=ft.a.init(t.current));var n=[{name:"Available Liquidity",value:i,tokens:i},{name:"Total Borrowed",value:o,tokens:o}];e.setOption({tooltip:{trigger:"item",formatter:function(e){var t=E.e.format(e.value),n=E.c.format(e.data.tokens);return"".concat(e.name,": \n").concat(t,"\n(").concat(n,")")}},series:[{name:"Liquidity",type:"pie",radius:["50%","70%"],top:0,bottom:0,left:0,right:0,animation:!1,label:{fontSize:14,show:!0,formatter:function(e){var t=E.e.format(e.value),n=E.c.format(e.data.tokens);return"{c|".concat(e.name,"}\n{r|").concat(n,"}\n{r|").concat(t,"}")},rich:{c:{color:"#999",lineHeight:22,align:"center"},r:{color:"#999",align:"right"}},color:"rgba(255, 255, 255, 0.5)"},itemStyle:{normal:{borderColor:"#000"}},data:n}]})}}),[o,i]),r.a.createElement("div",{ref:t,style:{height:300,width:400}})},bt=function(e){return r.a.createElement(ye.a,{className:e.className,title:r.a.createElement(r.a.Fragment,null,fe.a.RESERVE_STATUS_TITLE),bodyStyle:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},r.a.createElement(mt,{reserve:e.reserve})))},pt=function(){var e=q(Object(u.h)().id),t=null===e||void 0===e?void 0:e.info;return t&&e?r.a.createElement("div",{className:"reserve-overview"},r.a.createElement("div",{className:"reserve-overview-container"},r.a.createElement(bt,{className:"reserve-overview-item reserve-overview-item-left",reserve:t,address:e.pubkey}),r.a.createElement(st,{className:"reserve-overview-item reserve-overview-item-right",reserve:t,address:e.pubkey}))):null},vt=(n(1017),n(1018),r.a.createElement(Ye.a,{style:{fontSize:24},spin:!0})),yt=function(e){var t=Object(s.d)(),n=Object(l.c)().wallet,i=Object(a.useState)(""),o=Object(v.a)(i,2),c=o[0],u=o[1],d=Object(a.useState)(!1),f=Object(v.a)(d,2),p=f[0],y=f[1],E=Object(a.useState)(!1),g=Object(v.a)(E,2),O=g[0],h=g[1],w=e.reserve,j=e.address,k=W(null===w||void 0===w?void 0:w.liquidityMint),A=P(null===w||void 0===w?void 0:w.collateralMint),S=A.balanceLamports,N=A.accounts,T=D(w).balance,B=Object(a.useCallback)((function(){y(!0),Object(b.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ke(N[0],Math.ceil(S*(parseFloat(c)/T)),w,j,t,n);case 3:u(""),h(!0),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:return e.prev=9,y(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,7,9,12]])})))()}),[t,n,S,T,c,w,N,j]);return r.a.createElement(ye.a,{className:e.className,bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},O?r.a.createElement(He,{onClose:function(){return h(!1)}}):r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},r.a.createElement("div",{className:"withdraw-input-title"},fe.a.WITHDRAW_QUESTION),r.a.createElement("div",{className:"token-input"},r.a.createElement(ve,{mintAddress:null===w||void 0===w?void 0:w.liquidityMint}),r.a.createElement(Te,{value:c,onChange:function(e){u(e)},autoFocus:!0,style:{fontSize:20,boxShadow:"none",borderColor:"transparent",outline:"transparent"},placeholder:"0.00"}),r.a.createElement("div",null,k)),r.a.createElement(te.a,{type:"primary",onClick:B,disabled:0===N.length||p},fe.a.WITHDRAW_ACTION,p&&r.a.createElement(we.a,{indicator:vt,className:"action-spinner"}))))},Et=function(){var e=q(Object(u.h)().id),t=null===e||void 0===e?void 0:e.info;return t&&e?r.a.createElement("div",{className:"deposit-reserve"},r.a.createElement(ct,{className:"deposit-reserve-item",reserve:t,address:e.pubkey}),r.a.createElement("div",{className:"deposit-reserve-container"},r.a.createElement(yt,{className:"deposit-reserve-item deposit-reserve-item-left",reserve:t,address:e.pubkey}),r.a.createElement(Ze,{className:"deposit-reserve-item deposit-reserve-item-right",reserve:e,mode:qe.Deposit}))):null},gt=n(278),Ot=function(e){var t=Object(l.c)(),n=t.wallet,a=t.connected,i=e.onClick,o=(e.children,Object(gt.a)(e,["onClick","children"]));return r.a.createElement(te.a,Object.assign({},o,{onClick:a?i:n.connect}),a?e.children:fe.a.CONNECT_LABEL)},ht=function(){var e=Object(s.d)(),t=Object(l.c)().wallet,n=Object(a.useCallback)((function(){e.requestAirdrop(t.publicKey,2*O.c).then((function(){Object(Be.a)({message:fe.a.ACCOUNT_FUNDED,type:"success"})}))}),[t,e]);return r.a.createElement("div",{className:"flexColumn",style:{flex:1}},r.a.createElement(ye.a,{title:"Faucet",bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"},style:{flex:1}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center"}},r.a.createElement("div",{className:"deposit-input-title",style:{margin:10}},fe.a.FAUCET_INFO),r.a.createElement(Ot,{type:"primary",onClick:n},fe.a.GIVE_SOL))))},wt=(n(1019),r.a.createElement(Ye.a,{style:{fontSize:24},spin:!0})),jt=function(e){var t=Object(s.d)(),n=Object(l.c)().wallet,i=Object(a.useState)(""),o=Object(v.a)(i,2),c=o[0],u=o[1],f=Object(a.useState)(!1),p=Object(v.a)(f,2),y=p[0],g=p[1],O=Object(a.useState)(!1),h=Object(v.a)(O,2),w=h[0],j=h[1],k=e.reserve,A=e.obligation,S=Object(a.useState)(),N=Object(v.a)(S,2),T=N[0],B=N[1],x=Object(a.useMemo)((function(){var e=d.d.byParser(pe.LendingReserveParser).find((function(e){return e===T}))||"";return d.d.get(e)}),[T]),M=W(null===k||void 0===k?void 0:k.info.liquidityMint),C=P(k.info.liquidityMint),L=C.accounts,_=C.balance,R=Object(d.g)(k.info.liquidityMint),q=function(e){var t=I().userAccounts,n="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),a=t.findIndex((function(e){return e.info.mint.toBase58()===n}));if(-1!==a)return t[a]}(null===A||void 0===A?void 0:A.info.tokenMint),D=Object(a.useMemo)((function(){return Object(E.j)(parseFloat(c),R)}),[c,R]),U=Object(a.useCallback)((function(){x&&A&&k&&q&&(g(!0),Object(b.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ue(L[0],D,A,q,k,x,t,n);case 3:u(""),j(!0),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:return e.prev=9,g(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,7,9,12]])})))())}),[D,t,n,A,x,k,L,q]);return r.a.createElement(ye.a,{className:e.className,bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},w?r.a.createElement(He,{onClose:function(){return j(!1)}}):r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},r.a.createElement("div",{className:"repay-input-title"},fe.a.REPAY_QUESTION," (Currently: )",E.c.format(_)," ",M,")"),r.a.createElement("div",{className:"token-input"},r.a.createElement(ve,{mintAddress:null===k||void 0===k?void 0:k.info.liquidityMint}),r.a.createElement(Te,{value:c,onChange:function(e){u(e)},autoFocus:!0,style:{fontSize:20,boxShadow:"none",borderColor:"transparent",outline:"transparent"},placeholder:"0.00"}),r.a.createElement("div",null,M)),r.a.createElement("div",{className:"repay-input-title"},fe.a.SELECT_COLLATERAL),r.a.createElement(ze,{reserve:k.info,mint:T,onMintChange:B}),r.a.createElement(te.a,{type:"primary",onClick:U,disabled:0===L.length},fe.a.REPAY_ACTION,y&&r.a.createElement(we.a,{indicator:wt,className:"action-spinner"}))))},kt=(n(1020),function(){var e=Object(u.h)(),t=e.reserve,n=e.obligation,i=function(e){var t="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),n=Object(a.useState)(),r=Object(v.a)(n,2),i=r[0],o=r[1];return Object(a.useEffect)((function(){o(d.d.get(t||""));var e=d.d.emitter.onCache((function(e){e.id===t&&o(d.d.get(t))}));return function(){e()}}),[t,o]),i}(n),o=q(n?null===i||void 0===i?void 0:i.info.borrowReserve:t),c=null===o||void 0===o?void 0:o.info;return console.log([t,n]),c&&o?r.a.createElement("div",{className:"repay-reserve"},r.a.createElement("div",{className:"repay-reserve-container"},r.a.createElement(jt,{className:"repay-reserve-item repay-reserve-item-left",reserve:o,obligation:i}),r.a.createElement(Ze,{className:"repay-reserve-item repay-reserve-item-right",reserve:o,mode:qe.Borrow}))):null});function At(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a,{basename:"/"},r.a.createElement(s.a,null,r.a.createElement(l.b,null,r.a.createElement(d.a,null,r.a.createElement(T,null,r.a.createElement(Y,null,r.a.createElement(be,null,r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/",component:function(){return r.a.createElement(ge,null)}}),r.a.createElement(u.a,{exact:!0,path:"/dashboard",children:r.a.createElement(nt,null)}),r.a.createElement(u.a,{path:"/reserve/:id",children:r.a.createElement(pt,null)}),r.a.createElement(u.a,{exact:!0,path:"/deposit",component:function(){return r.a.createElement(rt,null)}}),r.a.createElement(u.a,{path:"/deposit/:id",children:r.a.createElement(ut,null)}),r.a.createElement(u.a,{path:"/withdraw/:id",children:r.a.createElement(Et,null)}),r.a.createElement(u.a,{exact:!0,path:"/borrow",children:r.a.createElement(he,null)}),r.a.createElement(u.a,{path:"/borrow/:id",children:r.a.createElement($e,null)}),r.a.createElement(u.a,{path:"/repay/loan/:obligation",children:r.a.createElement(kt,null)}),r.a.createElement(u.a,{path:"/repay/:reserve",children:r.a.createElement(kt,null)}),r.a.createElement(u.a,{exact:!0,path:"/faucet",children:r.a.createElement(ht,null)}))))))))))}var St=function(){return r.a.createElement(At,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(St,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},15:function(e,t,n){"use strict";n.d(t,"k",(function(){return u})),n.d(t,"i",(function(){return l})),n.d(t,"h",(function(){return s})),n.d(t,"g",(function(){return d})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return m})),n.d(t,"j",(function(){return b})),n.d(t,"l",(function(){return p})),n.d(t,"f",(function(){return v})),n.d(t,"e",(function(){return y})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return O}));var a=n(24),r=n(0),i=n(40),o=n.n(i),c=n(20);function u(e,t){var n=Object(r.useState)((function(){var n=localStorage.getItem(e);return n?JSON.parse(n):t})),i=Object(a.a)(n,2),o=i[0],c=i[1],u=Object(r.useCallback)((function(t){o!==t&&(c(t),null===t?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(t)))}),[o,e]);return[o,u]}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return"".concat(e.slice(0,t),"...").concat(e.slice(-t))}function s(e,t){var n,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t)return"N/A";var r=null===(n=e.get(t))||void 0===n?void 0:n.tokenSymbol;return r||(a?"".concat(t.substring(0,5),"..."):t)}function d(e,t){var n,a="string"===typeof t?t:null===t||void 0===t?void 0:t.toBase58();if(a)return null===(n=e.get(a))||void 0===n?void 0:n.icon}var f=new Set(["USDC","wUSDC","USDT"]);function m(e,t){return Array.apply(0,new Array(Math.ceil(e.length/t))).map((function(n,a){return e.slice(a*t,(a+1)*t)}))}function b(e,t){var n;return e?("number"===typeof e?e:null===(n=e.info.amount)||void 0===n?void 0:n.toNumber())*Math.pow(10,(null===t||void 0===t?void 0:t.decimals)||0):0}function p(e){return(null===e||void 0===e?void 0:e.div(c.b))||c.c}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!e)return 0;var a="number"===typeof e?e:o.a.isBN(e)?e.toNumber():e.info.amount.toNumber(),r=Math.pow(10,(null===t||void 0===t?void 0:t.decimals)||0);return a/r*n}var y=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),E=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),g={format:function(e){return e?E.format(e):"--"}},O=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2})},18:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return k})),n.d(t,"d",(function(){return S})),n.d(t,"f",(function(){return N})),n.d(t,"a",(function(){return M})),n.d(t,"h",(function(){return C})),n.d(t,"e",(function(){return L})),n.d(t,"g",(function(){return _}));var a=n(278),r=n(24),i=n(486),o=n(11),c=n.n(o),u=n(23),l=n(81),s=n(0),d=n.n(s),f=n(31),m=n(62),b=n(19),p=n(27),v=n(46),y=n(15),E=n(228),g=d.a.createContext(null),O=new E.a,h=new Map,w=new Map,j=function(t,n){var a=e.from(n.data),r=q(a);return{pubkey:t,account:Object(l.a)({},n),info:r}},k=function(t,n){var a=e.from(n.data),r=R(a);return{pubkey:t,account:Object(l.a)({},n),info:r}},A=new Map,S={emitter:new E.a,query:function(){var e=Object(u.a)(c.a.mark((function e(t,n,a){var r,i,o,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="string"===typeof n?new b.d(n):n,i=r.toBase58(),!(o=w.get(i))){e.next=5;break}return e.abrupt("return",o);case 5:if(!(u=h.get(i))){e.next=8;break}return e.abrupt("return",u);case 8:return u=t.getAccountInfo(r).then((function(e){if(!e)throw new Error("Account not found");return S.add(r,e,a)})),h.set(i,u),e.abrupt("return",u);case 11:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),add:function(e,t,n){var a="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),r=n||A.get(a);if(!r)throw new Error("Deserializer needs to be registered or passed as a parameter");S.registerParser(e,r),h.delete(a);var i=r(new b.d(a),t);if(i)return w.set(a,i),S.emitter.raiseCacheUpdated(a,r),i},get:function(e){var t;return t="string"!==typeof e?e.toBase58():e,w.get(t)},byParser:function(e){var t,n=[],a=Object(i.a)(A.keys());try{for(a.s();!(t=a.n()).done;){var r=t.value;A.get(r)===e&&n.push(r)}}catch(o){a.e(o)}finally{a.f()}return n},registerParser:function(e,t){if(e){var n="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();A.set(n,t)}return e}},N=function(){return Object(s.useContext)(g)};var T=function(){var e=Object(f.d)(),t=Object(m.c)().wallet,n=Object(s.useState)(),a=Object(r.a)(n,2),i=a[0],o=a[1],c=Object(s.useCallback)((function(e){var n,a,r=function(e,t){if(t)return{pubkey:e,account:t,info:{mint:p.c,owner:e,amount:new v.d(t.lamports),delegate:null,delegatedAmount:new v.d(0),isInitialized:!0,isFrozen:!1,isNative:!0,rentExemptReserve:null,closeAuthority:null}}}(t.publicKey,e);void 0!==r&&t&&(S.registerParser(null===(n=t.publicKey)||void 0===n?void 0:n.toBase58(),k),w.set(null===(a=t.publicKey)||void 0===a?void 0:a.toBase58(),r))}),[t]);return Object(s.useEffect)((function(){e&&(null===t||void 0===t?void 0:t.publicKey)&&(e.getAccountInfo(t.publicKey).then((function(e){e&&(c(e),o(e))})),e.onAccountChange(t.publicKey,(function(e){e&&(c(e),o(e))})))}),[o,t,t.publicKey,e,c]),{nativeAccount:i}},B=new Set,x=function(){var e=Object(u.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return B.add(n.toBase58()),e.next=5,t.getTokenAccountsByOwner(n,{programId:Object(p.d)().token});case 5:e.sent.value.forEach((function(e){S.add(e.pubkey.toBase58(),e.account,k)}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function M(e){var t=e.children,n=void 0===t?null:t,a=Object(f.d)(),i=Object(m.c)(),o=i.wallet,c=i.connected,u=Object(s.useState)([]),l=Object(r.a)(u,2),y=l[0],E=l[1],h=Object(s.useState)([]),A=Object(r.a)(h,2),N=A[0],M=A[1],C=T().nativeAccount,L=Object(s.useCallback)((function(){return S.byParser(k).map((function(e){return S.get(e)})).filter((function(e){var t;return e&&e.info.owner.toBase58()===(null===(t=o.publicKey)||void 0===t?void 0:t.toBase58())})).map((function(e){return e}))}),[o]);Object(s.useEffect)((function(){var e=L().filter((function(e){return void 0!==e}));M(e)}),[C,o,y,L]);var I=null===o||void 0===o?void 0:o.publicKey;return Object(s.useEffect)((function(){if(a&&I){x(a,I).then((function(){E(L())}));var e=a.onProgramAccountChange(Object(p.d)().token,(function(e){var t=e.accountId;if(e.accountInfo.data.length===v.a.span){var n=R(e.accountInfo.data);!B.has(n.owner.toBase58())&&S.get(t)||(S.add(t,e.accountInfo,k),E(L()),O.raiseAccountUpdated(t))}else e.accountInfo.data.length===v.b.span&&(S.get(t)&&(S.add(t,e.accountInfo,j),O.raiseAccountUpdated(t)),O.raiseAccountUpdated(t));w.has(t)&&S.add(new b.d(t),e.accountInfo)}),"singleGossip");return function(){a.removeProgramAccountChangeListener(e)}}E([])}),[a,c,I,L]),d.a.createElement(g.Provider,{value:{userAccounts:N,nativeAccount:C}},n)}function C(){return{account:Object(s.useContext)(g).nativeAccount}}var L=function(){var t=Object(u.a)(c.a.mark((function t(n,r,i){var o,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(Object(y.b)(r,99).map((function(e){return I(n,e,i)})));case 2:return o=t.sent,u=o.map((function(t){return t.array.map((function(t){if(t){var n=t.data,r=Object(a.a)(t,["data"]);return Object(l.a)(Object(l.a)({},r),{},{data:e.from(n[0],"base64")})}})).filter((function(e){return e}))})).flat(),t.abrupt("return",{keys:r,array:u});case 5:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),I=function(){var e=Object(u.a)(c.a.mark((function e(t,n,a){var r,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._buildArgs([n],a,"base64"),e.next=3,t._rpcRequest("getMultipleAccounts",r);case 3:if(!(i=e.sent).error){e.next=6;break}throw new Error("failed to get info about account "+i.error.message);case 6:if(!i.result.value){e.next=9;break}return o=i.result.value,e.abrupt("return",{keys:n,array:o});case 9:throw new Error;case 10:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();function _(e){var t=Object(f.d)(),n=Object(s.useState)(),a=Object(r.a)(n,2),i=a[0],o=a[1],c="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();return Object(s.useEffect)((function(){if(c){S.query(t,c,j).then((function(e){return o(e.info)})).catch((function(e){return console.log(e)}));var e=S.emitter.onCache((function(e){e.id===c&&S.query(t,c,j).then((function(e){return o(e.info)}))}));return function(){e()}}}),[t,c]),i}var R=function(e){var t=v.a.decode(e);return t.mint=new b.d(t.mint),t.owner=new b.d(t.owner),t.amount=v.d.fromBuffer(t.amount),0===t.delegateOption?(t.delegate=null,t.delegatedAmount=new v.d(0)):(t.delegate=new b.d(t.delegate),t.delegatedAmount=v.d.fromBuffer(t.delegatedAmount)),t.isInitialized=0!==t.state,t.isFrozen=2===t.state,1===t.isNativeOption?(t.rentExemptReserve=v.d.fromBuffer(t.isNative),t.isNative=!0):(t.rentExemptReserve=null,t.isNative=!1),0===t.closeAuthorityOption?t.closeAuthority=null:t.closeAuthority=new b.d(t.closeAuthority),t},q=function(e){if(e.length!==v.b.span)throw new Error("Not a valid Mint");var t=v.b.decode(e);return 0===t.mintAuthorityOption?t.mintAuthority=null:t.mintAuthority=new b.d(t.mintAuthority),t.supply=v.d.fromBuffer(t.supply),t.isInitialized=0!==t.isInitialized,0===t.freezeAuthorityOption?t.freezeAuthority=null:t.freezeAuthority=new b.d(t.freezeAuthority),t}}).call(this,n(53).Buffer)},20:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u}));n(27);var a={CONNECT_LABEL:"Connect Wallet",GIVE_SOL:"Give me SOL",FAUCET_INFO:"This faucet will help you fund your accounts outside of Solana main network.",ACCOUNT_FUNDED:"Account funded.",REPAY_QUESTION:"How much would you like to repay?",REPAY_ACTION:"Repay",RESERVE_STATUS_TITLE:"Reserve Status & Configuration",AUDIT_WARNING:"Oyster is an unaudited software project used for internal purposes at the Solana Foundation. This app is not for public use.",FOOTER:'This page was produced by the Solana Foundation ("SF") for internal educational and inspiration purposes only. SF does not encourage, induce or sanction the deployment, integration or use of Oyster or any similar application (including its code) in violation of applicable laws or regulations and hereby prohibits any such deployment, integration or use. Anyone using this code or a derivation thereof must comply with applicable laws and regulations when releasing related software.',MENU_HOME:"Home",MENU_DASHBOARD:"Dashboard",DASHBOARD_INFO:"Connect to a wallet to view your deposits/loans.",NO_LOANS_NO_DEPOSITS:"No loans or deposits.",MENU_DEPOSIT:"Deposit",MENU_BORROW:"Borrow",MENU_FAUCET:"Faucet",APP_TITLE:"Oyster Lending",CONNECT_BUTTON:"Connect",WALLET_TOOLTIP:"Wallet public key",SETTINGS_TOOLTIP:"Settings",SELECT_COLLATERAL:"Select collateral",BORROW_QUESTION:"How much would you like to borrow?",BORROW_ACTION:"Borrow",TABLE_TITLE_ASSET:"Asset",TABLE_TITLE_LOAN_BALANCE:"Your loan balance",TABLE_TITLE_DEPOSIT_BALANCE:"Your deposit balance",TABLE_TITLE_APY:"APY",TABLE_TITLE_BORROW_APY:"Borrow APY",TABLE_TITLE_DEPOSIT_APY:"Deposit APY",TABLE_TITLE_TOTAL_BORROWED:"Total Borrowed",TABLE_TITLE_MARKET_SIZE:"Market Size",TABLE_TITLE_ACTION:"Action",TABLE_TITLE_MAX_BORROW:"Available for you",DASHBOARD_TITLE_LOANS:"Loans",DASHBOARD_TITLE_DEPOSITS:"Deposits",WITHDRAW_ACTION:"Withdraw",WITHDRAW_QUESTION:"How much would you like to withdraw?",DASHBOARD_ACTION:"Go to dashboard",GO_BACK_ACTION:"Go back",DEPOSIT_ACTION:"Deposit"},r=n(40),i=n.n(r),o=new i.a(10),c=o.pow(new i.a(18)),u=(o.pow(new i.a(27)),new i.a(0))},228:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(106),r=n(90),i=n(139),o=function e(t){Object(r.a)(this,e),this.id=void 0,this.id=t};o.type="AccountUpdate";var c=function e(t,n){Object(r.a)(this,e),this.id=void 0,this.parser=void 0,this.id=t,this.parser=n};c.type="CacheUpdate";var u=function e(t){Object(r.a)(this,e),this.ids=void 0,this.ids=t};u.type="MarketUpdate";var l=function(){function e(){Object(r.a)(this,e),this.emitter=new i.EventEmitter}return Object(a.a)(e,[{key:"onMarket",value:function(e){var t=this;return this.emitter.on(u.type,e),function(){return t.emitter.removeListener(u.type,e)}}},{key:"onAccount",value:function(e){var t=this;return this.emitter.on(o.type,e),function(){return t.emitter.removeListener(o.type,e)}}},{key:"onCache",value:function(e){var t=this;return this.emitter.on(c.type,e),function(){return t.emitter.removeListener(c.type,e)}}},{key:"raiseAccountUpdated",value:function(e){this.emitter.emit(o.type,new o(e))}},{key:"raiseMarketUpdated",value:function(e){this.emitter.emit(u.type,new u(e))}},{key:"raiseCacheUpdated",value:function(e,t){this.emitter.emit(c.type,new c(e,t))}}]),e}()},263:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return m}));var a,r=n(19),i=n(40),o=n.n(i),c=n(1),u=n(27),l=n(15),s=n(51),d=n(102);!function(e){e[e.LiquidityBorrowAmount=0]="LiquidityBorrowAmount",e[e.CollateralDepositAmount=1]="CollateralDepositAmount"}(a||(a={}));var f=function(t,n,a,i,l,f,m,b,p,v,y,E,g,O,h,w){var j=c.struct([c.u8("instruction"),s.c("amount"),c.u8("amountType")]),k=e.alloc(j.span);j.encode({instruction:d.a.BorrowLiquidity,amount:new o.a(t),amountType:n},k);var A=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:E,isSigner:!1,isWritable:!1},{pubkey:g,isSigner:!1,isWritable:!1},{pubkey:O,isSigner:!1,isWritable:!1},{pubkey:h,isSigner:!1,isWritable:!1},{pubkey:w,isSigner:!1,isWritable:!1},{pubkey:r.e,isSigner:!1,isWritable:!1},{pubkey:r.f,isSigner:!1,isWritable:!1},{pubkey:u.b,isSigner:!1,isWritable:!1}];return new r.i({keys:A,programId:u.a,data:k})},m=function(e){var t,n=Object(l.l)(e.borrowedLiquidityWad).toNumber(),a=n/(e.availableLiquidity.toNumber()+n),r=e.config.optimalUtilizationRate/100;if(1===r||a<r){var i=a/r,o=e.config.optimalBorrowRate/100,c=e.config.minBorrowRate/100;t=i*(o-c)+c}else{var u=(a-r)/(1-r),s=e.config.optimalBorrowRate/100;t=u*(e.config.maxBorrowRate/100-s)+s}return t}}).call(this,n(53).Buffer)},27:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"d",(function(){return u}));var a=n(19),r=new a.d("So11111111111111111111111111111111111111112"),i=new a.d("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),o=new a.d("TokenLend1ng1111111111111111111111111111111"),c=function(e){"mainnet-beta"===e&&(o=new a.d("2KfJP7pZ6QSpXa26RmsN6kKVQteDEdQmizLSvuyryeiW"))},u=function(){return{token:i,lending:o}}},31:function(e,t,n){"use strict";n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return O})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return w})),n.d(t,"c",(function(){return k}));var a=n(11),r=n.n(a),i=n(23),o=n(33),c=n(24),u=n(15),l=n(19),s=n(0),d=n.n(s),f=n(27),m=n(69),b=n(1022),p=function(e){var t,n,a=e.type,r=e.code,i="string"===typeof e.address?e.address:null===(t=e.address)||void 0===t?void 0:t.toBase58();if(!i)return null;var o=null!==(n=e.length)&&void 0!==n?n:9;return d.a.createElement("a",{href:"https://explorer.solana.com/".concat(a,"/").concat(i),target:"_blank",title:i,style:e.style},r?d.a.createElement(b.a.Text,{style:e.style,code:!0},Object(u.i)(i,o)):Object(u.i)(i,o))},v=n(485),y=[{name:"mainnet-beta",endpoint:"https://solana-api.projectserum.com/"},{name:"lending",endpoint:"https://tln.solana.com"},{name:"testnet",endpoint:Object(l.j)("testnet")},{name:"devnet",endpoint:Object(l.j)("devnet")},{name:"localnet",endpoint:"http://127.0.0.1:8899"}],E=y[0].endpoint,g=d.a.createContext({endpoint:E,setEndpoint:function(){},slippage:.25,setSlippage:function(e){},connection:new l.b(E,"recent"),sendConnection:new l.b(E,"recent"),env:y[0].name,tokens:[],tokenMap:new Map});function O(e){var t,n=e.children,a=void 0===n?void 0:n,r=Object(u.k)("connectionEndpts",y[0].endpoint),i=Object(c.a)(r,2),m=i[0],b=i[1],p=Object(u.k)("slippage",.25.toString()),E=Object(c.a)(p,2),O=E[0],h=E[1],w=Object(s.useMemo)((function(){return new l.b(m,"recent")}),[m]),j=Object(s.useMemo)((function(){return new l.b(m,"recent")}),[m]),k=(null===(t=y.find((function(e){return e.endpoint===m})))||void 0===t?void 0:t.name)||y[0].name,A=Object(s.useState)([]),S=Object(c.a)(A,2),N=S[0],T=S[1],B=Object(s.useState)(new Map),x=Object(c.a)(B,2),M=x[0],C=x[1];return Object(s.useEffect)((function(){window.fetch("https://raw.githubusercontent.com/solana-labs/token-list/main/src/tokens/".concat(k,".json")).then((function(e){return e.json()})).catch((function(e){return[]})).then((function(e){var t=[].concat(Object(o.a)(v),Object(o.a)(e)).reduce((function(e,t){return e.set(t.mintAddress,t),e}),new Map);C(t),T(e)}))}),[k]),Object(f.e)(k),Object(s.useEffect)((function(){var e=w.onAccountChange((new l.a).publicKey,(function(){}));return function(){w.removeAccountChangeListener(e)}}),[w]),Object(s.useEffect)((function(){var e=w.onSlotChange((function(){return null}));return function(){w.removeSlotChangeListener(e)}}),[w]),Object(s.useEffect)((function(){var e=j.onAccountChange((new l.a).publicKey,(function(){}));return function(){j.removeAccountChangeListener(e)}}),[j]),Object(s.useEffect)((function(){var e=j.onSlotChange((function(){return null}));return function(){j.removeSlotChangeListener(e)}}),[j]),d.a.createElement(g.Provider,{value:{endpoint:m,setEndpoint:b,slippage:parseFloat(O),setSlippage:function(e){return h(e.toString())},connection:w,sendConnection:j,tokens:N,tokenMap:M,env:k}},a)}function h(){return Object(s.useContext)(g).connection}function w(){var e=Object(s.useContext)(g);return{endpoint:e.endpoint,setEndpoint:e.setEndpoint,env:e.env,tokens:e.tokens,tokenMap:e.tokenMap}}var j=function(){var e=Object(i.a)(r.a.mark((function e(t,n){var a,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.confirmTransaction(n,"max");case 2:return e.next=4,t.getParsedConfirmedTransaction(n);case 4:return a=e.sent,i=[],(null===a||void 0===a?void 0:a.meta)&&a.meta.logMessages&&a.meta.logMessages.forEach((function(e){for(var t,n=/Error: (.*)/gm;null!==(t=n.exec(e));)t.index===n.lastIndex&&n.lastIndex++,t.length>1&&i.push(t[1])})),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(i.a)(r.a.mark((function e(t,n,a,i){var c,u,s,f,b,v,y,E,g,O=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=!(O.length>4&&void 0!==O[4])||O[4],s=new l.h,a.forEach((function(e){return s.add(e)})),e.next=5,t.getRecentBlockhash("max");case 5:return s.recentBlockhash=e.sent.blockhash,(c=s).setSigners.apply(c,[n.publicKey].concat(Object(o.a)(i.map((function(e){return e.publicKey}))))),i.length>0&&(f=s).partialSign.apply(f,Object(o.a)(i)),e.next=10,n.signTransaction(s);case 10:return s=e.sent,b=s.serialize(),v={skipPreflight:!0,commitment:"singleGossip"},e.next=15,t.sendRawTransaction(b,v);case 15:if(y=e.sent,!u){e.next=26;break}return e.next=19,t.confirmTransaction(y,v&&v.commitment);case 19:if(!(null===(E=e.sent.value)||void 0===E?void 0:E.err)){e.next=26;break}return e.next=23,j(t,y);case 23:throw g=e.sent,Object(m.a)({message:"Transaction failed...",description:d.a.createElement(d.a.Fragment,null,g.map((function(e){return d.a.createElement("div",null,e)})),d.a.createElement(p,{address:y,type:"transaction"})),type:"error"}),new Error("Raw transaction ".concat(y," failed (").concat(JSON.stringify(E),")"));case 26:return e.abrupt("return",y);case 27:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},338:function(e,t,n){},374:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return u}));var a=n(81),r=n(1),i=n(51),o=r.struct([r.u8("isInitialized"),i.a("quoteMint")]),c=function(e){return e.data.length===o.span},u=function(t,n){var r=e.from(n.data),i=o.decode(r);return{pubkey:t,account:Object(a.a)({},n),info:i}}}).call(this,n(53).Buffer)},375:function(e,t,n){"use strict";(function(e){n.d(t,"d",(function(){return m})),n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return v})),n.d(t,"e",(function(){return y}));var a=n(81),r=n(19),i=n(40),o=n.n(i),c=n(1),u=n(27),l=n(15),s=n(51),d=n(102),f=c.struct([s.c("lastUpdateSlot"),s.a("lendingMarket"),s.a("liquidityMint"),c.u8("liquidityMintDecimals"),s.a("liquiditySupply"),s.a("collateralMint"),s.a("collateralSupply"),c.u32("dexMarketOption"),s.a("dexMarket"),c.struct([c.u8("optimalUtilizationRate"),c.u8("loanToValueRatio"),c.u8("liquidationBonus"),c.u8("liquidationThreshold"),c.u8("minBorrowRate"),c.u8("optimalBorrowRate"),c.u8("maxBorrowRate")],"config"),s.b("cumulativeBorrowRateWad"),s.b("borrowedLiquidityWad"),s.c("availableLiquidity"),s.c("collateralMintSupply")]),m=function(e){return console.log(f.span),console.log(e.data.length),e.data.length===f.span},b=function(t,n){var r=e.from(n.data),i=f.decode(r);if(0!==i.lastUpdateSlot.toNumber())return{pubkey:t,account:Object(a.a)({},n),info:i}},p=function(t,n,a,i,l,f,m,b,p,v,y,E){var g=c.struct([c.u8("instruction"),s.c("liquidityAmount"),c.u8("maxUtilizationRate")]),O=e.alloc(g.span);g.encode({instruction:d.a.InitReserve,liquidityAmount:new o.a(t),maxUtilizationRate:n},O);var h=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!0,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!1},{pubkey:r.e,isSigner:!1,isWritable:!1},{pubkey:r.f,isSigner:!1,isWritable:!1},{pubkey:u.b,isSigner:!1,isWritable:!1},{pubkey:E,isSigner:!1,isWritable:!1}];return new r.i({keys:h,programId:u.a,data:O})},v=function(e){var t=Object(l.l)(e.borrowedLiquidityWad).toNumber();return t/(e.availableLiquidity.toNumber()+t)},y=function(e){return((null===e||void 0===e?void 0:e.availableLiquidity.toNumber())||0)+Object(l.l)(null===e||void 0===e?void 0:e.borrowedLiquidityWad).toNumber()}}).call(this,n(53).Buffer)},376:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return u}));var a=n(81),r=n(1),i=n(51),o=r.struct([i.c("lastUpdateSlot"),i.c("collateralAmount"),i.a("collateralSupply"),i.b("cumulativeBorrowRateWad"),i.b("borrowAmountWad"),i.a("borrowReserve"),i.a("tokenMint")]),c=function(e){return e.data.length===o.span},u=function(t,n){var r=e.from(n.data),i=o.decode(r);return console.log(i),{pubkey:t,account:Object(a.a)({},n),info:i}}}).call(this,n(53).Buffer)},377:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return m}));var a=n(19),r=n(40),i=n.n(r),o=n(1),c=n(27),u=n(15),l=n(51),s=n(263),d=n(102),f=function(t,n,r,u,s,f,m){var b=o.struct([o.u8("instruction"),l.c("liquidityAmount")]),p=e.alloc(b.span);b.encode({instruction:d.a.DepositReserveLiquidity,liquidityAmount:new i.a(t)},p);var v=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!1},{pubkey:a.e,isSigner:!1,isWritable:!1},{pubkey:c.b,isSigner:!1,isWritable:!1}];return new a.i({keys:v,programId:c.a,data:p})},m=function(e){var t=Object(u.l)(e.borrowedLiquidityWad).toNumber();return t/(e.availableLiquidity.toNumber()+t)*Object(s.c)(e)}}).call(this,n(53).Buffer)},378:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var a=n(19),r=n(40),i=n.n(r),o=n(1),c=n(27),u=n(51),l=n(102),s=function(t,n,r,s,d,f,m){var b=o.struct([o.u8("instruction"),u.c("collateralAmount")]),p=e.alloc(b.span);b.encode({instruction:l.a.WithdrawReserveLiquidity,collateralAmount:new i.a(t)},p);var v=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:a.e,isSigner:!1,isWritable:!1},{pubkey:c.b,isSigner:!1,isWritable:!1}];return new a.i({keys:v,programId:c.a,data:p})}}).call(this,n(53).Buffer)},385:function(e,t){},386:function(e,t,n){},43:function(e,t,n){"use strict";var a=n(374);n.d(t,"b",(function(){return a.a})),n.d(t,"l",(function(){return a.b}));var r=n(375);n.d(t,"e",(function(){return r.a})),n.d(t,"i",(function(){return r.b})),n.d(t,"k",(function(){return r.c})),n.d(t,"n",(function(){return r.d})),n.d(t,"o",(function(){return r.e}));var i=n(376);n.d(t,"c",(function(){return i.a})),n.d(t,"d",(function(){return i.b})),n.d(t,"m",(function(){return i.c}));n(102);var o=n(263);n.d(t,"a",(function(){return o.a})),n.d(t,"f",(function(){return o.b})),n.d(t,"g",(function(){return o.c}));var c=n(377);n.d(t,"h",(function(){return c.a})),n.d(t,"j",(function(){return c.b}));var u=n(378);n.d(t,"p",(function(){return u.a}))},485:function(e){e.exports=JSON.parse('[{"tokenSymbol":"SOL","mintAddress":"So11111111111111111111111111111111111111112","tokenName":"Solana","icon":"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/solana/info/logo.png"},{"tokenSymbol":"USDC","mintAddress":"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v","tokenName":"USDC","icon":"https://raw.githubusercontent.com/trustwallet/assets/f3ffd0b9ae2165336279ce2f8db1981a55ce30f8/blockchains/ethereum/assets/0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48/logo.png"},{"tokenSymbol":"SRM","mintAddress":"SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt","tokenName":"SRM","icon":"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x476c5E26a75bd202a9683ffD34359C0CC15be0fF/logo.png"}]')},501:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var a=n(19),r=n(40),i=n.n(r),o=n(27),c=n(102),u=n(1),l=n(51),s=function(t,n,r,s,d,f,m,b,p,v,y){var E=u.struct([u.u8("instruction"),l.c("liquidityAmount")]),g=e.alloc(E.span);E.encode({instruction:c.a.RepayOblogationLiquidity,liquidityAmount:new i.a(t)},g);var O=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!1},{pubkey:a.e,isSigner:!1,isWritable:!1},{pubkey:o.b,isSigner:!1,isWritable:!1}];return new a.i({keys:O,programId:o.a,data:g})}}).call(this,n(53).Buffer)},51:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return s}));var a=n(33),r=n(19),i=n(40),o=n.n(i),c=n(1),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"publicKey",t=c.blob(32,e),n=t.decode.bind(t),a=t.encode.bind(t);return t.decode=function(e,t){var a=n(e,t);return new r.d(a)},t.encode=function(e,t,n){return a(e.toBuffer(),t,n)},t},l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uint64",n=c.blob(8,t),r=n.decode.bind(n),i=n.encode.bind(n);return n.decode=function(e,t){var n=r(e,t);return new o.a(Object(a.a)(n).reverse().map((function(e){return"00".concat(e.toString(16)).slice(-2)})).join(""),16)},n.encode=function(t,n,a){var r=t.toArray().reverse(),o=e.from(r);if(8!==o.length){var c=e.alloc(8);o.copy(c),o=c}return i(o,n,a)},n},s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uint128",n=c.blob(16,t),r=n.decode.bind(n),i=n.encode.bind(n);return n.decode=function(e,t){var n=r(e,t);return new o.a(Object(a.a)(n).reverse().map((function(e){return"00".concat(e.toString(16)).slice(-2)})).join(""),16)},n.encode=function(t,n,a){var r=t.toArray().reverse(),o=e.from(r);if(16!==o.length){var c=e.alloc(16);o.copy(c),o=c}return i(o,n,a)},n}}).call(this,n(53).Buffer)},513:function(e,t,n){e.exports=n(1021)},518:function(e,t,n){},521:function(e,t){},522:function(e,t){},551:function(e,t){},553:function(e,t){},564:function(e,t){},565:function(e,t){},585:function(e,t){},587:function(e,t){},62:function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return k})),n.d(t,"c",(function(){return A}));var a=n(24),r=n(0),i=n.n(r),o=n(472),c=n(69),u=n(31),l=n(15),s=n(11),d=n.n(s),f=n(23),m=n(90),b=n(106),p=n(180),v=n(143),y=n(142),E=n(139),g=n.n(E),O=n(19),h=function(e){Object(v.a)(n,e);var t=Object(y.a)(n);function n(e,a){var r;return Object(m.a)(this,n),(r=t.call(this))._publicKey=void 0,r._onProcess=void 0,r._publicKey=null,r._onProcess=!1,r.connect=r.connect.bind(Object(p.a)(r)),r}return Object(b.a)(n,[{key:"signTransaction",value:function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.solong.signTransaction(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=this;this._onProcess||(void 0!==window.solong?(this._onProcess=!0,console.log("solong helper select account"),window.solong.selectAccount().then((function(t){e._publicKey=new O.d(t),console.log("window solong select:",t,"this:",e),e.emit("connect",e._publicKey)})).catch((function(){e.disconnect()})).finally((function(){e._onProcess=!1}))):Object(c.a)({message:"Solong Error",description:"Please install solong wallet from Chrome "}))}},{key:"disconnect",value:function(){this._publicKey&&(this._publicKey=null,this.emit("disconnect"))}},{key:"publicKey",get:function(){return this._publicKey}}]),n}(g.a),w=[{name:"sollet.io",url:"https://www.sollet.io"},{name:"solongwallet.com",url:"http://solongwallet.com"},{name:"solflare.com",url:"https://solflare.com/access-wallet"},{name:"mathwallet.org",url:"https://www.mathwallet.org"}],j=i.a.createContext(null);function k(e){var t,n,s=e.children,d=void 0===s?null:s,f=Object(u.e)().endpoint,m=Object(l.k)("walletProvider","https://www.sollet.io"),b=Object(a.a)(m,2),p=b[0],v=b[1],y=Object(r.useMemo)((function(){return console.log("use new provider:",p," endpoint:",f),"http://solongwallet.com"===p?new h(p,f):new o.a(p,f)}),[p,f]),E=Object(r.useState)(!1),g=Object(a.a)(E,2),O=g[0],k=g[1];return Object(r.useEffect)((function(){return console.log("trying to connect"),y.on("connect",(function(){console.log("connected"),k(!0);var e=y.publicKey.toBase58(),t=e.length>20?"".concat(e.substring(0,7),".....").concat(e.substring(e.length-7,e.length)):e;Object(c.a)({message:"Wallet update",description:"Connected to wallet "+t})})),y.on("disconnect",(function(){k(!1),Object(c.a)({message:"Wallet update",description:"Disconnected from wallet"})})),function(){y.disconnect(),k(!1)}}),[y]),i.a.createElement(j.Provider,{value:{wallet:y,connected:O,providerUrl:p,setProviderUrl:v,providerName:null!==(t=null===(n=w.find((function(e){return e.url===p})))||void 0===n?void 0:n.name)&&void 0!==t?t:p}},d)}function A(){var e=Object(r.useContext)(j);return{connected:e.connected,wallet:e.wallet,providerUrl:e.providerUrl,setProvider:e.setProviderUrl,providerName:e.providerName}}},632:function(e,t){},642:function(e,t){},655:function(e,t,n){},69:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n.n(a),i=n(336);function o(e){var t=e.message,n=void 0===t?"":t,a=e.description,o=void 0===a?void 0:a,c=e.txid,u=void 0===c?"":c,l=e.type,s=void 0===l?"info":l,d=e.placement,f=void 0===d?"bottomLeft":d;u&&(o=r.a.createElement(r.a.Fragment,null)),i.a[s]({message:r.a.createElement("span",{style:{color:"black"}},n),description:r.a.createElement("span",{style:{color:"black",opacity:.5}},o),placement:f,style:{backgroundColor:"white"}})}},708:function(e,t,n){},709:function(e,t,n){},710:function(e,t,n){},715:function(e,t,n){},716:function(e,t,n){},717:function(e,t,n){},718:function(e,t,n){},719:function(e,t,n){},720:function(e,t,n){},721:function(e,t,n){},722:function(e,t,n){},91:function(e,t,n){"use strict";var a=n(385);n.o(a,"BorrowAmountType")&&n.d(t,"BorrowAmountType",(function(){return a.BorrowAmountType})),n.o(a,"LendingObligationLayout")&&n.d(t,"LendingObligationLayout",(function(){return a.LendingObligationLayout})),n.o(a,"LendingReserveParser")&&n.d(t,"LendingReserveParser",(function(){return a.LendingReserveParser})),n.o(a,"borrowInstruction")&&n.d(t,"borrowInstruction",(function(){return a.borrowInstruction})),n.o(a,"reserveMarketCap")&&n.d(t,"reserveMarketCap",(function(){return a.reserveMarketCap}));var r=n(43);n.d(t,"BorrowAmountType",(function(){return r.a})),n.d(t,"LendingObligationLayout",(function(){return r.c})),n.d(t,"LendingReserveParser",(function(){return r.e})),n.d(t,"borrowInstruction",(function(){return r.f})),n.d(t,"reserveMarketCap",(function(){return r.o}))}},[[513,1,2]]]);