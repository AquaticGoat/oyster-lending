(this["webpackJsonptoken-lending-ui"]=this["webpackJsonptoken-lending-ui"]||[]).push([[0],{11:function(e,t,n){"use strict";n.d(t,"f",(function(){return u})),n.d(t,"o",(function(){return s})),n.d(t,"m",(function(){return d})),n.d(t,"l",(function(){return f})),n.d(t,"j",(function(){return m})),n.d(t,"k",(function(){return b})),n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return p})),n.d(t,"n",(function(){return y})),n.d(t,"p",(function(){return E})),n.d(t,"h",(function(){return g})),n.d(t,"g",(function(){return O})),n.d(t,"d",(function(){return j})),n.d(t,"e",(function(){return w})),n.d(t,"c",(function(){return k})),n.d(t,"i",(function(){return A}));var a=n(172),r=n(21),i=n(0),o=n(42),l=n.n(o),c=n(12),u=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:8});function s(e,t){var n=Object(i.useState)((function(){var n=localStorage.getItem(e);return n?JSON.parse(n):t})),a=Object(r.a)(n,2),o=a[0],l=a[1],c=Object(i.useCallback)((function(t){o!==t&&(l(t),null===t?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(t)))}),[o,e]);return[o,c]}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return"".concat(e.slice(0,t),"...").concat(e.slice(-t))}function f(e,t){var n,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r="string"===typeof t?t:null===t||void 0===t?void 0:t.toBase58();if(!r)return"N/A";var i=null===(n=e.get(r))||void 0===n?void 0:n.tokenSymbol;return i||(a?"".concat(r.substring(0,5),"..."):r)}function m(e,t){var n,r=null,i=Object(a.a)(e.values());try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.tokenSymbol===t){r=o;break}}}catch(l){i.e(l)}finally{i.f()}return r}function b(e,t){var n,a="string"===typeof t?t:null===t||void 0===t?void 0:t.toBase58();if(a)return null===(n=e.get(a))||void 0===n?void 0:n.icon}var v=new Set(["USDC","wUSDC","USDT"]);function p(e,t){return Array.apply(0,new Array(Math.ceil(e.length/t))).map((function(n,a){return e.slice(a*t,(a+1)*t)}))}function y(e,t){var n;if(!e)return 0;var a="number"===typeof e?e:null===(n=e.info.amount)||void 0===n?void 0:n.toNumber(),r=Math.pow(10,(null===t||void 0===t?void 0:t.decimals)||0);return Math.floor(a*r)}function E(e){return(null===e||void 0===e?void 0:e.div(c.c))||c.d}function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!e)return 0;var a=Math.floor("number"===typeof e?e:l.a.isBN(e)?e.toNumber():e.info.amount.toNumber()),r=Math.pow(10,(null===t||void 0===t?void 0:t.decimals)||0);return a/r*n}var O=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),h=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),j={format:function(e){return e?h.format(e):"--"}},w=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2});function k(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!e)return 0;var r="number"===typeof e?e:null===(n=e.info.amount)||void 0===n?void 0:n.toNumber(),i=Math.pow(10,(null===t||void 0===t?void 0:t.decimals)||0),o=r/i*a;return o}function A(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=t.pubkeys.holdingMints.map((function(e){return e.toBase58()})).sort();return a.map((function(t){return f(e,t,n)})).join("/")}},1105:function(e,t,n){"use strict";n.r(t);var a,r=n(0),i=n.n(r),o=n(55),l=n.n(o),c=(n(557),n(366),n(47)),u=n(80),s=n(61),d=n(29),f=n(13),m=n(172),b=n(14),v=n.n(b),p=n(22),y=n(27),E=n(21),g={},O=[],h=n(11),j=n(99),w=n(18),k=n(288),A=n(30),S=function(e,t){var n=j.Orderbook.LAYOUT.decode(t.data);return{pubkey:e,account:Object(A.a)({},t),info:n}},x=new w.d("EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"),T=function(e,t){var n=j.MARKETS.find((function(t){return t.address.equals(e)})),a=j.Market.getLayout((null===n||void 0===n?void 0:n.programId)||x).decode(t.data),r={pubkey:e,account:Object(A.a)({},t),info:a};return f.d.registerParser(r.info.baseMint,f.b),f.d.registerParser(r.info.quoteMint,f.b),f.d.registerParser(r.info.bids,S),f.d.registerParser(r.info.asks,S),r},N=n(53),I=n(24),B=n(48),L=function(e,t){return t.map((function(t){return f.d.query(e,new w.d(t))}))},M=function(e,t){return{pubkeys:{account:e.pubkey,program:t,mint:e.data.tokenPool,holdingMints:[],holdingAccounts:[e.data.tokenAccountA,e.data.tokenAccountB]},legacy:!1,raw:e}},C=function(e){var t=Object(d.d)(),n=function(){var e=Object(d.d)(),t=Object(r.useState)([]),n=Object(E.a)(t,2),a=n[0],i=n[1];return Object(r.useEffect)((function(){i([]);var t=function(){var t=Object(p.a)(v.a.mark((function t(n){var a,r,i,o=arguments;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=o.length>1&&void 0!==o[1]&&o[1],r=[],t.next=4,e.getProgramAccounts(n);case 4:return t.sent.filter((function(e){return e.account.data.length===B.TokenSwapLayout.span||e.account.data.length===B.TokenSwapLayoutV1.span||e.account.data.length===B.TokenSwapLayoutLegacyV0.span})).map((function(t){var i={data:void 0,account:t.account,pubkey:t.pubkey,init:function(){var e=Object(p.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},o=t.account.data.length===B.TokenSwapLayout.span?B.TokenSwapLayout:t.account.data.length===B.TokenSwapLayoutV1.span?B.TokenSwapLayoutV1:B.TokenSwapLayoutLegacyV0;if(o===B.TokenSwapLayoutLegacyV0){i.data=o.decode(t.account.data);var l=M(i,n);l.legacy=a,r.push(l),i.init=Object(p.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all(L(e,[i.data.tokenAccountA,i.data.tokenAccountB]));case 3:n=t.sent,l.pubkeys.holdingMints=[n[0].info.mint,n[1].info.mint],t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))}else{i.data=o.decode(t.account.data);var c=M(i,n);c.legacy=a,c.pubkeys.feeAccount=i.data.feeAccount,c.pubkeys.holdingMints=[i.data.mintA,i.data.mintB],r.push(c)}return i})),i=r.map((function(e){var t;return[].concat(Object(y.a)(e.pubkeys.holdingAccounts.map((function(e){return e.toBase58()}))),Object(y.a)(e.pubkeys.holdingMints.map((function(e){return e.toBase58()}))),[null===(t=e.pubkeys.feeAccount)||void 0===t?void 0:t.toBase58(),e.pubkeys.mint.toBase58()]).filter((function(e){return e}))})).flat(),t.next=8,Object(f.e)(e,i,"single").then((function(e){var t=e.keys;return e.array.map((function(e,n){var a=t[n];return e.data.length===N.a.span?f.d.add(a,e,f.c):e.data.length!==N.b.span||f.d.getMint(a)?e:f.d.addMint(new w.d(a),e)}))}));case 8:return t.abrupt("return",r);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Promise.all([t(Object(I.e)().swap)].concat(Object(y.a)(Object(I.e)().swap_legacy.map((function(e){return t(e,!0)}))))).then((function(e){i(e.flat())}))}),[e]),Object(r.useEffect)((function(){var t=e.onProgramAccountChange(Object(I.e)().swap,function(){var e=Object(p.a)(v.a.mark((function e(t){var n,r,o,l,c,u;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.accountId,t.accountInfo.data.length===Object(I.e)().swapLayout.span&&(r=t.accountInfo,o={data:Object(I.e)().swapLayout.decode(r.data),account:r,pubkey:new w.d(n)},(l=a&&a.findIndex((function(e){return e.pubkeys.account.toBase58()===n})))&&l>=0&&a?(c=a.filter((function(e,t){return t!==l})),i([].concat(Object(y.a)(c),[M(o,Object(I.e)().swap)]))):((u=M(o,Object(I.e)().swap)).pubkeys.feeAccount=o.data.feeAccount,u.pubkeys.holdingMints=[o.data.mintA,o.data.mintB],i([].concat(Object(y.a)(a),[u]))));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"singleGossip");return function(){e.removeProgramAccountChangeListener(t)}}),[e,a]),{pools:a}}().pools,a=Object(r.useState)(),i=Object(E.a)(a,2),o=i[0],l=i[1],c=Object(r.useMemo)((function(){return Object(y.a)(e).sort()}),Object(y.a)(e));return Object(r.useEffect)((function(){Object(p.a)(v.a.mark((function e(){var a,r,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l(void 0),a=n.filter((function(e){return!e.legacy})).filter((function(e){return e.pubkeys.holdingMints.map((function(e){return e.toBase58()})).sort().every((function(e,t){return e===c[t]}))})),r=0;case 3:if(!(r<a.length)){e.next=14;break}return i=a[r],e.next=7,f.d.query(t,i.pubkeys.holdingAccounts[0]);case 7:if(e.sent.info.amount.eqn(0)){e.next=11;break}return l(i),e.abrupt("return");case 11:r++,e.next=3;break;case 14:case"end":return e.stop()}}),e)})))()}),[t,c,n]),o};!function(e){e[e.Add=0]="Add",e[e.SwapGivenInput=1]="SwapGivenInput",e[e.SwapGivenProceeds=2]="SwapGivenProceeds"}(a||(a={}));var _=new Date("2020-10-27"),R=i.a.createContext(null),q=new k.a;function P(e){var t=e.children,n=void 0===t?null:t,a=Object(d.e)().endpoint,o=Object(r.useMemo)((function(){return new Map}),[]),l=Object(r.useState)([]),c=Object(E.a)(l,2),u=c[0],s=c[1],m=Object(r.useState)(new Map),b=Object(E.a)(m,2),O=b[0],h=(b[1],Object(r.useMemo)((function(){return new w.b(a,"recent")}),[a])),k=Object(r.useMemo)((function(){return Object(y.a)(new Set(u).values()).reduce((function(e,t){var n=t,a=j.TOKEN_MINTS.find((function(e){return e.address.toBase58()===n})),r=g[n],i="".concat(null===a||void 0===a?void 0:a.name,"/USDC"),o=j.MARKETS.find((function(e){return e.name===i||e.address.toBase58()===r}));return o&&e.set(n,{marketInfo:o}),e}),new Map)}),[u]);Object(r.useEffect)((function(){var e=0,t=function(){var n=Object(p.a)(v.a.mark((function n(){return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,G(h,Object(y.a)(o.keys()));case 2:q.raiseMarketUpdated(new Set(Object(y.a)(k.keys()))),e=window.setTimeout((function(){return t()}),3e4);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return function(){var e=Object(p.a)(v.a.mark((function e(){var n,a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Map,Object(y.a)(k.keys()).forEach((function(e){var t=k.get(e);t&&n.set(t.marketInfo.address.toBase58(),e)})),a=Object(y.a)(k.values()).map((function(e){return e.marketInfo.address.toBase58()})),e.next=5,Object(f.e)(h,a.filter((function(e){return void 0===f.d.get(e)})),"single").then((function(e){var t=e.keys,r=e.array;return a.forEach((function(){})),r.map((function(e,a){var r=t[a],i=n.get(r);if(i){var o=k.get(i);if(o){var l=o.marketInfo.address;f.d.add(l,e,T)}}return e}))}));case 5:return r=new Set,a.forEach((function(e){var t=f.d.get(e);if(t){var n=t;f.d.get(n.info.baseMint)||r.add(n.info.baseMint.toBase58()),f.d.get(n.info.baseMint)||r.add(n.info.quoteMint.toBase58()),r.add(n.info.bids.toBase58()),r.add(n.info.asks.toBase58())}})),e.next=9,G(h,Object(y.a)(r.keys()));case 9:q.raiseMarketUpdated(new Set(Object(y.a)(k.keys()))),t();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){window.clearTimeout(e)}}),[k,o,h]);var A=Object(r.useCallback)((function(e){var t;return K(null===(t=k.get(e))||void 0===t?void 0:t.marketInfo.address.toBase58(),e)}),[k]),S=Object(r.useCallback)((function(e){var t=k.get(e),n=f.d.get((null===t||void 0===t?void 0:t.marketInfo.address.toBase58())||"");if(!n)return function(){};var a=n.info.bids.toBase58(),r=n.info.asks.toBase58();return o.set(a,(o.get(a)||0)+1),o.set(r,(o.get(r)||0)+1),function(){o.set(a,(o.get(a)||0)-1),o.set(r,(o.get(r)||0)-1),Object(y.a)(o.keys()).forEach((function(e){(o.get(e)||0)<=0&&o.delete(e)}))}}),[k,o]),x=Object(r.useCallback)((function(e){var t=Object(y.a)(new Set([].concat(Object(y.a)(u),Object(y.a)(e))).values());u.length!==t.length&&s(t)}),[s,u]);return i.a.createElement(R.Provider,{value:{midPriceInUSD:A,marketEmitter:q,accountsToObserve:o,marketByMint:k,subscribeToMarket:S,precacheMarkets:x,dailyVolume:O}},n)}var D=function(){return Object(r.useContext)(R)},W=function(e){var t=Object(r.useContext)(R),n=Object(d.e)().tokenMap,a=Object(r.useState)([]),i=Object(E.a)(a,2),o=i[0],l=i[1],c=null===t||void 0===t?void 0:t.subscribeToMarket,u=null===t||void 0===t?void 0:t.marketEmitter,s=null===t||void 0===t?void 0:t.marketByMint,m=null===t||void 0===t?void 0:t.dailyVolume,b=e.map((function(e){return e.pubkeys.account.toBase58()})).join(",");return Object(r.useEffect)((function(){if(u&&c&&0!==e.length){var t=Object(y.a)(new Set(Object(y.a)(null===s||void 0===s?void 0:s.keys())).keys()).map((function(e){return c(e)})),a=function(){l(function(e,t,n,a){var r=new Date;if(!t)return[];return e.filter((function(e){return e.pubkeys.holdingMints&&e.pubkeys.holdingMints.length>1})).map((function(e,i){var o,l,c,u=(e.pubkeys.holdingMints||[]).map((function(e){return e.toBase58()})).sort(),s=f.d.getMint(u[0]),d=f.d.getMint(u[1]),m=f.d.get(e.pubkeys.holdingAccounts[0]),b=f.d.get(e.pubkeys.holdingAccounts[1]),v=(null===m||void 0===m?void 0:m.info.mint.toBase58())===u[0]?m:b,p=(null===b||void 0===b?void 0:b.info.mint.toBase58())===u[1]?b:m,y=K((null===(o=t.get(u[0]))||void 0===o?void 0:o.marketInfo.address.toBase58())||"",u[0]),E=y*Object(h.c)(v,s),g=K((null===(l=t.get(u[1]))||void 0===l?void 0:l.marketInfo.address.toBase58())||"",u[1])*Object(h.c)(p,d),j=f.d.getMint(e.pubkeys.mint);if(!(null===j||void 0===j?void 0:j.supply.eqn(0))){var w=function(e,t,n,a){var r=0,i=O.find((function(t){return t.pool.equals(e.pubkeys.mint)}));i&&(r=i.airdrops.reduce((function(e,r){var i,o=null===(i=t.get(r.mint.toBase58()))||void 0===i?void 0:i.marketInfo.address;if(o){var l=K(null===o||void 0===o?void 0:o.toBase58(),r.mint.toBase58());e+=r.amount*l/(n+a)*(365/30)}return e}),0));return r}(e,t,E,g),k=0,A=y*((null===n||void 0===n||null===(c=n.get(e.pubkeys.mint.toBase58()))||void 0===c?void 0:c.volume24hA)||0),S=.0025*A,x=0,T=w,N=w;if(e.pubkeys.feeAccount){var I=f.d.get(e.pubkeys.feeAccount);if(j&&I&&I.info.mint.toBase58()===e.pubkeys.mint.toBase58()){var B=(null===I||void 0===I?void 0:I.info.amount.toNumber())/(null===j||void 0===j?void 0:j.supply.toNumber());if(0!==(x=.003*(k=(B*E+B*g)/4e-4))){var L=B*E/4e-4,M=B*g/4e-4,C=Math.floor((r.getTime()-_.getTime())/864e5),R=parseFloat(L/C*.003*356)/E,q=parseFloat(M/C*.003*356)/g;T+=Math.max(R,q),N+=parseFloat(.003*A*356)/E}}}var P=f.d.getMint(e.pubkeys.mint),D=Object(h.i)(a,e),W="#/?pair=".concat(Object(h.i)(a,e,!1).replace("/","-"));return{key:e.pubkeys.account.toBase58(),id:i,name:D,names:u.map((function(e){return Object(h.l)(a,e)})),accounts:[null===v||void 0===v?void 0:v.pubkey,null===p||void 0===p?void 0:p.pubkey],address:e.pubkeys.mint.toBase58(),link:W,mints:u,liquidityA:Object(h.c)(v,s),liquidityAinUsd:E,liquidityB:Object(h.c)(p,d),liquidityBinUsd:g,supply:P&&((null===P||void 0===P?void 0:P.supply.toNumber())/Math.pow(10,(null===P||void 0===P?void 0:P.decimals)||0)).toFixed(9),fees:x,fees24h:S,liquidity:E+g,volume:k,volume24h:A,apy:Number.isFinite(T)?T:0,apy24h:Number.isFinite(N)?N:0,map:n,extra:null===n||void 0===n?void 0:n.get(e.pubkeys.account.toBase58()),raw:e}}})).filter((function(e){return void 0!==e}))}(e,s,m,n))},r=u.onMarket(a);return a(),function(){r&&r(),t.forEach((function(e){return e&&e()}))}}}),[e,n,m,b,c,u,s]),o};var F=function(e){var t=Object(r.useContext)(R),n=t.midPriceInUSD,a=t.subscribeToMarket,i=t.marketEmitter,o=Object(r.useState)(0),l=Object(E.a)(o,2),c=l[0],u=l[1];return Object(r.useEffect)((function(){var t=a(e),r=function(){n&&u(n(e))};r();var o=i.onMarket(r);return function(){t(),o()}}),[n,e,i,a]),{price:c,isBase:1===c}},U=function(e,t){var n=e.getL2(1),a=t.getL2(1);return n.length>0&&a.length>0?(n[0][0]+a[0][0])/2:0},K=function(e,t){var n,a,r,i,o=j.TOKEN_MINTS.find((function(e){return e.address.toBase58()===t}));if(h.a.has((null===o||void 0===o?void 0:o.name)||""))return 1;if(!e)return 0;var l=f.d.get(e);if(!l)return 0;var c=l.info,u=(null===(n=f.d.get(c.baseMint))||void 0===n?void 0:n.info.decimals)||0,s=(null===(a=f.d.get(c.quoteMint))||void 0===a?void 0:a.info.decimals)||0,d=new j.Market(c,u,s,void 0,c.programId),m=null===(r=f.d.get(c.bids))||void 0===r?void 0:r.info,b=null===(i=f.d.get(c.asks))||void 0===i?void 0:i.info;if(m&&b){var v=new j.Orderbook(d,m.accountFlags,m.slab),p=new j.Orderbook(d,b.accountFlags,b.slab);return U(v,p)}return 0},G=function(){var e=Object(p.a)(v.a.mark((function e(t,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.abrupt("return",Object(f.e)(t,n,"single").then((function(e){var t=e.keys;return e.array.map((function(e,n){var a=t[n];return f.d.add(new w.d(a),e)}))})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Q=n(31),z=n(111),V=function(){return f.d.byParser(Q.f).map((function(e){return f.d.get(e)})).filter((function(e){return void 0!==e}))};function Y(){var e=Object(r.useState)(V()),t=Object(E.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){var e=f.d.emitter.onCache((function(e){e.parser===Q.f&&a(V())}));return function(){e()}}),[a]),{reserveAccounts:n}}function H(e){var t=Object(d.e)().tokenMap,n=Y().reserveAccounts,a=e;if("string"===typeof e){var i=Object(h.j)(t,e);if(i){var o=n.filter((function(e){return e.info.liquidityMint.toBase58()===i.mintAddress}))[0];o&&(a=o.pubkey)}}var l=Object(r.useMemo)((function(){var e;return"string"===typeof a?a:null===(e=a)||void 0===e?void 0:e.toBase58()}),[a]),c=Object(r.useState)(f.d.get(l||"")),u=Object(E.a)(c,2),s=u[0],m=u[1];return Object(r.useEffect)((function(){var e=f.d.emitter.onCache((function(e){e.id===l&&m(f.d.get(l))}));return function(){e()}}),[l,m]),s}function $(e){var t=Object(d.e)().tokenMap,n="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();return Object(h.l)(t,n)}function J(e,t){var n=Object(r.useMemo)((function(){return"string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58()}),[e]),a=Object(z.a)().userAccounts,i=Object(r.useState)(0),o=Object(E.a)(i,2),l=o[0],c=o[1],u=D(),s=u.marketEmitter,d=u.midPriceInUSD,m=Object(f.h)(n),b=Object(r.useMemo)((function(){return a.filter((function(e){return n===e.info.mint.toBase58()&&(!t||t.equals(e.pubkey))})).sort((function(e,t){return t.info.amount.sub(e.info.amount).toNumber()}))}),[a,n,t]),v=Object(r.useMemo)((function(){return b.reduce((function(e,t){return e+t.info.amount.toNumber()}),0)}),[b]),p=Object(r.useMemo)((function(){return Object(h.h)(v,m)}),[m,v]);return Object(r.useEffect)((function(){var e=function(){c(p*d(n||""))},t=s.onMarket((function(t){e()}));return e(),function(){t()}}),[p,d,s,n,c]),{balance:p,balanceLamports:v,balanceInUSD:l,accounts:b,hasBalance:b.length>0&&p>0}}function X(e,t){var n=Object(f.h)(null===e||void 0===e?void 0:e.collateralMint),a=J(null===e||void 0===e?void 0:e.collateralMint,t),i=a.balanceLamports,o=a.accounts,l=Object(r.useState)(0),c=Object(E.a)(l,2),u=c[0],s=c[1],d=D(),m=d.marketEmitter,b=d.midPriceInUSD,v=Object(r.useMemo)((function(){return e&&Z(e,i)}),[i,e]),p=Object(r.useMemo)((function(){return Object(h.h)(v,n)}),[v,n]);return Object(r.useEffect)((function(){var t=function(){var t;s(p*b((null===e||void 0===e||null===(t=e.liquidityMint)||void 0===t?void 0:t.toBase58())||""))},n=m.onMarket((function(n){n.ids.has((null===e||void 0===e?void 0:e.dexMarket.toBase58())||"")&&t()}));return t(),function(){n()}}),[p,b,m,n,s,e]),{balance:p,balanceLamports:v,balanceInUSD:u,mint:null===e||void 0===e?void 0:e.collateralMint,accounts:o,hasBalance:o.length>0&&p>0}}function Z(e,t){return Object(Q.t)(e)*(t/((null===e||void 0===e?void 0:e.state.collateralMintSupply.toNumber())||1))}var ee,te=function(){return f.d.byParser(Q.e).map((function(e){return f.d.get(e)})).filter((function(e){return void 0!==e}))};function ne(){var e=function(){var e=Object(r.useState)(te()),t=Object(E.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){var e=f.d.emitter.onCache((function(e){e.parser===Q.e&&a(te())}));return function(){e()}}),[a]),{obligations:n}}().obligations,t=Y().reserveAccounts,n=Object(d.e)().tokenMap,a=D(),i=a.marketEmitter,o=a.midPriceInUSD,l=Object(r.useMemo)((function(){return t.reduce((function(e,t){return e.set(t.pubkey.toBase58(),t),e}),new Map)}),[t]),c=Object(r.useCallback)((function(){return 0===l.size?[]:e.map((function(e){return{obligation:e,reserve:l.get(e.info.borrowReserve.toBase58()),collateralReserve:l.get(e.info.collateralReserve.toBase58())}})).filter((function(e){return e.reserve})).filter((function(e){return Object(h.p)(e.obligation.info.borrowAmountWad).toNumber()>0})).map((function(e){var t=e.obligation,a=e.reserve.info,r=e.reserve.info,i=0,l=0,c=0,u=0;if(f.d.get(a.liquidityMint)){var s=f.d.get(e.collateralReserve.info.liquidityMint),d=Object(h.h)(Object(Q.l)(t.info.depositedCollateral,e.reserve.info),null===s||void 0===s?void 0:s.info),b=Object(h.p)(t.info.borrowAmountWad).toNumber(),v=function(e,t,n){var a,r,i,o,l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=f.d.get(t.liquidityMint),u=f.d.get(t.collateralMint);if(!c||!u)return 0;var s=f.d.get(n);if(!s)return 0;var d=s.info,b=(null===(a=f.d.get(d.baseMint))||void 0===a?void 0:a.info.decimals)||0,v=(null===(r=f.d.get(d.quoteMint))||void 0===r?void 0:r.info.decimals)||0,p=f.d.get(t.lendingMarket),y=new j.Market(d,b,v,void 0,d.programId),g=null===(i=f.d.get(null===d||void 0===d?void 0:d.bids))||void 0===i?void 0:i.info,O=null===(o=f.d.get(null===d||void 0===d?void 0:d.asks))||void 0===o?void 0:o.info;if(!g||!O)return 0;var w=new j.Orderbook(y,g.accountFlags,g.slab),k=new j.Orderbook(y,O.accountFlags,O.slab),A=p.info.quoteMint.equals(t.liquidityMint)?w:k,S=0,x=Object(h.h)(e,c.info),T=A.isBids?function(e,t){return t/e}:function(e,t){return t*e};if(l){var N=U(w,k);return T(N,x)}var I,B,L,M=A.getL2(1e3),C=Object(m.a)(M);try{for(C.s();!(L=C.n()).done;){var _=Object(E.a)(L.value,2);N=_[0];var R=x>(B=_[1])?B:x;if(S+=T(I,R),(x-=R)<=0)break}}catch(q){C.e(q)}finally{C.f()}return S}(b,e.reserve.info,e.reserve.info.dexMarketOption?e.reserve.info.dexMarket:e.collateralReserve.info.dexMarket,!0),p=e.reserve.info.liquidityMint.toBase58(),y=f.d.get(p);c=Object(h.h)(b,y.info)*o(p),u=d*o((null===s||void 0===s?void 0:s.pubkey.toBase58())||""),i=100*v/d,l=d*e.reserve.info.config.liquidationThreshold/100/v}return{account:t,info:Object(A.a)(Object(A.a)({},t.info),{},{ltv:i,health:l,borrowedInQuote:c,collateralInQuote:u,liquidationThreshold:e.reserve.info.config.liquidationThreshold,repayName:Object(h.l)(n,a.liquidityMint),collateralName:Object(h.l)(n,r.liquidityMint)})}})).sort((function(e,t){return e.info.health-t.info.health}))}),[e,l,o,n]),u=Object(r.useState)(c()),s=Object(E.a)(u,2),b=s[0],v=s[1];return Object(r.useEffect)((function(){var e=i.onMarket((function(){v(c())}));return function(){e()}}),[c,v,i,o]),{obligations:b}}function ae(e){var t="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),n=ne().obligations;return Object(r.useMemo)((function(){return n.find((function(e){return e.account.pubkey.toBase58()===t}))}),[n,t])}function re(){var e=Object(z.a)().userAccounts,t=ne().obligations,n=Object(r.useMemo)((function(){return e.reduce((function(e,t){var n=t.info.mint.toBase58();return e.set(n,[].concat(Object(y.a)(e.get(n)||[]),[t])),e}),new Map)}),[e]),a=Object(r.useMemo)((function(){return 0===n.size?[]:t.filter((function(e){return void 0!==n.get(e.info.tokenMint.toBase58())})).map((function(e){return{obligation:e,userAccounts:Object(y.a)(n.get(e.info.tokenMint.toBase58()))}})).sort((function(e,t){return t.obligation.info.borrowedInQuote-e.obligation.info.borrowedInQuote}))}),[n,t]);return{userObligations:a,totalInQuote:a.reduce((function(e,t){return e+t.obligation.info.borrowedInQuote}),0)}}function ie(e,t){var n=re().userObligations;return{userObligationsByReserve:Object(r.useMemo)((function(){var a="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),r="string"===typeof t?t:null===t||void 0===t?void 0:t.toBase58();return n.filter((function(e){return a&&r?e.obligation.info.borrowReserve.toBase58()===a&&e.obligation.info.collateralReserve.toBase58()===r:a&&e.obligation.info.borrowReserve.toBase58()===a||r&&e.obligation.info.collateralReserve.toBase58()===r}))}),[e,t,n])}}function oe(e,t){var n=Object(z.a)().userAccounts,a=Y().reserveAccounts,i=Object(r.useState)([]),o=Object(E.a)(i,2),l=o[0],c=o[1],u=D(),s=u.marketEmitter,m=u.midPriceInUSD,b=Object(d.e)().tokenMap,v=Object(r.useMemo)((function(){return a.reduce((function(n,a){var r=a.pubkey.toBase58();return e&&e.has(r)||t&&!t.has(r)||n.set(a.info.collateralMint.toBase58(),a),n}),new Map)}),[a,e,t]);return Object(r.useEffect)((function(){var e=new Set(a.map((function(e){return e.info.dexMarket.toBase58()}))),t=function(){return n.filter((function(e){return v.has(null===e||void 0===e?void 0:e.info.mint.toBase58())})).map((function(e){var t=v.get(null===e||void 0===e?void 0:e.info.mint.toBase58()),n=f.d.get(t.info.collateralMint),a=Z(t.info,null===e||void 0===e?void 0:e.info.amount.toNumber()),r=Object(h.h)(a,null===n||void 0===n?void 0:n.info);return{account:e,info:{amount:r,amountInQuote:m(t.info.liquidityMint.toBase58())*r,apy:Object(Q.j)(t.info),name:Object(h.l)(b,t.info.liquidityMint)},reserve:t}})).sort((function(e,t){return t.info.amountInQuote-e.info.amountInQuote}))},r=s.onMarket((function(n){Object(y.a)(n.ids.values()).every((function(t){return!e.has(t)}))||c(t())}));return c(t()),function(){r()}}),[n,a,v,b,m,s]),{userDeposits:l,totalInQuote:l.reduce((function(e,t){return e+t.info.amountInQuote}),0)}}!function(e){e[e.AbsoluteValue=0]="AbsoluteValue",e[e.Percent=1]="Percent"}(ee||(ee={}));var le=function(e){var t=Object(r.useState)(""),n=Object(E.a)(t,2),a=n[0],i=n[1],o=Object(r.useState)(0),l=Object(E.a)(o,2),c=l[0],u=l[1],s=Object(r.useState)(ee.Percent),d=Object(E.a)(s,2),f=d[0],m=d[1];return{value:a,setValue:Object(r.useCallback)((function(t){m(ee.AbsoluteValue),i(t),u(e(t))}),[m,i,u,e]),pct:c,setPct:Object(r.useCallback)((function(t){m(ee.Percent),u(t),i(e(t))}),[m,i,u,e]),type:f}};function ce(e){var t="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),n=Object(r.useState)(f.d.get(t||"")),a=Object(E.a)(n,2),i=a[0],o=a[1];return Object(r.useEffect)((function(){var e=f.d.emitter.onCache((function(e){e.id===t&&o(f.d.get(t))}));return function(){e()}}),[t,o]),i}function ue(e){var t,n,a=Object(r.useMemo)((function(){return"string"===typeof e?e:(null===e||void 0===e?void 0:e.toBase58())||""}),[e]),i=H(a),o=null===i||void 0===i?void 0:i.info.liquidityMint,l=null===o||void 0===o?void 0:o.toBase58(),c=ce(null===i||void 0===i?void 0:i.info.lendingMarket),u=null===c||void 0===c||null===(t=c.info)||void 0===t||null===(n=t.quoteMint)||void 0===n?void 0:n.toBase58(),s=l!==u,d=Object(r.useMemo)((function(){return new Set([a])}),[a]),f=Object(r.useMemo)((function(){var e=V().find((function(e){return e.info.liquidityMint.toBase58()===u}));return s&&e?new Set([e.pubkey.toBase58()]):void 0}),[s,u]),m=oe(d,f),b=m.totalInQuote,v=F(l).price,p=re(),y=p.totalInQuote,E=y+b,g=0===E?0:y/E;return l===u?{borrowingPower:b,totalInQuote:b,utilization:g}:{borrowingPower:b/v,totalInQuote:b,utilization:g}}var se=i.a.createContext(null);function de(e){var t=e.children,n=void 0===t?null:t,a=fe().accounts;return i.a.createElement(se.Provider,{value:{accounts:a}},n)}var fe=function(){var e=Object(d.d)(),t=Object(r.useState)([]),n=Object(E.a)(t,2),a=n[0],i=n[1],o=Y().reserveAccounts,l=D().precacheMarkets,c=Object(r.useCallback)((function(e){return Object(Q.s)(e.account)?f.d.add(e.pubkey.toBase58(),e.account,Q.f):Object(Q.q)(e.account)?f.d.add(e.pubkey.toBase58(),e.account,Q.c):Object(Q.r)(e.account)?f.d.add(e.pubkey.toBase58(),e.account,Q.e):void 0}),[]);return Object(r.useEffect)((function(){o.length>0&&l(o.map((function(e){return e.info.liquidityMint.toBase58()})))}),[o,l]),Object(r.useEffect)((function(){i([]);var t=function(){var t=Object(p.a)(v.a.mark((function t(){var n,a,r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getProgramAccounts(I.a);case 2:return n=t.sent,a=n.map(c).filter((function(e){return void 0!==e})),r=a.filter((function(e){return void 0!==(null===e||void 0===e?void 0:e.info).lendingMarket})).map((function(e){return e})),i=Object(y.a)(r.map((function(e){return[f.d.registerParser(null===e||void 0===e?void 0:e.info.collateralMint.toBase58(),f.b),f.d.registerParser(null===e||void 0===e?void 0:e.info.liquidityMint.toBase58(),f.b),f.d.registerParser((null===e||void 0===e?void 0:e.info.dexMarketOption)?null===e||void 0===e?void 0:e.info.dexMarket.toBase58():"",T)].filter((function(e){return e}))}))).flat(),t.next=8,Object(f.e)(e,i,"single").then((function(e){var t=e.keys;return e.array.map((function(e,n){var a=t[n];return f.d.add(a,e),e}))}));case 8:return n.map(c).filter((function(e){return void 0!==e})),t.abrupt("return",a);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Promise.all([t()]).then((function(e){i(e.flat())}))}),[e,c]),Object(r.useEffect)((function(){var t=e.onProgramAccountChange(I.a,function(){var e=Object(p.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.accountId,a={pubkey:new w.d(n),account:t.accountInfo},c(a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"singleGossip");return function(){e.removeProgramAccountChangeListener(t)}}),[e,a,c]),{accounts:a}},me=n(113),be=n(1115),ve=n(1116),pe=n(1117),ye=n(1118),Ee=n(1119),ge=n(1120),Oe=n(1121),he=n(1114),je=n(543),we=n(177),ke=n(549),Ae=n(526),Se=n.n(Ae),xe=n(25),Te=n.n(xe),Ne=(n(694),function(e){var t,n=e.style,a=e.className,o="string"===typeof e.address?e.address:null===(t=e.address)||void 0===t?void 0:t.toBase58(),l=Object(r.useRef)();return Object(r.useEffect)((function(){o&&l.current&&(l.current.innerHTML="",l.current.className=a||"",l.current.appendChild(Se()((null===n||void 0===n?void 0:n.width)||16,parseInt(Te.a.decode(o).toString("hex").slice(5,15),16))))}),[o,n,a]),i.a.createElement("div",{className:"identicon-wrapper",ref:l,style:e.style})}),Ie=function(e){var t,n=Object(s.c)().wallet,a=Object(f.i)().account;return n&&n.publicKey?i.a.createElement("div",{className:"wallet-wrapper"},i.a.createElement("span",null,h.d.format(((null===a||void 0===a?void 0:a.lamports)||0)/w.c)," SOL"),i.a.createElement("div",{className:"wallet-key"},Object(h.m)("".concat(n.publicKey)),i.a.createElement(Ne,{address:null===(t=n.publicKey)||void 0===t?void 0:t.toBase58(),style:{marginLeft:"0.5rem",display:"flex"}}))):null},Be=n(1113),Le=n(1109),Me=function(){var e=Object(s.c)(),t=e.providerUrl,n=e.setProvider,a=Object(d.e)(),r=a.endpoint,o=a.setEndpoint;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{display:"grid"}},"Network:"," ",i.a.createElement(Le.a,{onSelect:o,value:r,style:{marginRight:8}},d.b.map((function(e){var t=e.name,n=e.endpoint;return i.a.createElement(Le.a.Option,{value:n,key:n},t)})))),i.a.createElement("div",{style:{display:"grid"}},"Wallet:"," ",i.a.createElement(Le.a,{onSelect:n,value:t},s.a.map((function(e){var t=e.name,n=e.url;return i.a.createElement(Le.a.Option,{value:n,key:n},t)})))))},Ce=n(12),_e=function(e){var t=Object(s.c)(),n=t.connected,a=t.wallet;return i.a.createElement("div",{className:"App-Bar-right"},i.a.createElement(Ie,null),i.a.createElement("div",null,!n&&i.a.createElement(we.a,{type:"text",size:"large",onClick:n?a.disconnect:a.connect,style:{color:"#2abdd2"}},Ce.b.CONNECT_BUTTON),n&&i.a.createElement(ke.a,{placement:"bottomRight",title:Ce.b.WALLET_TOOLTIP,trigger:"click"})),i.a.createElement(ke.a,{placement:"topRight",title:Ce.b.SETTINGS_TOOLTIP,content:i.a.createElement(Me,null),trigger:"click"},i.a.createElement(we.a,{shape:"circle",size:"large",type:"text",icon:i.a.createElement(Be.a,null)})),e.right)},Re=n(358),qe=i.a.memo((function(e){var t=Object(d.e)().env,n=Object(u.g)(),a={"/dashboard":"2","/deposit":"3","/borrow":"4","/liquidate":"5","/margin":"6","/faucet":"7"},r=a[Object(y.a)(Object.keys(a)).find((function(e){return n.pathname.startsWith(e)}))||""]||"1";return i.a.createElement("div",{className:"App"},i.a.createElement("div",{className:"Banner"},i.a.createElement("div",{className:"Banner-description"},Ce.b.AUDIT_WARNING)),i.a.createElement(je.a,{title:Ce.b.APP_TITLE,footerRender:function(){return i.a.createElement("div",{className:"footer",title:Ce.b.FOOTER},Ce.b.FOOTER)},navTheme:"dark",headerTheme:"dark",theme:"dark",layout:"mix",fixSiderbar:!0,primaryColor:"#d83aeb",logo:i.a.createElement("div",{className:"App-logo"}),rightContentRender:function(){return i.a.createElement(_e,null)},links:[],menuContentRender:function(){return i.a.createElement("div",{className:"links"},i.a.createElement(me.a,{theme:"dark",defaultSelectedKeys:[r],mode:"inline"},i.a.createElement(me.a.Item,{key:"1",icon:i.a.createElement(be.a,null)},i.a.createElement(c.b,{to:{pathname:"/"}},Ce.b.MENU_HOME)),i.a.createElement(me.a.Item,{key:"2",icon:i.a.createElement(ve.a,null)},i.a.createElement(c.b,{to:{pathname:"/dashboard"}},Ce.b.MENU_DASHBOARD)),i.a.createElement(me.a.Item,{key:"3",icon:i.a.createElement(pe.a,null)},i.a.createElement(c.b,{to:{pathname:"/deposit"}},Ce.b.MENU_DEPOSIT)),i.a.createElement(me.a.Item,{key:"4",icon:i.a.createElement(ye.a,null)},i.a.createElement(c.b,{to:{pathname:"/borrow"}},Ce.b.MENU_BORROW)),i.a.createElement(me.a.Item,{key:"5",icon:i.a.createElement(Ee.a,null)},i.a.createElement(c.b,{to:{pathname:"/liquidate"}},Ce.b.MENU_LIQUIDATE)),"mainnet-beta"!==t&&i.a.createElement(me.a.Item,{key:"7",icon:i.a.createElement(ge.a,null)},i.a.createElement(c.b,{to:{pathname:"/faucet"}},Ce.b.MENU_FAUCET))),i.a.createElement(me.a,{theme:"dark",defaultSelectedKeys:[r],selectable:!1,mode:"inline",className:"bottom-links"},i.a.createElement(me.a.Item,{key:"16",icon:i.a.createElement(Oe.a,null)},i.a.createElement("a",{title:"Fork",href:"".concat(Re.repository.url,"/fork"),target:"_blank",rel:"noopener noreferrer"},"Fork")),",",i.a.createElement(me.a.Item,{key:"15",icon:i.a.createElement(he.a,null)},i.a.createElement("a",{title:"Gtihub",href:Re.repository.url,target:"_blank",rel:"noopener noreferrer"},"Github"))))}},e.children))})),Pe=n(214),De=n(120),We=n(1112),Fe=n(1110),Ue=function(e){var t,n,a=Object(d.e)().tokenMap,r=Object(h.k)(a,e.mintAddress),o=e.size||20;return r?i.a.createElement("img",{alt:"Token icon",className:e.className,key:r,width:(null===(t=e.style)||void 0===t?void 0:t.width)||o.toString(),height:(null===(n=e.style)||void 0===n?void 0:n.height)||o.toString(),src:r,style:Object(A.a)({marginRight:"0.5rem",marginTop:"0.11rem",borderRadius:"10rem",backgroundColor:"white",backgroundClip:"padding-box"},e.style)}):i.a.createElement(Ne,{address:e.mintAddress,style:Object(A.a)({marginRight:"0.5rem",width:o,height:o,marginTop:2},e.style)})},Ke=function(e){var t,n,a=$(e.reserve.liquidityMint),o=Object(f.h)(e.reserve.liquidityMint),l=Object(h.h)(e.reserve.state.availableLiquidity,o),u=Object(r.useMemo)((function(){return Object(h.h)(Object(h.p)(e.reserve.state.borrowedLiquidityWad),o)}),[e.reserve,o]),s=Object(r.useMemo)((function(){return Object(Q.i)(e.reserve)}),[e.reserve]),d=Object(r.useMemo)((function(){return Object(Q.j)(e.reserve)}),[e.reserve]),m=l+u;return i.a.createElement(c.b,{to:"/reserve/".concat(e.address.toBase58())},i.a.createElement("div",{className:"home-item"},i.a.createElement("span",{style:{display:"flex"}},i.a.createElement(Ue,{mintAddress:e.reserve.liquidityMint}),a),i.a.createElement("div",{title:m.toString()},i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,h.d.format(m))," ",a),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.d.format(null===(t=e.item)||void 0===t?void 0:t.marketSize)))),i.a.createElement("div",{title:u.toString()},i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,h.d.format(u))," ",a),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.d.format(null===(n=e.item)||void 0===n?void 0:n.borrowed)))),i.a.createElement("div",{title:d.toString()},h.e.format(d)),i.a.createElement("div",{title:s.toString()},h.e.format(s))))},Ge=function(e){var t=["#003f5c","#2f4b7c","#665191","#a05195","#d45087","#f95d6a","#ff7c43","#ffa600"].reverse();return i.a.createElement(Fe.a,{title:e.title,valueRender:function(){return i.a.createElement("div",{style:{width:"100%",height:37,display:"flex",backgroundColor:"lightgrey",fontSize:12,lineHeight:"37px"}},e.items.map((function(n,a){return i.a.createElement("div",{key:e.name(n),title:e.name(n),style:{overflow:"hidden",width:"".concat(100*e.getPct(n),"%"),backgroundColor:e.color&&e.color(n)||t[a%e.items.length]}},e.name(n))})))}})},Qe=(n(759),function(){var e=Y().reserveAccounts,t=D(),n=t.marketEmitter,a=t.midPriceInUSD,o=Object(d.e)().tokenMap,l=Object(r.useState)({marketSize:0,borrowed:0,lentOutPct:0,items:[]}),c=Object(E.a)(l,2),u=c[0],s=c[1];return Object(r.useEffect)((function(){var t=function(){var t={marketSize:0,borrowed:0,lentOutPct:0,items:[]};e.forEach((function(e){var n,r=Object(B.reserveMarketCap)(e.info),i=f.d.get(e.info.liquidityMint.toBase58());if(i){var l=a(null===i||void 0===i?void 0:i.pubkey.toBase58()),c={key:e.pubkey.toBase58(),marketSize:Object(h.h)(r,null===i||void 0===i?void 0:i.info)*l,borrowed:Object(h.h)(Object(h.p)(null===(n=e.info)||void 0===n?void 0:n.state.borrowedLiquidityWad).toNumber(),i.info)*l,name:Object(h.l)(o,e.info.liquidityMint.toBase58())};t.items.push(c),t.marketSize=t.marketSize+c.marketSize,t.borrowed=t.borrowed+c.borrowed}})),t.lentOutPct=t.borrowed/t.marketSize,t.lentOutPct=Number.isFinite(t.lentOutPct)?t.lentOutPct:0,t.items=t.items.sort((function(e,t){return t.marketSize-e.marketSize})),s(t)},r=n.onMarket((function(){t()}));return t(),function(){r()}}),[n,a,s,e,o]),i.a.createElement("div",{className:"flexColumn"},i.a.createElement(Pe.a,{gutter:Ce.a,className:"home-info-row"},i.a.createElement(De.a,{xs:24,xl:5},i.a.createElement(We.a,null,i.a.createElement(Fe.a,{title:"Current market size",value:u.marketSize,precision:2,valueStyle:{color:"#3fBB00"},prefix:"$"}))),i.a.createElement(De.a,{xs:24,xl:5},i.a.createElement(We.a,null,i.a.createElement(Fe.a,{title:"Total borrowed",value:u.borrowed,precision:2,prefix:"$"}))),i.a.createElement(De.a,{xs:24,xl:5},i.a.createElement(We.a,null,i.a.createElement(Fe.a,{title:"% Lent out",value:100*u.lentOutPct,precision:2,suffix:"%"}))),i.a.createElement(De.a,{xs:24,xl:9},i.a.createElement(We.a,null,i.a.createElement(Ge,{title:"Market composition",name:function(e){return e.name},getPct:function(e){return e.marketSize/u.marketSize},items:u.items})))),i.a.createElement(We.a,null,i.a.createElement("div",{className:"home-item home-header"},i.a.createElement("div",null,Ce.b.TABLE_TITLE_ASSET),i.a.createElement("div",null,Ce.b.TABLE_TITLE_MARKET_SIZE),i.a.createElement("div",null,Ce.b.TABLE_TITLE_TOTAL_BORROWED),i.a.createElement("div",null,Ce.b.TABLE_TITLE_DEPOSIT_APY),i.a.createElement("div",null,Ce.b.TABLE_TITLE_BORROW_APY)),e.map((function(e){return i.a.createElement(Ke,{key:e.pubkey.toBase58(),reserve:e.info,address:e.pubkey,item:u.items.find((function(t){return t.key===e.pubkey.toBase58()}))})}))))}),ze=function(e){var t=$(e.reserve.liquidityMint),n=F(e.reserve.liquidityMint.toBase58()).price,a=ue(e.address),r=a.borrowingPower,o=a.totalInQuote,l=Object(Q.i)(e.reserve);return i.a.createElement(c.b,{to:"/borrow/".concat(e.address.toBase58())},i.a.createElement("div",{className:"borrow-item"},i.a.createElement("span",{style:{display:"flex"}},i.a.createElement(Ue,{mintAddress:e.reserve.liquidityMint}),t),i.a.createElement("div",null,"$",h.d.format(n)),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,h.d.format(r))," ",t),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.d.format(o)))),i.a.createElement("div",null,h.e.format(l)),i.a.createElement("div",null,i.a.createElement(we.a,{type:"primary"},i.a.createElement("span",null,Ce.b.BORROW_ACTION)))))},Ve=(n(760),function(){var e=Y().reserveAccounts;return i.a.createElement("div",{className:"flexColumn"},i.a.createElement(We.a,null,i.a.createElement("div",{className:"borrow-item deposit-header"},i.a.createElement("div",null,Ce.b.TABLE_TITLE_ASSET),i.a.createElement("div",null,"Serum Dex Price"),i.a.createElement("div",null,Ce.b.TABLE_TITLE_MAX_BORROW),i.a.createElement("div",null,Ce.b.TABLE_TITLE_APY),i.a.createElement("div",null)),e.map((function(e){return i.a.createElement(ze,{key:e.pubkey.toBase58(),reserve:e.info,address:e.pubkey})}))))}),Ye=(n(761),n(62)),He=n(93);function $e(e,t,n,a,r,i){if(!n.info.isNative)return n.pubkey;var o=et(e,a,r,i);return e.push(N.d.createInitAccountInstruction(I.c,I.d,o,a)),t.push(N.d.createCloseAccountInstruction(I.c,o,a,a,[])),o}function Je(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:65548,i=new w.a;return e.push(w.g.createAccount({fromPubkey:t,newAccountPubkey:i.publicKey,lamports:0,space:r,programId:a})),n.push(i),i.publicKey}function Xe(e,t,n,a){var r=new w.a;return e.push(w.g.createAccount({fromPubkey:t,newAccountPubkey:r.publicKey,lamports:n,space:B.LendingObligationLayout.span,programId:I.a})),a.push(r),r.publicKey}function Ze(e,t,n,a){var r=new w.a;return e.push(w.g.createAccount({fromPubkey:t,newAccountPubkey:r.publicKey,lamports:n,space:N.b.span,programId:I.c})),a.push(r),r.publicKey}function et(e,t,n,a){var r=new w.a;return e.push(w.g.createAccount({fromPubkey:t,newAccountPubkey:r.publicKey,lamports:n,space:N.a.span,programId:I.c})),a.push(r),r.publicKey}function tt(e,t,n,a,r,i){var o=et(e,t,n,i);return e.push(N.d.createInitAccountInstruction(I.c,a,o,r)),o}function nt(e,t,n,a,r,i,o,l){var c,u=i.toBase58(),s=f.d.byParser(f.c).map((function(e){return f.d.get(e)})).find((function(e){return void 0!==e&&e.info.mint.toBase58()===u&&e.info.owner.toBase58()===t.toBase58()&&(void 0===l||!l.has(e.pubkey.toBase58()))})),d=u===I.d.toBase58();return s&&!d?c=s.pubkey:(c=tt(n,e,r,i,t,o),d&&a.push(N.d.createCloseAccountInstruction(I.c,c,e,e,[]))),c}var at=function(){var e=Object(p.a)(v.a.mark((function e(t,n,a,r,i,o,l,c,u){var s,m,b,p,g,O,j,k,A,S,x,T,L,M,C,_,R,q,P,D,W,F,U,K,G,Q,z;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(Ye.a)({message:"Borrowing funds...",description:"Please review transactions to approve.",type:"warn"}),s=[],m=[],b=[],p=[],e.next=7,w.d.findProgramAddress([l.info.lendingMarket.toBuffer()],I.a);case 7:return g=e.sent,O=Object(E.a)(g,1),j=O[0],e.next=12,t.getMinimumBalanceForRentExemption(N.a.span);case 12:if(k=e.sent,!c){e.next=17;break}e.t0=c.pubkey,e.next=25;break;case 17:return e.t1=Xe,e.t2=m,e.t3=n.publicKey,e.next=22,t.getMinimumBalanceForRentExemption(B.LendingObligationLayout.span);case 22:e.t4=e.sent,e.t5=s,e.t0=(0,e.t1)(e.t2,e.t3,e.t4,e.t5);case 25:if(A=e.t0,!c){e.next=30;break}e.t6=c.info.tokenMint,e.next=38;break;case 30:return e.t7=Ze,e.t8=m,e.t9=n.publicKey,e.next=35,t.getMinimumBalanceForRentExemption(N.b.span);case 35:e.t10=e.sent,e.t11=s,e.t6=(0,e.t7)(e.t8,e.t9,e.t10,e.t11);case 38:if(S=e.t6,x=u||et(m,n.publicKey,k,s),u||m.push(Object(B.initObligationInstruction)(l.pubkey,o.pubkey,A,S,x,n.publicKey,l.info.lendingMarket,j)),T=I.b?nt(n.publicKey,I.b,m,[],k,l.info.collateralMint,s):void 0,L=0,M=0,i!==B.BorrowAmountType.LiquidityBorrowAmount){e.next=53;break}return C=a.info.amount.toNumber(),M=C-k,e.next=49,f.d.query(t,o.info.liquidityMint,f.b);case 49:_=e.sent,L=Object(h.n)(r,null===_||void 0===_?void 0:_.info),e.next=59;break;case 53:if(i!==B.BorrowAmountType.CollateralDepositAmount){e.next=59;break}return e.next=56,f.d.query(t,l.info.collateralMint,f.b);case 56:R=e.sent,L=Object(h.n)(r,null===R||void 0===R?void 0:R.info),M=L;case 59:return q=$e(m,p,a,n.publicKey,M+k,s),e.next=62,nt(n.publicKey,n.publicKey,m,p,k,o.info.liquidityMint,s);case 62:if(P=e.sent,!(m.length>0)){e.next=68;break}return e.next=66,Object(d.c)(t,n,m,Object(y.a)(s));case 66:D=e.sent,Object(Ye.a)({message:"Obligation accounts created",description:"Transaction ".concat(D),type:"success"});case 68:if(Object(Ye.a)({message:"Borrowing funds...",description:"Please review transactions to approve.",type:"warn"}),s=[],m=[],b=[].concat(p),W=Object(B.approve)(m,b,q,n.publicKey,M,!1),s.push(W),F=o.info.dexMarketOption?o.info.dexMarket:l.info.dexMarket,U=f.d.get(F)){e.next=78;break}throw new Error("Dex market doesn't exist.");case 78:return K=f.d.get(l.info.lendingMarket),G=K.info.quoteMint.equals(l.info.liquidityMint)?null===U||void 0===U?void 0:U.info.asks:null===U||void 0===U?void 0:U.info.bids,Q=Je(m,n.publicKey,s,I.a),m.push(Object(He.b)(l.pubkey,o.pubkey)),m.push(Object(B.borrowInstruction)(L,i,q,P,l.pubkey,l.info.collateralSupply,l.info.collateralFeesReceiver,o.pubkey,o.info.liquiditySupply,A,S,x,l.info.lendingMarket,j,W.publicKey,F,G,Q,T)),e.prev=83,e.next=86,Object(d.c)(t,n,m.concat(b),s,!0);case 86:z=e.sent,Object(Ye.a)({message:"Funds borrowed.",type:"success",description:"Transaction - ".concat(z)}),e.next=94;break;case 90:throw e.prev=90,e.t12=e.catch(83),console.error(e.t12),new Error;case 94:case"end":return e.stop()}}),e,null,[[83,90]])})));return function(t,n,a,r,i,o,l,c,u){return e.apply(this,arguments)}}(),rt=function(){var e=Object(p.a)(v.a.mark((function e(t,n,a,r,i,o){var l,c,u,s,f,m,b,p,y,g,O,h;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(Ye.a)({message:"Depositing funds...",description:"Please review transactions to approve.",type:"warn"}),l=!0,c=[],u=[],s=[],e.next=7,i.getMinimumBalanceForRentExemption(N.a.span);case 7:return f=e.sent,e.next=10,w.d.findProgramAddress([a.lendingMarket.toBuffer()],I.a);case 10:if(m=e.sent,b=Object(E.a)(m,1),p=b[0],y=$e(u,s,t,o.publicKey,n+f,c),g=Object(B.approve)(u,s,y,o.publicKey,n),c.push(g),!l){e.next=22;break}return e.next=19,nt(o.publicKey,o.publicKey,u,s,f,a.collateralMint,c);case 19:O=e.sent,e.next=23;break;case 22:O=et(u,o.publicKey,f,c);case 23:return l?(u.push(Object(Q.g)(r)),u.push(Object(Q.m)(n,y,O,a.lendingMarket,p,g.publicKey,r,a.liquiditySupply,a.collateralMint))):(80,u.push(Object(Q.p)(n,80,y,O,r,a.liquidityMint,a.liquiditySupply,a.collateralMint,a.collateralSupply,a.lendingMarket,p,g.publicKey,a.dexMarket))),e.prev=24,e.next=27,Object(d.c)(i,o,u.concat(s),c,!0);case 27:h=e.sent,Object(Ye.a)({message:"Funds deposited.",type:"success",description:"Transaction - ".concat(h)}),e.next=34;break;case 31:throw e.prev=31,e.t0=e.catch(24),new Error;case 34:case"end":return e.stop()}}),e,null,[[24,31]])})));return function(t,n,a,r,i,o){return e.apply(this,arguments)}}(),it=n(538),ot=function(){var e=Object(p.a)(v.a.mark((function e(t,n,a,r,i,o,l,c){var u,s,f,m,b,p,y,g,O,h,j;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(Ye.a)({message:"Repaying funds...",description:"Please review transactions to approve.",type:"warn"}),u=[],s=[],f=[],e.next=6,l.getMinimumBalanceForRentExemption(N.a.span);case 6:return m=e.sent,e.next=9,w.d.findProgramAddress([i.info.lendingMarket.toBuffer()],I.a);case 9:return b=e.sent,p=Object(E.a)(b,1),y=p[0],g=t.pubkey,c.publicKey.equals(g)&&i.info.liquidityMint.equals(N.c)&&(g=tt(s,c.publicKey,m+n,N.c,c.publicKey,u),f.push(N.d.createCloseAccountInstruction(I.c,g,c.publicKey,c.publicKey,[]))),O=Object(B.approve)(s,f,g,c.publicKey,n),u.push(O),e.next=18,nt(c.publicKey,c.publicKey,s,f,m,o.info.collateralMint,u);case 18:return h=e.sent,Object(B.approve)(s,f,r.pubkey,c.publicKey,r.info.amount.toNumber(),!0,O.publicKey),s.push(Object(He.b)(i.pubkey,o.pubkey)),s.push(Object(it.a)(n,g,h,i.pubkey,i.info.liquiditySupply,o.pubkey,o.info.collateralSupply,a.pubkey,a.info.tokenMint,r.pubkey,i.info.lendingMarket,y,O.publicKey)),e.next=24,Object(d.c)(l,c,s.concat(f),u,!0);case 24:j=e.sent,Object(Ye.a)({message:"Funds repaid.",type:"success",description:"Transaction - ".concat(j)});case 26:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i,o,l,c){return e.apply(this,arguments)}}(),lt=function(){var e=Object(p.a)(v.a.mark((function e(t,n,a,r,i,o){var l,c,u,s,f,m,b,p,y,g,O;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(Ye.a)({message:"Withdrawing funds...",description:"Please review transactions to approve.",type:"warn"}),l=[],c=[],u=[],e.next=6,i.getMinimumBalanceForRentExemption(N.a.span);case 6:return s=e.sent,e.next=9,w.d.findProgramAddress([a.lendingMarket.toBuffer()],I.a);case 9:return f=e.sent,m=Object(E.a)(f,1),b=m[0],p=t.pubkey,y=Object(B.approve)(c,u,p,o.publicKey,n),l.push(y),e.next=17,nt(o.publicKey,o.publicKey,c,u,s,a.liquidityMint,l);case 17:return g=e.sent,c.push(Object(Q.g)(r)),c.push(Object(Q.u)(n,p,g,r,a.collateralMint,a.liquiditySupply,a.lendingMarket,b,y.publicKey)),e.prev=20,e.next=23,Object(d.c)(i,o,c.concat(u),l,!0);case 23:O=e.sent,Object(Ye.a)({message:"Funds deposited.",type:"success",description:"Transaction - ".concat(O)}),e.next=29;break;case 27:e.prev=27,e.t0=e.catch(20);case 29:case"end":return e.stop()}}),e,null,[[20,27]])})));return function(t,n,a,r,i,o){return e.apply(this,arguments)}}(),ct=n(539),ut=function(){var e=Object(p.a)(v.a.mark((function e(t,n,a,r,i,o,l){var c,u,s,m,b,p,y,g,O,h,j,k,A,S,x,T;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(Ye.a)({message:"Repaying funds...",description:"Please review transactions to approve.",type:"warn"}),c=[],u=[],s=[],e.next=6,t.getMinimumBalanceForRentExemption(N.a.span);case 6:return m=e.sent,e.next=9,w.d.findProgramAddress([o.info.lendingMarket.toBuffer()],I.a);case 9:return b=e.sent,p=Object(E.a)(b,1),y=p[0],g=$e(u,s,a,n.publicKey,r+m,c),O=Object(B.approve)(u,s,g,n.publicKey,r),c.push(O),e.next=17,nt(n.publicKey,n.publicKey,u,s,m,l.info.collateralMint,c);case 17:if(h=e.sent,j=o.info.dexMarketOption?o.info.dexMarket:l.info.dexMarket,k=f.d.get(j)){e.next=22;break}throw new Error("Dex market doesn't exist.");case 22:return A=f.d.get(l.info.lendingMarket),S=A.info.quoteMint.equals(o.info.liquidityMint)?null===k||void 0===k?void 0:k.info.asks:null===k||void 0===k?void 0:k.info.bids,x=Je(u,n.publicKey,c,I.a),u.push(Object(He.b)(o.pubkey,l.pubkey)),u.push(Object(ct.a)(r,g,h,o.pubkey,o.info.liquiditySupply,l.pubkey,l.info.collateralSupply,i.pubkey,o.info.lendingMarket,y,O.publicKey,j,S,x)),e.next=29,Object(d.c)(t,n,u.concat(s),c,!0);case 29:T=e.sent,Object(Ye.a)({message:"Funds liquidated.",type:"success",description:"Transaction - ".concat(T)});case 31:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i,o,l){return e.apply(this,arguments)}}(),st=(n(762),n(422),function(e){return i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center"}},i.a.createElement("h2",null,"Congratulations!"),i.a.createElement("div",null,"Your action has been successfully executed"),i.a.createElement("div",{className:"success-icon"}),i.a.createElement(c.b,{to:"/dashboard"},i.a.createElement(we.a,{type:"primary"},Ce.b.DASHBOARD_ACTION)),i.a.createElement(we.a,{type:"text",onClick:e.onClose},Ce.b.GO_BACK_ACTION))}),dt=function(){var e=Object(u.f)();return i.a.createElement(we.a,{type:"text",onClick:e.goBack},Ce.b.GO_BACK_ACTION)},ft=n(295),mt=function(e){var t=Object(s.c)(),n=t.wallet,a=t.connected,r=e.onClick,o=(e.children,e.disabled),l=Object(ft.a)(e,["onClick","children","disabled"]);return i.a.createElement(we.a,Object.assign({},l,{onClick:a?r:n.connect,disabled:a&&o}),a?e.children:Ce.b.CONNECT_LABEL)},bt=n(84),vt=n(95),pt=n(130),yt=n(129),Et=n(1111),gt=function(e){Object(pt.a)(n,e);var t=Object(yt.a)(n);function n(){var e;Object(bt.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onChange=function(t){var n=t.target.value;(/^-?\d*(\.\d*)?$/.test(n)||""===n||"-"===n)&&e.props.onChange(n)},e.onBlur=function(){var t=e.props,n=t.value,a=t.onBlur,r=t.onChange,i=n;void 0!==n&&null!==n&&(!n.charAt||"."!==n.charAt(n.length-1)&&"-"!==n||(i=n.slice(0,-1)),n.startsWith&&(n.startsWith(".")||n.startsWith("-."))&&(i=i.replace(".","0.")),i.replace&&(null===r||void 0===r||r(i.replace(/0*(\d+)/,"$1"))),a&&a())},e}return Object(vt.a)(n,[{key:"render",value:function(){return i.a.createElement(Et.a,Object.assign({},this.props,{onChange:this.onChange,onBlur:this.onBlur,maxLength:25}))}}]),n}(i.a.Component),Ot=(n(767),function(e){var t=e.showBalance,n=e.mintAddress,a=e.name,r=e.icon,o=Object(f.h)(n),l=Object(f.f)(n),c=0,u=!1;return t&&l&&o&&(u=(c=l.info.amount.toNumber()/Math.pow(10,o.decimals))>0),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{title:n,key:n,style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},i.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r||i.a.createElement(Ue,{mintAddress:n}),a),t?i.a.createElement("span",{title:c.toString(),key:n,className:"token-balance"},"\xa0"," ",u?c<.001?"<0.001":c.toFixed(3):"-"):null))}),ht=Le.a.Option;function jt(e){var t,n,a,o,l,c=J(e.reserve.liquidityMint).balance,u=Y().reserveAccounts,s=Object(d.e)().tokenMap,m=Object(r.useState)(),b=Object(E.a)(m,2),v=b[0],p=b[1],y=Object(r.useState)(0),g=Object(E.a)(y,2),O=g[0],j=g[1],w=Object(r.useState)(""),k=Object(E.a)(w,2),A=k[0],S=k[1],x=oe();Object(r.useEffect)((function(){if(e.useWalletBalance)j(c);else{var t=f.d.byParser(B.LendingReserveParser).find((function(e){return e===v}))||"",n=f.d.get(t);if(n){var a=x.userDeposits.find((function(e){return e.reserve.info.liquidityMint.toBase58()===n.info.liquidityMint.toBase58()}));j(a?a.info.amount:0)}}}),[v,x,c,e.useWalletBalance]);var T=f.d.get(e.reserve.lendingMarket);if(!T)return null;var N=!(null===(t=e.reserve)||void 0===t||null===(n=t.liquidityMint)||void 0===n?void 0:n.equals(null===T||void 0===T||null===(a=T.info)||void 0===a?void 0:a.quoteMint)),I=u.filter((function(t){return t.info!==e.reserve})).filter((function(e){return!N||e.info.liquidityMint.equals(T.info.quoteMint)}));if(!v&&e.useFirstReserve&&I.length){var L,M=I[0].pubkey.toBase58();p(M),null===(L=e.onCollateralReserve)||void 0===L||L.call(e,M)}var C=I.map((function(e){var t=e.info.liquidityMint.toBase58(),n=e.pubkey.toBase58(),a=Object(h.l)(s,t);return i.a.createElement(ht,{key:n,value:n,name:a,title:n},i.a.createElement("div",{key:n,style:{display:"flex",alignItems:"center"}},i.a.createElement(Ue,{mintAddress:t}),a))}));return i.a.createElement(We.a,{className:"ccy-input",style:{borderRadius:20},bodyStyle:{padding:0}},i.a.createElement("div",{className:"ccy-input-header"},i.a.createElement("div",{className:"ccy-input-header-left"},e.title),!e.hideBalance&&i.a.createElement("div",{className:"ccy-input-header-right",onClick:function(t){return e.onInputChange&&e.onInputChange(O)}},"Balance: ",O.toFixed(6))),i.a.createElement("div",{className:"ccy-input-header",style:{padding:"0px 10px 5px 7px"}},i.a.createElement(gt,{value:parseFloat(A||"0.00")===e.amount?A:null===(o=e.amount)||void 0===o||null===(l=o.toFixed(6))||void 0===l?void 0:l.toString(),onChange:function(t){e.onInputChange&&parseFloat(t)!==e.amount&&(t&&parseFloat(t)?e.onInputChange(parseFloat(t)):e.onInputChange(null)),S(t)},style:{fontSize:20,boxShadow:"none",borderColor:"transparent",outline:"transparent"},placeholder:"0.00"}),i.a.createElement("div",{className:"ccy-input-header-right",style:{display:"flex"}},e.showLeverageSelector&&i.a.createElement(Le.a,{size:"large",showSearch:!0,style:{width:80},placeholder:"CCY",value:e.leverage,onChange:function(t){e.onLeverage&&e.onLeverage(t)},notFoundContent:null,onSearch:function(t){e.onLeverage&&t.match(/^\d+$/)&&e.onLeverage(parseFloat(t))},filterOption:function(e,t){var n;return(null===t||void 0===t||null===(n=t.name)||void 0===n?void 0:n.toLowerCase().indexOf(e.toLowerCase()))>=0}},[1,2,3,4,5].map((function(e){return i.a.createElement(ht,{key:e,value:e,name:e+"x",title:e+"x"},i.a.createElement("div",{key:e,style:{display:"flex",alignItems:"center"}},e+"x"))}))),e.disabled?i.a.createElement(Ot,{key:e.reserve.liquidityMint.toBase58(),name:Object(h.l)(s,e.reserve.liquidityMint.toBase58()),mintAddress:e.reserve.liquidityMint.toBase58(),showBalance:!1}):i.a.createElement(Le.a,{size:"large",showSearch:!0,style:{minWidth:150},placeholder:"CCY",value:v,onChange:function(t){e.onCollateralReserve&&e.onCollateralReserve(t),p(t)},filterOption:function(e,t){var n;return(null===t||void 0===t||null===(n=t.name)||void 0===n?void 0:n.toLowerCase().indexOf(e.toLowerCase()))>=0}},C))))}var wt,kt=n(1106),At=(n(768),function(e){return i.a.createElement(kt.a,{className:"risk-slider",marks:Ce.f,value:e.value,included:!1})}),St=function(e){var t,n,a=Object(d.d)(),o=Object(s.c)().wallet,l=Object(r.useState)(""),c=Object(E.a)(l,2),u=c[0],m=c[1],b=Object(r.useState)("collateral"),y=Object(E.a)(b,2),g=y[0],O=y[1],h=Object(r.useState)(!1),j=Object(E.a)(h,2),w=j[0],k=j[1],A=Object(r.useState)(!1),S=Object(E.a)(A,2),x=S[0],T=S[1],N=e.reserve,I=Object(r.useState)(),L=Object(E.a)(I,2),M=L[0],C=L[1],_=Object(r.useMemo)((function(){var e=f.d.byParser(B.LendingReserveParser).find((function(e){return e===M}))||"";return f.d.get(e)}),[M]),R=F(N.info.liquidityMint.toBase58()).price,q=null===(t=F(null===_||void 0===_?void 0:_.info.liquidityMint.toBase58()))||void 0===t?void 0:t.price,P=Object(r.useMemo)((function(){return new Set([null===_||void 0===_?void 0:_.pubkey.toBase58()])}),[_]),D=(null===(n=oe(Object(r.useMemo)((function(){return new Set([])}),[]),P).userDeposits[0])||void 0===n?void 0:n.info.amount)||0,W=Object(r.useCallback)((function(e){var t=Math.min(D,1/0);return"string"===typeof e?parseFloat(e)/t*100:e*t/100}),[D]),U=le(W),K=U.value,G=U.setValue,Q=U.pct;Object(r.useEffect)((function(){if(_&&"collateral"===g){var e=N.info.config.loanToValueRatio/100;if(u){var t=parseFloat(u);G((t*q*e/R).toString())}else G("")}}),[g,_,q,R,N,u,G]),Object(r.useEffect)((function(){if(_&&"borrow"===g){var e=N.info.config.loanToValueRatio/100;if(K){var t=parseFloat(K);m((t*R/e/q).toString())}else m("")}}),[g,_,q,R,N,K]);var z=ie(null===N||void 0===N?void 0:N.pubkey,null===_||void 0===_?void 0:_.pubkey).userObligationsByReserve,V=J(null===_||void 0===_?void 0:_.info.collateralMint).accounts,Y=Object(r.useCallback)((function(){_&&(k(!0),Object(p.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,at(a,o,V[0],parseFloat(K),B.BorrowAmountType.LiquidityBorrowAmount,N,_,z.length>0?z[0].obligation.account:void 0,z.length>0?z[0].userAccounts[0].pubkey:void 0);case 3:G(""),m(""),T(!0),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:return e.prev=10,k(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,8,10,13]])})))())}),[a,o,K,G,_,N,V,z,k,T]);return i.a.createElement(We.a,{className:e.className,bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},x?i.a.createElement(st,{onClose:function(){return T(!1)}}):i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},i.a.createElement("div",{className:"borrow-input-title"},Ce.b.BORROW_QUESTION),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}},i.a.createElement(jt,{title:"Collateral (estimated)",reserve:N.info,amount:parseFloat(u)||0,onInputChange:function(e){m((null===e||void 0===e?void 0:e.toString())||""),O("collateral")},onCollateralReserve:function(e){C(e)},useFirstReserve:!0})),i.a.createElement(At,{value:Q}),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",marginBottom:20}},i.a.createElement(jt,{title:"Borrow Amount",reserve:N.info,amount:parseFloat(K)||0,onInputChange:function(e){G((null===e||void 0===e?void 0:e.toString())||""),O("borrow")},disabled:!0,hideBalance:!0})),i.a.createElement(mt,{size:"large",type:"primary",onClick:Y,loading:w,disabled:0===V.length},0===V.length?Ce.b.NO_COLLATERAL:Ce.b.BORROW_ACTION),i.a.createElement(dt,null)))},xt=n(1108),Tt=xt.a.Text;!function(e){e.Deposit="deposit",e.Borrow="borrow"}(wt||(wt={}));var Nt=function(e){var t=e.reserve.info,n=e.mode,a=$(null===t||void 0===t?void 0:t.liquidityMint),r=Object(f.h)(t.liquidityMint),o=Object(h.h)(t.state.availableLiquidity,r),l=Object(Q.j)(t),u=Object(Q.i)(t),s=Object(Q.k)(t),d=t.config.liquidationThreshold/100,m=t.config.liquidationBonus/100,b=t.config.loanToValueRatio/100,v=null;return n===wt.Deposit?v=i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"card-row"},i.a.createElement(Tt,{type:"secondary",className:"card-cell "},Ce.b.TABLE_TITLE_DEPOSIT_APY,":"),i.a.createElement("div",{className:"card-cell "},h.e.format(l))),i.a.createElement("div",{className:"card-row"},i.a.createElement(Tt,{type:"secondary",className:"card-cell "},"Maximum LTV:"),i.a.createElement("div",{className:"card-cell "},h.e.format(b))),i.a.createElement("div",{className:"card-row"},i.a.createElement(Tt,{type:"secondary",className:"card-cell "},"Liquidation threshold:"),i.a.createElement("div",{className:"card-cell "},h.e.format(d))),i.a.createElement("div",{className:"card-row"},i.a.createElement(Tt,{type:"secondary",className:"card-cell "},"Liquidation penalty:"),i.a.createElement("div",{className:"card-cell "},h.e.format(m)))):n===wt.Borrow&&(v=i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"card-row"},i.a.createElement(Tt,{type:"secondary",className:"card-cell "},Ce.b.TABLE_TITLE_BORROW_APY,":"),i.a.createElement("div",{className:"card-cell "},h.e.format(u))))),i.a.createElement(We.a,{className:e.className,title:i.a.createElement("div",{style:{display:"flex",alignItems:"center",fontSize:"1.2rem",justifyContent:"center"}},i.a.createElement(c.b,{to:"/reserve/".concat(e.reserve.pubkey)},i.a.createElement(Ue,{mintAddress:null===t||void 0===t?void 0:t.liquidityMint,style:{width:30,height:30}})," ",a," Reserve Overview"))},i.a.createElement("div",{className:"card-row"},i.a.createElement(Tt,{type:"secondary",className:"card-cell "},"Utilization rate:"),i.a.createElement("div",{className:"card-cell "},h.e.format(s))),i.a.createElement("div",{className:"card-row"},i.a.createElement(Tt,{type:"secondary",className:"card-cell "},"Available liquidity:"),i.a.createElement("div",{className:"card-cell "},h.d.format(o)," ",a)),v)},It=function(){var e=Object(u.h)().id,t=H(e),n=re(),a=n.userObligations,r=n.totalInQuote,o=ue(e),l=o.totalInQuote,c=o.utilization;return t?i.a.createElement("div",{className:"borrow-reserve"},i.a.createElement(Pe.a,{gutter:Ce.a},i.a.createElement(De.a,{xs:24,xl:5},i.a.createElement(We.a,null,i.a.createElement(Fe.a,{title:Ce.b.BORROWED_VALUE,value:r,precision:2,prefix:"$"}))),i.a.createElement(De.a,{xs:24,xl:5},i.a.createElement(We.a,null,i.a.createElement(Fe.a,{title:Ce.b.BORROWING_POWER_USED,value:100*c,precision:2,suffix:"%"}))),i.a.createElement(De.a,{xs:24,xl:5},i.a.createElement(We.a,null,i.a.createElement(Fe.a,{title:Ce.b.BORROWING_POWER_VALUE,value:l,valueStyle:{color:"#3fBB00"},precision:2,prefix:"$"}))),i.a.createElement(De.a,{xs:24,xl:9},i.a.createElement(We.a,null,i.a.createElement(Ge,{title:"Your Loans",items:a,getPct:function(e){return e.obligation.info.borrowedInQuote/r},name:function(e){return e.obligation.info.repayName}})))),i.a.createElement(Pe.a,{gutter:Ce.a,style:{flex:1}},i.a.createElement(De.a,{xs:24,xl:15},i.a.createElement(St,{className:"card-fill",reserve:t})),i.a.createElement(De.a,{xs:24,xl:9},i.a.createElement(Nt,{className:"card-fill",reserve:t,mode:wt.Borrow})))):null},Bt=function(e){var t=e.obligation,n=f.d.get(t.info.borrowReserve),a=f.d.get(t.info.collateralReserve),o=Object(f.h)(n.info.liquidityMint),l=Object(f.h)(a.info.liquidityMint),u=Object(h.h)(Object(h.p)(t.info.borrowAmountWad),o),s=Object(r.useMemo)((function(){return Object(Q.i)(n.info)}),[n]),d=Object(Q.l)(t.info.depositedCollateral,n.info),m=Object(h.h)(d,l),b=$(null===n||void 0===n?void 0:n.info.liquidityMint),v=$(null===a||void 0===a?void 0:a.info.liquidityMint);return i.a.createElement("div",{className:"dashboard-item"},i.a.createElement("span",{style:{display:"flex",marginLeft:5}},i.a.createElement("div",{style:{display:"flex"},title:"".concat(v,"\u2192").concat(b)},i.a.createElement(Ue,{mintAddress:null===a||void 0===a?void 0:a.info.liquidityMint,style:{marginRight:"-0.5rem"}}),i.a.createElement(Ue,{mintAddress:null===n||void 0===n?void 0:n.info.liquidityMint}))),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,h.d.format(u))," ",b),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.d.format(t.info.borrowedInQuote)))),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,h.d.format(m))," ",v),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.d.format(t.info.collateralInQuote)))),i.a.createElement("div",null,h.e.format(s)),i.a.createElement("div",{style:{color:Object(Q.n)(t.info.health)}},h.e.format(t.info.ltv/100)),i.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},i.a.createElement(c.b,{to:"/borrow/".concat(n.pubkey.toBase58())},i.a.createElement(we.a,{type:"primary"},i.a.createElement("span",null,"Borrow"))),i.a.createElement(c.b,{to:"/repay/loan/".concat(t.account.pubkey.toBase58())},i.a.createElement(we.a,{type:"text"},i.a.createElement("span",null,"Repay")))))},Lt=function(){var e=re(),t=e.userObligations,n=e.totalInQuote;return i.a.createElement(We.a,{title:i.a.createElement("div",{className:"dashboard-title"},i.a.createElement("div",null,Ce.b.DASHBOARD_TITLE_LOANS),i.a.createElement("div",null,i.a.createElement("span",null,Ce.b.TOTAL_TITLE,": "),"$",h.d.format(n)))},i.a.createElement(Ge,{items:t,getPct:function(e){return e.obligation.info.borrowedInQuote/n},name:function(e){return e.obligation.info.repayName}}),i.a.createElement("div",{className:"dashboard-item dashboard-header"},i.a.createElement("div",null,Ce.b.TABLE_TITLE_ASSET),i.a.createElement("div",null,Ce.b.TABLE_TITLE_YOUR_LOAN_BALANCE),i.a.createElement("div",null,Ce.b.TABLE_TITLE_COLLATERAL_BALANCE),i.a.createElement("div",null,Ce.b.TABLE_TITLE_APY),i.a.createElement("div",null,Ce.b.TABLE_TITLE_LTV),i.a.createElement("div",null)),t.map((function(e){return i.a.createElement(Bt,{key:e.obligation.account.pubkey.toBase58(),obligation:e.obligation})})))},Mt=function(e){var t=e.userDeposit,n=t.reserve,a=t.info,o=n.info.liquidityMint,l=$(o),u=Object(r.useMemo)((function(){return Object(Q.j)(n.info)}),[n]);return i.a.createElement("div",{className:"dashboard-item"},i.a.createElement("span",{style:{display:"flex"}},i.a.createElement(Ue,{mintAddress:o}),l),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,h.d.format(a.amount))," ",l),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.d.format(a.amountInQuote)))),i.a.createElement("div",null,h.e.format(u)),i.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},i.a.createElement(c.b,{to:"/deposit/".concat(n.pubkey.toBase58())},i.a.createElement(we.a,{type:"primary"},i.a.createElement("span",null,Ce.b.DEPOSIT_ACTION))),i.a.createElement(c.b,{to:"/withdraw/".concat(n.pubkey.toBase58())},i.a.createElement(we.a,{type:"text"},i.a.createElement("span",null,Ce.b.WITHDRAW_ACTION)))))},Ct=function(){var e=oe(),t=e.userDeposits,n=e.totalInQuote;return i.a.createElement(We.a,{title:i.a.createElement("div",{className:"dashboard-title"},i.a.createElement("div",null,Ce.b.DASHBOARD_TITLE_DEPOSITS),i.a.createElement("div",null,i.a.createElement("span",null,Ce.b.TOTAL_TITLE,": "),"$",h.d.format(n)))},i.a.createElement(Ge,{items:t,getPct:function(e){return e.info.amountInQuote/n},name:function(e){return e.info.name}}),i.a.createElement("div",{className:"dashboard-item dashboard-header"},i.a.createElement("div",null,Ce.b.TABLE_TITLE_ASSET),i.a.createElement("div",null,Ce.b.TABLE_TITLE_DEPOSIT_BALANCE),i.a.createElement("div",null,Ce.b.TABLE_TITLE_APY),i.a.createElement("div",null)),t.map((function(e){return i.a.createElement(Mt,{key:e.account.pubkey.toBase58(),userDeposit:e})})))},_t=(n(769),function(){return i.a.createElement(We.a,{bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},i.a.createElement("strong",null,Ce.b.NOTHING_BORROWED),i.a.createElement("br",null),i.a.createElement("p",null,Ce.b.NOTHING_BORROWED_MESSAGE),i.a.createElement(c.b,{to:"/borrow"},i.a.createElement(we.a,{type:"primary",size:"large"},i.a.createElement("span",null,Ce.b.BORROW_NOW)))))}),Rt=function(){var e=Object(s.c)().connected,t=re().userObligations,n=oe().userDeposits;return i.a.createElement("div",{className:"dashboard-container"},e?0===n.length&&0===t.length?i.a.createElement("div",{className:"dashboard-info"},i.a.createElement("img",{src:"splash.svg",alt:"connect your wallet",className:"dashboard-splash"}),Ce.b.NO_LOANS_NO_DEPOSITS):i.a.createElement(Pe.a,{gutter:Ce.a},i.a.createElement(De.a,{md:24,xl:12,span:24},n.length>0?i.a.createElement(Ct,null):i.a.createElement(We.a,null,Ce.b.NO_DEPOSITS)),i.a.createElement(De.a,{md:24,xl:12,span:24},t.length>0?i.a.createElement(Lt,null):i.a.createElement(_t,null))):i.a.createElement("div",{className:"dashboard-info"},i.a.createElement("img",{src:"splash.svg",alt:"connect your wallet",className:"dashboard-splash"}),Ce.b.DASHBOARD_INFO))},qt=function(e){var t=$(e.reserve.liquidityMint),n=J(e.reserve.liquidityMint),a=n.balance,r=n.balanceInUSD,o=X(e.reserve),l=o.balance,u=o.balanceInUSD,s=Object(Q.j)(e.reserve);return i.a.createElement(c.b,{to:"/deposit/".concat(e.address.toBase58())},i.a.createElement("div",{className:"deposit-item"},i.a.createElement("span",{style:{display:"flex"}},i.a.createElement(Ue,{mintAddress:e.reserve.liquidityMint}),t),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,h.d.format(a))," ",t),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.d.format(r)))),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,h.d.format(l))," ",t),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.d.format(u)))),i.a.createElement("div",null,h.e.format(s)),i.a.createElement("div",null,i.a.createElement(we.a,{type:"primary"},i.a.createElement("span",null,Ce.b.DEPOSIT_ACTION)))))},Pt=(n(770),function(){var e=Y().reserveAccounts;return i.a.createElement("div",{className:"flexColumn"},i.a.createElement(We.a,null,i.a.createElement("div",{className:"deposit-item deposit-header"},i.a.createElement("div",null,"Asset"),i.a.createElement("div",null,"Your wallet balance"),i.a.createElement("div",null,"Your balance in Oyster"),i.a.createElement("div",null,"APY"),i.a.createElement("div",null)),e.map((function(e){return i.a.createElement(qt,{key:e.pubkey.toBase58(),reserve:e.info,address:e.pubkey})}))))}),Dt=(n(771),n(772),function(e){var t=Object(d.d)(),n=Object(s.c)().wallet,a=Object(r.useState)(!1),o=Object(E.a)(a,2),l=o[0],c=o[1],u=Object(r.useState)(!1),f=Object(E.a)(u,2),m=f[0],b=f[1],y=e.reserve,g=e.address,O=J(null===y||void 0===y?void 0:y.liquidityMint),h=O.accounts,j=O.balance,w=O.balanceLamports,k=Object(r.useCallback)((function(e){return"string"===typeof e?parseFloat(e)/j*100:e*j/100}),[j]),A=le(k),S=A.value,x=A.setValue,T=A.pct,N=A.setPct,I=A.type,B=Object(r.useCallback)((function(){c(!0),Object(p.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,rt(h[0],I===ee.Percent?T*w/100:Math.ceil(w*(parseFloat(S)/j)),y,g,t,n);case 3:x(""),b(!0),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:return e.prev=9,c(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,7,9,12]])})))()}),[t,x,w,j,n,S,T,I,y,h,g]);return i.a.createElement(We.a,{className:e.className,bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},m?i.a.createElement(st,{onClose:function(){return b(!1)}}):i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},i.a.createElement("div",{className:"deposit-input-title"},Ce.b.DEPOSIT_QUESTION),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}},i.a.createElement(jt,{title:"Amount",reserve:y,amount:parseFloat(S)||0,onInputChange:function(e){x((null===e||void 0===e?void 0:e.toString())||"")},disabled:!0,hideBalance:!0})),i.a.createElement(kt.a,{marks:Ce.e,value:T,onChange:N}),i.a.createElement(mt,{size:"large",type:"primary",onClick:B,loading:l,disabled:0===h.length},Ce.b.DEPOSIT_ACTION)))}),Wt=(n(773),function(e){var t=$(e.reserve.liquidityMint),n=J(e.reserve.liquidityMint).balance,a=X(e.reserve).balance,o=Object(r.useMemo)((function(){return Object(Q.j)(e.reserve)}),[e.reserve]);return i.a.createElement(Pe.a,{gutter:Ce.a},i.a.createElement(De.a,{xs:24,xl:5},i.a.createElement(We.a,{className:e.className},i.a.createElement(Fe.a,{title:"Your balance in Oyster",value:h.d.format(a),suffix:t}))),i.a.createElement(De.a,{xs:24,xl:5},i.a.createElement(We.a,{className:e.className},i.a.createElement(Fe.a,{title:"Your wallet balance",value:h.d.format(n),suffix:t}))),i.a.createElement(De.a,{xs:24,xl:5},i.a.createElement(We.a,{className:e.className},i.a.createElement(Fe.a,{title:"Health Factor",value:"--"}))),i.a.createElement(De.a,{xs:24,xl:9},i.a.createElement(We.a,{className:e.className},i.a.createElement(Fe.a,{title:"APY",value:h.e.format(o)}))))}),Ft=function(){var e=H(Object(u.h)().id),t=null===e||void 0===e?void 0:e.info;return t&&e?i.a.createElement("div",{className:"borrow-reserve"},i.a.createElement(Wt,{className:"card-fill",reserve:t,address:e.pubkey}),i.a.createElement(Pe.a,{gutter:Ce.a,style:{flex:1}},i.a.createElement(De.a,{xs:24,xl:15},i.a.createElement(Dt,{className:"card-fill",reserve:t,address:e.pubkey})),i.a.createElement(De.a,{xs:24,xl:9},i.a.createElement(Nt,{className:"card-fill",reserve:e,mode:wt.Deposit})))):null},Ut=(n(774),xt.a.Text),Kt=function(e){var t=e.reserve,n=e.address,a=$(null===t||void 0===t?void 0:t.liquidityMint),o=J(e.reserve.liquidityMint),l=o.balance,u=o.balanceInUSD,s=X(e.reserve),m=s.balance,b=s.balanceInUSD,y=function(e){var t=Object(d.d)(),n=ie(e).userObligationsByReserve,a=Object(r.useState)({borrowedLamports:0,borrowedInUSD:0,colateralInUSD:0,ltv:0,health:0}),i=Object(E.a)(a,2),o=i[0],l=i[1],c=H(e),u=Object(f.h)(null===c||void 0===c?void 0:c.info.liquidityMint);return Object(r.useEffect)((function(){l({borrowedLamports:0,borrowedInUSD:0,colateralInUSD:0,ltv:0,health:0}),Object(p.a)(v.a.mark((function e(){var a,r,i,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.e)(t,n.map((function(e){return e.obligation.info.tokenMint.toBase58()})),"single");case 2:a=e.sent,r=a.keys,a.array.forEach((function(e,t){var n=r[t];f.d.add(new w.d(n),e,f.b)})),i={borrowedLamports:0,borrowedInUSD:0,colateralInUSD:0,ltv:0,health:0},o=0,n.forEach((function(e){var t=Object(h.p)(e.obligation.info.borrowAmountWad).toNumber(),n=e.userAccounts.reduce((function(e,t){return e+t.info.amount.toNumber()}),0),a=f.d.get(e.obligation.info.tokenMint);i.borrowedLamports+=t*(n/(null===a||void 0===a?void 0:a.info.supply.toNumber())),i.borrowedInUSD+=e.obligation.info.borrowedInQuote,i.colateralInUSD+=e.obligation.info.collateralInQuote,o=e.obligation.info.liquidationThreshold}),0),1===n.length?(i.ltv=n[0].obligation.info.ltv,i.health=n[0].obligation.info.health):(i.ltv=100*i.borrowedInUSD/i.colateralInUSD,i.health=i.colateralInUSD*o/100/i.borrowedInUSD,i.health=Number.isFinite(i.health)?i.health:0),l(i);case 11:case"end":return e.stop()}}),e)})))()}),[t,n,l]),Object(A.a)({borrowed:Object(h.h)(o.borrowedLamports,u)},o)}(n),g=y.borrowed,O=y.borrowedInUSD,j=y.ltv,k=y.health,S=ue(n),x=S.totalInQuote,T=S.borrowingPower,N=ie(n).userObligationsByReserve;return i.a.createElement(We.a,{className:e.className,title:i.a.createElement("div",{style:{display:"flex",alignItems:"center",fontSize:"1.2rem",justifyContent:"center"}},"Your Information")},i.a.createElement("h3",null,Ce.b.BORROWS),i.a.createElement("div",{className:"card-row"},i.a.createElement(Ut,{type:"secondary",className:"card-cell "},"Borrowed"),i.a.createElement("div",{className:"card-cell "},i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,h.d.format(g))," ",a),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.d.format(O))))),i.a.createElement("div",{className:"card-row"},i.a.createElement(Ut,{type:"secondary",className:"card-cell "},Ce.b.TABLE_TITLE_HEALTH,":"),i.a.createElement("div",{className:"card-cell "},k.toFixed(2))),i.a.createElement("div",{className:"card-row"},i.a.createElement(Ut,{type:"secondary",className:"card-cell "},Ce.b.LOAN_TO_VALUE,":"),i.a.createElement("div",{className:"card-cell "},h.d.format(j))),i.a.createElement("div",{className:"card-row"},i.a.createElement(Ut,{type:"secondary",className:"card-cell "},"Available to you:"),i.a.createElement("div",{className:"card-cell "},i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,h.d.format(T))," ",a),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.d.format(x))))),i.a.createElement("h3",null,Ce.b.DEPOSITS),i.a.createElement("div",{className:"card-row"},i.a.createElement(Ut,{type:"secondary",className:"card-cell "},Ce.b.WALLET_BALANCE,":"),i.a.createElement("div",{className:"card-cell "},i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,h.d.format(l))," ",a),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.d.format(u))))),i.a.createElement("div",{className:"card-row"},i.a.createElement(Ut,{type:"secondary",className:"card-cell "},"You already deposited:"),i.a.createElement("div",{className:"card-cell "},i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,h.d.format(m))," ",a),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.d.format(b))))),i.a.createElement("div",{className:"card-row",style:{marginTop:20,justifyContent:"space-evenly"}},i.a.createElement(c.b,{to:"/deposit/".concat(n)},i.a.createElement(we.a,null,Ce.b.DEPOSIT_ACTION)),i.a.createElement(c.b,{to:"/borrow/".concat(n)},i.a.createElement(we.a,null,Ce.b.BORROW_ACTION)),i.a.createElement(c.b,{to:"/withdraw/".concat(n)},i.a.createElement(we.a,null,Ce.b.WITHDRAW_ACTION)),!!N.length&&i.a.createElement(c.b,{to:"/repay/loan/".concat(N[0].obligation.account.pubkey.toBase58())},i.a.createElement(we.a,null,Ce.b.REPAY_ACTION))))},Gt=(n(775),n(776),function(e){var t=Object(r.useRef)(),n=Object(r.useRef)(),a=Object(r.useState)(1),o=Object(E.a)(a,2),l=o[0],c=o[1],u=e.percent,s=e.title,d=e.style,f=e.color,m=e.showPercent,b=d.height,v=Object(r.useCallback)((function(){var e,t=(null===(e=n.current)||void 0===e?void 0:e.parentNode).offsetWidth;c(t<b?t/b:1)}),[b]);return Object(r.useEffect)((function(){return v(),window.addEventListener("resize",v),function(){window.removeEventListener("resize",v)}}),[v]),Object(r.useEffect)((function(){var e=0;return Qt(t.current,u,(function(t){e=t}),f),function(){cancelAnimationFrame(e)}}),[u,f]),i.a.createElement("div",{className:"waterWave",ref:n,style:{transform:"scale(".concat(l,")")}},i.a.createElement("div",{style:{width:b,height:b,overflow:"hidden"}},i.a.createElement("canvas",{className:"waterWaveCanvasWrapper",ref:t,width:2*b,height:2*b})),i.a.createElement("div",{className:"text",style:{width:b}},s,i.a.createElement("h4",null,m&&"".concat(u.toFixed(2),"%"))))}),Qt=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#1890FF",r=t/100;if(e&&r){var i=e.getContext("2d");if(i){var o=e.width,l=e.height,c=o/2,u=2,s=c-u;i.beginPath(),i.lineWidth=2*u;var d=o-u,f=d/8,m=.2,b=m,v=u,p=0,y=0,E=.005,g=c-u,O=-Math.PI/2,h=!0,j=[c+g*Math.cos(O),c+g*Math.sin(O)];i.strokeStyle=a,i.moveTo(j[0],j[1]);var w=function(){i.beginPath(),i.save();for(var e=[],t=v;t<=v+d;t+=20/d){var n=p+(v+t)/f,a=Math.sin(n)*b,r=t,o=2*s*(1-y)+(c-s)-f*a;i.lineTo(r,o),e.push([r,o])}var u=e.shift();if(u){i.lineTo(v+d,l),i.lineTo(v,l),i.lineTo(u[0],u[1]);var m=i.createLinearGradient(0,0,0,l);m.addColorStop(0,"#ffffff"),m.addColorStop(1,"#1890FF"),i.fillStyle=m,i.fill(),i.restore()}},k=function e(){if(i.clearRect(0,0,o,l),h)h=!1,i.globalCompositeOperation="destination-over",i.beginPath(),i.save(),i.arc(c,c,c-3*u,0,2*Math.PI,!0),i.stroke(),i.restore(),i.clip(),i.fillStyle="#1890FF";else{if(r>=.85){if(b>m/4)b-=.01*m}else if(r<=.1){if(b<1.5*m)b+=.01*m}else{if(b<=m)b+=.01*m;if(b>=m)b-=.01*m}r-y>0&&(y+=E),r-y<0&&(y-=E),p+=.07,w()}n(requestAnimationFrame(e))};k()}}},zt=function(e){var t,n=null===(t=e.reserve.liquidityMint)||void 0===t?void 0:t.toBase58(),a=Object(f.h)(n),o=Object(h.h)(e.reserve.state.availableLiquidity,a),l=Object(r.useMemo)((function(){return Object(h.h)(Object(h.p)(e.reserve.state.borrowedLiquidityWad),a)}),[e.reserve,a]),c=100*l/(o+l);return i.a.createElement(Gt,{style:{height:300},showPercent:!1,title:i.a.createElement(Fe.a,{title:"Utilization",value:c,suffix:"%",precision:2}),percent:c})},Vt=function(e){var t,n=null===(t=e.reserve.liquidityMint)||void 0===t?void 0:t.toBase58(),a=Object(f.h)(n),o=F(n).price,l=Object(h.h)(e.reserve.state.availableLiquidity,a),c=o*l,u=Object(r.useMemo)((function(){return Object(h.h)(Object(h.p)(e.reserve.state.borrowedLiquidityWad),a)}),[e.reserve,a]),s=o*u,d=Object(r.useMemo)((function(){return Object(Q.j)(e.reserve)}),[e.reserve]),m=e.reserve.config.liquidationThreshold,b=e.reserve.config.liquidationBonus,v=e.reserve.config.loanToValueRatio;return i.a.createElement(We.a,{className:e.className,title:i.a.createElement(i.a.Fragment,null,i.a.createElement(Ue,{style:{marginRight:0,marginTop:0,position:"absolute",left:15},mintAddress:n,size:30}),Ce.b.RESERVE_STATUS_TITLE),bodyStyle:{display:"flex",justifyContent:"center",alignItems:"center"}},i.a.createElement("div",{className:"flexColumn"},i.a.createElement(Pe.a,{gutter:Ce.a},i.a.createElement(De.a,{span:12},i.a.createElement(Fe.a,{title:"Available Liquidity",value:l,valueRender:function(e){return i.a.createElement("div",null,e,i.a.createElement("div",{className:"dashboard-amount-quote-stat"},"$",h.d.format(c)))},precision:2})),i.a.createElement(De.a,{span:12},i.a.createElement(Fe.a,{title:"Total Borrowed",value:u,valueRender:function(e){return i.a.createElement("div",null,e,i.a.createElement("div",{className:"dashboard-amount-quote-stat"},"$",h.d.format(s)))},precision:2}))),i.a.createElement(Pe.a,{gutter:Ce.a},i.a.createElement(De.a,{span:24,style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},i.a.createElement(zt,{reserve:e.reserve}))),i.a.createElement(Pe.a,{gutter:Ce.a},i.a.createElement(De.a,{span:6},i.a.createElement(Fe.a,{title:Ce.b.MAX_LTV,className:"small-statisitc",value:v,precision:2,suffix:"%"})),i.a.createElement(De.a,{span:6},i.a.createElement(Fe.a,{title:Ce.b.LIQUIDATION_THRESHOLD,className:"small-statisitc",value:m,precision:2,suffix:"%"})),i.a.createElement(De.a,{span:6},i.a.createElement(Fe.a,{title:Ce.b.LIQUIDATION_PENALTY,className:"small-statisitc",value:b,precision:2,suffix:"%"})),i.a.createElement(De.a,{span:6},i.a.createElement(Fe.a,{title:Ce.b.TABLE_TITLE_DEPOSIT_APY,className:"small-statisitc",value:100*d,precision:2,suffix:"%"})))))},Yt=function(){var e=H(Object(u.h)().id),t=null===e||void 0===e?void 0:e.info;return t&&e?i.a.createElement("div",{className:"flexColumn"},i.a.createElement(Pe.a,{gutter:Ce.a},i.a.createElement(De.a,{sm:24,md:12,lg:14,xl:15,xxl:18},i.a.createElement(Vt,{reserve:t,address:e.pubkey})),i.a.createElement(De.a,{sm:24,md:12,lg:10,xl:9,xxl:6},i.a.createElement(Kt,{className:"user-lending-card",reserve:t,address:e.pubkey})))):null},Ht=(n(777),n(778),function(e){var t=Object(d.d)(),n=Object(s.c)().wallet,a=Object(r.useState)(!1),o=Object(E.a)(a,2),l=o[0],c=o[1],u=Object(r.useState)(!1),f=Object(E.a)(u,2),m=f[0],b=f[1],y=e.reserve,g=e.address,O=J(null===y||void 0===y?void 0:y.collateralMint),h=O.balanceLamports,j=O.accounts,w=X(y).balance,k=Object(r.useCallback)((function(e){return"string"===typeof e?parseFloat(e)/w*100:e*w/100}),[w]),A=le(k),S=A.value,x=A.setValue,T=A.pct,N=A.setPct,I=A.type,B=Object(r.useCallback)((function(){c(!0),Object(p.a)(v.a.mark((function e(){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=Math.min(I===ee.Percent?T*h/100:Math.ceil(h*(parseFloat(S)/w)),h),e.next=4,lt(j[0],a,y,g,t,n);case 4:x(""),b(!0),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:return e.prev=10,c(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,8,10,13]])})))()}),[g,w,h,t,j,T,y,x,I,S,n]);return i.a.createElement(We.a,{className:e.className,bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},m?i.a.createElement(st,{onClose:function(){return b(!1)}}):i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},i.a.createElement("div",{className:"withdraw-input-title"},Ce.b.WITHDRAW_QUESTION),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}},i.a.createElement(jt,{title:"Amount",reserve:y,amount:parseFloat(S)||0,onInputChange:function(e){x((null===e||void 0===e?void 0:e.toString())||"")},disabled:!0,hideBalance:!0})),i.a.createElement(kt.a,{marks:Ce.e,value:T,onChange:N}),i.a.createElement(mt,{size:"large",type:"primary",onClick:B,loading:l,disabled:0===j.length},0===j.length?Ce.b.NO_COLLATERAL:Ce.b.WITHDRAW_ACTION)))}),$t=function(){var e=H(Object(u.h)().id),t=null===e||void 0===e?void 0:e.info;return t&&e?i.a.createElement("div",{className:"deposit-reserve"},i.a.createElement(Wt,{className:"deposit-reserve-item",reserve:t,address:e.pubkey}),i.a.createElement("div",{className:"deposit-reserve-container"},i.a.createElement(Ht,{className:"deposit-reserve-item deposit-reserve-item-left",reserve:t,address:e.pubkey}),i.a.createElement(Nt,{className:"deposit-reserve-item deposit-reserve-item-right",reserve:e,mode:wt.Deposit}))):null},Jt=function(){var e=Object(d.d)(),t=Object(s.c)().wallet,n=Object(r.useCallback)((function(){e.requestAirdrop(t.publicKey,2*w.c).then((function(){Object(Ye.a)({message:Ce.b.ACCOUNT_FUNDED,type:"success"})}))}),[t,e]);return i.a.createElement("div",{className:"flexColumn",style:{flex:1}},i.a.createElement(We.a,{title:"Faucet",bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"},style:{flex:1}},i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center"}},i.a.createElement("div",{className:"deposit-input-title",style:{margin:10}},Ce.b.FAUCET_INFO),i.a.createElement(mt,{type:"primary",onClick:n},Ce.b.GIVE_SOL))))},Xt=(n(779),function(e){var t,n=Object(d.d)(),a=Object(s.c)().wallet,o=Object(r.useState)("repay"),l=Object(E.a)(o,2),c=l[0],u=l[1],m=Object(r.useState)(!1),b=Object(E.a)(m,2),y=b[0],g=b[1],O=Object(r.useState)(!1),j=Object(E.a)(O,2),w=j[0],k=j[1],A=Object(r.useState)(""),S=Object(E.a)(A,2),x=S[0],T=S[1],N=e.borrowReserve,I=e.obligation,B=Object(f.h)(N.info.liquidityMint),L=J(N.info.liquidityMint).balance,M=Object(h.p)(I.info.borrowAmountWad).toNumber(),C=Object(h.h)(M,B),_=e.collateralReserve,R=J(N.info.liquidityMint).accounts,q=function(e){var t=Object(z.a)().userAccounts,n="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),a=t.findIndex((function(e){return e.info.mint.toBase58()===n}));if(-1!==a)return t[a]}(null===I||void 0===I?void 0:I.info.tokenMint),P=Object(r.useCallback)((function(e){var t=Math.min(L||1/0,C);return u("repay"),"string"===typeof e?parseFloat(e)/t*100:e*t/100}),[C,L]),D=le(P),W=D.value,U=D.setValue,K=D.pct,G=D.setPct,Q=D.type,V=Object(r.useCallback)((function(){_&&I&&N&&q&&(g(!0),Object(p.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Q===ee.Percent?K*M/100:Math.ceil(M*(parseFloat(W)/C)),e.next=4,ot(R[0],t,I.account,q,N,_,n,a);case 4:U(""),T(""),k(!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Object(Ye.a)({message:"Unable to repay loan.",type:"error",description:e.t0.message});case 12:return e.prev=12,g(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})))())}),[C,M,_,n,R,I,q,K,N,U,Q,W,a]),Y=null===(t=F(null===_||void 0===_?void 0:_.info.liquidityMint.toBase58()))||void 0===t?void 0:t.price;Object(r.useEffect)((function(){if(_&&"repay"===c){var e=I.info.collateralInQuote/Y;if(W){var t=parseFloat(W)/C*100;T((t*e/100).toString())}else T("")}}),[C,Y,_,c,I.info.collateralInQuote,W]),Object(r.useEffect)((function(){if(_&&"collateral"===c){var e=I.info.collateralInQuote/Y;if(x){var t=parseFloat(x)/e*100;U((t*C/100).toString())}else U("")}}),[C,Y,_,x,c,I.info.collateralInQuote,U]);return i.a.createElement(We.a,{className:e.className,bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},w?i.a.createElement(st,{onClose:function(){return k(!1)}}):i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},i.a.createElement("div",{className:"repay-input-title"},Ce.b.REPAY_QUESTION),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}},i.a.createElement(jt,{title:"Repay Amount",reserve:N.info,amount:parseFloat(W)||0,onInputChange:function(e){U((null===e||void 0===e?void 0:e.toString())||""),u("repay")},disabled:!0,useWalletBalance:!0})),i.a.createElement(kt.a,{marks:Ce.e,value:K,onChange:G}),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",marginBottom:20}},i.a.createElement(jt,{title:"Collateral Amount (estimated)",reserve:null===_||void 0===_?void 0:_.info,amount:parseFloat(x)||0,onInputChange:function(e){T((null===e||void 0===e?void 0:e.toString())||""),u("collateral")},disabled:!0,hideBalance:!0})),i.a.createElement(mt,{type:"primary",size:"large",onClick:V,loading:y,disabled:0===R.length},Ce.b.REPAY_ACTION)))}),Zt=(n(780),function(){var e=Object(u.h)(),t=e.reserve,n=e.obligation,a=ae(n),r=n?null===a||void 0===a?void 0:a.info.borrowReserve:t,o=H(r),l=H(n?null===a||void 0===a?void 0:a.info.collateralReserve:t),c=re(),s=c.userObligations,d=c.totalInQuote,f=ue(r),m=f.totalInQuote,b=f.utilization;return(null===o||void 0===o?void 0:o.info)&&o&&a&&l?i.a.createElement("div",{className:"repay-reserve"},i.a.createElement(Pe.a,{gutter:Ce.a},i.a.createElement(De.a,{xs:24,xl:5},i.a.createElement(We.a,null,i.a.createElement(Fe.a,{title:Ce.b.BORROWED_VALUE,value:d,precision:2,prefix:"$"}))),i.a.createElement(De.a,{xs:24,xl:5},i.a.createElement(We.a,null,i.a.createElement(Fe.a,{title:Ce.b.BORROWING_POWER_USED,value:100*b,precision:2,suffix:"%"}))),i.a.createElement(De.a,{xs:24,xl:5},i.a.createElement(We.a,null,i.a.createElement(Fe.a,{title:Ce.b.BORROWING_POWER_VALUE,value:m,valueStyle:{color:"#3fBB00"},precision:2,prefix:"$"}))),i.a.createElement(De.a,{xs:24,xl:9},i.a.createElement(We.a,null,i.a.createElement(Ge,{title:"Your Loans",items:s,getPct:function(e){return e.obligation.info.borrowedInQuote/d},name:function(e){return e.obligation.info.repayName}})))),i.a.createElement(Pe.a,{gutter:Ce.a,style:{flex:1}},i.a.createElement(De.a,{xs:24,xl:15},i.a.createElement(Xt,{className:"card-fill",borrowReserve:o,collateralReserve:l,obligation:a})),i.a.createElement(De.a,{xs:24,xl:9},i.a.createElement(Nt,{className:"card-fill",reserve:o,mode:wt.Borrow})))):null}),en=function(e){var t=e.item.info,n=f.d.get(t.borrowReserve),a=f.d.get(t.collateralReserve),o=Object(f.h)(n.info.liquidityMint),l=Object(f.h)(a.info.liquidityMint),u=Object(h.h)(Object(h.p)(t.borrowAmountWad),o),s=Object(r.useMemo)((function(){return Object(Q.i)(n.info)}),[n]),d=Object(Q.l)(t.depositedCollateral,n.info),m=Object(h.h)(d,l),b=$(null===n||void 0===n?void 0:n.info.liquidityMint),v=$(null===a||void 0===a?void 0:a.info.liquidityMint);return i.a.createElement(c.b,{to:"/liquidate/".concat(e.item.account.pubkey.toBase58())},i.a.createElement("div",{className:"liquidate-item"},i.a.createElement("span",{style:{display:"flex"}},i.a.createElement("div",{style:{display:"flex"}},i.a.createElement(Ue,{mintAddress:null===a||void 0===a?void 0:a.info.liquidityMint,style:{marginRight:"-0.5rem"}}),i.a.createElement(Ue,{mintAddress:null===n||void 0===n?void 0:n.info.liquidityMint})),v,"\u2192",b),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,h.d.format(u))," ",b),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.d.format(t.borrowedInQuote)))),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,h.d.format(m))," ",v),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.d.format(t.collateralInQuote)))),i.a.createElement("div",null,h.e.format(s)),i.a.createElement("div",null,h.e.format(t.ltv/100)),i.a.createElement("div",null,t.health.toFixed(2)),i.a.createElement("div",null,i.a.createElement(we.a,{type:"primary"},i.a.createElement("span",null,Ce.b.LIQUIDATE_ACTION)))))},tn=(n(781),function(){var e=ne().obligations,t=Object(r.useMemo)((function(){return e.filter((function(e){return e.info.health<1}))}),[e]),n=Object(r.useMemo)((function(){return t.reduce((function(e,t){return e+t.info.collateralInQuote}),0)}),[t]),a=Object(r.useMemo)((function(){return t.length}),[t]),o=Object(r.useMemo)((function(){return t.length/e.length}),[t,e]),l=Object(r.useMemo)((function(){return t.reduce((function(e,t){return e.set(t.info.repayName,(e.get(t.info.collateralName)||0)+t.info.collateralInQuote),e}),new Map)}),[t]),c=Object(r.useMemo)((function(){return Object(y.a)(l.keys())}),[l]);return i.a.createElement("div",{className:"liquidate-container"},0===t.length?i.a.createElement("div",{className:"liquidate-info"},Ce.b.LIQUIDATE_NO_LOANS):i.a.createElement("div",{className:"flexColumn"},i.a.createElement(Pe.a,{gutter:Ce.a},i.a.createElement(De.a,{span:24},i.a.createElement(We.a,null,i.a.createElement(xt.a,null,Ce.b.LIQUIDATION_INFO)))),i.a.createElement(Pe.a,{gutter:Ce.a},i.a.createElement(De.a,{xs:24,xl:5},i.a.createElement(We.a,null,i.a.createElement(Fe.a,{title:"Value at risk",value:n,precision:2,valueStyle:{color:"#3fBB00"},prefix:"$"}))),i.a.createElement(De.a,{xs:24,xl:5},i.a.createElement(We.a,null,i.a.createElement(Fe.a,{title:"Loans at risk",value:a,precision:0}))),i.a.createElement(De.a,{xs:24,xl:5},i.a.createElement(We.a,null,i.a.createElement(Fe.a,{title:"% loans at risk",value:100*o,precision:2,suffix:"%"}))),i.a.createElement(De.a,{xs:24,xl:9},i.a.createElement(We.a,null,i.a.createElement(Ge,{title:"At risk loan composition",name:function(e){return e},getPct:function(e){return(l.get(e)||0)/n},items:c})))),i.a.createElement(Pe.a,{gutter:Ce.a},i.a.createElement(De.a,{span:24},i.a.createElement(We.a,{className:"card-fill"},i.a.createElement("div",{className:"liquidate-item liquidate-header"},i.a.createElement("div",null,Ce.b.TABLE_TITLE_ASSET),i.a.createElement("div",null,Ce.b.TABLE_TITLE_LOAN_BALANCE),i.a.createElement("div",null,Ce.b.TABLE_TITLE_COLLATERAL_BALANCE),i.a.createElement("div",null,Ce.b.TABLE_TITLE_APY),i.a.createElement("div",null,Ce.b.TABLE_TITLE_LTV),i.a.createElement("div",null,Ce.b.TABLE_TITLE_HEALTH),i.a.createElement("div",null,Ce.b.TABLE_TITLE_ACTION)),t.map((function(e){return i.a.createElement(en,{key:e.account.pubkey.toBase58(),item:e})})))))))}),nn=function(e){var t=e.obligation,n=H(null===t||void 0===t?void 0:t.info.borrowReserve),a=H(null===t||void 0===t?void 0:t.info.collateralReserve),o=Object(f.h)(null===n||void 0===n?void 0:n.info.liquidityMint),l=Object(f.h)(null===a||void 0===a?void 0:a.info.liquidityMint),c=$(null===n||void 0===n?void 0:n.info.liquidityMint),u=$(null===a||void 0===a?void 0:a.info.liquidityMint),s=Object(r.useMemo)((function(){return n?Object(B.calculateBorrowAPY)(null===n||void 0===n?void 0:n.info):0}),[n]);if(!t||!n)return null;var d=Object(h.h)(Object(h.p)(null===t||void 0===t?void 0:t.info.borrowAmountWad),o),m=Object(B.collateralToLiquidity)(null===t||void 0===t?void 0:t.info.depositedCollateral,n.info),b=Object(h.h)(m,l);return i.a.createElement(Pe.a,{gutter:Ce.a},i.a.createElement(De.a,{xs:24,xl:5},i.a.createElement(We.a,{className:e.className},i.a.createElement(Fe.a,{title:"Loan Balance",value:t.info.borrowedInQuote,formatter:function(e){return i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,h.d.format(d))," ",c),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.d.format(parseFloat(e.toString()))))}}))),i.a.createElement(De.a,{xs:24,xl:5},i.a.createElement(We.a,{className:e.className},i.a.createElement(Fe.a,{title:"Collateral",value:t.info.collateralInQuote,formatter:function(e){return i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,h.d.format(b))," ",u),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.d.format(parseFloat(e.toString()))))}}))),i.a.createElement(De.a,{xs:24,xl:5},i.a.createElement(We.a,{className:e.className},i.a.createElement(Fe.a,{title:"APY",value:h.e.format(s)}))),i.a.createElement(De.a,{xs:24,xl:9},i.a.createElement(We.a,{className:e.className},i.a.createElement(Fe.a,{title:"Health Factor",value:t.info.health.toFixed(2)}))))},an=n(291),rn=n.n(an),on=(n(782),function(e){var t,n=Object(d.d)(),a=Object(s.c)().wallet,o=e.repayReserve,l=e.withdrawReserve,c=e.obligation,u=Object(r.useState)("liquidate"),m=Object(E.a)(u,2),b=m[0],y=m[1],g=Object(r.useState)(!1),O=Object(E.a)(g,2),j=O[0],w=O[1],k=Object(r.useState)(!1),A=Object(E.a)(k,2),S=A[0],x=A[1],T=Object(r.useState)(""),N=Object(E.a)(T,2),I=N[0],B=N[1],L=Object(f.h)(o.info.liquidityMint),M=J(null===o||void 0===o?void 0:o.info.liquidityMint),C=M.accounts,_=M.balance,R=Object(h.p)(c.info.borrowAmountWad).toNumber(),q=Object(h.h)(R,L),P=Object(r.useCallback)((function(e){var t=Math.min(_||1/0,q);return y("liquidate"),"string"===typeof e?parseFloat(e)/t*100:e*t/100}),[q,_]),D=le(P),W=D.value,U=D.setValue,K=D.pct,G=D.setPct,Q=D.type,z=Object(r.useCallback)((function(){l&&(w(!0),Object(p.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Q===ee.Percent&&_>=q?K*R/100:Math.ceil(R*(parseFloat(W)/q)),e.next=4,ut(n,a,C[0],t,c.account,o,l);case 4:U(""),B(""),x(!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Object(Ye.a)({message:"Unable to liquidate loan.",type:"error",description:e.t0.message});case 12:return e.prev=12,w(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})))())}),[l,C,c,o,a,n,W,U,q,R,K,_,Q]),V=null===(t=F(null===l||void 0===l?void 0:l.info.liquidityMint.toBase58()))||void 0===t?void 0:t.price;if(Object(r.useEffect)((function(){if(l&&"liquidate"===b){var e=c.info.collateralInQuote/V;if(W){var t=parseFloat(W)/q*100;B((t*e/100).toString())}else B("")}}),[q,V,l,b,c.info.collateralInQuote,W]),Object(r.useEffect)((function(){if(l&&"collateral"===b){var e=c.info.collateralInQuote/V;if(I){var t=parseFloat(I)/e*100;U((t*q/100).toString())}else U("")}}),[q,V,l,I,b,c.info.collateralInQuote,U]),!l)return null;return i.a.createElement(rn.a,{className:e.className,bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},S?i.a.createElement(st,{onClose:function(){return x(!1)}}):i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},i.a.createElement("div",{className:"repay-input-title"},Ce.b.LIQUIDATE_QUESTION),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}},i.a.createElement(jt,{title:"Liquidate Amount",reserve:o.info,amount:parseFloat(W)||0,onInputChange:function(e){U((null===e||void 0===e?void 0:e.toString())||""),y("liquidate")},disabled:!0,useWalletBalance:!0})),i.a.createElement(kt.a,{marks:Ce.e,value:K,onChange:G}),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",marginBottom:20}},i.a.createElement(jt,{title:"Collateral Amount (estimated)",reserve:null===l||void 0===l?void 0:l.info,amount:parseFloat(I)||0,onInputChange:function(e){B((null===e||void 0===e?void 0:e.toString())||""),y("collateral")},disabled:!0,hideBalance:!0})),i.a.createElement(mt,{type:"primary",size:"large",onClick:z,loading:j,disabled:0===C.length},Ce.b.LIQUIDATE_ACTION)))}),ln=(n(807),function(){var e=ae(Object(u.h)().id),t=H(null===e||void 0===e?void 0:e.info.borrowReserve),n=H(null===e||void 0===e?void 0:e.info.collateralReserve);return e&&t?i.a.createElement("div",{className:"borrow-reserve"},i.a.createElement(nn,{className:"card-fill",obligation:e}),i.a.createElement(Pe.a,{gutter:Ce.a,style:{flex:1}},i.a.createElement(De.a,{xs:24,xl:15},i.a.createElement(on,{className:"card-fill",obligation:e,withdrawReserve:n,repayReserve:t})),i.a.createElement(De.a,{xs:24,xl:9},i.a.createElement(Nt,{className:"card-fill",reserve:t,mode:wt.Deposit})))):null}),cn=(n(808),function(e){var t=$(e.reserve.liquidityMint),n=F(e.reserve.liquidityMint.toBase58()).price,a=Object(Q.i)(e.reserve),r=ue(e.address,!1,!1),o=r.totalInQuote,l=r.borrowingPower;return i.a.createElement(c.b,{to:"/margin/".concat(e.address.toBase58())},i.a.createElement("div",{className:"choose-margin-item"},i.a.createElement("span",{style:{display:"flex"}},i.a.createElement(Ue,{mintAddress:e.reserve.liquidityMint}),t),i.a.createElement("div",null,"$",h.d.format(n)),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,h.d.format(l))," ",t),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",h.d.format(o)))),i.a.createElement("div",null,h.e.format(a)),i.a.createElement("div",null,i.a.createElement(we.a,{type:"primary"},i.a.createElement("span",null,Ce.b.MARGIN_TRADE_ACTION)))))}),un=function(){var e=Y().reserveAccounts;return i.a.createElement("div",{className:"flexColumn"},i.a.createElement(We.a,null,i.a.createElement("div",{className:"choose-margin-item choose-margin-header"},i.a.createElement("div",null,Ce.b.TABLE_TITLE_ASSET),i.a.createElement("div",null,"Serum Dex Price"),i.a.createElement("div",null,Ce.b.TABLE_TITLE_BUYING_POWER),i.a.createElement("div",null,Ce.b.TABLE_TITLE_APY),i.a.createElement("div",null)),e.map((function(e){return i.a.createElement(cn,{reserve:e.info,address:e.pubkey})}))))};n(809);function sn(e){var t,n,a,r,i=e.collateral.type,o=e.asset.type,l=e.collateral.value||0,c=e.asset.value||0,u=C([null===i||void 0===i||null===(t=i.info)||void 0===t||null===(n=t.liquidityMint)||void 0===n?void 0:n.toBase58(),null===o||void 0===o||null===(a=o.info)||void 0===a||null===(r=a.liquidityMint)||void 0===r?void 0:r.toBase58()]),s=oe().userDeposits.find((function(e){var t,n;return e.reserve.info.liquidityMint.toBase58()===(null===i||void 0===i||null===(t=i.info)||void 0===t||null===(n=t.liquidityMint)||void 0===n?void 0:n.toBase58())}));return{enrichedPools:W(u?[u]:[]),collateralDeposit:s,collType:i,desiredType:o,collValue:l,desiredValue:c,leverage:e.leverage,pool:u}}var dn=n(1122);function fn(e){var t=e.newPosition,n=e.setNewPosition,a=e.collateralDeposit,r=e.enrichedPools;if(n(t),a&&r.length){var i=r[0].liquidityB/r[0].liquidityA,o=(t.collateral.value||0)*t.leverage*i;n(Object(A.a)(Object(A.a)({},t),{},{asset:Object(A.a)(Object(A.a)({},t.asset),{},{value:o})}))}}function mn(e){var t=e.lendingReserve,n=e.newPosition,a=e.setNewPosition,o=Object(r.useState)(!1),l=Object(E.a)(o,2),c=l[0],u=l[1],d=sn(n),m=d.enrichedPools,b=d.collateralDeposit;!function(e){var t=e.newPosition,n=e.setNewPosition,a=sn(t),i=a.enrichedPools,o=a.collateralDeposit,l=a.collType,c=a.desiredType,u=a.collValue,s=a.desiredValue,d=a.leverage;Object(r.useEffect)((function(){if(l)if(o){if(c&&t.asset.value&&i&&0!==i.length){var e=i[0].liquidityB/i[0].liquidityA,a=t.leverage,r=o.info.amount*e,d=s/a;if(d>r)n(Object(A.a)(Object(A.a)({},t),{},{error:Ce.b.NOT_ENOUGH_MARGIN_MESSAGE}));else if(d>u)n(Object(A.a)(Object(A.a)({},t),{},{error:Ce.b.SET_MORE_MARGIN_MESSAGE}));else{var f=i[0].liquidityA,m=i[0].liquidityB,b=f/m,v=(f-s/e)/(m+s),p=Math.abs(100-v/b*100);n(100/a<p&&1!==a?Object(A.a)(Object(A.a)({},t),{},{error:Ce.b.LEVERAGE_LIMIT_MESSAGE}):Object(A.a)(Object(A.a)({},t),{},{error:""}))}}}else n(Object(A.a)(Object(A.a)({},t),{},{error:Ce.b.NO_DEPOSIT_MESSAGE}));else n(Object(A.a)(Object(A.a)({},t),{},{error:Ce.b.NO_COLL_TYPE_MESSAGE}))}),[l,c,s,d,i,u,o])}({newPosition:n,setNewPosition:a});var v=Object(s.c)(),p=v.wallet,y=v.connected;return i.a.createElement(We.a,{className:"new-position-item new-position-item-top-left",bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},c?i.a.createElement(st,{onClose:function(){return u(!1)}}):i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}},i.a.createElement(jt,{title:"Collateral",reserve:t.info,amount:n.collateral.value,onInputChange:function(e){fn({newPosition:Object(A.a)(Object(A.a)({},n),{},{collateral:Object(A.a)(Object(A.a)({},n.collateral),{},{value:e})}),setNewPosition:a,enrichedPools:m,collateralDeposit:b})},onCollateralReserve:function(e){var t=f.d.byParser(He.a).find((function(t){return t===e}))||"",r=f.d.get(t);fn({newPosition:Object(A.a)(Object(A.a)({},n),{},{collateral:{value:n.collateral.value,type:r}}),setNewPosition:a,enrichedPools:m,collateralDeposit:b})},showLeverageSelector:!0,onLeverage:function(e){fn({newPosition:Object(A.a)(Object(A.a)({},n),{},{leverage:e}),setNewPosition:a,enrichedPools:m,collateralDeposit:b})},leverage:n.leverage})),i.a.createElement(dn.a,null),i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"stretch"}},n.asset.type&&i.a.createElement(jt,{title:"Choose trade",reserve:n.asset.type.info,amount:n.asset.value,onInputChange:function(e){!function(e){var t=e.newPosition,n=e.setNewPosition,a=e.collateralDeposit,r=e.enrichedPools;if(n(t),a&&r.length){var i=r[0].liquidityB/r[0].liquidityA,o=(t.asset.value||0)/(i*t.leverage);n(Object(A.a)(Object(A.a)({},t),{},{collateral:Object(A.a)(Object(A.a)({},t.collateral),{},{value:o})}))}}({newPosition:Object(A.a)(Object(A.a)({},n),{},{asset:Object(A.a)(Object(A.a)({},n.asset),{},{value:e})}),setNewPosition:a,enrichedPools:m,collateralDeposit:b})},disabled:!0,hideBalance:!0}),i.a.createElement(we.a,{className:"trade-button",type:"primary",size:"large",onClick:y?null:p.connect,style:{width:"100%"},disabled:y&&!!n.error},i.a.createElement("span",null,function(e,t){return e?t.error?t.error:Ce.b.TRADING_ADD_POSITION:Ce.b.CONNECT_LABEL}(y,n))))))}var bn=n(1107),vn=n(1123),pn=n(246),yn=n(542),En=n.n(yn),gn=[{x:0,y:65},{x:1,y:80},{x:2,y:60},{x:3,y:30},{x:4,y:20},{x:5,y:35},{x:6,y:25},{x:7,y:40},{x:8,y:36},{x:9,y:34},{x:10,y:50},{x:11,y:33},{x:12,y:37},{x:13,y:45},{x:14,y:35},{x:15,y:37},{x:16,y:50},{x:17,y:43},{x:18,y:50},{x:19,y:45},{x:20,y:55},{x:21,y:50},{x:22,y:45},{x:23,y:50},{x:24,y:45},{x:25,y:40},{x:26,y:35},{x:27,y:40},{x:28,y:37},{x:29,y:45},{x:30,y:50},{x:31,y:60},{x:32,y:55},{x:33,y:50},{x:34,y:53},{x:35,y:55},{x:36,y:50},{x:37,y:45},{x:38,y:40},{x:39,y:45},{x:40,y:50},{x:41,y:55},{x:42,y:65},{x:43,y:62},{x:44,y:54},{x:45,y:65},{x:46,y:48},{x:47,y:55},{x:48,y:60},{x:49,y:63},{x:50,y:65}];function On(){var e=jn();return{datasets:[{backgroundColor:"transparent",borderColor:"rgb(39, 107, 251)",borderWidth:4,radius:0,data:JSON.parse(JSON.stringify(gn.slice(0,Math.floor(gn.length)/2+1)))},{backgroundColor:"transparent",borderWidth:4,radius:0,data:e,borderDash:[15,3],label:"LEVERAGE"},{backgroundColor:"transparent",borderColor:"rgb(86, 169, 255)",borderWidth:2,radius:0,data:e,borderDash:[8,4],label:"HOLD"}]}}var hn={},jn=function(){return JSON.parse(JSON.stringify(gn.slice(Math.floor(gn.length)/2)))};function wn(e){var t=e.item,n=e.priceChange,a=e.chart;if((null===a||void 0===a?void 0:a.data.datasets)&&!((null===a||void 0===a?void 0:a.data.datasets.length)<2)){hn.afterDraw=function(e){!function(e,t,n){var a;if(!e.config||!e.config.data||!e.config.data.datasets||!e.canvas)return;var r=e.ctx;if(!r)return;r.save(),r.font="normal normal bold 15px /1.5 Muli",r.textBaseline="bottom";var i=e.config.data.datasets,o=null===e||void 0===e||null===(a=e.canvas)||void 0===a?void 0:a.parentNode;i.forEach((function(a,i){var l=a.label;r.fillStyle=a.borderColor;var c,u=e.getDatasetMeta(i),s=u.data.length-1,d=Math.floor(s/2)-Math.floor(.2*s),f=u.data[d]._model.x,m=u.data[d]._model.y;(c="HOLD"===l?t*n>0?1.2*m:.8*m:t*n>0?.8*m:1.2*m)>o.offsetHeight&&(o.style.height="".concat(1.3*c,"px")),c<0&&(c=5),l&&r.fillText(l,f,c)})),r.restore()}(e,t.leverage,n)};var r=jn(),i=t.leverage,o=r.map((function(e,t){if(0===t)return{x:e.x,y:e.y};var a=n*i/100;return{x:e.x,y:e.y*(1+a)}}));a.data.datasets[1].data=o,a.data.datasets[1].borderColor=n>=0?"rgb(51, 223, 204)":"rgb(255,79,79)",r.forEach((function(e,t){0!==t&&(e.y+=e.y*n/100)})),a.data.datasets[2].data=r,null===a||void 0===a||a.update()}}function kn(e){var t=e.item,n=e.priceChange,a=Object(r.useRef)(),o=Object(r.useRef)();return Object(r.useEffect)((function(){o.current&&!a.current&&(a.current=new En.a(o.current,{type:"line",data:On(),plugins:[hn],options:{responsive:!0,maintainAspectRatio:!0,scaleShowLabels:!1,layout:{padding:{top:30,bottom:80}},labels:{render:"title",fontColor:["green","white","red"],precision:2},animation:{easing:"easeOutExpo",duration:500},scales:{xAxes:[{display:!1,gridLines:{display:!1},type:"linear",position:"bottom"}],yAxes:[{display:!1,gridLines:{display:!1}}]},legend:{display:!1}}}))}),[]),Object(r.useEffect)((function(){a.current&&wn({item:t,priceChange:n,chart:a.current})}),[n,t]),i.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"center"}},i.a.createElement("canvas",{ref:o}),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}},i.a.createElement("span",null,"past"),i.a.createElement("span",null,"today"),i.a.createElement("span",null,"future")))}function An(e){var t=e.item,n=sn(t),a=n.enrichedPools,o=n.leverage,l=0===a.length?1:a[0].liquidityB/a[0].liquidityA,c=t.collateral.value||0,u=(t.collateral.value||0)*o-c,s=pn.find((function(e){var n,a,r;return e.mintAddress===(null===(n=t.asset.type)||void 0===n||null===(a=n.info)||void 0===a||null===(r=a.liquidityMint)||void 0===r?void 0:r.toBase58())})),d=pn.find((function(e){var n,a,r;return e.mintAddress===(null===(n=t.collateral.type)||void 0===n||null===(a=n.info)||void 0===a||null===(r=a.liquidityMint)||void 0===r?void 0:r.toBase58())})),f=Object(r.useState)(10),m=Object(E.a)(f,2),b=m[0],v=m[1],p=(c+u)*(b/100),y=null;if(p>0){var g=p+c+u;y=i.a.createElement(bn.a,{percent:c/g*100+u/g*100,success:{percent:u/g*100,strokeColor:"brown"},strokeColor:"blue",trailColor:"green",showInfo:!1})}else{var O=(c+=p)+u;y=c<0?i.a.createElement("p",null,"Your position has been liquidated at this price swing."):i.a.createElement(bn.a,{showInfo:!1,success:{percent:u/O*100,strokeColor:"brown"},trailColor:"blue"})}return i.a.createElement("div",{className:"new-position-item new-position-item-top-right"},i.a.createElement(We.a,{className:"new-position-item new-position-item-top-right"},i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center"}},i.a.createElement(We.a,null,i.a.createElement(Fe.a,{title:"Borrowed",value:u*l,precision:2,valueStyle:{color:"brown"},suffix:null===s||void 0===s?void 0:s.tokenSymbol})),i.a.createElement(We.a,null,i.a.createElement(Fe.a,{title:"My Collateral",value:c,precision:2,valueStyle:{color:"blue"},suffix:null===d||void 0===d?void 0:d.tokenSymbol})),i.a.createElement(We.a,null,i.a.createElement(Fe.a,{title:"Profit/Loss",value:p*l,precision:2,valueStyle:{color:p>0?"green":"red"},suffix:null===s||void 0===s?void 0:s.tokenSymbol,prefix:p>0?i.a.createElement(vn.a,null):i.a.createElement(dn.a,null)}))),i.a.createElement("br",null),y),i.a.createElement(We.a,{className:"new-position-item new-position-item-bottom-right"},i.a.createElement(kn,{item:t,priceChange:b}),i.a.createElement(kt.a,{tooltipVisible:!0,defaultValue:10,tipFormatter:function(e){return i.a.createElement("span",null,e,"%")},max:100,min:-100,tooltipPlacement:"top",onChange:function(e){v(e)},style:{marginBottom:"20px"}})))}var Sn=function(e){var t=e.pool,n=Object(r.useMemo)((function(){return[e.pool].filter((function(e){return e}))}),[e.pool]),a=W(n)[0],o=Object(z.a)().userAccounts,l=Object(f.h)(t.pubkeys.mint),c=o.filter((function(e){return t.pubkeys.mint.equals(e.info.mint)})).reduce((function(e,t){return t.info.amount.toNumber()+e}),0)/((null===l||void 0===l?void 0:l.supply.toNumber())||0);return a?i.a.createElement(We.a,{className:"ccy-input",style:{borderRadius:20,width:"100%"},bodyStyle:{padding:"7px"},size:"small",title:"Prices and pool share"},i.a.createElement(Pe.a,{style:{width:"100%"}},i.a.createElement(De.a,{span:8},h.f.format(parseFloat(a.liquidityA)/parseFloat(a.liquidityB))),i.a.createElement(De.a,{span:8},h.f.format(parseFloat(a.liquidityB)/parseFloat(a.liquidityA))),i.a.createElement(De.a,{span:8},100*c<.001&&c>0?"<":"","\xa0",h.f.format(100*c),"%")),i.a.createElement(Pe.a,{style:{width:"100%"}},i.a.createElement(De.a,{span:8},a.names[0]," per ",a.names[1]),i.a.createElement(De.a,{span:8},a.names[1]," per ",a.names[0]),i.a.createElement(De.a,{span:8},"Share of pool"))):null},xn=n(297),Tn=n.n(xn),Nn=function(e){var t=e.pool,n=Object(r.useMemo)((function(){return t?[t]:[]}),[t]),a=W(n),o=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e=o.current;return function(){var t=e&&Tn.a.getInstanceByDom(e);t&&t.dispose()}}),[]),Object(r.useEffect)((function(){if(o.current&&0!==a.length){var e=Tn.a.getInstanceByDom(o.current);e||(e=Tn.a.init(o.current));var t=[{name:a[0].names[0],value:a[0].liquidityAinUsd,tokens:a[0].liquidityA},{name:a[0].names[1],value:a[0].liquidityBinUsd,tokens:a[0].liquidityB}];e.setOption({tooltip:{trigger:"item",formatter:function(e){var t=h.g.format(e.value),n=h.d.format(e.data.tokens);return"".concat(e.name,": \n").concat(t,"\n(").concat(n,")")}},series:[{name:"Liquidity",type:"pie",top:0,bottom:0,left:0,right:0,animation:!1,label:{fontSize:14,show:!0,formatter:function(e){var t=h.g.format(e.value),n=h.d.format(e.data.tokens);return"{c|".concat(e.name,"}\n{r|").concat(n,"}\n{r|").concat(t,"}")},rich:{c:{color:"black",lineHeight:22,align:"center"},r:{color:"black",align:"right"}},color:"rgba(255, 255, 255, 0.5)"},itemStyle:{normal:{borderColor:"#000"}},data:t}]})}}),[a]),0===a.length?null:i.a.createElement("div",{ref:o,style:{height:150,width:"100%"}})};function In(e){var t=sn(e.newPosition).pool;return i.a.createElement(rn.a,{className:"new-position-item new-position-item-bottom-left"},!t&&i.a.createElement("span",null,"Choose a CCY to see exchange rate information."),t&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Sn,{pool:t}),i.a.createElement(Nn,{pool:t})))}var Bn=function(){var e=H(Object(u.h)().id),t=Object(r.useState)({id:null,leverage:5,collateral:{},asset:{}}),n=Object(E.a)(t,2),a=n[0],o=n[1];return e?(a.asset.type||o(Object(A.a)(Object(A.a)({},a),{},{asset:{value:a.asset.value,type:e}})),i.a.createElement("div",{className:"new-position"},i.a.createElement("div",{className:"new-position-container"},i.a.createElement("div",{className:"new-position-item-left"},i.a.createElement(mn,{lendingReserve:e,newPosition:a,setNewPosition:o}),i.a.createElement(In,{newPosition:a})),i.a.createElement(An,{item:a})))):null};function Ln(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(c.a,{basename:"/"},i.a.createElement(d.a,null,i.a.createElement(s.b,null,i.a.createElement(f.a,null,i.a.createElement(P,null,i.a.createElement(de,null,i.a.createElement(qe,null,i.a.createElement(u.c,null,i.a.createElement(u.a,{exact:!0,path:"/",component:function(){return i.a.createElement(Qe,null)}}),i.a.createElement(u.a,{exact:!0,path:"/dashboard",children:i.a.createElement(Rt,null)}),i.a.createElement(u.a,{path:"/reserve/:id",children:i.a.createElement(Yt,null)}),i.a.createElement(u.a,{exact:!0,path:"/deposit",component:function(){return i.a.createElement(Pt,null)}}),i.a.createElement(u.a,{path:"/deposit/:id",children:i.a.createElement(Ft,null)}),i.a.createElement(u.a,{path:"/withdraw/:id",children:i.a.createElement($t,null)}),i.a.createElement(u.a,{exact:!0,path:"/borrow",children:i.a.createElement(Ve,null)}),i.a.createElement(u.a,{path:"/borrow/:id",children:i.a.createElement(It,null)}),i.a.createElement(u.a,{path:"/repay/loan/:obligation",children:i.a.createElement(Zt,null)}),i.a.createElement(u.a,{path:"/repay/:reserve",children:i.a.createElement(Zt,null)}),i.a.createElement(u.a,{exact:!0,path:"/liquidate",children:i.a.createElement(tn,null)}),i.a.createElement(u.a,{path:"/liquidate/:id",children:i.a.createElement(ln,null)}),i.a.createElement(u.a,{exact:!0,path:"/margin",children:i.a.createElement(un,null)}),i.a.createElement(u.a,{path:"/margin/:id",children:i.a.createElement(Bn,null)}),i.a.createElement(u.a,{exact:!0,path:"/faucet",children:i.a.createElement(Jt,null)}))))))))))}var Mn=function(){return i.a.createElement(Ln,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(Mn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},111:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(13);function r(){return{userAccounts:Object(a.g)().userAccounts}}},12:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return s})),n.d(t,"a",(function(){return d}));var a={CONNECT_LABEL:"Connect Wallet",BORROWING_POWER_USED:"Borrowing Power Used",BORROWING_POWER_VALUE:"Borrowing Power",BORROWED_VALUE:"You borrowed",GIVE_SOL:"Give me SOL",LIQUIDATION_INFO:"This view displays all loans that can be liquidated. A liquidation is a process where borrower collateral does not cover value of the loan. It is represented by health factor falling below 1.0. When a loan is liquidated, an liquidator can purchase collateral at a discount by repaing the portio of the loan. ",FAUCET_INFO:"This faucet will help you fund your accounts outside of Solana main network.",ACCOUNT_FUNDED:"Account funded.",REPAY_QUESTION:"How much would you like to repay?",REPAY_ACTION:"Repay",RESERVE_STATUS_TITLE:"Reserve Status & Configuration",AUDIT_WARNING:"Oyster is an unaudited software project used for internal purposes at the Solana Foundation. This app is not for public use.",FOOTER:'This page was produced by the Solana Foundation ("SF") for internal educational and inspiration purposes only. SF does not encourage, induce or sanction the deployment, integration or use of Oyster or any similar application (including its code) in violation of applicable laws or regulations and hereby prohibits any such deployment, integration or use. Anyone using this code or a derivation thereof must comply with applicable laws and regulations when releasing related software.',MENU_HOME:"Home",MENU_DASHBOARD:"Dashboard",DASHBOARD_INFO:"Connect to a wallet to view your deposits/loans.",NO_LOANS_NO_DEPOSITS:"No loans or deposits.",MENU_DEPOSIT:"Deposit",DEPOSITS:"Deposits",BORROWS:"Borrows",LOAN_TO_VALUE:"Loan to value",MENU_BORROW:"Borrow",MENU_LIQUIDATE:"Liquidate",MENU_FAUCET:"Faucet",MARGIN_TRADING:"Margin Trading",APP_TITLE:"Oyster Lending",CONNECT_BUTTON:"Connect",WALLET_TOOLTIP:"Wallet public key",WALLET_BALANCE:"Wallet balance",SETTINGS_TOOLTIP:"Settings",SELECT_COLLATERAL:"Select collateral",COLLATERAL:"Collateral",BORROW_QUESTION:"How much would you like to borrow?",BORROW_ACTION:"Borrow",NO_COLLATERAL:"No collateral",NO_DEPOSITS:"No deposits",NO_LOANS:"No loans",NOTHING_BORROWED:"Nothing borrowed yet",NOTHING_BORROWED_MESSAGE:"There will be a list of all the assets you have borrowed. For now, it's empty since you have not borrowed.",BORROW_NOW:"Borrow now",LIQUIDATE_QUESTION:"How much would you like to liquidate?",LIQUIDATE_ACTION:"Liquidate",LIQUIDATE_NO_LOANS:"There are no loans to liquidate.",TABLE_TITLE_ASSET:"Asset",TABLE_TITLE_YOUR_LOAN_BALANCE:"Loan balance",TABLE_TITLE_LOAN_BALANCE:"Loan balance",TABLE_TITLE_COLLATERAL_BALANCE:"Collateral",TABLE_TITLE_DEPOSIT_BALANCE:"Your deposits",TABLE_TITLE_APY:"APY",TABLE_TITLE_LTV:"LTV",TABLE_TITLE_HEALTH:"Health Factor",TABLE_TITLE_BORROW_APY:"Borrow APY",TABLE_TITLE_DEPOSIT_APY:"Deposit APY",TABLE_TITLE_TOTAL_BORROWED:"Total Borrowed",TABLE_TITLE_MARKET_SIZE:"Market Size",TABLE_TITLE_ACTION:"Action",MAX_LTV:"Maximum LTV",LIQUIDATION_THRESHOLD:"Liquidation threshold",LIQUIDATION_PENALTY:"Liquidation penalty",TABLE_TITLE_MAX_BORROW:"Available for you",DASHBOARD_TITLE_LOANS:"Loans",DASHBOARD_TITLE_DEPOSITS:"Deposits",DEPOSIT_QUESTION:"How much would you like to deposit?",WITHDRAW_ACTION:"Withdraw",WITHDRAW_QUESTION:"How much would you like to withdraw?",DASHBOARD_ACTION:"Go to dashboard",GO_BACK_ACTION:"Go back",DEPOSIT_ACTION:"Deposit",TOTAL_TITLE:"Total",TRADING_TABLE_TITLE_MY_COLLATERAL:"Chosen Collateral",TRADING_TABLE_TITLE_DESIRED_ASSET:"Desired Asset",TRADING_TABLE_TITLE_MULTIPLIER:"Leverage",TRADING_TABLE_TITLE_ASSET_PRICE:"Asset Price",TRADING_TABLE_TITLE_LIQUIDATION_PRICE:"Liquidation Price",TRADING_TABLE_TITLE_APY:"APY",TRADING_TABLE_TITLE_ACTIONS:"Action",TRADING_ADD_POSITION:"Add Position",MARGIN_TRADE_ACTION:"Margin Trade",MARGIN_TRADE_CHOOSE_COLLATERAL_AND_LEVERAGE:"Please choose your collateral and leverage.",MARGIN_TRADE_QUESTION:"Please choose how much of this asset you wish to purchase.",TABLE_TITLE_BUYING_POWER:"Total Buying Power",NOT_ENOUGH_MARGIN_MESSAGE:"Not enough buying power in oyster to make this trade at this leverage.",SET_MORE_MARGIN_MESSAGE:"You need more margin to match this leverage amount to make this trade.",LEVERAGE_LIMIT_MESSAGE:"You will need more margin to make this trade.",NO_DEPOSIT_MESSAGE:"You need to deposit coin of this type into oyster before trading with it on margin.",NO_COLL_TYPE_MESSAGE:"Choose Collateral CCY",SAFER:"Safer",RISKIER:"Riskier"},r=n(42),i=n.n(r),o=new i.a(10),l=(o.pow(new i.a(18)),o.pow(new i.a(18))),c=(o.pow(new i.a(27)),new i.a(0)),u={0:"0%",25:"25%",50:"50%",75:"75%",100:"100%"},s={0:{style:{color:"darkgreen"},label:a.SAFER},100:{style:{color:"darkred"},label:a.RISKIER}},d=[16,{xs:8,sm:16,md:16,lg:16}]},13:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return S})),n.d(t,"c",(function(){return x})),n.d(t,"d",(function(){return N})),n.d(t,"g",(function(){return I})),n.d(t,"a",(function(){return C})),n.d(t,"i",(function(){return _})),n.d(t,"e",(function(){return R})),n.d(t,"h",(function(){return P})),n.d(t,"f",(function(){return D}));var a=n(295),r=n(21),i=n(172),o=n(30),l=n(14),c=n.n(l),u=n(22),s=n(0),d=n.n(s),f=n(29),m=n(61),b=n(18),v=n(53),p=n(11),y=n(288),E=n(111),g=n(24),O=d.a.createContext(null),h=new Map,j=new Map,w=new Map,k=new Map,A=function(){var t=Object(u.a)(c.a.mark((function t(n,a){var r,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getAccountInfo(a);case 2:if(null!==(r=t.sent)){t.next=5;break}throw new Error("Failed to find mint account");case 5:return i=e.from(r.data),t.abrupt("return",F(i));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),S=function(t,n){var a=e.from(n.data),r=F(a);return{pubkey:t,account:Object(o.a)({},n),info:r}},x=function(t,n){var a=e.from(n.data),r=W(a);return{pubkey:t,account:Object(o.a)({},n),info:r}},T=new Map,N={emitter:new y.a,query:function(){var e=Object(u.a)(c.a.mark((function e(t,n,a){var r,i,o,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="string"===typeof n?new b.d(n):n,i=r.toBase58(),!(o=j.get(i))){e.next=5;break}return e.abrupt("return",o);case 5:if(!(l=h.get(i))){e.next=8;break}return e.abrupt("return",l);case 8:return l=t.getAccountInfo(r).then((function(e){if(!e)throw new Error("Account not found");return N.add(r,e,a)})),h.set(i,l),e.abrupt("return",l);case 11:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),add:function(e,t,n){if(0!==t.data.length){var a="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),r=n||T.get(a);if(!r)throw new Error("Deserializer needs to be registered or passed as a parameter");N.registerParser(e,r),h.delete(a);var i=r(new b.d(a),t);if(i){var o=!j.has(a);return j.set(a,i),N.emitter.raiseCacheUpdated(a,o,r),i}}},get:function(e){var t;return t="string"!==typeof e?e.toBase58():e,j.get(t)},delete:function(e){var t;return t="string"!==typeof e?e.toBase58():e,!!j.get(t)&&(j.delete(t),N.emitter.raiseCacheDeleted(t),!0)},byParser:function(e){var t,n=[],a=Object(i.a)(T.keys());try{for(a.s();!(t=a.n()).done;){var r=t.value;T.get(r)===e&&n.push(r)}}catch(o){a.e(o)}finally{a.f()}return n},registerParser:function(e,t){if(e){var n="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();T.set(n,t)}return e},queryMint:function(){var e=Object(u.a)(c.a.mark((function e(t,n){var a,r,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="string"===typeof n?new b.d(n):n,r=a.toBase58(),!(i=k.get(r))){e.next=5;break}return e.abrupt("return",i);case 5:if(!(o=w.get(r))){e.next=8;break}return e.abrupt("return",o);case 8:return o=A(t,a).then((function(e){return w.delete(r),k.set(r,e),e})),w.set(r,o),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getMint:function(e){var t;return t="string"!==typeof e?e.toBase58():e,k.get(t)},addMint:function(e,t){var n=F(t.data),a=e.toBase58();return k.set(a,n),n},clear:function(){j.clear(),k.clear(),N.emitter.raiseCacheCleared()}},I=function(){return Object(s.useContext)(O)};var B=function(){var e=Object(f.d)(),t=Object(m.c)().wallet,n=Object(s.useState)(),a=Object(r.a)(n,2),i=a[0],o=a[1],l=Object(s.useCallback)((function(e){var n=function(e,t){if(t)return{pubkey:e,account:t,info:{mint:g.d,owner:e,amount:new v.e(t.lamports),delegate:null,delegatedAmount:new v.e(0),isInitialized:!0,isFrozen:!1,isNative:!0,rentExemptReserve:null,closeAuthority:null}}}(t.publicKey,e);if(void 0!==n&&t){var a,r=null===(a=t.publicKey)||void 0===a?void 0:a.toBase58();N.registerParser(r,x),j.set(r,n),N.emitter.raiseCacheUpdated(r,!1,x)}}),[t]);return Object(s.useEffect)((function(){e&&(null===t||void 0===t?void 0:t.publicKey)&&(e.getAccountInfo(t.publicKey).then((function(e){e&&(l(e),o(e))})),e.onAccountChange(t.publicKey,(function(e){e&&(l(e),o(e))})))}),[o,t,t.publicKey,e,l]),{nativeAccount:i}},L=new Set,M=function(){var e=Object(u.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return L.add(n.toBase58()),e.next=5,t.getTokenAccountsByOwner(n,{programId:Object(g.e)().token});case 5:e.sent.value.forEach((function(e){N.add(e.pubkey.toBase58(),e.account,x)}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function C(e){var t=e.children,n=void 0===t?null:t,a=Object(f.d)(),i=Object(m.c)(),o=i.wallet,l=i.connected,c=Object(s.useState)([]),u=Object(r.a)(c,2),p=u[0],y=u[1],E=Object(s.useState)([]),h=Object(r.a)(E,2),j=h[0],w=h[1],k=B().nativeAccount,A=Object(s.useCallback)((function(){return N.byParser(x).map((function(e){return N.get(e)})).filter((function(e){var t;return e&&e.info.owner.toBase58()===(null===(t=o.publicKey)||void 0===t?void 0:t.toBase58())})).map((function(e){return e}))}),[o]);Object(s.useEffect)((function(){var e=A().filter((function(e){return void 0!==e}));w(e)}),[k,o,p,A]),Object(s.useEffect)((function(){var e=[];return N.emitter.onCache((function(e){if(e.isNew){var t=e.id,n=e.parser;a.onAccountChange(new b.d(t),(function(e){N.add(t,e,n)}))}})),function(){e.forEach((function(e){return a.removeAccountChangeListener(e)}))}}),[a]);var S=null===o||void 0===o?void 0:o.publicKey;return Object(s.useEffect)((function(){if(a&&S){M(a,g.b),M(a,S).then((function(){y(A())}));var e=a.onProgramAccountChange(Object(g.e)().token,(function(e){var t=e.accountId;if(e.accountInfo.data.length===v.a.span){var n=W(e.accountInfo.data);L.has(n.owner.toBase58())&&(N.add(t,e.accountInfo,x),y(A()))}}),"singleGossip");return function(){a.removeProgramAccountChangeListener(e)}}y([])}),[a,l,S,A]),d.a.createElement(O.Provider,{value:{userAccounts:j,nativeAccount:k}},n)}function _(){return{account:Object(s.useContext)(O).nativeAccount}}var R=function(){var t=Object(u.a)(c.a.mark((function t(n,r,i){var l,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(Object(p.b)(r,99).map((function(e){return q(n,e,i)})));case 2:return l=t.sent,u=l.map((function(t){return t.array.map((function(t){if(t){var n=t.data,r=Object(a.a)(t,["data"]);return Object(o.a)(Object(o.a)({},r),{},{data:e.from(n[0],"base64")})}})).filter((function(e){return e}))})).flat(),t.abrupt("return",{keys:r,array:u});case 5:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),q=function(){var e=Object(u.a)(c.a.mark((function e(t,n,a){var r,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._buildArgs([n],a,"base64"),e.next=3,t._rpcRequest("getMultipleAccounts",r);case 3:if(!(i=e.sent).error){e.next=6;break}throw new Error("failed to get info about account "+i.error.message);case 6:if(!i.result.value){e.next=9;break}return o=i.result.value,e.abrupt("return",{keys:n,array:o});case 9:throw new Error;case 10:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();function P(e){var t=Object(f.d)(),n=Object(s.useState)(),a=Object(r.a)(n,2),i=a[0],o=a[1],l="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();return Object(s.useEffect)((function(){if(l){N.query(t,l,S).then((function(e){return o(e.info)})).catch((function(e){return console.log(e)}));var e=N.emitter.onCache((function(e){e.id===l&&N.query(t,l,S).then((function(e){return o(e.info)}))}));return function(){e()}}}),[t,l]),i}var D=function(e){var t=Object(E.a)().userAccounts,n=t.findIndex((function(t){return t.info.mint.toBase58()===e}));if(-1!==n)return t[n]};var W=function(e){var t=v.a.decode(e);return t.mint=new b.d(t.mint),t.owner=new b.d(t.owner),t.amount=v.e.fromBuffer(t.amount),0===t.delegateOption?(t.delegate=null,t.delegatedAmount=new v.e(0)):(t.delegate=new b.d(t.delegate),t.delegatedAmount=v.e.fromBuffer(t.delegatedAmount)),t.isInitialized=0!==t.state,t.isFrozen=2===t.state,1===t.isNativeOption?(t.rentExemptReserve=v.e.fromBuffer(t.isNative),t.isNative=!0):(t.rentExemptReserve=null,t.isNative=!1),0===t.closeAuthorityOption?t.closeAuthority=null:t.closeAuthority=new b.d(t.closeAuthority),t},F=function(e){if(e.length!==v.b.span)throw new Error("Not a valid Mint");var t=v.b.decode(e);return 0===t.mintAuthorityOption?t.mintAuthority=null:t.mintAuthority=new b.d(t.mintAuthority),t.supply=v.e.fromBuffer(t.supply),t.isInitialized=0!==t.isInitialized,0===t.freezeAuthorityOption?t.freezeAuthority=null:t.freezeAuthority=new b.d(t.freezeAuthority),t}}).call(this,n(59).Buffer)},24:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d})),n.d(t,"f",(function(){return m})),n.d(t,"e",(function(){return b}));var a,r,i,o=n(18),l=n(48),c=new o.d("So11111111111111111111111111111111111111112"),u=new o.d("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),s=new o.d("TokenLending1111111111111111111111111111111"),d=new o.d("".concat("CduMjFZLBeg3A9wMP3hQCoU1RQzzCpgSvQNXfCi1GCSB"));console.debug("Lend host fee address: ".concat(null===d||void 0===d?void 0:d.toBase58()));var f=[{name:"mainnet-beta",swap:function(){return{current:{pubkey:new o.d("9qvG1zUp8xF1Bi4m6UdRNby1BAAuaDrUxSpv4CmRRMjL"),layout:l.TokenSwapLayoutV1},legacy:[]}}},{name:"testnet",swap:function(){return{current:{pubkey:new o.d("2n2dsFSgmPcZ8jkmBZLGUM2nzuFqcBGQ3JEEj6RJJcEg"),layout:l.TokenSwapLayoutV1},legacy:[]}}},{name:"devnet",swap:function(){return{current:{pubkey:new o.d("6Cust2JhvweKLh4CVo1dt21s2PJ86uNGkziudpkNPaCj"),layout:l.TokenSwapLayout},legacy:[new o.d("BSfTAcBdqmvX5iE2PW88WFNNp2DHhLUaBKk5WrnxVkcJ")]}}},{name:"localnet",swap:function(){return{current:{pubkey:new o.d("369YmCWHGxznT7GGBhcLZDRcRoGWmGKFWdmtiPy78yj7"),layout:l.TokenSwapLayoutV1},legacy:[]}}}],m=function(e){"mainnet-beta"===e?s=new o.d("LendZqTs7gn5CTSJU1jWKhKuVpjJGom45nnwPb2AMTi"):"Lending"===e&&(s=new o.d("TokenLending1111111111111111111111111111111"));var t=f.find((function(t){return t.name===e}));if(t){var n=t.swap();a=n.current.pubkey,i=n.current.layout,r=n.legacy}},b=function(){return{token:u,swap:a,swapLayout:i,swap_legacy:r,lending:s}}},246:function(e){e.exports=JSON.parse('[{"tokenSymbol":"SOL","mintAddress":"So11111111111111111111111111111111111111112","tokenName":"Solana","icon":"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/solana/info/logo.png"},{"tokenSymbol":"USDC","mintAddress":"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v","tokenName":"USDC","icon":"https://raw.githubusercontent.com/trustwallet/assets/f3ffd0b9ae2165336279ce2f8db1981a55ce30f8/blockchains/ethereum/assets/0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48/logo.png"},{"tokenSymbol":"SRM","mintAddress":"SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt","tokenName":"SRM","icon":"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x476c5E26a75bd202a9683ffD34359C0CC15be0fF/logo.png"}]')},278:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return m}));var a,r=n(18),i=n(42),o=n.n(i),l=n(1),c=n(24),u=n(28),s=n(92),d=n(93);!function(e){e[e.LiquidityBorrowAmount=0]="LiquidityBorrowAmount",e[e.CollateralDepositAmount=1]="CollateralDepositAmount"}(a||(a={}));var f=function(t,n,a,i,d,f,m,b,v,p,y,E,g,O,h,j,w,k,A){var S=l.struct([l.u8("instruction"),u.c("amount"),l.u8("amountType")]),x=e.alloc(S.span);S.encode({instruction:s.a.BorrowLiquidity,amount:new o.a(t),amountType:n},x);var T=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:E,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!1},{pubkey:O,isSigner:!1,isWritable:!1},{pubkey:h,isSigner:!0,isWritable:!1},{pubkey:j,isSigner:!1,isWritable:!1},{pubkey:w,isSigner:!1,isWritable:!1},{pubkey:k,isSigner:!1,isWritable:!1},{pubkey:r.e,isSigner:!1,isWritable:!1},{pubkey:c.c,isSigner:!1,isWritable:!1}];return A&&T.push({pubkey:A,isSigner:!1,isWritable:!0}),new r.i({keys:T,programId:c.a,data:x})},m=function(e){var t,n=Object(d.c)(e),a=e.config.optimalUtilizationRate/100;if(1===a||n<a){var r=n/a,i=e.config.optimalBorrowRate/100,o=e.config.minBorrowRate/100;t=r*(i-o)+o}else{var l=(n-a)/(1-a),c=e.config.optimalBorrowRate/100;t=l*(e.config.maxBorrowRate/100-c)+c}return t}}).call(this,n(59).Buffer)},28:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return s}));var a=n(27),r=n(18),i=n(42),o=n.n(i),l=n(1),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"publicKey",t=l.blob(32,e),n=t.decode.bind(t),a=t.encode.bind(t);return t.decode=function(e,t){var a=n(e,t);return new r.d(a)},t.encode=function(e,t,n){return a(e.toBuffer(),t,n)},t},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uint64",n=l.blob(8,t),r=n.decode.bind(n),i=n.encode.bind(n);return n.decode=function(e,t){var n=r(e,t);return new o.a(Object(a.a)(n).reverse().map((function(e){return"00".concat(e.toString(16)).slice(-2)})).join(""),16)},n.encode=function(t,n,a){var r=t.toArray().reverse(),o=e.from(r);if(8!==o.length){var l=e.alloc(8);o.copy(l),o=l}return i(o,n,a)},n},s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uint128",n=l.blob(16,t),r=n.decode.bind(n),i=n.encode.bind(n);return n.decode=function(e,t){var n=r(e,t);return new o.a(Object(a.a)(n).reverse().map((function(e){return"00".concat(e.toString(16)).slice(-2)})).join(""),16)},n.encode=function(t,n,a){var r=t.toArray().reverse(),o=e.from(r);if(16!==o.length){var l=e.alloc(16);o.copy(l),o=l}return i(o,n,a)},n}}).call(this,n(59).Buffer)},288:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(95),r=n(84),i=n(150),o=function e(t,n,a){Object(r.a)(this,e),this.id=void 0,this.parser=void 0,this.isNew=void 0,this.id=t,this.parser=a,this.isNew=n};o.type="CacheUpdate";var l=function e(t){Object(r.a)(this,e),this.id=void 0,this.id=t};l.type="CacheUpdate";var c=function e(t){Object(r.a)(this,e),this.ids=void 0,this.ids=t};c.type="MarketUpdate";var u=function e(){Object(r.a)(this,e)};u.type="CacheUpdate";var s=function(){function e(){Object(r.a)(this,e),this.emitter=new i.EventEmitter}return Object(a.a)(e,[{key:"onMarket",value:function(e){var t=this;return this.emitter.on(c.type,e),function(){return t.emitter.removeListener(c.type,e)}}},{key:"onCache",value:function(e){var t=this;return this.emitter.on(o.type,e),function(){return t.emitter.removeListener(o.type,e)}}},{key:"raiseMarketUpdated",value:function(e){this.emitter.emit(c.type,new c(e))}},{key:"raiseCacheUpdated",value:function(e,t,n){this.emitter.emit(o.type,new o(e,t,n))}},{key:"raiseCacheDeleted",value:function(e){this.emitter.emit(l.type,new l(e))}},{key:"raiseCacheCleared",value:function(){this.emitter.emit(u.type,new u)}}]),e}()},29:function(e,t,n){"use strict";n.d(t,"b",(function(){return E})),n.d(t,"a",(function(){return h})),n.d(t,"d",(function(){return j})),n.d(t,"e",(function(){return w})),n.d(t,"c",(function(){return A}));var a=n(14),r=n.n(a),i=n(22),o=n(27),l=n(21),c=n(11),u=n(18),s=n(0),d=n.n(s),f=n(62),m=n(1108),b=function(e){var t,n,a=e.type,r=e.code,i="string"===typeof e.address?e.address:null===(t=e.address)||void 0===t?void 0:t.toBase58();if(!i)return null;var o=null!==(n=e.length)&&void 0!==n?n:9;return d.a.createElement("a",{href:"https://explorer.solana.com/".concat(a,"/").concat(i),target:"_blank",title:i,style:e.style},r?d.a.createElement(m.a.Text,{style:e.style,code:!0},Object(c.m)(i,o)):Object(c.m)(i,o))},v=n(246),p=n(24),y=n(13),E=[{name:"mainnet-beta",endpoint:"https://solana-api.projectserum.com/"},{name:"Oyster Dev",endpoint:"http://oyster-dev.solana.com/"},{name:"Lending",endpoint:"https://tln.solana.com/"},{name:"testnet",endpoint:Object(u.j)("testnet")},{name:"devnet",endpoint:Object(u.j)("devnet")},{name:"localnet",endpoint:"http://127.0.0.1:8899"}],g=E[0].endpoint,O=d.a.createContext({endpoint:g,setEndpoint:function(){},slippage:.25,setSlippage:function(e){},connection:new u.b(g,"recent"),sendConnection:new u.b(g,"recent"),env:E[0].name,tokens:[],tokenMap:new Map});function h(e){var t,n=e.children,a=void 0===n?void 0:n,r=Object(c.o)("connectionEndpts",E[0].endpoint),i=Object(l.a)(r,2),f=i[0],m=i[1],b=Object(c.o)("slippage",.25.toString()),g=Object(l.a)(b,2),h=g[0],j=g[1],w=Object(s.useMemo)((function(){return new u.b(f,"recent")}),[f]),k=Object(s.useMemo)((function(){return new u.b(f,"recent")}),[f]),A=(null===(t=E.find((function(e){return e.endpoint===f})))||void 0===t?void 0:t.name)||E[0].name,S=Object(s.useState)([]),x=Object(l.a)(S,2),T=x[0],N=x[1],I=Object(s.useState)(new Map),B=Object(l.a)(I,2),L=B[0],M=B[1];return Object(s.useEffect)((function(){y.d.clear(),window.fetch("https://raw.githubusercontent.com/solana-labs/token-list/main/src/tokens/".concat(A,".json")).then((function(e){return e.json()})).catch((function(e){return[]})).then((function(e){var t=[].concat(Object(o.a)(v),Object(o.a)(e)).reduce((function(e,t){return e.set(t.mintAddress,t),e}),new Map);M(t),N(e)}))}),[A]),Object(p.f)(A),Object(s.useEffect)((function(){var e=w.onAccountChange((new u.a).publicKey,(function(){}));return function(){w.removeAccountChangeListener(e)}}),[w]),Object(s.useEffect)((function(){var e=w.onSlotChange((function(){return null}));return function(){w.removeSlotChangeListener(e)}}),[w]),Object(s.useEffect)((function(){var e=k.onAccountChange((new u.a).publicKey,(function(){}));return function(){k.removeAccountChangeListener(e)}}),[k]),Object(s.useEffect)((function(){var e=k.onSlotChange((function(){return null}));return function(){k.removeSlotChangeListener(e)}}),[k]),d.a.createElement(O.Provider,{value:{endpoint:f,setEndpoint:m,slippage:parseFloat(h),setSlippage:function(e){return j(e.toString())},connection:w,sendConnection:k,tokens:T,tokenMap:L,env:A}},a)}function j(){return Object(s.useContext)(O).connection}function w(){var e=Object(s.useContext)(O);return{endpoint:e.endpoint,setEndpoint:e.setEndpoint,env:e.env,tokens:e.tokens,tokenMap:e.tokenMap}}var k=function(){var e=Object(i.a)(r.a.mark((function e(t,n){var a,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.confirmTransaction(n,"max");case 2:return e.next=4,t.getParsedConfirmedTransaction(n);case 4:return a=e.sent,i=[],(null===a||void 0===a?void 0:a.meta)&&a.meta.logMessages&&a.meta.logMessages.forEach((function(e){for(var t,n=/Error: (.*)/gm;null!==(t=n.exec(e));)t.index===n.lastIndex&&n.lastIndex++,t.length>1&&i.push(t[1])})),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),A=function(){var e=Object(i.a)(r.a.mark((function e(t,n,a,i){var l,c,s,m,v,p,y,E,g,O=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=!(O.length>4&&void 0!==O[4])||O[4],s=new u.h,a.forEach((function(e){return s.add(e)})),e.next=5,t.getRecentBlockhash("max");case 5:return s.recentBlockhash=e.sent.blockhash,(l=s).setSigners.apply(l,[n.publicKey].concat(Object(o.a)(i.map((function(e){return e.publicKey}))))),i.length>0&&(m=s).partialSign.apply(m,Object(o.a)(i)),e.next=10,n.signTransaction(s);case 10:return s=e.sent,v=s.serialize(),p={skipPreflight:!0,commitment:"singleGossip"},e.next=15,t.sendRawTransaction(v,p);case 15:if(y=e.sent,!c){e.next=26;break}return e.next=19,t.confirmTransaction(y,p&&p.commitment);case 19:if(!(null===(E=e.sent.value)||void 0===E?void 0:E.err)){e.next=26;break}return e.next=23,k(t,y);case 23:throw g=e.sent,Object(f.a)({message:"Transaction failed...",description:d.a.createElement(d.a.Fragment,null,g.map((function(e){return d.a.createElement("div",null,e)})),d.a.createElement(b,{address:y,type:"transaction"})),type:"error"}),new Error("Raw transaction ".concat(y," failed (").concat(JSON.stringify(E),")"));case 26:return e.abrupt("return",y);case 27:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},31:function(e,t,n){"use strict";var a=n(399);n.d(t,"c",(function(){return a.a})),n.d(t,"q",(function(){return a.b}));var r=n(93);n.d(t,"f",(function(){return r.a})),n.d(t,"g",(function(){return r.b})),n.d(t,"k",(function(){return r.c})),n.d(t,"l",(function(){return r.d})),n.d(t,"p",(function(){return r.e})),n.d(t,"s",(function(){return r.f})),n.d(t,"t",(function(){return r.g}));var i=n(400);n.d(t,"d",(function(){return i.a})),n.d(t,"e",(function(){return i.b})),n.d(t,"n",(function(){return i.c})),n.d(t,"o",(function(){return i.d})),n.d(t,"r",(function(){return i.e}));var o=n(92);n.d(t,"b",(function(){return o.a}));var l=n(278);n.d(t,"a",(function(){return l.a})),n.d(t,"h",(function(){return l.b})),n.d(t,"i",(function(){return l.c}));var c=n(401);n.d(t,"j",(function(){return c.a})),n.d(t,"m",(function(){return c.b}));var u=n(402);n.d(t,"u",(function(){return u.a}))},358:function(e){e.exports=JSON.parse('{"name":"token-lending-ui","version":"0.1.0","private":true,"dependencies":{"@ant-design/pro-layout":"^6.7.0","@craco/craco":"^5.7.0","@project-serum/serum":"^0.13.11","@project-serum/sol-wallet-adapter":"^0.1.4","@solana/spl-token":"0.0.11","@solana/spl-token-swap":"0.0.2","@solana/web3.js":"^0.86.2","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.5.0","@testing-library/user-event":"^7.2.1","@types/chart.js":"^2.9.29","@types/echarts":"^4.9.0","@types/react-router-dom":"^5.1.6","@welldone-software/why-did-you-render":"^6.0.5","antd":"^4.6.6","bn.js":"^5.1.3","bs58":"^4.0.1","buffer-layout":"^1.2.0","chart.js":"^2.9.4","craco-less":"^1.17.0","echarts":"^4.9.0","eventemitter3":"^4.0.7","identicon.js":"^2.3.3","jazzicon":"^1.5.0","lodash":"^4.17.20","react":"^16.13.1","react-dom":"^16.13.1","react-github-btn":"^1.2.0","react-intl":"^5.10.2","react-router-dom":"^5.2.0","react-scripts":"3.4.3","typescript":"^4.0.0"},"scripts":{"start":"craco start","build":"craco build","test":"craco test","eject":"react-scripts eject","localnet:update":"solana-localnet update","localnet:up":"rm client/util/store/config.json; set -x; solana-localnet down; set -e; solana-localnet up","localnet:down":"solana-localnet down","localnet:logs":"solana-localnet logs -f","predeploy":"git pull --ff-only && yarn && yarn build","deploy":"gh-pages -d build","deploy:ar":"arweave deploy-dir build --key-file ","format:fix":"prettier --write \\"**/*.+(js|jsx|ts|tsx|json|css|md)\\""},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"repository":{"type":"git","url":"https://github.com/solana-labs/oyster-lending"},"homepage":".","devDependencies":{"@types/bn.js":"^4.11.6","@types/bs58":"^4.0.1","@types/identicon.js":"^2.3.0","@types/jest":"^24.9.1","@types/node":"^12.12.62","@types/react":"^16.9.50","@types/react-dom":"^16.9.8","arweave-deploy":"^1.9.1","gh-pages":"^3.1.0","prettier":"^2.1.2"}}')},366:function(e,t,n){},398:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(18),r=n(53),i=n(24);function o(e,t,n,o,l){var c=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=arguments.length>6?arguments[6]:void 0,s=i.c,d=new a.a;return e.push(r.d.createApproveInstruction(s,n,null!==u&&void 0!==u?u:d.publicKey,o,[],l)),c&&t.push(r.d.createRevokeInstruction(s,n,o,[])),d}},399:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return c}));var a=n(30),r=n(1),i=n(28),o=r.struct([r.u8("version"),r.u8("bumpSeed"),i.a("owner"),i.a("quoteMint"),i.a("tokenProgramId"),r.blob(62,"padding")]),l=function(e){return e.data.length===o.span},c=function(t,n){var r=e.from(n.data),i=o.decode(r);return{pubkey:t,account:Object(a.a)({},n),info:i}}}).call(this,n(59).Buffer)},400:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u})),n.d(t,"e",(function(){return s})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return m}));var a=n(30),r=n(18),i=n(1),o=n(31),l=n(24),c=n(28),u=i.struct([i.u8("version"),c.c("depositedCollateral"),c.a("collateralReserve"),c.b("cumulativeBorrowRateWad"),c.b("borrowAmountWad"),c.a("borrowReserve"),c.a("tokenMint"),i.blob(128,"padding")]),s=function(e){return e.data.length===u.span},d=function(t,n){var r=e.from(n.data),i=u.decode(r);return{pubkey:t,account:Object(a.a)({},n),info:i}},f=function(e){return""},m=function(t,n,a,c,u,s,d,f){var m=i.struct([i.u8("instruction")]),b=e.alloc(m.span);m.encode({instruction:o.b.InitObligation},b);var v=[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:f,isSigner:!1,isWritable:!1},{pubkey:r.e,isSigner:!1,isWritable:!1},{pubkey:r.f,isSigner:!1,isWritable:!1},{pubkey:l.c,isSigner:!1,isWritable:!1}];return new r.i({keys:v,programId:l.a,data:b})}}).call(this,n(59).Buffer)},401:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return m}));var a=n(18),r=n(42),i=n.n(r),o=n(1),l=n(24),c=n(28),u=n(278),s=n(92),d=n(93),f=function(t,n,r,u,d,f,m,b,v){var p=o.struct([o.u8("instruction"),c.c("liquidityAmount")]),y=e.alloc(p.span);p.encode({instruction:s.a.DepositReserveLiquidity,liquidityAmount:new i.a(t)},y);var E=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:f,isSigner:!0,isWritable:!1},{pubkey:a.e,isSigner:!1,isWritable:!1},{pubkey:l.c,isSigner:!1,isWritable:!1}];return new a.i({keys:E,programId:l.a,data:y})},m=function(e){return Object(d.c)(e)*Object(u.c)(e)}}).call(this,n(59).Buffer)},402:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var a=n(18),r=n(42),i=n.n(r),o=n(1),l=n(24),c=n(28),u=n(92),s=function(t,n,r,s,d,f,m,b,v){var p=o.struct([o.u8("instruction"),c.c("collateralAmount")]),y=e.alloc(p.span);p.encode({instruction:u.a.WithdrawReserveLiquidity,collateralAmount:new i.a(t)},y);var E=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:b,isSigner:!1,isWritable:!1},{pubkey:v,isSigner:!0,isWritable:!1},{pubkey:a.e,isSigner:!1,isWritable:!1},{pubkey:l.c,isSigner:!1,isWritable:!1}];return new a.i({keys:E,programId:l.a,data:y})}}).call(this,n(59).Buffer)},403:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return u}));var a=n(1),r=n(28),i=(n(404),a.struct([a.nu64("tradeFeeNumerator"),a.nu64("tradeFeeDenominator"),a.nu64("ownerTradeFeeNumerator"),a.nu64("ownerTradeFeeDenominator"),a.nu64("ownerWithdrawFeeNumerator"),a.nu64("ownerWithdrawFeeDenominator"),a.nu64("hostFeeNumerator"),a.nu64("hostFeeDenominator")],"fees")),o=a.struct([a.u8("isInitialized"),a.u8("nonce"),Object(r.a)("tokenAccountA"),Object(r.a)("tokenAccountB"),Object(r.a)("tokenPool"),Object(r.c)("feesNumerator"),Object(r.c)("feesDenominator")]),l=a.struct([a.u8("isInitialized"),a.u8("nonce"),Object(r.a)("tokenProgramId"),Object(r.a)("tokenAccountA"),Object(r.a)("tokenAccountB"),Object(r.a)("tokenPool"),Object(r.a)("mintA"),Object(r.a)("mintB"),Object(r.a)("feeAccount"),a.u8("curveType"),Object(r.c)("tradeFeeNumerator"),Object(r.c)("tradeFeeDenominator"),Object(r.c)("ownerTradeFeeNumerator"),Object(r.c)("ownerTradeFeeDenominator"),Object(r.c)("ownerWithdrawFeeNumerator"),Object(r.c)("ownerWithdrawFeeDenominator"),a.blob(16,"padding")]),c=a.union(a.u8(),a.blob(32),"curve");c.addVariant(0,a.struct([]),"constantProduct"),c.addVariant(1,a.struct([a.nu64("token_b_price")]),"constantPrice"),c.addVariant(2,a.struct([]),"stable"),c.addVariant(3,a.struct([a.nu64("token_b_offset")]),"offset");var u=a.struct([a.u8("isInitialized"),a.u8("nonce"),Object(r.a)("tokenProgramId"),Object(r.a)("tokenAccountA"),Object(r.a)("tokenAccountB"),Object(r.a)("tokenPool"),Object(r.a)("mintA"),Object(r.a)("mintB"),Object(r.a)("feeAccount"),i,c])},405:function(e,t,n){"use strict";var a;!function(e){e[e.ConstantProduct=0]="ConstantProduct",e[e.ConstantPrice=1]="ConstantPrice",e[e.Stable=2]="Stable",e[e.ConstantProductWithOffset=3]="ConstantProductWithOffset"}(a||(a={}))},406:function(e,t){},422:function(e,t,n){},48:function(e,t,n){"use strict";var a=n(398);n.d(t,"approve",(function(){return a.a}));var r=n(31);n.d(t,"BorrowAmountType",(function(){return r.a})),n.d(t,"LendingObligationLayout",(function(){return r.d})),n.d(t,"LendingReserveParser",(function(){return r.f})),n.d(t,"borrowInstruction",(function(){return r.h})),n.d(t,"calculateBorrowAPY",(function(){return r.i})),n.d(t,"collateralToLiquidity",(function(){return r.l})),n.d(t,"initObligationInstruction",(function(){return r.o})),n.d(t,"reserveMarketCap",(function(){return r.t}));var i=n(403);n.d(t,"TokenSwapLayout",(function(){return i.a})),n.d(t,"TokenSwapLayoutLegacyV0",(function(){return i.b})),n.d(t,"TokenSwapLayoutV1",(function(){return i.c}));n(405),n(406)},538:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var a=n(18),r=n(42),i=n.n(r),o=n(92),l=n(1),c=n(28),u=n(24),s=function(t,n,r,s,d,f,m,b,v,p,y,E,g){var O=l.struct([l.u8("instruction"),c.c("liquidityAmount")]),h=e.alloc(O.span);O.encode({instruction:o.a.RepayOblogationLiquidity,liquidityAmount:new i.a(t)},h);var j=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!1},{pubkey:E,isSigner:!1,isWritable:!1},{pubkey:g,isSigner:!0,isWritable:!1},{pubkey:a.e,isSigner:!1,isWritable:!1},{pubkey:u.c,isSigner:!1,isWritable:!1}];return new a.i({keys:j,programId:u.a,data:h})}}).call(this,n(59).Buffer)},539:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var a=n(18),r=n(42),i=n.n(r),o=n(92),l=n(1),c=n(28),u=n(24),s=function(t,n,r,s,d,f,m,b,v,p,y,E,g,O){var h=l.struct([l.u8("instruction"),c.c("liquidityAmount")]),j=e.alloc(h.span);h.encode({instruction:o.a.LiquidateObligation,liquidityAmount:new i.a(t)},j);var w=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!1,isWritable:!1},{pubkey:y,isSigner:!0,isWritable:!1},{pubkey:E,isSigner:!1,isWritable:!1},{pubkey:g,isSigner:!1,isWritable:!1},{pubkey:O,isSigner:!1,isWritable:!1},{pubkey:a.e,isSigner:!1,isWritable:!1},{pubkey:u.c,isSigner:!1,isWritable:!1}];return new a.i({keys:w,programId:u.a,data:j})}}).call(this,n(59).Buffer)},552:function(e,t,n){e.exports=n(1105)},557:function(e,t,n){},560:function(e,t){},561:function(e,t){},590:function(e,t){},592:function(e,t){},603:function(e,t){},604:function(e,t){},61:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return k})),n.d(t,"c",(function(){return A}));var a=n(21),r=n(0),i=n.n(r),o=n(520),l=n(62),c=n(29),u=n(11),s=n(14),d=n.n(s),f=n(22),m=n(84),b=n(95),v=n(194),p=n(130),y=n(129),E=n(150),g=n.n(E),O=n(18),h=function(e){Object(p.a)(n,e);var t=Object(y.a)(n);function n(e,a){var r;return Object(m.a)(this,n),(r=t.call(this))._publicKey=void 0,r._onProcess=void 0,r._publicKey=null,r._onProcess=!1,r.connect=r.connect.bind(Object(v.a)(r)),r}return Object(b.a)(n,[{key:"signTransaction",value:function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.solong.signTransaction(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=this;this._onProcess||(void 0!==window.solong?(this._onProcess=!0,window.solong.selectAccount().then((function(t){e._publicKey=new O.d(t),e.emit("connect",e._publicKey)})).catch((function(){e.disconnect()})).finally((function(){e._onProcess=!1}))):Object(l.a)({message:"Solong Error",description:"Please install solong wallet from Chrome "}))}},{key:"disconnect",value:function(){this._publicKey&&(this._publicKey=null,this.emit("disconnect"))}},{key:"publicKey",get:function(){return this._publicKey}}]),n}(g.a),j=[{name:"sollet.io",url:"https://www.sollet.io"},{name:"solongwallet.com",url:"http://solongwallet.com"},{name:"solflare.com",url:"https://solflare.com/access-wallet"},{name:"mathwallet.org",url:"https://www.mathwallet.org"}],w=i.a.createContext(null);function k(e){var t,n,s=e.children,d=void 0===s?null:s,f=Object(c.e)().endpoint,m=Object(u.o)("walletProvider","https://www.sollet.io"),b=Object(a.a)(m,2),v=b[0],p=b[1],y=Object(r.useMemo)((function(){return"http://solongwallet.com"===v?new h(v,f):new o.a(v,f)}),[v,f]),E=Object(r.useState)(!1),g=Object(a.a)(E,2),O=g[0],k=g[1];return Object(r.useEffect)((function(){return y.on("connect",(function(){k(!0);var e=y.publicKey.toBase58(),t=e.length>20?"".concat(e.substring(0,7),".....").concat(e.substring(e.length-7,e.length)):e;Object(l.a)({message:"Wallet update",description:"Connected to wallet "+t})})),y.on("disconnect",(function(){k(!1),Object(l.a)({message:"Wallet update",description:"Disconnected from wallet"})})),function(){y.disconnect(),k(!1)}}),[y]),i.a.createElement(w.Provider,{value:{wallet:y,connected:O,providerUrl:v,setProviderUrl:p,providerName:null!==(t=null===(n=j.find((function(e){return e.url===v})))||void 0===n?void 0:n.name)&&void 0!==t?t:v}},d)}function A(){var e=Object(r.useContext)(w);return{connected:e.connected,wallet:e.wallet,providerUrl:e.providerUrl,setProvider:e.setProviderUrl,providerName:e.providerName}}},62:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n.n(a),i=n(364);function o(e){var t=e.message,n=void 0===t?"":t,a=e.description,o=void 0===a?void 0:a,l=e.txid,c=void 0===l?"":l,u=e.type,s=void 0===u?"info":u,d=e.placement,f=void 0===d?"bottomLeft":d;c&&(o=r.a.createElement(r.a.Fragment,null)),i.a[s]({message:r.a.createElement("span",{style:{color:"black"}},n),description:r.a.createElement("span",{style:{color:"black",opacity:.5}},o),placement:f,style:{backgroundColor:"white"}})}},624:function(e,t){},626:function(e,t){},670:function(e,t){},671:function(e,t){},681:function(e,t){},694:function(e,t,n){},759:function(e,t,n){},760:function(e,t,n){},761:function(e,t,n){},762:function(e,t,n){},767:function(e,t,n){},768:function(e,t,n){},769:function(e,t,n){},770:function(e,t,n){},771:function(e,t,n){},772:function(e,t,n){},773:function(e,t,n){},774:function(e,t,n){},775:function(e,t,n){},776:function(e,t,n){},777:function(e,t,n){},778:function(e,t,n){},779:function(e,t,n){},780:function(e,t,n){},781:function(e,t,n){},782:function(e,t,n){},807:function(e,t,n){},808:function(e,t,n){},809:function(e,t,n){},92:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e[e.InitLendingMarket=0]="InitLendingMarket",e[e.InitReserve=1]="InitReserve",e[e.InitObligation=2]="InitObligation",e[e.DepositReserveLiquidity=3]="DepositReserveLiquidity",e[e.WithdrawReserveLiquidity=4]="WithdrawReserveLiquidity",e[e.BorrowLiquidity=5]="BorrowLiquidity",e[e.RepayOblogationLiquidity=6]="RepayOblogationLiquidity",e[e.LiquidateObligation=7]="LiquidateObligation",e[e.AccrueReserveInterest=8]="AccrueReserveInterest"}(a||(a={}))},93:function(e,t,n){"use strict";(function(e){n.d(t,"f",(function(){return b})),n.d(t,"a",(function(){return v})),n.d(t,"e",(function(){return p})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return E})),n.d(t,"g",(function(){return g})),n.d(t,"d",(function(){return h}));var a=n(27),r=n(30),i=n(18),o=n(42),l=n.n(o),c=n(1),u=n(24),s=n(11),d=n(28),f=n(92),m=c.struct([c.u8("version"),d.c("lastUpdateSlot"),d.a("lendingMarket"),d.a("liquidityMint"),c.u8("liquidityMintDecimals"),d.a("liquiditySupply"),d.a("collateralMint"),d.a("collateralSupply"),d.a("collateralFeesReceiver"),c.u32("dexMarketOption"),d.a("dexMarket"),c.struct([c.u8("optimalUtilizationRate"),c.u8("loanToValueRatio"),c.u8("liquidationBonus"),c.u8("liquidationThreshold"),c.u8("minBorrowRate"),c.u8("optimalBorrowRate"),c.u8("maxBorrowRate"),c.struct([d.c("borrowFeeWad"),c.u8("hostFeePercentage")],"fees")],"config"),c.struct([d.b("cumulativeBorrowRateWad"),d.b("borrowedLiquidityWad"),d.c("availableLiquidity"),d.c("collateralMintSupply")],"state"),c.blob(300,"padding")]),b=function(e){return e.data.length===m.span},v=function(t,n){var a=e.from(n.data),i=m.decode(a);if(0!==i.lastUpdateSlot.toNumber())return{pubkey:t,account:Object(r.a)({},n),info:i}},p=function(t,n,a,r,o,s,m,b,v,p,y,E,g){var O=c.struct([c.u8("instruction"),d.c("liquidityAmount"),c.u8("maxUtilizationRate")]),h=e.alloc(O.span);O.encode({instruction:f.a.InitReserve,liquidityAmount:new l.a(t),maxUtilizationRate:n},h);var j=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!0,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!1},{pubkey:E,isSigner:!0,isWritable:!1},{pubkey:i.e,isSigner:!1,isWritable:!1},{pubkey:i.f,isSigner:!1,isWritable:!1},{pubkey:u.c,isSigner:!1,isWritable:!1},{pubkey:g,isSigner:!1,isWritable:!1}];return new i.i({keys:j,programId:u.a,data:h})},y=function(){var t=c.struct([c.u8("instruction")]),n=e.alloc(t.span);t.encode({instruction:f.a.AccrueReserveInterest},n);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];var s=[{pubkey:i.e,isSigner:!1,isWritable:!1}].concat(Object(a.a)(o.map((function(e){return{pubkey:e,isSigner:!1,isWritable:!0}}))));return new i.i({keys:s,programId:u.a,data:n})},E=function(e){var t=Object(s.p)(e.state.borrowedLiquidityWad).toNumber();return t/(e.state.availableLiquidity.toNumber()+t)},g=function(e){return((null===e||void 0===e?void 0:e.state.availableLiquidity.toNumber())||0)+Object(s.p)(null===e||void 0===e?void 0:e.state.borrowedLiquidityWad).toNumber()},O=function(e){return((null===e||void 0===e?void 0:e.state.collateralMintSupply.toNumber())||1)/g(e)},h=function(e,t){var n="number"===typeof e?e:e.toNumber();return Math.floor(n/O(t))}}).call(this,n(59).Buffer)}},[[552,1,2]]]);