(this["webpackJsonptoken-lending-ui"]=this["webpackJsonptoken-lending-ui"]||[]).push([[0],{1089:function(e,t,n){"use strict";n.r(t);var a,r=n(0),i=n.n(r),o=n(58),c=n.n(o),l=(n(545),n(360),n(49)),u=n(80),s=n(62),d=n(26),m=n(12),f=n(237),b=n(13),v=n.n(b),p=n(22),y=n(29),E=n(21),g={},h=[],O=n(11),w=n(102),j=n(20),k=n(281),A=n(27),S=function(e,t){var n=w.Orderbook.LAYOUT.decode(t.data);return{pubkey:e,account:Object(A.a)({},t),info:n}},T=new j.d("EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"),x=function(e,t){var n=w.MARKETS.find((function(t){return t.address.equals(e)})),a=w.Market.getLayout((null===n||void 0===n?void 0:n.programId)||T).decode(t.data),r={pubkey:e,account:Object(A.a)({},t),info:a};return m.d.registerParser(r.info.baseMint,m.b),m.d.registerParser(r.info.quoteMint,m.b),m.d.registerParser(r.info.bids,S),m.d.registerParser(r.info.asks,S),r},N=n(55),I=n(34),B=n(52),M=function(e,t){return t.map((function(t){return m.d.query(e,new j.d(t))}))},L=function(e,t){return{pubkeys:{account:e.pubkey,program:t,mint:e.data.tokenPool,holdingMints:[],holdingAccounts:[e.data.tokenAccountA,e.data.tokenAccountB]},legacy:!1,raw:e}},C=function(e){var t=Object(d.d)(),n=function(){var e=Object(d.d)(),t=Object(r.useState)([]),n=Object(E.a)(t,2),a=n[0],i=n[1];return Object(r.useEffect)((function(){i([]);var t=function(){var t=Object(p.a)(v.a.mark((function t(n){var a,r,i,o=arguments;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=o.length>1&&void 0!==o[1]&&o[1],r=[],t.next=4,e.getProgramAccounts(n);case 4:return t.sent.filter((function(e){return e.account.data.length===B.TokenSwapLayout.span||e.account.data.length===B.TokenSwapLayoutV1.span||e.account.data.length===B.TokenSwapLayoutLegacyV0.span})).map((function(t){var i={data:void 0,account:t.account,pubkey:t.pubkey,init:function(){var e=Object(p.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},o=t.account.data.length===B.TokenSwapLayout.span?B.TokenSwapLayout:t.account.data.length===B.TokenSwapLayoutV1.span?B.TokenSwapLayoutV1:B.TokenSwapLayoutLegacyV0;if(o===B.TokenSwapLayoutLegacyV0){i.data=o.decode(t.account.data);var c=L(i,n);c.legacy=a,r.push(c),i.init=Object(p.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all(M(e,[i.data.tokenAccountA,i.data.tokenAccountB]));case 3:n=t.sent,c.pubkeys.holdingMints=[n[0].info.mint,n[1].info.mint],t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))}else{i.data=o.decode(t.account.data);var l=L(i,n);l.legacy=a,l.pubkeys.feeAccount=i.data.feeAccount,l.pubkeys.holdingMints=[i.data.mintA,i.data.mintB],r.push(l)}return i})),i=r.map((function(e){var t;return[].concat(Object(y.a)(e.pubkeys.holdingAccounts.map((function(e){return e.toBase58()}))),Object(y.a)(e.pubkeys.holdingMints.map((function(e){return e.toBase58()}))),[null===(t=e.pubkeys.feeAccount)||void 0===t?void 0:t.toBase58(),e.pubkeys.mint.toBase58()]).filter((function(e){return e}))})).flat(),t.next=8,Object(m.e)(e,i,"single").then((function(e){var t=e.keys;return e.array.map((function(e,n){var a=t[n];return e.data.length===N.a.span?m.d.add(a,e,m.c):e.data.length!==N.b.span||m.d.getMint(a)?e:m.d.addMint(new j.d(a),e)}))}));case 8:return t.abrupt("return",r);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Promise.all([t(Object(I.d)().swap)].concat(Object(y.a)(Object(I.d)().swap_legacy.map((function(e){return t(e,!0)}))))).then((function(e){i(e.flat())}))}),[e]),Object(r.useEffect)((function(){var t=e.onProgramAccountChange(Object(I.d)().swap,function(){var e=Object(p.a)(v.a.mark((function e(t){var n,r,o,c,l,u;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.accountId,t.accountInfo.data.length===Object(I.d)().swapLayout.span&&(r=t.accountInfo,o={data:Object(I.d)().swapLayout.decode(r.data),account:r,pubkey:new j.d(n)},(c=a&&a.findIndex((function(e){return e.pubkeys.account.toBase58()===n})))&&c>=0&&a?(l=a.filter((function(e,t){return t!==c})),i([].concat(Object(y.a)(l),[L(o,Object(I.d)().swap)]))):((u=L(o,Object(I.d)().swap)).pubkeys.feeAccount=o.data.feeAccount,u.pubkeys.holdingMints=[o.data.mintA,o.data.mintB],i([].concat(Object(y.a)(a),[u]))));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"singleGossip");return function(){e.removeProgramAccountChangeListener(t)}}),[e,a]),{pools:a}}().pools,a=Object(r.useState)(),i=Object(E.a)(a,2),o=i[0],c=i[1],l=Object(r.useMemo)((function(){return Object(y.a)(e).sort()}),Object(y.a)(e));return Object(r.useEffect)((function(){Object(p.a)(v.a.mark((function e(){var a,r,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(void 0),a=n.filter((function(e){return!e.legacy})).filter((function(e){return e.pubkeys.holdingMints.map((function(e){return e.toBase58()})).sort().every((function(e,t){return e===l[t]}))})),r=0;case 3:if(!(r<a.length)){e.next=14;break}return i=a[r],e.next=7,m.d.query(t,i.pubkeys.holdingAccounts[0]);case 7:if(e.sent.info.amount.eqn(0)){e.next=11;break}return c(i),e.abrupt("return");case 11:r++,e.next=3;break;case 14:case"end":return e.stop()}}),e)})))()}),[t,l,n]),o};!function(e){e[e.Add=0]="Add",e[e.SwapGivenInput=1]="SwapGivenInput",e[e.SwapGivenProceeds=2]="SwapGivenProceeds"}(a||(a={}));var _=new Date("2020-10-27"),q=i.a.createContext(null),R=new k.a;function P(e){var t=e.children,n=void 0===t?null:t,a=Object(d.e)().endpoint,o=Object(r.useMemo)((function(){return new Map}),[]),c=Object(r.useState)([]),l=Object(E.a)(c,2),u=l[0],s=l[1],f=Object(r.useState)(new Map),b=Object(E.a)(f,2),h=b[0],O=(b[1],Object(r.useMemo)((function(){return new j.b(a,"recent")}),[a])),k=Object(r.useMemo)((function(){return Object(y.a)(new Set(u).values()).reduce((function(e,t){var n=t,a=w.TOKEN_MINTS.find((function(e){return e.address.toBase58()===n})),r=g[n],i="".concat(null===a||void 0===a?void 0:a.name,"/USDC"),o=w.MARKETS.find((function(e){return e.name===i||e.address.toBase58()===r}));return o&&e.set(n,{marketInfo:o}),e}),new Map)}),[u]);Object(r.useEffect)((function(){var e=0,t=function(){var n=Object(p.a)(v.a.mark((function n(){return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,K(O,Object(y.a)(o.keys()));case 2:R.raiseMarketUpdated(new Set(Object(y.a)(k.keys()))),e=window.setTimeout((function(){return t()}),3e4);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return function(){var e=Object(p.a)(v.a.mark((function e(){var n,a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Map,Object(y.a)(k.keys()).forEach((function(e){var t=k.get(e);t&&n.set(t.marketInfo.address.toBase58(),e)})),a=Object(y.a)(k.values()).map((function(e){return e.marketInfo.address.toBase58()})),e.next=5,Object(m.e)(O,a.filter((function(e){return void 0===m.d.get(e)})),"single").then((function(e){var t=e.keys,r=e.array;return a.forEach((function(){})),r.map((function(e,a){var r=t[a],i=n.get(r);if(i){var o=k.get(i);if(o){var c=o.marketInfo.address;m.d.add(c,e,x)}}return e}))}));case 5:return r=new Set,a.forEach((function(e){var t=m.d.get(e);if(t){var n=t;m.d.get(n.info.baseMint)||r.add(n.info.baseMint.toBase58()),m.d.get(n.info.baseMint)||r.add(n.info.quoteMint.toBase58()),r.add(n.info.bids.toBase58()),r.add(n.info.asks.toBase58())}})),e.next=9,K(O,Object(y.a)(r.keys()));case 9:R.raiseMarketUpdated(new Set(Object(y.a)(k.keys()))),t();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){window.clearTimeout(e)}}),[k,o,O]);var A=Object(r.useCallback)((function(e){var t;return F(null===(t=k.get(e))||void 0===t?void 0:t.marketInfo.address.toBase58(),e)}),[k]),S=Object(r.useCallback)((function(e){var t=k.get(e),n=m.d.get((null===t||void 0===t?void 0:t.marketInfo.address.toBase58())||"");if(!n)return function(){};var a=n.info.bids.toBase58(),r=n.info.asks.toBase58();return o.set(a,(o.get(a)||0)+1),o.set(r,(o.get(r)||0)+1),function(){o.set(a,(o.get(a)||0)-1),o.set(r,(o.get(r)||0)-1),Object(y.a)(o.keys()).forEach((function(e){(o.get(e)||0)<=0&&o.delete(e)}))}}),[k,o]),T=Object(r.useCallback)((function(e){var t=Object(y.a)(new Set([].concat(Object(y.a)(u),Object(y.a)(e))).values());u.length!==t.length&&s(t)}),[s,u]);return i.a.createElement(q.Provider,{value:{midPriceInUSD:A,marketEmitter:R,accountsToObserve:o,marketByMint:k,subscribeToMarket:S,precacheMarkets:T,dailyVolume:h}},n)}var D=function(){return Object(r.useContext)(q)},W=function(e){var t=Object(r.useContext)(q),n=Object(d.e)().tokenMap,a=Object(r.useState)([]),i=Object(E.a)(a,2),o=i[0],c=i[1],l=null===t||void 0===t?void 0:t.subscribeToMarket,u=null===t||void 0===t?void 0:t.marketEmitter,s=null===t||void 0===t?void 0:t.marketByMint,f=null===t||void 0===t?void 0:t.dailyVolume,b=e.map((function(e){return e.pubkeys.account.toBase58()})).join(",");return Object(r.useEffect)((function(){if(u&&l&&0!==e.length){var t=Object(y.a)(new Set(Object(y.a)(null===s||void 0===s?void 0:s.keys())).keys()).map((function(e){return l(e)})),a=function(){c(function(e,t,n,a){var r=new Date;if(!t)return[];return e.filter((function(e){return e.pubkeys.holdingMints&&e.pubkeys.holdingMints.length>1})).map((function(e,i){var o,c,l,u=(e.pubkeys.holdingMints||[]).map((function(e){return e.toBase58()})).sort(),s=m.d.getMint(u[0]),d=m.d.getMint(u[1]),f=m.d.get(e.pubkeys.holdingAccounts[0]),b=m.d.get(e.pubkeys.holdingAccounts[1]),v=(null===f||void 0===f?void 0:f.info.mint.toBase58())===u[0]?f:b,p=(null===b||void 0===b?void 0:b.info.mint.toBase58())===u[1]?b:f,y=F((null===(o=t.get(u[0]))||void 0===o?void 0:o.marketInfo.address.toBase58())||"",u[0]),E=y*Object(O.c)(v,s),g=F((null===(c=t.get(u[1]))||void 0===c?void 0:c.marketInfo.address.toBase58())||"",u[1])*Object(O.c)(p,d),w=m.d.getMint(e.pubkeys.mint);if(!(null===w||void 0===w?void 0:w.supply.eqn(0))){var j=function(e,t,n,a){var r=0,i=h.find((function(t){return t.pool.equals(e.pubkeys.mint)}));i&&(r=i.airdrops.reduce((function(e,r){var i,o=null===(i=t.get(r.mint.toBase58()))||void 0===i?void 0:i.marketInfo.address;if(o){var c=F(null===o||void 0===o?void 0:o.toBase58(),r.mint.toBase58());e+=r.amount*c/(n+a)*(365/30)}return e}),0));return r}(e,t,E,g),k=0,A=y*((null===n||void 0===n||null===(l=n.get(e.pubkeys.mint.toBase58()))||void 0===l?void 0:l.volume24hA)||0),S=.0025*A,T=0,x=j,N=j;if(e.pubkeys.feeAccount){var I=m.d.get(e.pubkeys.feeAccount);if(w&&I&&I.info.mint.toBase58()===e.pubkeys.mint.toBase58()){var B=(null===I||void 0===I?void 0:I.info.amount.toNumber())/(null===w||void 0===w?void 0:w.supply.toNumber());if(0!==(T=.003*(k=(B*E+B*g)/4e-4))){var M=B*E/4e-4,L=B*g/4e-4,C=Math.floor((r.getTime()-_.getTime())/864e5),q=parseFloat(M/C*.003*356)/E,R=parseFloat(L/C*.003*356)/g;x+=Math.max(q,R),N+=parseFloat(.003*A*356)/E}}}var P=m.d.getMint(e.pubkeys.mint),D=Object(O.j)(a,e),W="#/?pair=".concat(Object(O.j)(a,e,!1).replace("/","-"));return{key:e.pubkeys.account.toBase58(),id:i,name:D,names:u.map((function(e){return Object(O.l)(a,e)})),accounts:[null===v||void 0===v?void 0:v.pubkey,null===p||void 0===p?void 0:p.pubkey],address:e.pubkeys.mint.toBase58(),link:W,mints:u,liquidityA:Object(O.c)(v,s),liquidityAinUsd:E,liquidityB:Object(O.c)(p,d),liquidityBinUsd:g,supply:P&&((null===P||void 0===P?void 0:P.supply.toNumber())/Math.pow(10,(null===P||void 0===P?void 0:P.decimals)||0)).toFixed(9),fees:T,fees24h:S,liquidity:E+g,volume:k,volume24h:A,apy:Number.isFinite(x)?x:0,apy24h:Number.isFinite(N)?N:0,map:n,extra:null===n||void 0===n?void 0:n.get(e.pubkeys.account.toBase58()),raw:e}}})).filter((function(e){return void 0!==e}))}(e,s,f,n))},r=u.onMarket(a);return a(),function(){r&&r(),t.forEach((function(e){return e&&e()}))}}}),[n,f,b,l,u,s]),o};var U=function(e){var t=Object(r.useContext)(q),n=t.midPriceInUSD,a=t.subscribeToMarket,i=t.marketEmitter,o=Object(r.useState)(0),c=Object(E.a)(o,2),l=c[0],u=c[1];return Object(r.useEffect)((function(){var t=a(e),r=function(){n&&u(n(e))};r();var o=i.onMarket(r);return function(){t(),o()}}),[n,e,i,a]),{price:l,isBase:1===l}},F=function(e,t){var n,a,r,i,o=w.TOKEN_MINTS.find((function(e){return e.address.toBase58()===t}));if(O.a.has((null===o||void 0===o?void 0:o.name)||""))return 1;if(!e)return 0;var c=m.d.get(e);if(!c)return 0;var l=c.info,u=(null===(n=m.d.get(l.baseMint))||void 0===n?void 0:n.info.decimals)||0,s=(null===(a=m.d.get(l.quoteMint))||void 0===a?void 0:a.info.decimals)||0,d=new w.Market(l,u,s,void 0,l.programId),f=null===(r=m.d.get(l.bids))||void 0===r?void 0:r.info,b=null===(i=m.d.get(l.asks))||void 0===i?void 0:i.info;if(f&&b){var v=new w.Orderbook(d,f.accountFlags,f.slab),p=new w.Orderbook(d,b.accountFlags,b.slab),y=v.getL2(1),E=p.getL2(1);if(y.length>0&&E.length>0)return(y[0][0]+E[0][0])/2}return 0},K=function(){var e=Object(p.a)(v.a.mark((function e(t,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.abrupt("return",Object(m.e)(t,n,"single").then((function(e){var t=e.keys;return e.array.map((function(e,n){var a=t[n];return m.d.add(new j.d(a),e)}))})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),G=n(35),z=n(110),V=function(){return m.d.byParser(G.e).map((function(e){return m.d.get(e)})).filter((function(e){return void 0!==e}))};function Q(){var e=Object(r.useState)(V()),t=Object(E.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){var e=m.d.emitter.onCache((function(e){e.parser===G.e&&a(V())}));return function(){e()}}),[a]),{reserveAccounts:n}}function Y(e){var t=Object(r.useMemo)((function(){return"string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58()}),[e]),n=Object(r.useState)(m.d.get(t||"")),a=Object(E.a)(n,2),i=a[0],o=a[1];return Object(r.useEffect)((function(){var e=m.d.emitter.onCache((function(e){e.id===t&&o(m.d.get(t))}));return function(){e()}}),[t,o]),i}function H(e){var t=Object(d.e)().tokenMap,n="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();return Object(O.l)(t,n)}function $(e,t){var n=Object(r.useMemo)((function(){return"string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58()}),[e]),a=Object(z.a)().userAccounts,i=Object(r.useState)(0),o=Object(E.a)(i,2),c=o[0],l=o[1],u=D(),s=u.marketEmitter,d=u.midPriceInUSD,f=Object(m.h)(n),b=Object(r.useMemo)((function(){return a.filter((function(e){return n===e.info.mint.toBase58()&&(!t||t.equals(e.pubkey))})).sort((function(e,t){return t.info.amount.sub(e.info.amount).toNumber()}))}),[a,n,t]),v=Object(r.useMemo)((function(){return b.reduce((function(e,t){return e+t.info.amount.toNumber()}),0)}),[b]),p=Object(r.useMemo)((function(){return Object(O.i)(v,f)}),[f,v]);return Object(r.useEffect)((function(){var e=function(){l(p*d(n||""))},t=s.onMarket((function(t){e()}));return e(),function(){t()}}),[p,d,s,n,l]),{balance:p,balanceLamports:v,balanceInUSD:c,accounts:b,hasBalance:b.length>0&&p>0}}function J(e,t){var n=Object(m.h)(null===e||void 0===e?void 0:e.collateralMint),a=$(null===e||void 0===e?void 0:e.collateralMint,t),i=a.balanceLamports,o=a.accounts,c=Object(r.useState)(0),l=Object(E.a)(c,2),u=l[0],s=l[1],d=D(),f=d.marketEmitter,b=d.midPriceInUSD,v=Object(r.useMemo)((function(){return e&&X(e,i)}),[i,e]),p=Object(r.useMemo)((function(){return Object(O.i)(v,n)}),[v,n]);return Object(r.useEffect)((function(){var t=function(){var t;s(p*b((null===e||void 0===e||null===(t=e.liquidityMint)||void 0===t?void 0:t.toBase58())||""))},n=f.onMarket((function(n){n.ids.has((null===e||void 0===e?void 0:e.dexMarket.toBase58())||"")&&t()}));return t(),function(){n()}}),[p,b,f,n,s,e]),{balance:p,balanceLamports:v,balanceInUSD:u,mint:null===e||void 0===e?void 0:e.collateralMint,accounts:o,hasBalance:o.length>0&&p>0}}function X(e,t){return Object(G.q)(e)*(t/((null===e||void 0===e?void 0:e.collateralMintSupply.toNumber())||1))}var Z,ee=function(){return m.d.byParser(G.d).map((function(e){return m.d.get(e)})).filter((function(e){return void 0!==e}))};function te(){var e=function(){var e=Object(r.useState)(ee()),t=Object(E.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){var e=m.d.emitter.onCache((function(e){e.parser===G.d&&a(ee())}));return function(){e()}}),[a]),{obligations:n}}().obligations,t=Q().reserveAccounts,n=Object(d.e)().tokenMap,a=D(),i=a.marketEmitter,o=a.midPriceInUSD,c=Object(r.useMemo)((function(){return t.reduce((function(e,t){return e.set(t.pubkey.toBase58(),t),e}),new Map)}),[t]),l=Object(r.useCallback)((function(){return 0===c.size?[]:e.map((function(e){return{obligation:e,reserve:c.get(e.info.borrowReserve.toBase58()),collateralReserve:c.get(e.info.collateralReserve.toBase58())}})).filter((function(e){return e.reserve})).filter((function(e){return Object(O.p)(e.obligation.info.borrowAmountWad).toNumber()>0})).map((function(e){var t=e.obligation,a=e.reserve.info,r=e.reserve.info,i=0,c=0,l=0,u=0;if(m.d.get(a.liquidityMint)){var s=m.d.get(e.collateralReserve.info.liquidityMint),d=Object(O.i)(Object(G.j)(t.info.depositedCollateral,e.reserve.info),null===s||void 0===s?void 0:s.info),b=Object(O.p)(t.info.borrowAmountWad).toNumber(),v=function(e,t,n){var a,r,i,o=m.d.get(t.liquidityMint),c=m.d.get(t.collateralMint);if(!o||!c)return 0;var l=m.d.get(n);if(!l)return 0;var u=l.info,s=(null===(a=m.d.get(u.baseMint))||void 0===a?void 0:a.info.decimals)||0,d=(null===(r=m.d.get(u.quoteMint))||void 0===r?void 0:r.info.decimals)||0,b=m.d.get(t.lendingMarket),v=new w.Market(u,s,d,void 0,u.programId),p=b.info.quoteMint.equals(t.liquidityMint)?null===u||void 0===u?void 0:u.bids:null===u||void 0===u?void 0:u.asks,y=null===(i=m.d.get(p))||void 0===i?void 0:i.info;if(!y)return 0;var g=new w.Orderbook(v,y.accountFlags,y.slab),h=0,j=Object(O.i)(e,o.info);if(g){var k,A,S,T=g.getL2(1e3),x=g.isBids?function(e,t){return t/e}:function(e,t){return t*e},N=Object(f.a)(T);try{for(N.s();!(S=N.n()).done;){var I=Object(E.a)(S.value,2);k=I[0];var B=j>(A=I[1])?A:j;if(h+=x(k,B),(j-=B)<=0)break}}catch(M){N.e(M)}finally{N.f()}}return h}(b,e.reserve.info,e.reserve.info.dexMarketOption?e.reserve.info.dexMarket:e.collateralReserve.info.dexMarket),p=e.reserve.info.liquidityMint.toBase58(),y=m.d.get(p);l=Object(O.i)(b,y.info)*o(p),u=d*o((null===s||void 0===s?void 0:s.pubkey.toBase58())||""),i=100*v/d,c=d*e.reserve.info.config.liquidationThreshold/100/v}return{account:t,info:Object(A.a)(Object(A.a)({},t.info),{},{ltv:i,health:c,borrowedInQuote:l,collateralInQuote:u,liquidationThreshold:e.reserve.info.config.liquidationThreshold,repayName:Object(O.l)(n,a.liquidityMint),collateralName:Object(O.l)(n,r.liquidityMint)})}})).sort((function(e,t){return e.info.health-t.info.health}))}),[e,c,o,n]),u=Object(r.useState)(l()),s=Object(E.a)(u,2),b=s[0],v=s[1];return Object(r.useEffect)((function(){var e=i.onMarket((function(){v(l())}));return function(){e()}}),[l,v,i,o]),{obligations:b}}function ne(e){var t="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),n=te().obligations;return Object(r.useMemo)((function(){return n.find((function(e){return e.account.pubkey.toBase58()===t}))}),[n,t])}function ae(){var e=Object(z.a)().userAccounts,t=te().obligations,n=Object(r.useMemo)((function(){return e.reduce((function(e,t){var n=t.info.mint.toBase58();return e.set(n,[].concat(Object(y.a)(e.get(n)||[]),[t])),e}),new Map)}),[e]),a=Object(r.useMemo)((function(){return 0===n.size?[]:t.filter((function(e){return void 0!==n.get(e.info.tokenMint.toBase58())})).map((function(e){return{obligation:e,userAccounts:Object(y.a)(n.get(e.info.tokenMint.toBase58()))}})).sort((function(e,t){return t.obligation.info.borrowedInQuote-e.obligation.info.borrowedInQuote}))}),[n,t]);return{userObligations:a,totalInQuote:a.reduce((function(e,t){return e+t.obligation.info.borrowedInQuote}),0)}}function re(e,t){var n=ae().userObligations;return{userObligationsByReserve:Object(r.useMemo)((function(){var a="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),r="string"===typeof t?t:null===t||void 0===t?void 0:t.toBase58();return n.filter((function(e){return a&&r?e.obligation.info.borrowReserve.toBase58()===a&&e.obligation.info.collateralReserve.toBase58()===r:a&&e.obligation.info.borrowReserve.toBase58()===a||r&&e.obligation.info.collateralReserve.toBase58()===r}))}),[e,t,n])}}function ie(e,t){var n=Object(z.a)().userAccounts,a=Q().reserveAccounts,i=Object(r.useState)([]),o=Object(E.a)(i,2),c=o[0],l=o[1],u=D(),s=u.marketEmitter,f=u.midPriceInUSD,b=Object(d.e)().tokenMap,v=Object(r.useMemo)((function(){return a.reduce((function(n,a){var r=a.pubkey.toBase58();return e&&e.has(r)||t&&!t.has(r)||n.set(a.info.collateralMint.toBase58(),a),n}),new Map)}),[a,e,t]);return Object(r.useEffect)((function(){var e=new Set(a.map((function(e){return e.info.dexMarket.toBase58()}))),t=function(){return n.filter((function(e){return v.has(null===e||void 0===e?void 0:e.info.mint.toBase58())})).map((function(e){var t=v.get(null===e||void 0===e?void 0:e.info.mint.toBase58()),n=m.d.get(t.info.collateralMint),a=X(t.info,null===e||void 0===e?void 0:e.info.amount.toNumber()),r=Object(O.i)(a,null===n||void 0===n?void 0:n.info);return{account:e,info:{amount:r,amountInQuote:f(t.info.liquidityMint.toBase58())*r,apy:Object(G.h)(t.info),name:Object(O.l)(b,t.info.liquidityMint)},reserve:t}})).sort((function(e,t){return t.info.amountInQuote-e.info.amountInQuote}))},r=s.onMarket((function(n){Object(y.a)(n.ids.values()).every((function(t){return!e.has(t)}))||l(t())}));return l(t()),function(){r()}}),[n,a,v,b,f,s]),{userDeposits:c,totalInQuote:c.reduce((function(e,t){return e+t.info.amountInQuote}),0)}}!function(e){e[e.AbsoluteValue=0]="AbsoluteValue",e[e.Percent=1]="Percent"}(Z||(Z={}));var oe=function(e){var t=Object(r.useState)(""),n=Object(E.a)(t,2),a=n[0],i=n[1],o=Object(r.useState)(0),c=Object(E.a)(o,2),l=c[0],u=c[1],s=Object(r.useState)(Z.Percent),d=Object(E.a)(s,2),m=d[0],f=d[1];return{value:a,setValue:Object(r.useCallback)((function(t){f(Z.AbsoluteValue),i(t),u(e(t))}),[f,i,u,e]),pct:l,setPct:Object(r.useCallback)((function(t){f(Z.Percent),u(t),i(e(t))}),[f,i,u,e]),type:m}};function ce(e){var t="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),n=Object(r.useState)(m.d.get(t||"")),a=Object(E.a)(n,2),i=a[0],o=a[1];return Object(r.useEffect)((function(){var e=m.d.emitter.onCache((function(e){e.id===t&&o(m.d.get(t))}));return function(){e()}}),[t,o]),i}function le(e){var t,n,a=Object(r.useMemo)((function(){return"string"===typeof e?e:e.toBase58()}),[e]),i=Y(a),o=null===i||void 0===i?void 0:i.info.liquidityMint,c=null===o||void 0===o?void 0:o.toBase58(),l=ce(null===i||void 0===i?void 0:i.info.lendingMarket),u=null===l||void 0===l||null===(t=l.info)||void 0===t||null===(n=t.quoteMint)||void 0===n?void 0:n.toBase58(),s=c!==u,d=Object(r.useMemo)((function(){return new Set([a])}),[a]),m=Object(r.useMemo)((function(){var e=V().find((function(e){return e.info.liquidityMint.toBase58()===u}));return s&&e?new Set([e.pubkey.toBase58()]):void 0}),[s,u]),f=ie(d,m),b=f.totalInQuote,v=U(c).price,p=ae(),y=p.totalInQuote,E=y+b,g=0===E?0:y/E;return c===u?{borrowingPower:b,totalInQuote:b,utilization:g}:{borrowingPower:b/v,totalInQuote:b,utilization:g}}var ue=i.a.createContext(null);function se(e){var t=e.children,n=void 0===t?null:t,a=de().accounts;return i.a.createElement(ue.Provider,{value:{accounts:a}},n)}var de=function(){var e=Object(d.d)(),t=Object(r.useState)([]),n=Object(E.a)(t,2),a=n[0],i=n[1],o=Q().reserveAccounts,c=D().precacheMarkets,l=Object(r.useCallback)((function(e){return Object(G.p)(e.account)?m.d.add(e.pubkey.toBase58(),e.account,G.e):Object(G.n)(e.account)?m.d.add(e.pubkey.toBase58(),e.account,G.b):Object(G.o)(e.account)?m.d.add(e.pubkey.toBase58(),e.account,G.d):void 0}),[]);return Object(r.useEffect)((function(){o.length>0&&c(o.map((function(e){return e.info.liquidityMint.toBase58()})))}),[o,c]),Object(r.useEffect)((function(){i([]);var t=function(){var t=Object(p.a)(v.a.mark((function t(){var n,a,r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getProgramAccounts(I.a);case 2:return n=t.sent,a=n.map(l).filter((function(e){return void 0!==e})),r=a.filter((function(e){return void 0!==(null===e||void 0===e?void 0:e.info).lendingMarket})).map((function(e){return e})),i=Object(y.a)(r.map((function(e){return[m.d.registerParser(null===e||void 0===e?void 0:e.info.collateralMint.toBase58(),m.b),m.d.registerParser(null===e||void 0===e?void 0:e.info.liquidityMint.toBase58(),m.b),m.d.registerParser((null===e||void 0===e?void 0:e.info.dexMarketOption)?null===e||void 0===e?void 0:e.info.dexMarket.toBase58():"",x)].filter((function(e){return e}))}))).flat(),t.next=8,Object(m.e)(e,i,"single").then((function(e){var t=e.keys;return e.array.map((function(e,n){var a=t[n];return m.d.add(a,e),e}))}));case 8:return n.map(l).filter((function(e){return void 0!==e})),t.abrupt("return",a);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Promise.all([t()]).then((function(e){i(e.flat())}))}),[e,l]),Object(r.useEffect)((function(){var t=e.onProgramAccountChange(I.a,function(){var e=Object(p.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.accountId,a={pubkey:new j.d(n),account:t.accountInfo},l(a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"singleGossip");return function(){e.removeProgramAccountChangeListener(t)}}),[e,a,l]),{accounts:a}},me=n(114),fe=n(1101),be=n(1102),ve=n(1103),pe=n(1104),ye=n(1105),Ee=n(1106),ge=n(1107),he=n(1091),Oe=n(532),we=n(203),je=n(537),ke=n(515),Ae=n.n(ke),Se=n(24),Te=n.n(Se),xe=(n(678),function(e){var t,n=e.style,a=e.className,o="string"===typeof e.address?e.address:null===(t=e.address)||void 0===t?void 0:t.toBase58(),c=Object(r.useRef)();return Object(r.useEffect)((function(){o&&c.current&&(c.current.innerHTML="",c.current.className=a||"",c.current.appendChild(Ae()((null===n||void 0===n?void 0:n.width)||16,parseInt(Te.a.decode(o).toString("hex").slice(5,15),16))))}),[o,n,a]),i.a.createElement("div",{className:"identicon-wrapper",ref:c,style:e.style})}),Ne=function(e){var t,n=Object(s.c)().wallet,a=Object(m.i)().account;return n&&n.publicKey?i.a.createElement("div",{className:"wallet-wrapper"},i.a.createElement("span",null,O.e.format(((null===a||void 0===a?void 0:a.lamports)||0)/j.c)," SOL"),i.a.createElement("div",{className:"wallet-key"},Object(O.m)("".concat(n.publicKey)),i.a.createElement(xe,{address:null===(t=n.publicKey)||void 0===t?void 0:t.toBase58(),style:{marginLeft:"0.5rem",display:"flex"}}))):null},Ie=n(1100),Be=n(1095),Me=function(){var e=Object(s.c)(),t=e.providerUrl,n=e.setProvider,a=Object(d.e)(),r=a.endpoint,o=a.setEndpoint;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{display:"grid"}},"Network:"," ",i.a.createElement(Be.a,{onSelect:o,value:r,style:{marginRight:8}},d.b.map((function(e){var t=e.name,n=e.endpoint;return i.a.createElement(Be.a.Option,{value:n,key:n},t)})))),i.a.createElement("div",{style:{display:"grid"}},"Wallet:"," ",i.a.createElement(Be.a,{onSelect:n,value:t},s.a.map((function(e){var t=e.name,n=e.url;return i.a.createElement(Be.a.Option,{value:n,key:n},t)})))))},Le=n(15),Ce=function(e){var t=Object(s.c)(),n=t.connected,a=t.wallet;return i.a.createElement("div",{className:"App-Bar-right"},i.a.createElement(Ne,null),i.a.createElement("div",null,!n&&i.a.createElement(we.a,{type:"text",size:"large",onClick:n?a.disconnect:a.connect,style:{color:"#2abdd2"}},Le.b.CONNECT_BUTTON),n&&i.a.createElement(je.a,{placement:"bottomRight",title:Le.b.WALLET_TOOLTIP,trigger:"click"})),i.a.createElement(je.a,{placement:"topRight",title:Le.b.SETTINGS_TOOLTIP,content:i.a.createElement(Me,null),trigger:"click"},i.a.createElement(we.a,{shape:"circle",size:"large",type:"text",icon:i.a.createElement(Ie.a,null)})),e.right)},_e=n(353),qe=i.a.memo((function(e){var t=Object(d.e)().env,n=Object(u.g)(),a={"/dashboard":"2","/deposit":"3","/borrow":"4","/liquidate":"5","/margin":"6","/faucet":"7"},r=a[Object(y.a)(Object.keys(a)).find((function(e){return n.pathname.startsWith(e)}))||""]||"1";return i.a.createElement("div",{className:"App"},i.a.createElement("div",{className:"Banner"},i.a.createElement("div",{className:"Banner-description"},Le.b.AUDIT_WARNING)),i.a.createElement(Oe.a,{title:Le.b.APP_TITLE,footerRender:function(){return i.a.createElement("div",{className:"footer",title:Le.b.FOOTER},Le.b.FOOTER)},navTheme:"light",headerTheme:"light",theme:"light",layout:"mix",fixSiderbar:!0,primaryColor:"#d83aeb",logo:i.a.createElement("div",{className:"App-logo"}),rightContentRender:function(){return i.a.createElement(Ce,null)},links:[],menuContentRender:function(){return i.a.createElement("div",{className:"links"},i.a.createElement(me.a,{theme:"light",defaultSelectedKeys:[r],mode:"inline"},i.a.createElement(me.a.Item,{key:"1",icon:i.a.createElement(fe.a,null)},i.a.createElement(l.b,{to:{pathname:"/"}},Le.b.MENU_HOME)),i.a.createElement(me.a.Item,{key:"2",icon:i.a.createElement(be.a,null)},i.a.createElement(l.b,{to:{pathname:"/dashboard"}},Le.b.MENU_DASHBOARD)),i.a.createElement(me.a.Item,{key:"3",icon:i.a.createElement(ve.a,null)},i.a.createElement(l.b,{to:{pathname:"/deposit"}},Le.b.MENU_DEPOSIT)),i.a.createElement(me.a.Item,{key:"4",icon:i.a.createElement(pe.a,null)},i.a.createElement(l.b,{to:{pathname:"/borrow"}},Le.b.MENU_BORROW)),i.a.createElement(me.a.Item,{key:"5",icon:i.a.createElement(ye.a,null)},i.a.createElement(l.b,{to:{pathname:"/liquidate"}},Le.b.MENU_LIQUIDATE)),"mainnet-beta"!==t&&i.a.createElement(me.a.Item,{key:"7",icon:i.a.createElement(Ee.a,null)},i.a.createElement(l.b,{to:{pathname:"/faucet"}},Le.b.MENU_FAUCET))),i.a.createElement(me.a,{theme:"light",defaultSelectedKeys:[r],selectable:!1,mode:"inline",className:"bottom-links"},i.a.createElement(me.a.Item,{key:"16",icon:i.a.createElement(ge.a,null)},i.a.createElement("a",{title:"Fork",href:"".concat(_e.repository.url,"/fork"),target:"_blank",rel:"noopener noreferrer"},"Fork")),",",i.a.createElement(me.a.Item,{key:"15",icon:i.a.createElement(he.a,null)},i.a.createElement("a",{title:"Gtihub",href:_e.repository.url,target:"_blank",rel:"noopener noreferrer"},"Github"))))}},e.children))})),Re=n(204),Pe=n(119),De=n(1099),We=n(1096),Ue=function(e){var t,n,a=Object(d.e)().tokenMap,r=Object(O.k)(a,e.mintAddress),o=e.size||20;return r?i.a.createElement("img",{alt:"Token icon",className:e.className,key:r,width:(null===(t=e.style)||void 0===t?void 0:t.width)||o.toString(),height:(null===(n=e.style)||void 0===n?void 0:n.height)||o.toString(),src:r,style:Object(A.a)({marginRight:"0.5rem",marginTop:"0.11rem",borderRadius:"10rem",backgroundColor:"white",backgroundClip:"padding-box"},e.style)}):i.a.createElement(xe,{address:e.mintAddress,style:Object(A.a)({marginRight:"0.5rem",width:o,height:o,marginTop:2},e.style)})},Fe=function(e){var t,n,a=H(e.reserve.liquidityMint),o=Object(m.h)(e.reserve.liquidityMint),c=Object(O.i)(e.reserve.availableLiquidity.toNumber(),o),u=Object(r.useMemo)((function(){return Object(O.i)(Object(O.p)(e.reserve.borrowedLiquidityWad),o)}),[e.reserve,o]),s=Object(r.useMemo)((function(){return Object(G.g)(e.reserve)}),[e.reserve]),d=Object(r.useMemo)((function(){return Object(G.h)(e.reserve)}),[e.reserve]),f=c+u;return i.a.createElement(l.b,{to:"/reserve/".concat(e.address.toBase58())},i.a.createElement("div",{className:"home-item"},i.a.createElement("span",{style:{display:"flex"}},i.a.createElement(Ue,{mintAddress:e.reserve.liquidityMint}),a),i.a.createElement("div",{title:f.toString()},i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(f))," ",a),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(null===(t=e.item)||void 0===t?void 0:t.marketSize)))),i.a.createElement("div",{title:u.toString()},i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(u))," ",a),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(null===(n=e.item)||void 0===n?void 0:n.borrowed)))),i.a.createElement("div",{title:d.toString()},O.f.format(d)),i.a.createElement("div",{title:s.toString()},O.f.format(s))))},Ke=function(e){var t=["#003f5c","#2f4b7c","#665191","#a05195","#d45087","#f95d6a","#ff7c43","#ffa600"].reverse();return i.a.createElement(We.a,{title:e.title,valueRender:function(){return i.a.createElement("div",{style:{width:"100%",height:37,display:"flex",backgroundColor:"lightgrey",fontSize:12,lineHeight:"37px"}},e.items.map((function(n,a){return i.a.createElement("div",{key:e.name(n),title:e.name(n),style:{overflow:"hidden",width:"".concat(100*e.getPct(n),"%"),backgroundColor:e.color&&e.color(n)||t[a%e.items.length]}},e.name(n))})))}})},Ge=(n(744),function(){var e=Q().reserveAccounts,t=D(),n=t.marketEmitter,a=t.midPriceInUSD,o=Object(d.e)().tokenMap,c=Object(r.useState)({marketSize:0,borrowed:0,lentOutPct:0,items:[]}),l=Object(E.a)(c,2),u=l[0],s=l[1];return Object(r.useEffect)((function(){var t=function(){var t={marketSize:0,borrowed:0,lentOutPct:0,items:[]};e.forEach((function(e){var n,r=Object(B.reserveMarketCap)(e.info),i=m.d.get(e.info.liquidityMint.toBase58());if(i){var c=a(null===i||void 0===i?void 0:i.pubkey.toBase58()),l={key:e.pubkey.toBase58(),marketSize:Object(O.i)(r,null===i||void 0===i?void 0:i.info)*c,borrowed:Object(O.i)(Object(O.p)(null===(n=e.info)||void 0===n?void 0:n.borrowedLiquidityWad).toNumber(),i.info)*c,name:Object(O.l)(o,e.info.liquidityMint.toBase58())};t.items.push(l),t.marketSize=t.marketSize+l.marketSize,t.borrowed=t.borrowed+l.borrowed}})),t.lentOutPct=t.borrowed/t.marketSize,t.lentOutPct=Number.isFinite(t.lentOutPct)?t.lentOutPct:0,t.items=t.items.sort((function(e,t){return t.marketSize-e.marketSize})),s(t)},r=n.onMarket((function(){t()}));return t(),function(){r()}}),[n,a,s,e,o]),i.a.createElement("div",{className:"flexColumn"},i.a.createElement(Re.a,{gutter:Le.a,className:"home-info-row"},i.a.createElement(Pe.a,{xs:24,xl:5},i.a.createElement(De.a,null,i.a.createElement(We.a,{title:"Current market size",value:u.marketSize,precision:2,valueStyle:{color:"#3f8600"},prefix:"$"}))),i.a.createElement(Pe.a,{xs:24,xl:5},i.a.createElement(De.a,null,i.a.createElement(We.a,{title:"Total borrowed",value:u.borrowed,precision:2,prefix:"$"}))),i.a.createElement(Pe.a,{xs:24,xl:5},i.a.createElement(De.a,null,i.a.createElement(We.a,{title:"% Lent out",value:100*u.lentOutPct,precision:2,suffix:"%"}))),i.a.createElement(Pe.a,{xs:24,xl:9},i.a.createElement(De.a,null,i.a.createElement(Ke,{title:"Market composition",name:function(e){return e.name},getPct:function(e){return e.marketSize/u.marketSize},items:u.items})))),i.a.createElement(De.a,null,i.a.createElement("div",{className:"home-item home-header"},i.a.createElement("div",null,Le.b.TABLE_TITLE_ASSET),i.a.createElement("div",null,Le.b.TABLE_TITLE_MARKET_SIZE),i.a.createElement("div",null,Le.b.TABLE_TITLE_TOTAL_BORROWED),i.a.createElement("div",null,Le.b.TABLE_TITLE_DEPOSIT_APY),i.a.createElement("div",null,Le.b.TABLE_TITLE_BORROW_APY)),e.map((function(e){return i.a.createElement(Fe,{reserve:e.info,address:e.pubkey,item:u.items.find((function(t){return t.key===e.pubkey.toBase58()}))})}))))}),ze=function(e){var t=H(e.reserve.liquidityMint),n=U(e.reserve.liquidityMint.toBase58()).price,a=le(e.address),r=a.borrowingPower,o=a.totalInQuote,c=Object(G.g)(e.reserve);return i.a.createElement(l.b,{to:"/borrow/".concat(e.address.toBase58())},i.a.createElement("div",{className:"borrow-item"},i.a.createElement("span",{style:{display:"flex"}},i.a.createElement(Ue,{mintAddress:e.reserve.liquidityMint}),t),i.a.createElement("div",null,"$",O.e.format(n)),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(r))," ",t),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(o)))),i.a.createElement("div",null,O.f.format(c)),i.a.createElement("div",null,i.a.createElement(we.a,{type:"primary"},i.a.createElement("span",null,Le.b.BORROW_ACTION)))))},Ve=(n(745),function(){var e=Q().reserveAccounts;return i.a.createElement("div",{className:"flexColumn"},i.a.createElement(De.a,null,i.a.createElement("div",{className:"borrow-item deposit-header"},i.a.createElement("div",null,Le.b.TABLE_TITLE_ASSET),i.a.createElement("div",null,"Serum Dex Price"),i.a.createElement("div",null,Le.b.TABLE_TITLE_MAX_BORROW),i.a.createElement("div",null,Le.b.TABLE_TITLE_APY),i.a.createElement("div",null)),e.map((function(e){return i.a.createElement(ze,{reserve:e.info,address:e.pubkey})}))))}),Qe=(n(746),n(86)),Ye=n(92),He=n(126),$e=n(125),Je=n(1098),Xe=function(e){Object(He.a)(n,e);var t=Object($e.a)(n);function n(){var e;Object(Qe.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onChange=function(t){var n=t.target.value;(/^-?\d*(\.\d*)?$/.test(n)||""===n||"-"===n)&&e.props.onChange(n)},e.onBlur=function(){var t=e.props,n=t.value,a=t.onBlur,r=t.onChange,i=n;void 0!==n&&null!==n&&(!n.charAt||"."!==n.charAt(n.length-1)&&"-"!==n||(i=n.slice(0,-1)),n.startsWith&&(n.startsWith(".")||n.startsWith("-."))&&(i=i.replace(".","0.")),i.replace&&(null===r||void 0===r||r(i.replace(/0*(\d+)/,"$1"))),a&&a())},e}return Object(Ye.a)(n,[{key:"render",value:function(){return i.a.createElement(Je.a,Object.assign({},this.props,{onChange:this.onChange,onBlur:this.onBlur,maxLength:25}))}}]),n}(i.a.Component),Ze=n(67);function et(e,t,n,a,r,i){if(!n.info.isNative)return n.pubkey;var o=rt(e,a,r,i);return e.push(N.c.createInitAccountInstruction(I.b,I.c,o,a)),t.push(N.c.createCloseAccountInstruction(I.b,o,a,a,[])),o}function tt(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:65528,r=new j.a;return e.push(j.g.createAccount({fromPubkey:t,newAccountPubkey:r.publicKey,lamports:0,space:a,programId:I.b})),n.push(r),r.publicKey}function nt(e,t,n,a){var r=new j.a;return e.push(j.g.createAccount({fromPubkey:t,newAccountPubkey:r.publicKey,lamports:n,space:B.LendingObligationLayout.span,programId:I.a})),a.push(r),r.publicKey}function at(e,t,n,a){var r=new j.a;return e.push(j.g.createAccount({fromPubkey:t,newAccountPubkey:r.publicKey,lamports:n,space:N.b.span,programId:I.b})),a.push(r),r.publicKey}function rt(e,t,n,a){var r=new j.a;return e.push(j.g.createAccount({fromPubkey:t,newAccountPubkey:r.publicKey,lamports:n,space:N.a.span,programId:I.b})),a.push(r),r.publicKey}function it(e,t,n,a,r,i,o,c){var l,u=i.toBase58(),s=m.d.byParser(m.c).map((function(e){return m.d.get(e)})).find((function(e){return void 0!==e&&e.info.mint.toBase58()===u&&e.info.owner.toBase58()===t.toBase58()&&(void 0===c||!c.has(e.pubkey.toBase58()))})),d=u===I.c.toBase58();return s&&!d?l=s.pubkey:(l=function(e,t,n,a,r,i){var o=rt(e,t,n,i);return e.push(N.c.createInitAccountInstruction(I.b,a,o,r)),o}(n,e,r,i,t,o),d&&a.push(N.c.createCloseAccountInstruction(I.b,l,e,e,[]))),l}var ot,ct=function(){var e=Object(p.a)(v.a.mark((function e(t,n,a,r,i,o,c,l,u){var s,f,b,p,g,h,w,k,A,S,T,x,M,L,C,_,q,R,P,D,W,U,F,K;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(Ze.a)({message:"Borrowing funds...",description:"Please review transactions to approve.",type:"warn"}),s=[],f=[],b=[],e.next=6,t.getMinimumBalanceForRentExemption(N.a.span);case 6:if(p=e.sent,!l){e.next=11;break}e.t0=l.pubkey,e.next=19;break;case 11:return e.t1=nt,e.t2=f,e.t3=n.publicKey,e.next=16,t.getMinimumBalanceForRentExemption(B.LendingObligationLayout.span);case 16:e.t4=e.sent,e.t5=s,e.t0=(0,e.t1)(e.t2,e.t3,e.t4,e.t5);case 19:if(g=e.t0,!l){e.next=24;break}e.t6=l.info.tokenMint,e.next=32;break;case 24:return e.t7=at,e.t8=f,e.t9=n.publicKey,e.next=29,t.getMinimumBalanceForRentExemption(N.b.span);case 29:e.t10=e.sent,e.t11=s,e.t6=(0,e.t7)(e.t8,e.t9,e.t10,e.t11);case 32:return h=e.t6,w=u||rt(f,n.publicKey,p,s),e.next=36,it(n.publicKey,n.publicKey,f,b,p,o.info.liquidityMint,s);case 36:if(k=e.sent,!(f.length>0)){e.next=42;break}return e.next=40,Object(d.c)(t,n,f,Object(y.a)(s));case 40:A=e.sent,Object(Ze.a)({message:"Obligation accounts created",description:"Transaction ".concat(A),type:"success"});case 42:return Object(Ze.a)({message:"Borrowing funds...",description:"Please review transactions to approve.",type:"warn"}),s=[],f=[],b=[],e.next=48,j.d.findProgramAddress([c.info.lendingMarket.toBuffer()],I.a);case 48:if(S=e.sent,T=Object(E.a)(S,1),x=T[0],M=0,L=0,i!==B.BorrowAmountType.LiquidityBorrowAmount){e.next=62;break}return C=a.info.amount.toNumber(),L=C-p,e.next=58,m.d.query(t,o.info.liquidityMint,m.b);case 58:_=e.sent,M=Object(O.n)(r,null===_||void 0===_?void 0:_.info),e.next=68;break;case 62:if(i!==B.BorrowAmountType.CollateralDepositAmount){e.next=68;break}return e.next=65,m.d.query(t,c.info.collateralMint,m.b);case 65:q=e.sent,M=Object(O.n)(r,null===q||void 0===q?void 0:q.info),L=M;case 68:if(R=et(f,b,a,n.publicKey,L+p,s),Object(B.approve)(f,b,R,x,n.publicKey,L),P=o.info.dexMarketOption?o.info.dexMarket:c.info.dexMarket,D=m.d.get(P)){e.next=74;break}throw new Error("Dex market doesn't exist.");case 74:return W=m.d.get(c.info.lendingMarket),U=W.info.quoteMint.equals(c.info.liquidityMint)?null===D||void 0===D?void 0:D.info.bids:null===D||void 0===D?void 0:D.info.asks,F=tt(f,n.publicKey,s),f.push(Object(B.borrowInstruction)(M,i,R,k,c.pubkey,c.info.collateralSupply,o.pubkey,o.info.liquiditySupply,g,h,w,n.publicKey,x,P,U,F)),e.prev=78,e.next=81,Object(d.c)(t,n,f.concat(b),s,!0);case 81:K=e.sent,Object(Ze.a)({message:"Funds borrowed.",type:"success",description:"Transaction - ".concat(K)}),e.next=88;break;case 85:throw e.prev=85,e.t12=e.catch(78),new Error;case 88:case"end":return e.stop()}}),e,null,[[78,85]])})));return function(t,n,a,r,i,o,c,l,u){return e.apply(this,arguments)}}(),lt=function(){var e=Object(p.a)(v.a.mark((function e(t,n,a,r,i,o){var c,l,u,s,m,f,b,p,y,g,h;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(Ze.a)({message:"Depositing funds...",description:"Please review transactions to approve.",type:"warn"}),c=!0,l=[],u=[],s=[],e.next=7,i.getMinimumBalanceForRentExemption(N.a.span);case 7:return m=e.sent,e.next=10,j.d.findProgramAddress([a.lendingMarket.toBuffer()],I.a);case 10:if(f=e.sent,b=Object(E.a)(f,1),p=b[0],y=et(u,s,t,o.publicKey,n+m,l),Object(B.approve)(u,s,y,p,o.publicKey,n),!c){e.next=21;break}return e.next=18,it(o.publicKey,o.publicKey,u,s,m,a.collateralMint,l);case 18:g=e.sent,e.next=22;break;case 21:g=rt(u,o.publicKey,m,l);case 22:return c?u.push(Object(G.k)(n,y,g,p,r,a.liquiditySupply,a.collateralMint)):(80,u.push(Object(G.m)(n,80,y,g,r,a.liquidityMint,a.liquiditySupply,a.collateralMint,a.collateralSupply,a.lendingMarket,p,a.dexMarket))),e.prev=23,e.next=26,Object(d.c)(i,o,u.concat(s),l,!0);case 26:h=e.sent,Object(Ze.a)({message:"Funds deposited.",type:"success",description:"Transaction - ".concat(h)}),e.next=33;break;case 30:throw e.prev=30,e.t0=e.catch(23),new Error;case 33:case"end":return e.stop()}}),e,null,[[23,30]])})));return function(t,n,a,r,i,o){return e.apply(this,arguments)}}(),ut=n(529),st=function(){var e=Object(p.a)(v.a.mark((function e(t,n,a,r,i,o,c,l){var u,s,m,f,b,p,y,g,h,O;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(Ze.a)({message:"Repaing funds...",description:"Please review transactions to approve.",type:"warn"}),u=[],s=[],m=[],e.next=6,c.getMinimumBalanceForRentExemption(N.a.span);case 6:return f=e.sent,e.next=9,j.d.findProgramAddress([i.info.lendingMarket.toBuffer()],I.a);case 9:return b=e.sent,p=Object(E.a)(b,1),y=p[0],g=t.pubkey,Object(B.approve)(s,m,g,y,l.publicKey,n),e.next=16,it(l.publicKey,l.publicKey,s,m,f,o.info.collateralMint,u);case 16:return h=e.sent,Object(B.approve)(s,m,r.pubkey,y,l.publicKey,r.info.amount.toNumber()),s.push(Object(ut.a)(n,g,h,i.pubkey,i.info.liquiditySupply,o.pubkey,o.info.collateralSupply,a.pubkey,a.info.tokenMint,r.pubkey,y)),e.next=21,Object(d.c)(c,l,s.concat(m),u,!0);case 21:O=e.sent,Object(Ze.a)({message:"Funds repaid.",type:"success",description:"Transaction - ".concat(O)});case 23:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i,o,c,l){return e.apply(this,arguments)}}(),dt=function(){var e=Object(p.a)(v.a.mark((function e(t,n,a,r,i,o){var c,l,u,s,m,f,b,p,y,g;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(Ze.a)({message:"Withdrawing funds...",description:"Please review transactions to approve.",type:"warn"}),c=[],l=[],u=[],e.next=6,i.getMinimumBalanceForRentExemption(N.a.span);case 6:return s=e.sent,e.next=9,j.d.findProgramAddress([a.lendingMarket.toBuffer()],I.a);case 9:return m=e.sent,f=Object(E.a)(m,1),b=f[0],p=t.pubkey,Object(B.approve)(l,u,p,b,o.publicKey,n),e.next=16,it(o.publicKey,o.publicKey,l,u,s,a.liquidityMint,c);case 16:return y=e.sent,l.push(Object(G.r)(n,p,y,r,a.collateralMint,a.liquiditySupply,b)),e.prev=18,e.next=21,Object(d.c)(i,o,l.concat(u),c,!0);case 21:g=e.sent,Object(Ze.a)({message:"Funds deposited.",type:"success",description:"Transaction - ".concat(g)}),e.next=27;break;case 25:e.prev=25,e.t0=e.catch(18);case 27:case"end":return e.stop()}}),e,null,[[18,25]])})));return function(t,n,a,r,i,o){return e.apply(this,arguments)}}(),mt=n(530),ft=function(){var e=Object(p.a)(v.a.mark((function e(t,n,a,r,i,o,c){var l,u,s,f,b,p,y,g,h,O,w,k,A,S,T;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(Ze.a)({message:"Repaing funds...",description:"Please review transactions to approve.",type:"warn"}),l=[],u=[],s=[],e.next=6,t.getMinimumBalanceForRentExemption(N.a.span);case 6:return f=e.sent,e.next=9,j.d.findProgramAddress([o.info.lendingMarket.toBuffer()],I.a);case 9:return b=e.sent,p=Object(E.a)(b,1),y=p[0],g=et(u,s,a,n.publicKey,r+f,l),Object(B.approve)(u,s,g,y,n.publicKey,r),e.next=16,it(n.publicKey,n.publicKey,u,s,f,c.info.collateralMint,l);case 16:if(h=e.sent,O=o.info.dexMarketOption?o.info.dexMarket:c.info.dexMarket,w=m.d.get(O)){e.next=21;break}throw new Error("Dex market doesn't exist.");case 21:return k=m.d.get(c.info.lendingMarket),A=k.info.quoteMint.equals(o.info.liquidityMint)?null===w||void 0===w?void 0:w.info.bids:null===w||void 0===w?void 0:w.info.asks,console.log(O.toBase58()),S=tt(u,n.publicKey,l),u.push(Object(mt.a)(r,g,h,o.pubkey,o.info.liquiditySupply,c.pubkey,c.info.collateralSupply,i.pubkey,y,O,A,S)),e.next=28,Object(d.c)(t,n,u.concat(s),l,!0);case 28:T=e.sent,Object(Ze.a)({message:"Funds liquidated.",type:"success",description:"Transaction - ".concat(T)});case 30:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i,o,c){return e.apply(this,arguments)}}(),bt=Be.a.Option,vt=function(e){var t=e.mint,n=e.name,a=e.userDeposit;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{display:"flex",alignItems:"center"}},i.a.createElement(Ue,{mintAddress:t}),n,i.a.createElement("span",{className:"token-balance"},"\xa0"," ",a?Object(O.d)(a.info.amount):"--")))},pt=function(e){var t,n,a,r,o,c=Q().reserveAccounts,l=Object(d.e)().tokenMap,u=ie().userDeposits,s=m.d.get(null===(t=e.reserve)||void 0===t?void 0:t.lendingMarket);if(!s)return null;var f=null===s||void 0===s||null===(n=s.info)||void 0===n||null===(a=n.quoteMint)||void 0===a?void 0:a.toBase58(),b=(null===(r=e.reserve)||void 0===r||null===(o=r.liquidityMint)||void 0===o?void 0:o.toBase58())!==f;return i.a.createElement(Be.a,{size:"large",showSearch:!0,style:{minWidth:300,margin:"5px 0px"},placeholder:"Collateral",value:e.collateralReserve,disabled:e.disabled,defaultValue:e.collateralReserve,onChange:function(t){e.onCollateralReserve&&e.onCollateralReserve(t)},filterOption:function(e,t){var n;return(null===t||void 0===t||null===(n=t.name)||void 0===n?void 0:n.toLowerCase().indexOf(e.toLowerCase()))>=0}},c.filter((function(t){return t.info!==e.reserve})).filter((function(e){return!b||e.info.liquidityMint.equals(s.info.quoteMint)})).map((function(e){var t=e.info.liquidityMint.toBase58(),n=e.pubkey.toBase58(),a=Object(O.l)(l,t);return i.a.createElement(bt,{key:n,value:n,name:a,title:n},i.a.createElement(vt,{reserve:e,userDeposit:u.find((function(e){return e.reserve.pubkey.toBase58()===n})),mint:t,name:a}))})))},yt=(n(751),n(410),function(e){return i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center"}},i.a.createElement("h2",null,"Congratulations!"),i.a.createElement("div",null,"Your action has been successfully executed"),i.a.createElement("div",{className:"success-icon"}),i.a.createElement(l.b,{to:"/dashboard"},i.a.createElement(we.a,{type:"primary"},Le.b.DASHBOARD_ACTION)),i.a.createElement(we.a,{type:"text",onClick:e.onClose},Le.b.GO_BACK_ACTION))}),Et=function(){var e=Object(u.f)();return i.a.createElement(we.a,{type:"text",onClick:e.goBack},Le.b.GO_BACK_ACTION)},gt=n(290),ht=function(e){var t=Object(s.c)(),n=t.wallet,a=t.connected,r=e.onClick,o=(e.children,e.disabled),c=Object(gt.a)(e,["onClick","children","disabled"]);return i.a.createElement(we.a,Object.assign({},c,{onClick:a?r:n.connect,disabled:a&&o}),a?e.children:Le.b.CONNECT_LABEL)},Ot=function(e){var t=Object(d.d)(),n=Object(s.c)().wallet,a=Object(r.useState)(""),o=Object(E.a)(a,2),c=o[0],l=o[1],u=Object(r.useState)(!1),f=Object(E.a)(u,2),b=f[0],y=f[1],g=Object(r.useState)(!1),h=Object(E.a)(g,2),O=h[0],w=h[1],j=e.reserve,k=Object(r.useState)(),A=Object(E.a)(k,2),S=A[0],T=A[1],x=Object(r.useMemo)((function(){var e=m.d.byParser(B.LendingReserveParser).find((function(e){return e===S}))||"";return m.d.get(e)}),[S]),N=H(null===j||void 0===j?void 0:j.info.liquidityMint),I=$(null===x||void 0===x?void 0:x.info.collateralMint).accounts,M=re(null===j||void 0===j?void 0:j.pubkey,null===x||void 0===x?void 0:x.pubkey).userObligationsByReserve,L=Object(r.useCallback)((function(){x&&(y(!0),Object(p.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ct(t,n,I[0],parseFloat(c),B.BorrowAmountType.LiquidityBorrowAmount,j,x,M.length>0?M[0].obligation.account:void 0,M.length>0?M[0].userAccounts[0].pubkey:void 0);case 3:l(""),w(!0),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:return e.prev=9,y(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,7,9,12]])})))())}),[t,n,c,x,j,I,M,y,w]);return i.a.createElement(De.a,{className:e.className,bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},O?i.a.createElement(yt,{onClose:function(){return w(!1)}}):i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},i.a.createElement("div",{className:"borrow-input-title"},Le.b.SELECT_COLLATERAL),i.a.createElement(pt,{reserve:j.info,collateralReserve:S,onCollateralReserve:T}),i.a.createElement("div",{className:"borrow-input-title"},Le.b.BORROW_QUESTION),i.a.createElement("div",{className:"token-input"},i.a.createElement(Ue,{mintAddress:null===j||void 0===j?void 0:j.info.liquidityMint}),i.a.createElement(Xe,{value:c,onChange:function(e){l(e)},style:{fontSize:20,boxShadow:"none",borderColor:"transparent",outline:"transparent"},placeholder:"0.00"}),i.a.createElement("div",null,N)),i.a.createElement(ht,{type:"primary",onClick:L,loading:b,disabled:0===I.length},0===I.length?Le.b.NO_DEPOSITS:Le.b.BORROW_ACTION),i.a.createElement(Et,null)))},wt=n(1094),jt=wt.a.Text;!function(e){e.Deposit="deposit",e.Borrow="borrow"}(ot||(ot={}));var kt=function(e){var t=e.reserve.info,n=e.mode,a=H(null===t||void 0===t?void 0:t.liquidityMint),r=Object(m.h)(t.liquidityMint),o=Object(O.i)(t.availableLiquidity.toNumber(),r),c=Object(G.h)(t),u=Object(G.g)(t),s=Object(G.i)(t),d=t.config.liquidationThreshold/100,f=t.config.liquidationBonus/100,b=t.config.loanToValueRatio/100,v=null;return n===ot.Deposit?v=i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"card-row"},i.a.createElement(jt,{type:"secondary",className:"card-cell "},Le.b.TABLE_TITLE_DEPOSIT_APY,":"),i.a.createElement("div",{className:"card-cell "},O.f.format(c))),i.a.createElement("div",{className:"card-row"},i.a.createElement(jt,{type:"secondary",className:"card-cell "},"Maximum LTV:"),i.a.createElement("div",{className:"card-cell "},O.f.format(b))),i.a.createElement("div",{className:"card-row"},i.a.createElement(jt,{type:"secondary",className:"card-cell "},"Liquidation threshold:"),i.a.createElement("div",{className:"card-cell "},O.f.format(d))),i.a.createElement("div",{className:"card-row"},i.a.createElement(jt,{type:"secondary",className:"card-cell "},"Liquidation penalty:"),i.a.createElement("div",{className:"card-cell "},O.f.format(f)))):n===ot.Borrow&&(v=i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"card-row"},i.a.createElement(jt,{type:"secondary",className:"card-cell "},Le.b.TABLE_TITLE_BORROW_APY,":"),i.a.createElement("div",{className:"card-cell "},O.f.format(u))))),i.a.createElement(De.a,{className:e.className,title:i.a.createElement("div",{style:{display:"flex",alignItems:"center",fontSize:"1.2rem",justifyContent:"center"}},i.a.createElement(l.b,{to:"/reserve/".concat(e.reserve.pubkey)},i.a.createElement(Ue,{mintAddress:null===t||void 0===t?void 0:t.liquidityMint,style:{width:30,height:30}})," ",a," Reserve Overview"))},i.a.createElement("div",{className:"card-row"},i.a.createElement(jt,{type:"secondary",className:"card-cell "},"Utilization rate:"),i.a.createElement("div",{className:"card-cell "},O.f.format(s))),i.a.createElement("div",{className:"card-row"},i.a.createElement(jt,{type:"secondary",className:"card-cell "},"Available liquidity:"),i.a.createElement("div",{className:"card-cell "},O.e.format(o)," ",a)),v)},At=function(){var e=Object(u.h)().id,t=Y(e),n=ae(),a=n.userObligations,r=n.totalInQuote,o=le(e),c=o.totalInQuote,l=o.utilization;return t?i.a.createElement("div",{className:"borrow-reserve"},i.a.createElement(Re.a,{gutter:Le.a},i.a.createElement(Pe.a,{xs:24,xl:5},i.a.createElement(De.a,null,i.a.createElement(We.a,{title:Le.b.BORROWED_VALUE,value:r,precision:2,prefix:"$"}))),i.a.createElement(Pe.a,{xs:24,xl:5},i.a.createElement(De.a,null,i.a.createElement(We.a,{title:Le.b.BORROWING_POWER_USED,value:100*l,precision:2,suffix:"%"}))),i.a.createElement(Pe.a,{xs:24,xl:5},i.a.createElement(De.a,null,i.a.createElement(We.a,{title:Le.b.BORROWING_POWER_VALUE,value:c,valueStyle:{color:"#3f8600"},precision:2,prefix:"$"}))),i.a.createElement(Pe.a,{xs:24,xl:9},i.a.createElement(De.a,null,i.a.createElement(Ke,{title:"Your Loans",items:a,getPct:function(e){return e.obligation.info.borrowedInQuote/r},name:function(e){return e.obligation.info.repayName}})))),i.a.createElement(Re.a,{gutter:Le.a,className:"flexColumn"},i.a.createElement(Pe.a,{xs:24,xl:15},i.a.createElement(Ot,{className:"card-fill",reserve:t})),i.a.createElement(Pe.a,{xs:24,xl:8},i.a.createElement(kt,{className:"card-fill",reserve:t,mode:ot.Borrow})))):null},St=function(e){var t=e.obligation,n=m.d.get(t.info.borrowReserve),a=m.d.get(t.info.collateralReserve),o=Object(m.h)(n.info.liquidityMint),c=Object(m.h)(a.info.liquidityMint),u=Object(O.i)(Object(O.p)(t.info.borrowAmountWad),o),s=Object(r.useMemo)((function(){return Object(G.g)(n.info)}),[n]),d=Object(G.j)(t.info.depositedCollateral,n.info),f=Object(O.i)(d,c),b=H(null===n||void 0===n?void 0:n.info.liquidityMint),v=H(null===a||void 0===a?void 0:a.info.liquidityMint);return i.a.createElement("div",{className:"dashboard-item"},i.a.createElement("span",{style:{display:"flex",marginLeft:5}},i.a.createElement("div",{style:{display:"flex"},title:"".concat(v,"\u2192").concat(b)},i.a.createElement(Ue,{mintAddress:null===a||void 0===a?void 0:a.info.liquidityMint,style:{marginRight:"-0.5rem"}}),i.a.createElement(Ue,{mintAddress:null===n||void 0===n?void 0:n.info.liquidityMint}))),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(u))," ",b),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(t.info.borrowedInQuote)))),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(f))," ",v),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(t.info.collateralInQuote)))),i.a.createElement("div",null,O.f.format(s)),i.a.createElement("div",{style:{color:Object(G.l)(t.info.health)}},O.f.format(t.info.ltv/100)),i.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},i.a.createElement(l.b,{to:"/borrow/".concat(n.pubkey.toBase58())},i.a.createElement(we.a,{type:"primary"},i.a.createElement("span",null,"Borrow"))),i.a.createElement(l.b,{to:"/repay/loan/".concat(t.account.pubkey.toBase58())},i.a.createElement(we.a,{type:"text"},i.a.createElement("span",null,"Repay")))))},Tt=function(){var e=ae(),t=e.userObligations,n=e.totalInQuote;return i.a.createElement(De.a,{title:i.a.createElement("div",{className:"dashboard-title"},i.a.createElement("div",null,Le.b.DASHBOARD_TITLE_LOANS),i.a.createElement("div",null,i.a.createElement("span",null,Le.b.TOTAL_TITLE,": "),"$",O.e.format(n)))},i.a.createElement(Ke,{items:t,getPct:function(e){return e.obligation.info.borrowedInQuote/n},name:function(e){return e.obligation.info.repayName}}),i.a.createElement("div",{className:"dashboard-item dashboard-header"},i.a.createElement("div",null,Le.b.TABLE_TITLE_ASSET),i.a.createElement("div",null,Le.b.TABLE_TITLE_YOUR_LOAN_BALANCE),i.a.createElement("div",null,Le.b.TABLE_TITLE_COLLATERAL_BALANCE),i.a.createElement("div",null,Le.b.TABLE_TITLE_APY),i.a.createElement("div",null,Le.b.TABLE_TITLE_LTV),i.a.createElement("div",null)),t.map((function(e){return i.a.createElement(St,{obligation:e.obligation})})))},xt=function(e){var t=e.userDeposit,n=t.reserve,a=t.info,o=n.info.liquidityMint,c=H(o),u=Object(r.useMemo)((function(){return Object(G.h)(n.info)}),[n]);return i.a.createElement("div",{className:"dashboard-item"},i.a.createElement("span",{style:{display:"flex"}},i.a.createElement(Ue,{mintAddress:o}),c),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(a.amount))," ",c),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(a.amountInQuote)))),i.a.createElement("div",null,O.f.format(u)),i.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},i.a.createElement(l.b,{to:"/deposit/".concat(n.pubkey.toBase58())},i.a.createElement(we.a,{type:"primary"},i.a.createElement("span",null,Le.b.DEPOSIT_ACTION))),i.a.createElement(l.b,{to:"/withdraw/".concat(n.pubkey.toBase58())},i.a.createElement(we.a,{type:"text"},i.a.createElement("span",null,Le.b.WITHDRAW_ACTION)))))},Nt=function(){var e=ie(),t=e.userDeposits,n=e.totalInQuote;return i.a.createElement(De.a,{title:i.a.createElement("div",{className:"dashboard-title"},i.a.createElement("div",null,Le.b.DASHBOARD_TITLE_DEPOSITS),i.a.createElement("div",null,i.a.createElement("span",null,Le.b.TOTAL_TITLE,": "),"$",O.e.format(n)))},i.a.createElement(Ke,{items:t,getPct:function(e){return e.info.amountInQuote/n},name:function(e){return e.info.name}}),i.a.createElement("div",{className:"dashboard-item dashboard-header"},i.a.createElement("div",null,Le.b.TABLE_TITLE_ASSET),i.a.createElement("div",null,Le.b.TABLE_TITLE_DEPOSIT_BALANCE),i.a.createElement("div",null,Le.b.TABLE_TITLE_APY),i.a.createElement("div",null)),t.map((function(e){return i.a.createElement(xt,{userDeposit:e})})))},It=(n(752),function(){var e=Object(s.c)().connected,t=ae().userObligations,n=ie().userDeposits;return i.a.createElement("div",{className:"dashboard-container"},!e&&i.a.createElement("div",{className:"dashboard-info"},i.a.createElement("img",{src:"splash.svg",alt:"connect your wallet",className:"dashboard-splash"}),Le.b.DASHBOARD_INFO),e&&0===n.length&&0===t.length&&i.a.createElement("div",{className:"dashboard-info"},i.a.createElement("img",{src:"splash.svg",alt:"connect your wallet",className:"dashboard-splash"}),Le.b.NO_LOANS_NO_DEPOSITS),e&&i.a.createElement(Re.a,{gutter:Le.a},n.length>0&&i.a.createElement(Pe.a,{md:24,xl:12,span:24},i.a.createElement(Nt,null)),t.length>0&&i.a.createElement(Pe.a,{md:24,xl:12,span:24},i.a.createElement(Tt,null))))}),Bt=function(e){var t=H(e.reserve.liquidityMint),n=$(e.reserve.liquidityMint),a=n.balance,r=n.balanceInUSD,o=J(e.reserve),c=o.balance,u=o.balanceInUSD,s=Object(G.h)(e.reserve);return i.a.createElement(l.b,{to:"/deposit/".concat(e.address.toBase58())},i.a.createElement("div",{className:"deposit-item"},i.a.createElement("span",{style:{display:"flex"}},i.a.createElement(Ue,{mintAddress:e.reserve.liquidityMint}),t),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(a))," ",t),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(r)))),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(c))," ",t),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(u)))),i.a.createElement("div",null,O.f.format(s)),i.a.createElement("div",null,i.a.createElement(we.a,{type:"primary"},i.a.createElement("span",null,Le.b.DEPOSIT_ACTION)))))},Mt=(n(753),function(){var e=Q().reserveAccounts;return i.a.createElement("div",{className:"flexColumn"},i.a.createElement(De.a,null,i.a.createElement("div",{className:"deposit-item deposit-header"},i.a.createElement("div",null,"Asset"),i.a.createElement("div",null,"Your wallet balance"),i.a.createElement("div",null,"Your balance in Oyster"),i.a.createElement("div",null,"APY"),i.a.createElement("div",null)),e.map((function(e){return i.a.createElement(Bt,{reserve:e.info,address:e.pubkey})}))))}),Lt=(n(754),n(1092)),Ct=(n(755),function(e){var t=Object(d.d)(),n=Object(s.c)().wallet,a=Object(r.useState)(!1),o=Object(E.a)(a,2),c=o[0],l=o[1],u=Object(r.useState)(!1),m=Object(E.a)(u,2),f=m[0],b=m[1],y=e.reserve,g=e.address,h=H(null===y||void 0===y?void 0:y.liquidityMint),O=$(null===y||void 0===y?void 0:y.liquidityMint),w=O.accounts,j=O.balance,k=O.balanceLamports,A=Object(r.useCallback)((function(e){return"string"===typeof e?parseFloat(e)/j*100:(e*j/100).toFixed(2)}),[j]),S=oe(A),T=S.value,x=S.setValue,N=S.pct,I=S.setPct,B=S.type,M=Object(r.useCallback)((function(){l(!0),Object(p.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,lt(w[0],B===Z.Percent?N*k/100:Math.ceil(k*(parseFloat(T)/j)),y,g,t,n);case 3:x(""),b(!0),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:return e.prev=9,l(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,7,9,12]])})))()}),[t,x,k,j,n,T,N,B,y,w,g]);return i.a.createElement(De.a,{className:e.className,bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},f?i.a.createElement(yt,{onClose:function(){return b(!1)}}):i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},i.a.createElement("div",{className:"deposit-input-title"},Le.b.DEPOSIT_QUESTION),i.a.createElement("div",{className:"token-input"},i.a.createElement(Ue,{mintAddress:null===y||void 0===y?void 0:y.liquidityMint}),i.a.createElement(Xe,{value:T,onChange:x,autoFocus:!0,style:{fontSize:20,boxShadow:"none",borderColor:"transparent",outline:"transparent"},placeholder:"0.00"}),i.a.createElement("div",null,h)),i.a.createElement(Lt.a,{marks:Le.e,value:N,onChange:I}),i.a.createElement(ht,{type:"primary",onClick:M,loading:c,disabled:0===w.length},Le.b.DEPOSIT_ACTION)))}),_t=(n(756),function(e){var t=H(e.reserve.liquidityMint),n=$(e.reserve.liquidityMint).balance,a=J(e.reserve).balance;return i.a.createElement(De.a,{className:e.className,bodyStyle:{display:"flex",justifyContent:"space-around"}},i.a.createElement("div",{className:"deposit-info-line-item "},i.a.createElement("div",null,"Your balance in Oyster"),i.a.createElement("div",null,O.e.format(a)," ",t)),i.a.createElement("div",{className:"deposit-info-line-item "},i.a.createElement("div",null,"Your wallet balance"),i.a.createElement("div",null,O.e.format(n)," ",t)),i.a.createElement("div",{className:"deposit-info-line-item "},i.a.createElement("div",null,"Health factor"),i.a.createElement("div",null,"--")))}),qt=function(){var e=Y(Object(u.h)().id),t=null===e||void 0===e?void 0:e.info;return t&&e?i.a.createElement("div",{className:"deposit-reserve"},i.a.createElement(_t,{className:"deposit-reserve-item",reserve:t,address:e.pubkey}),i.a.createElement("div",{className:"deposit-reserve-container"},i.a.createElement(Ct,{className:"deposit-reserve-item deposit-reserve-item-left",reserve:t,address:e.pubkey}),i.a.createElement(kt,{className:"deposit-reserve-item deposit-reserve-item-right",reserve:e,mode:ot.Deposit}))):null},Rt=(n(757),wt.a.Text),Pt=function(e){var t=e.reserve,n=e.address,a=H(null===t||void 0===t?void 0:t.liquidityMint),o=$(e.reserve.liquidityMint),c=o.balance,u=o.balanceInUSD,s=J(e.reserve),f=s.balance,b=s.balanceInUSD,y=function(e){var t=Object(d.d)(),n=re(e).userObligationsByReserve,a=Object(r.useState)({borrowedLamports:0,borrowedInUSD:0,colateralInUSD:0,ltv:0,health:0}),i=Object(E.a)(a,2),o=i[0],c=i[1],l=Y(e),u=Object(m.h)(null===l||void 0===l?void 0:l.info.liquidityMint);return Object(r.useEffect)((function(){c({borrowedLamports:0,borrowedInUSD:0,colateralInUSD:0,ltv:0,health:0}),Object(p.a)(v.a.mark((function e(){var a,r,i,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.e)(t,n.map((function(e){return e.obligation.info.tokenMint.toBase58()})),"single");case 2:a=e.sent,r=a.keys,a.array.forEach((function(e,t){var n=r[t];m.d.add(new j.d(n),e,m.b)})),i={borrowedLamports:0,borrowedInUSD:0,colateralInUSD:0,ltv:0,health:0},o=0,n.forEach((function(e){var t=Object(O.p)(e.obligation.info.borrowAmountWad).toNumber(),n=e.userAccounts.reduce((function(e,t){return e+t.info.amount.toNumber()}),0),a=m.d.get(e.obligation.info.tokenMint);i.borrowedLamports+=t*(n/(null===a||void 0===a?void 0:a.info.supply.toNumber())),i.borrowedInUSD+=e.obligation.info.borrowedInQuote,i.colateralInUSD+=e.obligation.info.collateralInQuote,o=e.obligation.info.liquidationThreshold}),0),1===n.length?(i.ltv=n[0].obligation.info.ltv,i.health=n[0].obligation.info.health):(i.ltv=100*i.borrowedInUSD/i.colateralInUSD,i.health=i.colateralInUSD*o/100/i.borrowedInUSD,i.health=Number.isFinite(i.health)?i.health:0),c(i);case 11:case"end":return e.stop()}}),e)})))()}),[t,n,c]),Object(A.a)({borrowed:Object(O.i)(o.borrowedLamports,u)},o)}(n),g=y.borrowed,h=y.borrowedInUSD,w=y.ltv,k=y.health,S=le(n),T=S.totalInQuote,x=S.borrowingPower;return i.a.createElement(De.a,{className:e.className,title:i.a.createElement("div",{style:{display:"flex",alignItems:"center",fontSize:"1.2rem",justifyContent:"center"}},"Your Information")},i.a.createElement("h3",null,"Borrows"),i.a.createElement("div",{className:"card-row"},i.a.createElement(Rt,{type:"secondary",className:"card-cell "},"Borrowed"),i.a.createElement("div",{className:"card-cell "},i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(g))," ",a),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(h))))),i.a.createElement("div",{className:"card-row"},i.a.createElement(Rt,{type:"secondary",className:"card-cell "},"Health factor:"),i.a.createElement("div",{className:"card-cell "},k.toFixed(2))),i.a.createElement("div",{className:"card-row"},i.a.createElement(Rt,{type:"secondary",className:"card-cell "},"Loan to value:"),i.a.createElement("div",{className:"card-cell "},O.e.format(w))),i.a.createElement("div",{className:"card-row"},i.a.createElement(Rt,{type:"secondary",className:"card-cell "},"Available to you:"),i.a.createElement("div",{className:"card-cell "},i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(x))," ",a),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(T))))),i.a.createElement("h3",null,"Deposits"),i.a.createElement("div",{className:"card-row"},i.a.createElement(Rt,{type:"secondary",className:"card-cell "},"Wallet balance:"),i.a.createElement("div",{className:"card-cell "},i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(c))," ",a),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(u))))),i.a.createElement("div",{className:"card-row"},i.a.createElement(Rt,{type:"secondary",className:"card-cell "},"You already deposited:"),i.a.createElement("div",{className:"card-cell "},i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(f))," ",a),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(b))))),i.a.createElement("div",{className:"card-row",style:{marginTop:20,justifyContent:"space-evenly"}},i.a.createElement(l.b,{to:"/deposit/".concat(n)},i.a.createElement(we.a,null,"Deposit")),i.a.createElement(l.b,{to:"/borrow/".concat(n)},i.a.createElement(we.a,null,"Borrow")),i.a.createElement(l.b,{to:"/withdraw/".concat(n)},i.a.createElement(we.a,null,"Withdraw")),i.a.createElement(l.b,{to:"/repay/".concat(n)},i.a.createElement(we.a,null,"Repay"))))},Dt=(n(758),n(759),function(e){var t=Object(r.useRef)(),n=Object(r.useRef)(),a=Object(r.useState)(1),o=Object(E.a)(a,2),c=o[0],l=o[1],u=e.percent,s=e.title,d=e.style,m=e.color,f=e.showPercent,b=d.height,v=Object(r.useCallback)((function(){var e,t=(null===(e=n.current)||void 0===e?void 0:e.parentNode).offsetWidth;l(t<b?t/b:1)}),[b]);return Object(r.useEffect)((function(){return v(),window.addEventListener("resize",v),function(){window.removeEventListener("resize",v)}}),[v]),Object(r.useEffect)((function(){var e=0;return Wt(t.current,u,(function(t){e=t}),m),function(){cancelAnimationFrame(e)}}),[u,m]),i.a.createElement("div",{className:"waterWave",ref:n,style:{transform:"scale(".concat(c,")")}},i.a.createElement("div",{style:{width:b,height:b,overflow:"hidden"}},i.a.createElement("canvas",{className:"waterWaveCanvasWrapper",ref:t,width:2*b,height:2*b})),i.a.createElement("div",{className:"text",style:{width:b}},s,i.a.createElement("h4",null,f&&"".concat(u.toFixed(2),"%"))))}),Wt=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#1890FF",r=t/100;if(e&&r){var i=e.getContext("2d");if(i){var o=e.width,c=e.height,l=o/2,u=2,s=l-u;i.beginPath(),i.lineWidth=2*u;var d=o-u,m=d/8,f=.2,b=f,v=u,p=0,y=0,E=.005,g=l-u,h=-Math.PI/2,O=!0,w=[l+g*Math.cos(h),l+g*Math.sin(h)];i.strokeStyle=a,i.moveTo(w[0],w[1]);var j=function(){i.beginPath(),i.save();for(var e=[],t=v;t<=v+d;t+=20/d){var n=p+(v+t)/m,a=Math.sin(n)*b,r=t,o=2*s*(1-y)+(l-s)-m*a;i.lineTo(r,o),e.push([r,o])}var u=e.shift();if(u){i.lineTo(v+d,c),i.lineTo(v,c),i.lineTo(u[0],u[1]);var f=i.createLinearGradient(0,0,0,c);f.addColorStop(0,"#ffffff"),f.addColorStop(1,"#1890FF"),i.fillStyle=f,i.fill(),i.restore()}},k=function e(){if(i.clearRect(0,0,o,c),O)O=!1,i.globalCompositeOperation="destination-over",i.beginPath(),i.save(),i.arc(l,l,l-3*u,0,2*Math.PI,!0),i.stroke(),i.restore(),i.clip(),i.fillStyle="#1890FF";else{if(r>=.85){if(b>f/4)b-=.01*f}else if(r<=.1){if(b<1.5*f)b+=.01*f}else{if(b<=f)b+=.01*f;if(b>=f)b-=.01*f}r-y>0&&(y+=E),r-y<0&&(y-=E),p+=.07,j()}n(requestAnimationFrame(e))};k()}}},Ut=function(e){var t,n=null===(t=e.reserve.liquidityMint)||void 0===t?void 0:t.toBase58(),a=Object(m.h)(n),o=Object(O.i)(e.reserve.availableLiquidity.toNumber(),a),c=100*o/(o+Object(r.useMemo)((function(){return Object(O.i)(Object(O.p)(e.reserve.borrowedLiquidityWad),a)}),[e.reserve,a]));return i.a.createElement(Dt,{style:{height:300},showPercent:!1,title:i.a.createElement(We.a,{title:"Utilization",value:c,suffix:"%",precision:2}),percent:c})},Ft=function(e){var t,n=null===(t=e.reserve.liquidityMint)||void 0===t?void 0:t.toBase58(),a=Object(m.h)(n),o=U(n).price,c=Object(O.i)(e.reserve.availableLiquidity.toNumber(),a),l=o*c,u=Object(r.useMemo)((function(){return Object(O.i)(Object(O.p)(e.reserve.borrowedLiquidityWad),a)}),[e.reserve,a]),s=o*u,d=Object(r.useMemo)((function(){return Object(G.h)(e.reserve)}),[e.reserve]),f=e.reserve.config.liquidationThreshold,b=e.reserve.config.liquidationBonus,v=e.reserve.config.loanToValueRatio;return i.a.createElement(De.a,{className:e.className,title:i.a.createElement(i.a.Fragment,null,i.a.createElement(Ue,{style:{marginRight:0,marginTop:0,position:"absolute",left:15},mintAddress:n,size:30}),Le.b.RESERVE_STATUS_TITLE),bodyStyle:{display:"flex",justifyContent:"center",alignItems:"center"}},i.a.createElement("div",{className:"flexColumn"},i.a.createElement(Re.a,{gutter:Le.a},i.a.createElement(Pe.a,{span:12},i.a.createElement(We.a,{title:"Available Liquidity",value:c,valueRender:function(e){return i.a.createElement("div",null,e,i.a.createElement("div",{className:"dashboard-amount-quote-stat"},"$",O.e.format(l)))},precision:2})),i.a.createElement(Pe.a,{span:12},i.a.createElement(We.a,{title:"Total Borrowed",value:u,valueRender:function(e){return i.a.createElement("div",null,e,i.a.createElement("div",{className:"dashboard-amount-quote-stat"},"$",O.e.format(s)))},precision:2}))),i.a.createElement(Re.a,{gutter:Le.a},i.a.createElement(Pe.a,{span:24,style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},i.a.createElement(Ut,{reserve:e.reserve}))),i.a.createElement(Re.a,{gutter:Le.a},i.a.createElement(Pe.a,{span:6},i.a.createElement(We.a,{title:"Maximum LTV",className:"small-statisitc",value:v,precision:2,suffix:"%"})),i.a.createElement(Pe.a,{span:6},i.a.createElement(We.a,{title:"Liquidation threashold",className:"small-statisitc",value:f,precision:2,suffix:"%"})),i.a.createElement(Pe.a,{span:6},i.a.createElement(We.a,{title:"Liquidation penalty",className:"small-statisitc",value:b,precision:2,suffix:"%"})),i.a.createElement(Pe.a,{span:6},i.a.createElement(We.a,{title:"APY",className:"small-statisitc",value:100*d,precision:2,suffix:"%"})))))},Kt=function(){var e=Y(Object(u.h)().id),t=null===e||void 0===e?void 0:e.info;return t&&e?i.a.createElement("div",{className:"flexColumn"},i.a.createElement(Re.a,{gutter:Le.a},i.a.createElement(Pe.a,{sm:24,md:12,lg:14,xl:15,xxl:18},i.a.createElement(Ft,{reserve:t,address:e.pubkey})),i.a.createElement(Pe.a,{sm:24,md:12,lg:10,xl:9,xxl:6},i.a.createElement(Pt,{className:"user-lending-card",reserve:t,address:e.pubkey})))):null},Gt=(n(760),n(761),function(e){var t=Object(d.d)(),n=Object(s.c)().wallet,a=Object(r.useState)(!1),o=Object(E.a)(a,2),c=o[0],l=o[1],u=Object(r.useState)(!1),m=Object(E.a)(u,2),f=m[0],b=m[1],y=e.reserve,g=e.address,h=H(null===y||void 0===y?void 0:y.liquidityMint),O=$(null===y||void 0===y?void 0:y.collateralMint),w=O.balanceLamports,j=O.accounts,k=J(y).balance,A=Object(r.useCallback)((function(e){return"string"===typeof e?parseFloat(e)/k*100:(e*k/100).toFixed(2)}),[k]),S=oe(A),T=S.value,x=S.setValue,N=S.pct,I=S.setPct,B=S.type,M=Object(r.useCallback)((function(){l(!0),Object(p.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,dt(j[0],B===Z.Percent?N*w/100:Math.ceil(w*(parseFloat(T)/k)),y,g,t,n);case 3:x(""),b(!0),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:return e.prev=9,l(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,7,9,12]])})))()}),[g,k,w,t,j,N,y,x,B,T,n]);return i.a.createElement(De.a,{className:e.className,bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},f?i.a.createElement(yt,{onClose:function(){return b(!1)}}):i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},i.a.createElement("div",{className:"withdraw-input-title"},Le.b.WITHDRAW_QUESTION),i.a.createElement("div",{className:"token-input"},i.a.createElement(Ue,{mintAddress:null===y||void 0===y?void 0:y.liquidityMint}),i.a.createElement(Xe,{value:T,onChange:x,autoFocus:!0,style:{fontSize:20,boxShadow:"none",borderColor:"transparent",outline:"transparent"},placeholder:"0.00"}),i.a.createElement("div",null,h)),i.a.createElement(Lt.a,{marks:Le.e,value:N,onChange:I}),i.a.createElement(ht,{type:"primary",onClick:M,loading:c,disabled:0===j.length},0===j.length?Le.b.NO_DEPOSITS:Le.b.WITHDRAW_ACTION)))}),zt=function(){var e=Y(Object(u.h)().id),t=null===e||void 0===e?void 0:e.info;return t&&e?i.a.createElement("div",{className:"deposit-reserve"},i.a.createElement(_t,{className:"deposit-reserve-item",reserve:t,address:e.pubkey}),i.a.createElement("div",{className:"deposit-reserve-container"},i.a.createElement(Gt,{className:"deposit-reserve-item deposit-reserve-item-left",reserve:t,address:e.pubkey}),i.a.createElement(kt,{className:"deposit-reserve-item deposit-reserve-item-right",reserve:e,mode:ot.Deposit}))):null},Vt=function(){var e=Object(d.d)(),t=Object(s.c)().wallet,n=Object(r.useCallback)((function(){e.requestAirdrop(t.publicKey,2*j.c).then((function(){Object(Ze.a)({message:Le.b.ACCOUNT_FUNDED,type:"success"})}))}),[t,e]);return i.a.createElement("div",{className:"flexColumn",style:{flex:1}},i.a.createElement(De.a,{title:"Faucet",bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"},style:{flex:1}},i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center"}},i.a.createElement("div",{className:"deposit-input-title",style:{margin:10}},Le.b.FAUCET_INFO),i.a.createElement(ht,{type:"primary",onClick:n},Le.b.GIVE_SOL))))},Qt=(n(762),function(e){var t=Object(d.d)(),n=Object(s.c)().wallet,a=Object(r.useState)(!1),o=Object(E.a)(a,2),c=o[0],l=o[1],u=Object(r.useState)(!1),f=Object(E.a)(u,2),b=f[0],y=f[1],g=e.borrowReserve,h=e.obligation,w=Object(m.h)(g.info.liquidityMint),j=Object(O.p)(h.info.borrowAmountWad).toNumber(),k=Object(O.i)(j,w),A=e.collateralReserve,S=H(null===g||void 0===g?void 0:g.info.liquidityMint),T=$(g.info.liquidityMint).accounts,x=function(e){var t=Object(z.a)().userAccounts,n="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),a=t.findIndex((function(e){return e.info.mint.toBase58()===n}));if(-1!==a)return t[a]}(null===h||void 0===h?void 0:h.info.tokenMint),N=Object(r.useCallback)((function(e){return"string"===typeof e?parseFloat(e)/k*100:(e*k/100).toFixed(2)}),[k]),I=oe(N),B=I.value,M=I.setValue,L=I.pct,C=I.setPct,_=I.type,q=Object(r.useCallback)((function(){A&&h&&g&&x&&(l(!0),Object(p.a)(v.a.mark((function e(){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=_===Z.Percent?L*j/100:Math.ceil(j*(parseFloat(B)/k)),e.next=4,st(T[0],a,h.account,x,g,A,t,n);case 4:M(""),y(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Object(Ze.a)({message:"Unable to repay loan.",type:"error",description:e.t0.message});case 11:return e.prev=11,l(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))())}),[L,B,k,j,_,t,n,h,A,g,T,x,M]);return i.a.createElement(De.a,{className:e.className,bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},b?i.a.createElement(yt,{onClose:function(){return y(!1)}}):i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},i.a.createElement("div",{className:"repay-input-title"},Le.b.REPAY_QUESTION),i.a.createElement("div",{className:"token-input"},i.a.createElement(Ue,{mintAddress:null===g||void 0===g?void 0:g.info.liquidityMint}),i.a.createElement(Xe,{value:B,onChange:M,autoFocus:!0,style:{fontSize:20,boxShadow:"none",borderColor:"transparent",outline:"transparent"},placeholder:"0.00"}),i.a.createElement("div",null,S)),i.a.createElement(Lt.a,{marks:Le.e,value:L,onChange:C}),i.a.createElement("div",{className:"repay-input-title"},Le.b.COLLATERAL),i.a.createElement(pt,{reserve:g.info,collateralReserve:null===A||void 0===A?void 0:A.pubkey.toBase58(),disabled:!0}),i.a.createElement(ht,{type:"primary",onClick:q,loading:c,disabled:0===T.length},Le.b.REPAY_ACTION)))}),Yt=(n(763),function(){var e=Object(u.h)(),t=e.reserve,n=e.obligation,a=ne(n),r=Y(n?null===a||void 0===a?void 0:a.info.borrowReserve:t),o=Y(n?null===a||void 0===a?void 0:a.info.collateralReserve:t);return(null===r||void 0===r?void 0:r.info)&&r&&a?i.a.createElement("div",{className:"repay-reserve"},i.a.createElement("div",{className:"repay-reserve-container"},i.a.createElement(Qt,{className:"repay-reserve-item repay-reserve-item-left",borrowReserve:r,collateralReserve:o,obligation:a}),i.a.createElement(kt,{className:"repay-reserve-item repay-reserve-item-right",reserve:r,mode:ot.Borrow}))):null}),Ht=function(e){var t=e.item.info,n=m.d.get(t.borrowReserve),a=m.d.get(t.collateralReserve),o=Object(m.h)(n.info.liquidityMint),c=Object(m.h)(a.info.liquidityMint),u=Object(O.i)(Object(O.p)(t.borrowAmountWad),o),s=Object(r.useMemo)((function(){return Object(G.g)(n.info)}),[n]),d=Object(G.j)(t.depositedCollateral,n.info),f=Object(O.i)(d,c),b=H(null===n||void 0===n?void 0:n.info.liquidityMint),v=H(null===a||void 0===a?void 0:a.info.liquidityMint);return i.a.createElement(l.b,{to:"/liquidate/".concat(e.item.account.pubkey.toBase58())},i.a.createElement("div",{className:"liquidate-item"},i.a.createElement("span",{style:{display:"flex"}},i.a.createElement("div",{style:{display:"flex"}},i.a.createElement(Ue,{mintAddress:null===a||void 0===a?void 0:a.info.liquidityMint,style:{marginRight:"-0.5rem"}}),i.a.createElement(Ue,{mintAddress:null===n||void 0===n?void 0:n.info.liquidityMint})),v,"\u2192",b),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(u))," ",b),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(t.borrowedInQuote)))),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(f))," ",v),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(t.collateralInQuote)))),i.a.createElement("div",null,O.f.format(s)),i.a.createElement("div",null,O.f.format(t.ltv/100)),i.a.createElement("div",null,t.health.toFixed(2)),i.a.createElement("div",null,i.a.createElement(we.a,{type:"primary"},i.a.createElement("span",null,Le.b.LIQUIDATE_ACTION)))))},$t=(n(764),function(){var e=te().obligations,t=Object(r.useMemo)((function(){return e.filter((function(e){return e.info.health<1}))}),[e]),n=Object(r.useMemo)((function(){return t.reduce((function(e,t){return e+t.info.collateralInQuote}),0)}),[t]),a=Object(r.useMemo)((function(){return t.length}),[t]),o=Object(r.useMemo)((function(){return t.length/e.length}),[t,e]),c=Object(r.useMemo)((function(){return t.reduce((function(e,t){return e.set(t.info.repayName,(e.get(t.info.collateralName)||0)+t.info.collateralInQuote),e}),new Map)}),[t]),l=Object(r.useMemo)((function(){return Object(y.a)(c.keys())}),[c]);return i.a.createElement("div",{className:"liquidate-container"},0===t.length?i.a.createElement("div",{className:"liquidate-info"},Le.b.LIQUIDATE_NO_LOANS):i.a.createElement("div",{className:"flexColumn"},i.a.createElement(Re.a,{gutter:Le.a},i.a.createElement(Pe.a,{span:24},i.a.createElement(De.a,null,i.a.createElement(wt.a,null,Le.b.LIQUIDATION_INFO)))),i.a.createElement(Re.a,{gutter:Le.a},i.a.createElement(Pe.a,{xs:24,xl:5},i.a.createElement(De.a,null,i.a.createElement(We.a,{title:"Value at risk",value:n,precision:2,valueStyle:{color:"#3f8600"},prefix:"$"}))),i.a.createElement(Pe.a,{xs:24,xl:5},i.a.createElement(De.a,null,i.a.createElement(We.a,{title:"Loans at risk",value:a,precision:0}))),i.a.createElement(Pe.a,{xs:24,xl:5},i.a.createElement(De.a,null,i.a.createElement(We.a,{title:"% loans at risk",value:100*o,precision:2,suffix:"%"}))),i.a.createElement(Pe.a,{xs:24,xl:9},i.a.createElement(De.a,null,i.a.createElement(Ke,{title:"At risk loan composition",name:function(e){return e},getPct:function(e){return(c.get(e)||0)/n},items:l})))),i.a.createElement(Re.a,{gutter:Le.a},i.a.createElement(Pe.a,{span:24},i.a.createElement(De.a,{className:"card-fill"},i.a.createElement("div",{className:"liquidate-item liquidate-header"},i.a.createElement("div",null,Le.b.TABLE_TITLE_ASSET),i.a.createElement("div",null,Le.b.TABLE_TITLE_LOAN_BALANCE),i.a.createElement("div",null,Le.b.TABLE_TITLE_COLLATERAL_BALANCE),i.a.createElement("div",null,Le.b.TABLE_TITLE_APY),i.a.createElement("div",null,Le.b.TABLE_TITLE_LTV),i.a.createElement("div",null,Le.b.TABLE_TITLE_HEALTH),i.a.createElement("div",null,Le.b.TABLE_TITLE_ACTION)),t.map((function(e){return i.a.createElement(Ht,{key:e.account.pubkey.toBase58(),item:e})})))))))}),Jt=n(286),Xt=n.n(Jt),Zt=(n(765),function(e){var t=Object(d.d)(),n=Object(s.c)().wallet,a=e.repayReserve,o=e.withdrawReserve,c=e.obligation,l=Object(r.useState)(!1),u=Object(E.a)(l,2),m=u[0],f=u[1],b=Object(r.useState)(!1),y=Object(E.a)(b,2),g=y[0],h=y[1],w=$(null===a||void 0===a?void 0:a.info.liquidityMint).accounts,j=Object(r.useCallback)((function(){o&&(f(!0),Object(p.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ft(t,n,w[0],Object(O.p)(c.info.borrowAmountWad).toNumber(),c.account,a,o);case 3:h(!0),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:return e.prev=8,f(!1),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[0,6,8,11]])})))())}),[o,w,c,a,n,t]);return i.a.createElement(Xt.a,{className:e.className,bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},g?i.a.createElement(yt,{onClose:function(){return h(!1)}}):i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},i.a.createElement("div",{className:"liquidate-input-title"},Le.b.SELECT_COLLATERAL),i.a.createElement(pt,{reserve:a.info,collateralReserve:null===o||void 0===o?void 0:o.pubkey.toBase58(),disabled:!0}),i.a.createElement(we.a,{type:"primary",onClick:j,disabled:0===w.length,loading:m},Le.b.LIQUIDATE_ACTION),i.a.createElement(Et,null)))}),en=(n(790),function(){var e=ne(Object(u.h)().id),t=Y(null===e||void 0===e?void 0:e.info.borrowReserve),n=Y(null===e||void 0===e?void 0:e.info.collateralReserve);return e&&t?i.a.createElement("div",{className:"liquidate-reserve"},i.a.createElement("div",{className:"liquidate-reserve-container"},i.a.createElement(Zt,{className:"liquidate-reserve-item liquidate-reserve-item-left",obligation:e,withdrawReserve:n,repayReserve:t}),i.a.createElement(kt,{className:"liquidate-reserve-item liquidate-reserve-item-right",reserve:t,mode:ot.Deposit}))):null}),tn=(n(791),function(e){var t=H(e.reserve.liquidityMint),n=U(e.reserve.liquidityMint.toBase58()).price,a=Object(G.g)(e.reserve),r=le(e.address,!1,!1),o=r.totalInQuote,c=r.borrowingPower;return i.a.createElement(l.b,{to:"/margin/".concat(e.address.toBase58())},i.a.createElement("div",{className:"choose-margin-item"},i.a.createElement("span",{style:{display:"flex"}},i.a.createElement(Ue,{mintAddress:e.reserve.liquidityMint}),t),i.a.createElement("div",null,"$",O.e.format(n)),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(c))," ",t),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(o)))),i.a.createElement("div",null,O.f.format(a)),i.a.createElement("div",null,i.a.createElement(we.a,{type:"primary"},i.a.createElement("span",null,Le.b.MARGIN_TRADE_ACTION)))))}),nn=function(){var e=Q().reserveAccounts;return i.a.createElement("div",{className:"flexColumn"},i.a.createElement(De.a,null,i.a.createElement("div",{className:"choose-margin-item choose-margin-header"},i.a.createElement("div",null,Le.b.TABLE_TITLE_ASSET),i.a.createElement("div",null,"Serum Dex Price"),i.a.createElement("div",null,Le.b.TABLE_TITLE_BUYING_POWER),i.a.createElement("div",null,Le.b.TABLE_TITLE_APY),i.a.createElement("div",null)),e.map((function(e){return i.a.createElement(tn,{reserve:e.info,address:e.pubkey})}))))},an=(n(792),n(271));function rn(e){var t,n,a,r,i=e.collateral.type,o=e.asset.type,c=e.collateral.value||0,l=e.asset.value||0,u=C([null===i||void 0===i||null===(t=i.info)||void 0===t||null===(n=t.liquidityMint)||void 0===n?void 0:n.toBase58(),null===o||void 0===o||null===(a=o.info)||void 0===a||null===(r=a.liquidityMint)||void 0===r?void 0:r.toBase58()]),s=ie().userDeposits.find((function(e){var t,n;return e.reserve.info.liquidityMint.toBase58()===(null===i||void 0===i||null===(t=i.info)||void 0===t||null===(n=t.liquidityMint)||void 0===n?void 0:n.toBase58())}));return{enrichedPools:W(u?[u]:[]),collateralDeposit:s,collType:i,desiredType:o,collValue:c,desiredValue:l,leverage:e.leverage,pool:u}}n(793);var on=function(e){var t=e.showBalance,n=e.mintAddress,a=e.name,r=e.icon,o=Object(m.h)(n),c=Object(m.f)(n),l=0,u=!1;return t&&c&&o&&(u=(l=c.info.amount.toNumber()/Math.pow(10,o.decimals))>0),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{title:n,key:n,style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},i.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r||i.a.createElement(Ue,{mintAddress:n}),a),t?i.a.createElement("span",{title:l.toString(),key:n,className:"token-balance"},"\xa0 ",u?l<.001?"<0.001":l.toFixed(3):"-"):null))},cn=Be.a.Option;function ln(e){var t,n,a,o,c,l=Q().reserveAccounts,u=Object(d.e)().tokenMap,s=Object(r.useState)(),f=Object(E.a)(s,2),b=f[0],v=f[1],p=Object(r.useState)(0),y=Object(E.a)(p,2),g=y[0],h=y[1],w=Object(r.useState)(""),j=Object(E.a)(w,2),k=j[0],A=j[1],S=ie();Object(r.useEffect)((function(){var e=m.d.byParser(B.LendingReserveParser).find((function(e){return e===b}))||"",t=m.d.get(e);if(t){var n=S.userDeposits.find((function(e){return e.reserve.info.liquidityMint.toBase58()===t.info.liquidityMint.toBase58()}));h(n?n.info.amount:0)}}),[b,S]);var T=m.d.get(e.reserve.lendingMarket);if(!T)return null;var x=!(null===(t=e.reserve)||void 0===t||null===(n=t.liquidityMint)||void 0===n?void 0:n.equals(null===T||void 0===T||null===(a=T.info)||void 0===a?void 0:a.quoteMint)),N=l.filter((function(t){return t.info!==e.reserve})).filter((function(e){return!x||e.info.liquidityMint.equals(T.info.quoteMint)})).map((function(e){var t=e.info.liquidityMint.toBase58(),n=e.pubkey.toBase58(),a=Object(O.l)(u,t);return i.a.createElement(cn,{key:n,value:n,name:a,title:n},i.a.createElement("div",{key:n,style:{display:"flex",alignItems:"center"}},i.a.createElement(Ue,{mintAddress:t}),a))}));return i.a.createElement(De.a,{className:"ccy-input",style:{borderRadius:20},bodyStyle:{padding:0}},i.a.createElement("div",{className:"ccy-input-header"},i.a.createElement("div",{className:"ccy-input-header-left"},e.title),!e.hideBalance&&i.a.createElement("div",{className:"ccy-input-header-right",onClick:function(t){return e.onInputChange&&e.onInputChange(g)}},"Balance: ",g.toFixed(6))),i.a.createElement("div",{className:"ccy-input-header",style:{padding:"0px 10px 5px 7px"}},i.a.createElement(Xe,{value:parseFloat(k||"0.00")===e.amount?k:null===(o=e.amount)||void 0===o||null===(c=o.toFixed(6))||void 0===c?void 0:c.toString(),onChange:function(t){e.onInputChange&&parseFloat(t)!==e.amount&&(t&&parseFloat(t)?e.onInputChange(parseFloat(t)):e.onInputChange(null)),A(t)},style:{fontSize:20,boxShadow:"none",borderColor:"transparent",outline:"transparent"},placeholder:"0.00"}),i.a.createElement("div",{className:"ccy-input-header-right",style:{display:"flex"}},e.showLeverageSelector&&i.a.createElement(Be.a,{size:"large",showSearch:!0,style:{width:80},placeholder:"CCY",value:e.leverage,onChange:function(t){e.onLeverage&&e.onLeverage(t)},notFoundContent:null,onSearch:function(t){e.onLeverage&&t.match(/^\d+$/)&&e.onLeverage(parseFloat(t))},filterOption:function(e,t){var n;return(null===t||void 0===t||null===(n=t.name)||void 0===n?void 0:n.toLowerCase().indexOf(e.toLowerCase()))>=0}},[1,2,3,4,5].map((function(e){return i.a.createElement(cn,{key:e,value:e,name:e+"x",title:e+"x"},i.a.createElement("div",{key:e,style:{display:"flex",alignItems:"center"}},e+"x"))}))),e.disabled?i.a.createElement(on,{key:e.reserve.liquidityMint.toBase58(),name:Object(O.l)(u,e.reserve.liquidityMint.toBase58()),mintAddress:e.reserve.liquidityMint.toBase58(),showBalance:!1}):i.a.createElement(Be.a,{size:"large",showSearch:!0,style:{minWidth:150},placeholder:"CCY",value:b,onChange:function(t){e.onCollateralReserve&&e.onCollateralReserve(t),v(t)},filterOption:function(e,t){var n;return(null===t||void 0===t||null===(n=t.name)||void 0===n?void 0:n.toLowerCase().indexOf(e.toLowerCase()))>=0}},N))))}var un=n(1108);function sn(e){var t=e.newPosition,n=e.setNewPosition,a=e.collateralDeposit,r=e.enrichedPools;if(n(t),a&&r.length){var i=r[0].liquidityB/r[0].liquidityA,o=(t.collateral.value||0)*t.leverage*i;n(Object(A.a)(Object(A.a)({},t),{},{asset:Object(A.a)(Object(A.a)({},t.asset),{},{value:o})}))}}function dn(e){var t=e.lendingReserve,n=e.newPosition,a=e.setNewPosition,o=Object(r.useState)(!1),c=Object(E.a)(o,2),l=c[0],u=c[1],d=rn(n),f=d.enrichedPools,b=d.collateralDeposit;!function(e){var t=e.newPosition,n=e.setNewPosition,a=rn(t),i=a.enrichedPools,o=a.collateralDeposit,c=a.collType,l=a.desiredType,u=a.collValue,s=a.desiredValue,d=a.leverage;Object(r.useEffect)((function(){if(c)if(o){if(l&&t.asset.value&&i&&0!==i.length){var e=i[0].liquidityB/i[0].liquidityA,a=t.leverage,r=o.info.amount*e,d=s/a;if(d>r)n(Object(A.a)(Object(A.a)({},t),{},{error:Le.b.NOT_ENOUGH_MARGIN_MESSAGE}));else if(d>u)n(Object(A.a)(Object(A.a)({},t),{},{error:Le.b.SET_MORE_MARGIN_MESSAGE}));else{var m=i[0].liquidityA,f=i[0].liquidityB,b=m/f,v=(m-s/e)/(f+s),p=Math.abs(100-v/b*100);n(100/a<p&&1!==a?Object(A.a)(Object(A.a)({},t),{},{error:Le.b.LEVERAGE_LIMIT_MESSAGE}):Object(A.a)(Object(A.a)({},t),{},{error:""}))}}}else n(Object(A.a)(Object(A.a)({},t),{},{error:Le.b.NO_DEPOSIT_MESSAGE}));else n(Object(A.a)(Object(A.a)({},t),{},{error:Le.b.NO_COLL_TYPE_MESSAGE}))}),[c,l,s,d,i,u,o])}({newPosition:n,setNewPosition:a});var v=Object(s.c)(),p=v.wallet,y=v.connected;return i.a.createElement(De.a,{className:"new-position-item new-position-item-top-left",bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},l?i.a.createElement(yt,{onClose:function(){return u(!1)}}):i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}},i.a.createElement(ln,{title:"Collateral",reserve:t.info,amount:n.collateral.value,onInputChange:function(e){sn({newPosition:Object(A.a)(Object(A.a)({},n),{},{collateral:Object(A.a)(Object(A.a)({},n.collateral),{},{value:e})}),setNewPosition:a,enrichedPools:f,collateralDeposit:b})},onCollateralReserve:function(e){var t=m.d.byParser(an.a).find((function(t){return t===e}))||"",r=m.d.get(t);sn({newPosition:Object(A.a)(Object(A.a)({},n),{},{collateral:{value:n.collateral.value,type:r}}),setNewPosition:a,enrichedPools:f,collateralDeposit:b})},showLeverageSelector:!0,onLeverage:function(e){sn({newPosition:Object(A.a)(Object(A.a)({},n),{},{leverage:e}),setNewPosition:a,enrichedPools:f,collateralDeposit:b})},leverage:n.leverage})),i.a.createElement(un.a,null),i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"stretch"}},n.asset.type&&i.a.createElement(ln,{title:"Choose trade",reserve:n.asset.type.info,amount:n.asset.value,onInputChange:function(e){!function(e){var t=e.newPosition,n=e.setNewPosition,a=e.collateralDeposit,r=e.enrichedPools;if(n(t),a&&r.length){var i=r[0].liquidityB/r[0].liquidityA,o=(t.asset.value||0)/(i*t.leverage);n(Object(A.a)(Object(A.a)({},t),{},{collateral:Object(A.a)(Object(A.a)({},t.collateral),{},{value:o})}))}}({newPosition:Object(A.a)(Object(A.a)({},n),{},{asset:Object(A.a)(Object(A.a)({},n.asset),{},{value:e})}),setNewPosition:a,enrichedPools:f,collateralDeposit:b})},disabled:!0,hideBalance:!0}),i.a.createElement(we.a,{className:"trade-button",type:"primary",size:"large",onClick:y?null:p.connect,style:{width:"100%"},disabled:y&&!!n.error},i.a.createElement("span",null,function(e,t){return e?t.error?t.error:Le.b.TRADING_ADD_POSITION:Le.b.CONNECT_LABEL}(y,n))))))}var mn=n(1093),fn=n(1109),bn=n(236),vn=n(531),pn=n.n(vn),yn=[{x:0,y:65},{x:1,y:80},{x:2,y:60},{x:3,y:30},{x:4,y:20},{x:5,y:35},{x:6,y:25},{x:7,y:40},{x:8,y:36},{x:9,y:34},{x:10,y:50},{x:11,y:33},{x:12,y:37},{x:13,y:45},{x:14,y:35},{x:15,y:37},{x:16,y:50},{x:17,y:43},{x:18,y:50},{x:19,y:45},{x:20,y:55},{x:21,y:50},{x:22,y:45},{x:23,y:50},{x:24,y:45},{x:25,y:40},{x:26,y:35},{x:27,y:40},{x:28,y:37},{x:29,y:45},{x:30,y:50},{x:31,y:60},{x:32,y:55},{x:33,y:50},{x:34,y:53},{x:35,y:55},{x:36,y:50},{x:37,y:45},{x:38,y:40},{x:39,y:45},{x:40,y:50},{x:41,y:55},{x:42,y:65},{x:43,y:62},{x:44,y:54},{x:45,y:65},{x:46,y:48},{x:47,y:55},{x:48,y:60},{x:49,y:63},{x:50,y:65}];function En(){var e=hn();return{datasets:[{backgroundColor:"transparent",borderColor:"rgb(39, 107, 251)",borderWidth:4,radius:0,data:JSON.parse(JSON.stringify(yn.slice(0,Math.floor(yn.length)/2+1)))},{backgroundColor:"transparent",borderWidth:4,radius:0,data:e,borderDash:[15,3],label:"LEVERAGE"},{backgroundColor:"transparent",borderColor:"rgb(86, 169, 255)",borderWidth:2,radius:0,data:e,borderDash:[8,4],label:"HOLD"}]}}var gn={},hn=function(){return JSON.parse(JSON.stringify(yn.slice(Math.floor(yn.length)/2)))};function On(e){var t=e.item,n=e.priceChange,a=e.chart;if((null===a||void 0===a?void 0:a.data.datasets)&&!((null===a||void 0===a?void 0:a.data.datasets.length)<2)){gn.afterDraw=function(e){!function(e,t,n){var a;if(!e.config||!e.config.data||!e.config.data.datasets||!e.canvas)return;var r=e.ctx;if(!r)return;r.save(),r.font="normal normal bold 15px /1.5 Muli",r.textBaseline="bottom";var i=e.config.data.datasets,o=null===e||void 0===e||null===(a=e.canvas)||void 0===a?void 0:a.parentNode;i.forEach((function(a,i){var c=a.label;r.fillStyle=a.borderColor;var l,u=e.getDatasetMeta(i),s=u.data.length-1,d=Math.floor(s/2)-Math.floor(.2*s),m=u.data[d]._model.x,f=u.data[d]._model.y;(l="HOLD"===c?t*n>0?1.2*f:.8*f:t*n>0?.8*f:1.2*f)>o.offsetHeight&&(o.style.height="".concat(1.3*l,"px")),l<0&&(l=5),c&&r.fillText(c,m,l)})),r.restore()}(e,t.leverage,n)};var r=hn(),i=t.leverage,o=r.map((function(e,t){if(0===t)return{x:e.x,y:e.y};var a=n*i/100;return{x:e.x,y:e.y*(1+a)}}));a.data.datasets[1].data=o,a.data.datasets[1].borderColor=n>=0?"rgb(51, 223, 204)":"rgb(255,79,79)",r.forEach((function(e,t){0!==t&&(e.y+=e.y*n/100)})),a.data.datasets[2].data=r,null===a||void 0===a||a.update()}}function wn(e){var t=e.item,n=e.priceChange,a=Object(r.useRef)(),o=Object(r.useRef)();return Object(r.useEffect)((function(){o.current&&!a.current&&(a.current=new pn.a(o.current,{type:"line",data:En(),plugins:[gn],options:{responsive:!0,maintainAspectRatio:!0,scaleShowLabels:!1,layout:{padding:{top:30,bottom:80}},labels:{render:"title",fontColor:["green","white","red"],precision:2},animation:{easing:"easeOutExpo",duration:500},scales:{xAxes:[{display:!1,gridLines:{display:!1},type:"linear",position:"bottom"}],yAxes:[{display:!1,gridLines:{display:!1}}]},legend:{display:!1}}}))}),[]),Object(r.useEffect)((function(){a.current&&On({item:t,priceChange:n,chart:a.current})}),[n,t]),i.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"center"}},i.a.createElement("canvas",{ref:o}),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}},i.a.createElement("span",null,"past"),i.a.createElement("span",null,"today"),i.a.createElement("span",null,"future")))}function jn(e){var t=e.item,n=rn(t),a=n.enrichedPools,o=n.leverage,c=0===a.length?1:a[0].liquidityB/a[0].liquidityA,l=t.collateral.value||0,u=(t.collateral.value||0)*o-l,s=bn.find((function(e){var n,a,r;return e.mintAddress===(null===(n=t.asset.type)||void 0===n||null===(a=n.info)||void 0===a||null===(r=a.liquidityMint)||void 0===r?void 0:r.toBase58())})),d=bn.find((function(e){var n,a,r;return e.mintAddress===(null===(n=t.collateral.type)||void 0===n||null===(a=n.info)||void 0===a||null===(r=a.liquidityMint)||void 0===r?void 0:r.toBase58())})),m=Object(r.useState)(10),f=Object(E.a)(m,2),b=f[0],v=f[1],p=(l+u)*(b/100),y=null;if(p>0){var g=p+l+u;y=i.a.createElement(mn.a,{percent:l/g*100+u/g*100,success:{percent:u/g*100,strokeColor:"brown"},strokeColor:"blue",trailColor:"green",showInfo:!1})}else{var h=(l+=p)+u;y=l<0?i.a.createElement("p",null,"Your position has been liquidated at this price swing."):i.a.createElement(mn.a,{showInfo:!1,success:{percent:u/h*100,strokeColor:"brown"},trailColor:"blue"})}return i.a.createElement("div",{className:"new-position-item new-position-item-top-right"},i.a.createElement(De.a,{className:"new-position-item new-position-item-top-right"},i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center"}},i.a.createElement(De.a,null,i.a.createElement(We.a,{title:"Borrowed",value:u*c,precision:2,valueStyle:{color:"brown"},suffix:null===s||void 0===s?void 0:s.tokenSymbol})),i.a.createElement(De.a,null,i.a.createElement(We.a,{title:"My Collateral",value:l,precision:2,valueStyle:{color:"blue"},suffix:null===d||void 0===d?void 0:d.tokenSymbol})),i.a.createElement(De.a,null,i.a.createElement(We.a,{title:"Profit/Loss",value:p*c,precision:2,valueStyle:{color:p>0?"green":"red"},suffix:null===s||void 0===s?void 0:s.tokenSymbol,prefix:p>0?i.a.createElement(fn.a,null):i.a.createElement(un.a,null)}))),i.a.createElement("br",null),y),i.a.createElement(De.a,{className:"new-position-item new-position-item-bottom-right"},i.a.createElement(wn,{item:t,priceChange:b}),i.a.createElement(Lt.a,{tooltipVisible:!0,defaultValue:10,tipFormatter:function(e){return i.a.createElement("span",null,e,"%")},max:100,min:-100,tooltipPlacement:"top",onChange:function(e){v(e)},style:{marginBottom:"20px"}})))}var kn=function(e){var t=e.pool,n=Object(r.useMemo)((function(){return[e.pool].filter((function(e){return e}))}),[e.pool]),a=W(n)[0],o=Object(z.a)().userAccounts,c=Object(m.h)(t.pubkeys.mint),l=o.filter((function(e){return t.pubkeys.mint.equals(e.info.mint)})).reduce((function(e,t){return t.info.amount.toNumber()+e}),0)/((null===c||void 0===c?void 0:c.supply.toNumber())||0);return a?i.a.createElement(De.a,{className:"ccy-input",style:{borderRadius:20,width:"100%"},bodyStyle:{padding:"7px"},size:"small",title:"Prices and pool share"},i.a.createElement(Re.a,{style:{width:"100%"}},i.a.createElement(Pe.a,{span:8},O.g.format(parseFloat(a.liquidityA)/parseFloat(a.liquidityB))),i.a.createElement(Pe.a,{span:8},O.g.format(parseFloat(a.liquidityB)/parseFloat(a.liquidityA))),i.a.createElement(Pe.a,{span:8},100*l<.001&&l>0?"<":"","\xa0",O.g.format(100*l),"%")),i.a.createElement(Re.a,{style:{width:"100%"}},i.a.createElement(Pe.a,{span:8},a.names[0]," per ",a.names[1]),i.a.createElement(Pe.a,{span:8},a.names[1]," per ",a.names[0]),i.a.createElement(Pe.a,{span:8},"Share of pool"))):null},An=n(292),Sn=n.n(An),Tn=function(e){var t=e.pool,n=Object(r.useMemo)((function(){return t?[t]:[]}),[t]),a=W(n),o=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e=o.current;return function(){var t=e&&Sn.a.getInstanceByDom(e);t&&t.dispose()}}),[]),Object(r.useEffect)((function(){if(o.current&&0!==a.length){var e=Sn.a.getInstanceByDom(o.current);e||(e=Sn.a.init(o.current));var t=[{name:a[0].names[0],value:a[0].liquidityAinUsd,tokens:a[0].liquidityA},{name:a[0].names[1],value:a[0].liquidityBinUsd,tokens:a[0].liquidityB}];e.setOption({tooltip:{trigger:"item",formatter:function(e){var t=O.h.format(e.value),n=O.e.format(e.data.tokens);return"".concat(e.name,": \n").concat(t,"\n(").concat(n,")")}},series:[{name:"Liquidity",type:"pie",top:0,bottom:0,left:0,right:0,animation:!1,label:{fontSize:14,show:!0,formatter:function(e){var t=O.h.format(e.value),n=O.e.format(e.data.tokens);return"{c|".concat(e.name,"}\n{r|").concat(n,"}\n{r|").concat(t,"}")},rich:{c:{color:"black",lineHeight:22,align:"center"},r:{color:"black",align:"right"}},color:"rgba(255, 255, 255, 0.5)"},itemStyle:{normal:{borderColor:"#000"}},data:t}]})}}),[a]),0===a.length?null:i.a.createElement("div",{ref:o,style:{height:150,width:"100%"}})};function xn(e){var t=rn(e.newPosition).pool;return i.a.createElement(Xt.a,{className:"new-position-item new-position-item-bottom-left"},!t&&i.a.createElement("span",null,"Choose a CCY to see exchange rate information."),t&&i.a.createElement(i.a.Fragment,null,i.a.createElement(kn,{pool:t}),i.a.createElement(Tn,{pool:t})))}var Nn=function(){var e=Y(Object(u.h)().id),t=Object(r.useState)({id:null,leverage:5,collateral:{},asset:{}}),n=Object(E.a)(t,2),a=n[0],o=n[1];return e?(a.asset.type||o(Object(A.a)(Object(A.a)({},a),{},{asset:{value:a.asset.value,type:e}})),i.a.createElement("div",{className:"new-position"},i.a.createElement("div",{className:"new-position-container"},i.a.createElement("div",{className:"new-position-item-left"},i.a.createElement(dn,{lendingReserve:e,newPosition:a,setNewPosition:o}),i.a.createElement(xn,{newPosition:a})),i.a.createElement(jn,{item:a})))):null};function In(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(l.a,{basename:"/"},i.a.createElement(d.a,null,i.a.createElement(s.b,null,i.a.createElement(m.a,null,i.a.createElement(P,null,i.a.createElement(se,null,i.a.createElement(qe,null,i.a.createElement(u.c,null,i.a.createElement(u.a,{exact:!0,path:"/",component:function(){return i.a.createElement(Ge,null)}}),i.a.createElement(u.a,{exact:!0,path:"/dashboard",children:i.a.createElement(It,null)}),i.a.createElement(u.a,{path:"/reserve/:id",children:i.a.createElement(Kt,null)}),i.a.createElement(u.a,{exact:!0,path:"/deposit",component:function(){return i.a.createElement(Mt,null)}}),i.a.createElement(u.a,{path:"/deposit/:id",children:i.a.createElement(qt,null)}),i.a.createElement(u.a,{path:"/withdraw/:id",children:i.a.createElement(zt,null)}),i.a.createElement(u.a,{exact:!0,path:"/borrow",children:i.a.createElement(Ve,null)}),i.a.createElement(u.a,{path:"/borrow/:id",children:i.a.createElement(At,null)}),i.a.createElement(u.a,{path:"/repay/loan/:obligation",children:i.a.createElement(Yt,null)}),i.a.createElement(u.a,{path:"/repay/:reserve",children:i.a.createElement(Yt,null)}),i.a.createElement(u.a,{exact:!0,path:"/liquidate",children:i.a.createElement($t,null)}),i.a.createElement(u.a,{path:"/liquidate/:id",children:i.a.createElement(en,null)}),i.a.createElement(u.a,{exact:!0,path:"/margin",children:i.a.createElement(nn,null)}),i.a.createElement(u.a,{path:"/margin/:id",children:i.a.createElement(Nn,null)}),i.a.createElement(u.a,{exact:!0,path:"/faucet",children:i.a.createElement(Vt,null)}))))))))))}var Bn=function(){return i.a.createElement(In,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(Bn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},11:function(e,t,n){"use strict";n.d(t,"g",(function(){return l})),n.d(t,"o",(function(){return u})),n.d(t,"m",(function(){return s})),n.d(t,"l",(function(){return d})),n.d(t,"k",(function(){return m})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return b})),n.d(t,"n",(function(){return v})),n.d(t,"p",(function(){return p})),n.d(t,"i",(function(){return y})),n.d(t,"d",(function(){return h})),n.d(t,"h",(function(){return O})),n.d(t,"e",(function(){return j})),n.d(t,"f",(function(){return k})),n.d(t,"c",(function(){return A})),n.d(t,"j",(function(){return S}));var a=n(21),r=n(0),i=n(43),o=n.n(i),c=n(15),l=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:8});function u(e,t){var n=Object(r.useState)((function(){var n=localStorage.getItem(e);return n?JSON.parse(n):t})),i=Object(a.a)(n,2),o=i[0],c=i[1],l=Object(r.useCallback)((function(t){o!==t&&(c(t),null===t?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(t)))}),[o,e]);return[o,l]}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return"".concat(e.slice(0,t),"...").concat(e.slice(-t))}function d(e,t){var n,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r="string"===typeof t?t:null===t||void 0===t?void 0:t.toBase58();if(!r)return"N/A";var i=null===(n=e.get(r))||void 0===n?void 0:n.tokenSymbol;return i||(a?"".concat(r.substring(0,5),"..."):r)}function m(e,t){var n,a="string"===typeof t?t:null===t||void 0===t?void 0:t.toBase58();if(a)return null===(n=e.get(a))||void 0===n?void 0:n.icon}var f=new Set(["USDC","wUSDC","USDT"]);function b(e,t){return Array.apply(0,new Array(Math.ceil(e.length/t))).map((function(n,a){return e.slice(a*t,(a+1)*t)}))}function v(e,t){var n;if(!e)return 0;var a="number"===typeof e?e:null===(n=e.info.amount)||void 0===n?void 0:n.toNumber(),r=Math.pow(10,(null===t||void 0===t?void 0:t.decimals)||0);return Math.floor(a*r)}function p(e){return(null===e||void 0===e?void 0:e.div(c.c))||c.d}function y(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!e)return 0;var a=Math.floor("number"===typeof e?e:o.a.isBN(e)?e.toNumber():e.info.amount.toNumber()),r=Math.pow(10,(null===t||void 0===t?void 0:t.decimals)||0);return a/r*n}var E=["","k","M","G","T","P","E"],g=function(e,t){var n=Math.log10(e)/3|0,a=e,r=E[n];0!==n&&(a=e/Math.pow(10,3*n));return a.toFixed(t)+r},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?g(e,t):e.toFixed(t)};var O=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),w=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),j={format:function(e){return e?w.format(e):"--"}},k=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2});function A(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!e)return 0;var r="number"===typeof e?e:null===(n=e.info.amount)||void 0===n?void 0:n.toNumber(),i=Math.pow(10,(null===t||void 0===t?void 0:t.decimals)||0),o=r/i*a;return o}function S(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=t.pubkeys.holdingMints.map((function(e){return e.toBase58()})).sort();return a.map((function(t){return d(e,t,n)})).join("/")}},110:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(12);function r(){return{userAccounts:Object(a.g)().userAccounts}}},12:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return S})),n.d(t,"c",(function(){return T})),n.d(t,"d",(function(){return N})),n.d(t,"g",(function(){return I})),n.d(t,"a",(function(){return C})),n.d(t,"i",(function(){return _})),n.d(t,"e",(function(){return q})),n.d(t,"h",(function(){return P})),n.d(t,"f",(function(){return D}));var a=n(290),r=n(21),i=n(237),o=n(27),c=n(13),l=n.n(c),u=n(22),s=n(0),d=n.n(s),m=n(26),f=n(62),b=n(20),v=n(55),p=n(11),y=n(281),E=n(110),g=n(34),h=d.a.createContext(null),O=new Map,w=new Map,j=new Map,k=new Map,A=function(){var t=Object(u.a)(l.a.mark((function t(n,a){var r,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getAccountInfo(a);case 2:if(null!==(r=t.sent)){t.next=5;break}throw new Error("Failed to find mint account");case 5:return i=e.from(r.data),t.abrupt("return",U(i));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),S=function(t,n){var a=e.from(n.data),r=U(a);return{pubkey:t,account:Object(o.a)({},n),info:r}},T=function(t,n){var a=e.from(n.data),r=W(a);return{pubkey:t,account:Object(o.a)({},n),info:r}},x=new Map,N={emitter:new y.a,query:function(){var e=Object(u.a)(l.a.mark((function e(t,n,a){var r,i,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="string"===typeof n?new b.d(n):n,i=r.toBase58(),!(o=w.get(i))){e.next=5;break}return e.abrupt("return",o);case 5:if(!(c=O.get(i))){e.next=8;break}return e.abrupt("return",c);case 8:return c=t.getAccountInfo(r).then((function(e){if(!e)throw new Error("Account not found");return N.add(r,e,a)})),O.set(i,c),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),add:function(e,t,n){var a="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),r=n||x.get(a);if(!r)throw new Error("Deserializer needs to be registered or passed as a parameter");N.registerParser(e,r),O.delete(a);var i=r(new b.d(a),t);if(i){var o=!w.has(a);return w.set(a,i),N.emitter.raiseCacheUpdated(a,o,r),i}},get:function(e){var t;return t="string"!==typeof e?e.toBase58():e,w.get(t)},delete:function(e){var t;return t="string"!==typeof e?e.toBase58():e,!!w.get(t)&&(w.delete(t),N.emitter.raiseCacheDeleted(t),!0)},byParser:function(e){var t,n=[],a=Object(i.a)(x.keys());try{for(a.s();!(t=a.n()).done;){var r=t.value;x.get(r)===e&&n.push(r)}}catch(o){a.e(o)}finally{a.f()}return n},registerParser:function(e,t){if(e){var n="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();x.set(n,t)}return e},queryMint:function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a,r,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="string"===typeof n?new b.d(n):n,r=a.toBase58(),!(i=k.get(r))){e.next=5;break}return e.abrupt("return",i);case 5:if(!(o=j.get(r))){e.next=8;break}return e.abrupt("return",o);case 8:return o=A(t,a).then((function(e){return j.delete(r),k.set(r,e),e})),j.set(r,o),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getMint:function(e){var t;return t="string"!==typeof e?e.toBase58():e,k.get(t)},addMint:function(e,t){var n=U(t.data),a=e.toBase58();return k.set(a,n),n}},I=function(){return Object(s.useContext)(h)};var B=function(){var e=Object(m.d)(),t=Object(f.c)().wallet,n=Object(s.useState)(),a=Object(r.a)(n,2),i=a[0],o=a[1],c=Object(s.useCallback)((function(e){var n=function(e,t){if(t)return{pubkey:e,account:t,info:{mint:g.c,owner:e,amount:new v.d(t.lamports),delegate:null,delegatedAmount:new v.d(0),isInitialized:!0,isFrozen:!1,isNative:!0,rentExemptReserve:null,closeAuthority:null}}}(t.publicKey,e);if(void 0!==n&&t){var a,r=null===(a=t.publicKey)||void 0===a?void 0:a.toBase58();N.registerParser(r,T),w.set(r,n),N.emitter.raiseCacheUpdated(r,!1,T)}}),[t]);return Object(s.useEffect)((function(){e&&(null===t||void 0===t?void 0:t.publicKey)&&(e.getAccountInfo(t.publicKey).then((function(e){e&&(c(e),o(e))})),e.onAccountChange(t.publicKey,(function(e){e&&(c(e),o(e))})))}),[o,t,t.publicKey,e,c]),{nativeAccount:i}},M=new Set,L=function(){var e=Object(u.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return M.add(n.toBase58()),e.next=5,t.getTokenAccountsByOwner(n,{programId:Object(g.d)().token});case 5:e.sent.value.forEach((function(e){N.add(e.pubkey.toBase58(),e.account,T)}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function C(e){var t=e.children,n=void 0===t?null:t,a=Object(m.d)(),i=Object(f.c)(),o=i.wallet,c=i.connected,l=Object(s.useState)([]),u=Object(r.a)(l,2),p=u[0],y=u[1],E=Object(s.useState)([]),O=Object(r.a)(E,2),w=O[0],j=O[1],k=B().nativeAccount,A=Object(s.useCallback)((function(){return N.byParser(T).map((function(e){return N.get(e)})).filter((function(e){var t;return e&&e.info.owner.toBase58()===(null===(t=o.publicKey)||void 0===t?void 0:t.toBase58())})).map((function(e){return e}))}),[o]);Object(s.useEffect)((function(){var e=A().filter((function(e){return void 0!==e}));j(e)}),[k,o,p,A]),Object(s.useEffect)((function(){var e=[];return N.emitter.onCache((function(e){if(e.isNew){var t=e.id,n=e.parser;a.onAccountChange(new b.d(t),(function(e){N.add(t,e,n)}))}})),function(){e.forEach((function(e){return a.removeAccountChangeListener(e)}))}}),[a]);var S=null===o||void 0===o?void 0:o.publicKey;return Object(s.useEffect)((function(){if(a&&S){L(a,S).then((function(){y(A())}));var e=a.onProgramAccountChange(Object(g.d)().token,(function(e){var t=e.accountId;if(e.accountInfo.data.length===v.a.span){var n=W(e.accountInfo.data);M.has(n.owner.toBase58())&&(N.add(t,e.accountInfo,T),y(A()))}}),"singleGossip");return function(){a.removeProgramAccountChangeListener(e)}}y([])}),[a,c,S,A]),d.a.createElement(h.Provider,{value:{userAccounts:w,nativeAccount:k}},n)}function _(){return{account:Object(s.useContext)(h).nativeAccount}}var q=function(){var t=Object(u.a)(l.a.mark((function t(n,r,i){var c,u;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(Object(p.b)(r,99).map((function(e){return R(n,e,i)})));case 2:return c=t.sent,u=c.map((function(t){return t.array.map((function(t){if(t){var n=t.data,r=Object(a.a)(t,["data"]);return Object(o.a)(Object(o.a)({},r),{},{data:e.from(n[0],"base64")})}})).filter((function(e){return e}))})).flat(),t.abrupt("return",{keys:r,array:u});case 5:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),R=function(){var e=Object(u.a)(l.a.mark((function e(t,n,a){var r,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._buildArgs([n],a,"base64"),e.next=3,t._rpcRequest("getMultipleAccounts",r);case 3:if(!(i=e.sent).error){e.next=6;break}throw new Error("failed to get info about account "+i.error.message);case 6:if(!i.result.value){e.next=9;break}return o=i.result.value,e.abrupt("return",{keys:n,array:o});case 9:throw new Error;case 10:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();function P(e){var t=Object(m.d)(),n=Object(s.useState)(),a=Object(r.a)(n,2),i=a[0],o=a[1],c="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();return Object(s.useEffect)((function(){if(c){N.query(t,c,S).then((function(e){return o(e.info)})).catch((function(e){return console.log(e)}));var e=N.emitter.onCache((function(e){e.id===c&&N.query(t,c,S).then((function(e){return o(e.info)}))}));return function(){e()}}}),[t,c]),i}var D=function(e){var t=Object(E.a)().userAccounts,n=t.findIndex((function(t){return t.info.mint.toBase58()===e}));if(-1!==n)return t[n]};var W=function(e){var t=v.a.decode(e);return t.mint=new b.d(t.mint),t.owner=new b.d(t.owner),t.amount=v.d.fromBuffer(t.amount),0===t.delegateOption?(t.delegate=null,t.delegatedAmount=new v.d(0)):(t.delegate=new b.d(t.delegate),t.delegatedAmount=v.d.fromBuffer(t.delegatedAmount)),t.isInitialized=0!==t.state,t.isFrozen=2===t.state,1===t.isNativeOption?(t.rentExemptReserve=v.d.fromBuffer(t.isNative),t.isNative=!0):(t.rentExemptReserve=null,t.isNative=!1),0===t.closeAuthorityOption?t.closeAuthority=null:t.closeAuthority=new b.d(t.closeAuthority),t},U=function(e){if(e.length!==v.b.span)throw new Error("Not a valid Mint");var t=v.b.decode(e);return 0===t.mintAuthorityOption?t.mintAuthority=null:t.mintAuthority=new b.d(t.mintAuthority),t.supply=v.d.fromBuffer(t.supply),t.isInitialized=0!==t.isInitialized,0===t.freezeAuthorityOption?t.freezeAuthority=null:t.freezeAuthority=new b.d(t.freezeAuthority),t}}).call(this,n(60).Buffer)},15:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"a",(function(){return s}));var a={CONNECT_LABEL:"Connect Wallet",BORROWING_POWER_USED:"Borrowing Power Used",BORROWING_POWER_VALUE:"Borrowing Power",BORROWED_VALUE:"You borrowed",GIVE_SOL:"Give me SOL",LIQUIDATION_INFO:"This view displays all loans that can be liquidated. A liquidation is a process where borrower collateral does not cover value of the loan. It is represented by health factor falling below 1.0. When a loan is liquidated, an liquidator can purchase collateral at a discount by repaing the portio of the loan. ",FAUCET_INFO:"This faucet will help you fund your accounts outside of Solana main network.",ACCOUNT_FUNDED:"Account funded.",REPAY_QUESTION:"How much would you like to repay?",REPAY_ACTION:"Repay",RESERVE_STATUS_TITLE:"Reserve Status & Configuration",AUDIT_WARNING:"Oyster is an unaudited software project used for internal purposes at the Solana Foundation. This app is not for public use.",FOOTER:'This page was produced by the Solana Foundation ("SF") for internal educational and inspiration purposes only. SF does not encourage, induce or sanction the deployment, integration or use of Oyster or any similar application (including its code) in violation of applicable laws or regulations and hereby prohibits any such deployment, integration or use. Anyone using this code or a derivation thereof must comply with applicable laws and regulations when releasing related software.',MENU_HOME:"Home",MENU_DASHBOARD:"Dashboard",DASHBOARD_INFO:"Connect to a wallet to view your deposits/loans.",NO_LOANS_NO_DEPOSITS:"No loans or deposits.",MENU_DEPOSIT:"Deposit",MENU_BORROW:"Borrow",MENU_LIQUIDATE:"Liquidate",MENU_FAUCET:"Faucet",MARGIN_TRADING:"Margin Trading",APP_TITLE:"Oyster Lending",CONNECT_BUTTON:"Connect",WALLET_TOOLTIP:"Wallet public key",SETTINGS_TOOLTIP:"Settings",SELECT_COLLATERAL:"Select collateral",COLLATERAL:"Collateral",BORROW_QUESTION:"How much would you like to borrow?",BORROW_ACTION:"Borrow",NO_DEPOSITS:"No collateral",LIQUIDATE_ACTION:"Liquidate",LIQUIDATE_NO_LOANS:"There are no loans to liquidate.",TABLE_TITLE_ASSET:"Asset",TABLE_TITLE_YOUR_LOAN_BALANCE:"Loan balance",TABLE_TITLE_LOAN_BALANCE:"Loan balance",TABLE_TITLE_COLLATERAL_BALANCE:"Collateral",TABLE_TITLE_DEPOSIT_BALANCE:"Your deposits",TABLE_TITLE_APY:"APY",TABLE_TITLE_LTV:"LTV",TABLE_TITLE_HEALTH:"Health Factor",TABLE_TITLE_BORROW_APY:"Borrow APY",TABLE_TITLE_DEPOSIT_APY:"Deposit APY",TABLE_TITLE_TOTAL_BORROWED:"Total Borrowed",TABLE_TITLE_MARKET_SIZE:"Market Size",TABLE_TITLE_ACTION:"Action",TABLE_TITLE_MAX_BORROW:"Available for you",DASHBOARD_TITLE_LOANS:"Loans",DASHBOARD_TITLE_DEPOSITS:"Deposits",DEPOSIT_QUESTION:"How much would you like to deposit?",WITHDRAW_ACTION:"Withdraw",WITHDRAW_QUESTION:"How much would you like to withdraw?",DASHBOARD_ACTION:"Go to dashboard",GO_BACK_ACTION:"Go back",DEPOSIT_ACTION:"Deposit",TOTAL_TITLE:"Total",TRADING_TABLE_TITLE_MY_COLLATERAL:"Chosen Collateral",TRADING_TABLE_TITLE_DESIRED_ASSET:"Desired Asset",TRADING_TABLE_TITLE_MULTIPLIER:"Leverage",TRADING_TABLE_TITLE_ASSET_PRICE:"Asset Price",TRADING_TABLE_TITLE_LIQUIDATION_PRICE:"Liquidation Price",TRADING_TABLE_TITLE_APY:"APY",TRADING_TABLE_TITLE_ACTIONS:"Action",TRADING_ADD_POSITION:"Add Position",MARGIN_TRADE_ACTION:"Margin Trade",MARGIN_TRADE_CHOOSE_COLLATERAL_AND_LEVERAGE:"Please choose your collateral and leverage.",MARGIN_TRADE_QUESTION:"Please choose how much of this asset you wish to purchase.",TABLE_TITLE_BUYING_POWER:"Total Buying Power",NOT_ENOUGH_MARGIN_MESSAGE:"Not enough buying power in oyster to make this trade at this leverage.",SET_MORE_MARGIN_MESSAGE:"You need more margin to match this leverage amount to make this trade.",LEVERAGE_LIMIT_MESSAGE:"You will need more margin to make this trade.",NO_DEPOSIT_MESSAGE:"You need to deposit coin of this type into oyster before trading with it on margin.",NO_COLL_TYPE_MESSAGE:"Choose Collateral CCY"},r=n(43),i=n.n(r),o=new i.a(10),c=o.pow(new i.a(18)),l=(o.pow(new i.a(27)),new i.a(0)),u={0:"0%",25:"25%",50:"50%",75:"75%",100:"100%"},s=[16,{xs:8,sm:16,md:16,lg:16}]},236:function(e){e.exports=JSON.parse('[{"tokenSymbol":"SOL","mintAddress":"So11111111111111111111111111111111111111112","tokenName":"Solana","icon":"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/solana/info/logo.png"},{"tokenSymbol":"USDC","mintAddress":"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v","tokenName":"USDC","icon":"https://raw.githubusercontent.com/trustwallet/assets/f3ffd0b9ae2165336279ce2f8db1981a55ce30f8/blockchains/ethereum/assets/0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48/logo.png"},{"tokenSymbol":"SRM","mintAddress":"SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt","tokenName":"SRM","icon":"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x476c5E26a75bd202a9683ffD34359C0CC15be0fF/logo.png"}]')},26:function(e,t,n){"use strict";n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return h})),n.d(t,"d",(function(){return O})),n.d(t,"e",(function(){return w})),n.d(t,"c",(function(){return k}));var a=n(13),r=n.n(a),i=n(22),o=n(29),c=n(21),l=n(11),u=n(20),s=n(0),d=n.n(s),m=n(67),f=n(1094),b=function(e){var t,n,a=e.type,r=e.code,i="string"===typeof e.address?e.address:null===(t=e.address)||void 0===t?void 0:t.toBase58();if(!i)return null;var o=null!==(n=e.length)&&void 0!==n?n:9;return d.a.createElement("a",{href:"https://explorer.solana.com/".concat(a,"/").concat(i),target:"_blank",title:i,style:e.style},r?d.a.createElement(f.a.Text,{style:e.style,code:!0},Object(l.m)(i,o)):Object(l.m)(i,o))},v=n(236),p=n(34),y=[{name:"mainnet-beta",endpoint:"https://solana-api.projectserum.com/"},{name:"lending",endpoint:"https://tln.solana.com"},{name:"testnet",endpoint:Object(u.j)("testnet")},{name:"devnet",endpoint:Object(u.j)("devnet")},{name:"localnet",endpoint:"http://127.0.0.1:8899"}],E=y[0].endpoint,g=d.a.createContext({endpoint:E,setEndpoint:function(){},slippage:.25,setSlippage:function(e){},connection:new u.b(E,"recent"),sendConnection:new u.b(E,"recent"),env:y[0].name,tokens:[],tokenMap:new Map});function h(e){var t,n=e.children,a=void 0===n?void 0:n,r=Object(l.o)("connectionEndpts",y[0].endpoint),i=Object(c.a)(r,2),m=i[0],f=i[1],b=Object(l.o)("slippage",.25.toString()),E=Object(c.a)(b,2),h=E[0],O=E[1],w=Object(s.useMemo)((function(){return new u.b(m,"recent")}),[m]),j=Object(s.useMemo)((function(){return new u.b(m,"recent")}),[m]),k=(null===(t=y.find((function(e){return e.endpoint===m})))||void 0===t?void 0:t.name)||y[0].name,A=Object(s.useState)([]),S=Object(c.a)(A,2),T=S[0],x=S[1],N=Object(s.useState)(new Map),I=Object(c.a)(N,2),B=I[0],M=I[1];return Object(s.useEffect)((function(){window.fetch("https://raw.githubusercontent.com/solana-labs/token-list/main/src/tokens/".concat(k,".json")).then((function(e){return e.json()})).catch((function(e){return[]})).then((function(e){var t=[].concat(Object(o.a)(v),Object(o.a)(e)).reduce((function(e,t){return e.set(t.mintAddress,t),e}),new Map);M(t),x(e)}))}),[k]),Object(p.e)(k),Object(s.useEffect)((function(){var e=w.onAccountChange((new u.a).publicKey,(function(){}));return function(){w.removeAccountChangeListener(e)}}),[w]),Object(s.useEffect)((function(){var e=w.onSlotChange((function(){return null}));return function(){w.removeSlotChangeListener(e)}}),[w]),Object(s.useEffect)((function(){var e=j.onAccountChange((new u.a).publicKey,(function(){}));return function(){j.removeAccountChangeListener(e)}}),[j]),Object(s.useEffect)((function(){var e=j.onSlotChange((function(){return null}));return function(){j.removeSlotChangeListener(e)}}),[j]),d.a.createElement(g.Provider,{value:{endpoint:m,setEndpoint:f,slippage:parseFloat(h),setSlippage:function(e){return O(e.toString())},connection:w,sendConnection:j,tokens:T,tokenMap:B,env:k}},a)}function O(){return Object(s.useContext)(g).connection}function w(){var e=Object(s.useContext)(g);return{endpoint:e.endpoint,setEndpoint:e.setEndpoint,env:e.env,tokens:e.tokens,tokenMap:e.tokenMap}}var j=function(){var e=Object(i.a)(r.a.mark((function e(t,n){var a,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.confirmTransaction(n,"max");case 2:return e.next=4,t.getParsedConfirmedTransaction(n);case 4:return a=e.sent,i=[],(null===a||void 0===a?void 0:a.meta)&&a.meta.logMessages&&a.meta.logMessages.forEach((function(e){for(var t,n=/Error: (.*)/gm;null!==(t=n.exec(e));)t.index===n.lastIndex&&n.lastIndex++,t.length>1&&i.push(t[1])})),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(i.a)(r.a.mark((function e(t,n,a,i){var c,l,s,f,v,p,y,E,g,h=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=!(h.length>4&&void 0!==h[4])||h[4],s=new u.h,a.forEach((function(e){return s.add(e)})),e.next=5,t.getRecentBlockhash("max");case 5:return s.recentBlockhash=e.sent.blockhash,(c=s).setSigners.apply(c,[n.publicKey].concat(Object(o.a)(i.map((function(e){return e.publicKey}))))),i.length>0&&(f=s).partialSign.apply(f,Object(o.a)(i)),e.next=10,n.signTransaction(s);case 10:return s=e.sent,v=s.serialize(),p={skipPreflight:!0,commitment:"singleGossip"},e.next=15,t.sendRawTransaction(v,p);case 15:if(y=e.sent,!l){e.next=26;break}return e.next=19,t.confirmTransaction(y,p&&p.commitment);case 19:if(!(null===(E=e.sent.value)||void 0===E?void 0:E.err)){e.next=26;break}return e.next=23,j(t,y);case 23:throw g=e.sent,Object(m.a)({message:"Transaction failed...",description:d.a.createElement(d.a.Fragment,null,g.map((function(e){return d.a.createElement("div",null,e)})),d.a.createElement(b,{address:y,type:"transaction"})),type:"error"}),new Error("Raw transaction ".concat(y," failed (").concat(JSON.stringify(E),")"));case 26:return e.abrupt("return",y);case 27:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},271:function(e,t,n){"use strict";(function(e){n.d(t,"e",(function(){return f})),n.d(t,"a",(function(){return b})),n.d(t,"d",(function(){return v})),n.d(t,"b",(function(){return p})),n.d(t,"f",(function(){return y})),n.d(t,"c",(function(){return g}));var a=n(27),r=n(20),i=n(43),o=n.n(i),c=n(1),l=n(34),u=n(11),s=n(32),d=n(91),m=c.struct([s.c("lastUpdateSlot"),s.a("lendingMarket"),s.a("liquidityMint"),c.u8("liquidityMintDecimals"),s.a("liquiditySupply"),s.a("collateralMint"),s.a("collateralSupply"),c.u32("dexMarketOption"),s.a("dexMarket"),c.struct([c.u8("optimalUtilizationRate"),c.u8("loanToValueRatio"),c.u8("liquidationBonus"),c.u8("liquidationThreshold"),c.u8("minBorrowRate"),c.u8("optimalBorrowRate"),c.u8("maxBorrowRate")],"config"),s.b("cumulativeBorrowRateWad"),s.b("borrowedLiquidityWad"),s.c("availableLiquidity"),s.c("collateralMintSupply")]),f=function(e){return e.data.length===m.span},b=function(t,n){var r=e.from(n.data),i=m.decode(r);if(0!==i.lastUpdateSlot.toNumber())return{pubkey:t,account:Object(a.a)({},n),info:i}},v=function(t,n,a,i,u,m,f,b,v,p,y,E){var g=c.struct([c.u8("instruction"),s.c("liquidityAmount"),c.u8("maxUtilizationRate")]),h=e.alloc(g.span);g.encode({instruction:d.a.InitReserve,liquidityAmount:new o.a(t),maxUtilizationRate:n},h);var O=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!0,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!1},{pubkey:r.e,isSigner:!1,isWritable:!1},{pubkey:r.f,isSigner:!1,isWritable:!1},{pubkey:l.b,isSigner:!1,isWritable:!1},{pubkey:E,isSigner:!1,isWritable:!1}];return new r.i({keys:O,programId:l.a,data:h})},p=function(e){var t=Object(u.p)(e.borrowedLiquidityWad).toNumber();return t/(e.availableLiquidity.toNumber()+t)},y=function(e){return((null===e||void 0===e?void 0:e.availableLiquidity.toNumber())||0)+Object(u.p)(null===e||void 0===e?void 0:e.borrowedLiquidityWad).toNumber()},E=function(e){return((null===e||void 0===e?void 0:e.collateralMintSupply.toNumber())||1)/y(e)},g=function(e,t){var n="number"===typeof e?e:e.toNumber();return Math.floor(n/E(t))}}).call(this,n(60).Buffer)},272:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return f}));var a,r=n(20),i=n(43),o=n.n(i),c=n(1),l=n(34),u=n(11),s=n(32),d=n(91);!function(e){e[e.LiquidityBorrowAmount=0]="LiquidityBorrowAmount",e[e.CollateralDepositAmount=1]="CollateralDepositAmount"}(a||(a={}));var m=function(t,n,a,i,u,m,f,b,v,p,y,E,g,h,O,w){var j=c.struct([c.u8("instruction"),s.c("amount"),c.u8("amountType")]),k=e.alloc(j.span);j.encode({instruction:d.a.BorrowLiquidity,amount:new o.a(t),amountType:n},k);var A=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:E,isSigner:!1,isWritable:!1},{pubkey:g,isSigner:!1,isWritable:!1},{pubkey:h,isSigner:!1,isWritable:!1},{pubkey:O,isSigner:!1,isWritable:!1},{pubkey:w,isSigner:!1,isWritable:!1},{pubkey:r.e,isSigner:!1,isWritable:!1},{pubkey:r.f,isSigner:!1,isWritable:!1},{pubkey:l.b,isSigner:!1,isWritable:!1}];return new r.i({keys:A,programId:l.a,data:k})},f=function(e){var t,n=Object(u.p)(e.borrowedLiquidityWad).toNumber(),a=n/(e.availableLiquidity.toNumber()+n),r=e.config.optimalUtilizationRate/100;if(1===r||a<r){var i=a/r,o=e.config.optimalBorrowRate/100,c=e.config.minBorrowRate/100;t=i*(o-c)+c}else{var l=(a-r)/(1-r),s=e.config.optimalBorrowRate/100;t=l*(e.config.maxBorrowRate/100-s)+s}return t}}).call(this,n(60).Buffer)},281:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(92),r=n(86),i=n(145),o=function e(t,n,a){Object(r.a)(this,e),this.id=void 0,this.parser=void 0,this.isNew=void 0,this.id=t,this.parser=a,this.isNew=n};o.type="CacheUpdate";var c=function e(t){Object(r.a)(this,e),this.id=void 0,this.id=t};c.type="CacheUpdate";var l=function e(t){Object(r.a)(this,e),this.ids=void 0,this.ids=t};l.type="MarketUpdate";var u=function(){function e(){Object(r.a)(this,e),this.emitter=new i.EventEmitter}return Object(a.a)(e,[{key:"onMarket",value:function(e){var t=this;return this.emitter.on(l.type,e),function(){return t.emitter.removeListener(l.type,e)}}},{key:"onCache",value:function(e){var t=this;return this.emitter.on(o.type,e),function(){return t.emitter.removeListener(o.type,e)}}},{key:"raiseMarketUpdated",value:function(e){this.emitter.emit(l.type,new l(e))}},{key:"raiseCacheUpdated",value:function(e,t,n){this.emitter.emit(o.type,new o(e,t,n))}},{key:"raiseCacheDeleted",value:function(e){this.emitter.emit(c.type,new c(e))}}]),e}()},32:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return s}));var a=n(29),r=n(20),i=n(43),o=n.n(i),c=n(1),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"publicKey",t=c.blob(32,e),n=t.decode.bind(t),a=t.encode.bind(t);return t.decode=function(e,t){var a=n(e,t);return new r.d(a)},t.encode=function(e,t,n){return a(e.toBuffer(),t,n)},t},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uint64",n=c.blob(8,t),r=n.decode.bind(n),i=n.encode.bind(n);return n.decode=function(e,t){var n=r(e,t);return new o.a(Object(a.a)(n).reverse().map((function(e){return"00".concat(e.toString(16)).slice(-2)})).join(""),16)},n.encode=function(t,n,a){var r=t.toArray().reverse(),o=e.from(r);if(8!==o.length){var c=e.alloc(8);o.copy(c),o=c}return i(o,n,a)},n},s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uint128",n=c.blob(16,t),r=n.decode.bind(n),i=n.encode.bind(n);return n.decode=function(e,t){var n=r(e,t);return new o.a(Object(a.a)(n).reverse().map((function(e){return"00".concat(e.toString(16)).slice(-2)})).join(""),16)},n.encode=function(t,n,a){var r=t.toArray().reverse(),o=e.from(r);if(16!==o.length){var c=e.alloc(16);o.copy(c),o=c}return i(o,n,a)},n}}).call(this,n(60).Buffer)},34:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return b})),n.d(t,"d",(function(){return v}));var a,r,i,o=n(20),c=n(52),l=new o.d("So11111111111111111111111111111111111111112"),u=new o.d("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),s=new o.d("TokenLend1ng1111111111111111111111111111111"),d=new o.d("HfoTxFR1Tm6kGmWgYWD6J7YHVy1UwqSULUGVLXkJqaKN"),m=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SWAP_HOST_FEE_ADDRESS?new o.d("".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SWAP_HOST_FEE_ADDRESS)):d;console.debug("Host address: ".concat(null===m||void 0===m?void 0:m.toBase58())),console.debug("Owner address: ".concat(null===d||void 0===d?void 0:d.toBase58()));var f=[{name:"mainnet-beta",swap:function(){return{current:{pubkey:new o.d("9qvG1zUp8xF1Bi4m6UdRNby1BAAuaDrUxSpv4CmRRMjL"),layout:c.TokenSwapLayoutV1},legacy:[]}}},{name:"testnet",swap:function(){return{current:{pubkey:new o.d("2n2dsFSgmPcZ8jkmBZLGUM2nzuFqcBGQ3JEEj6RJJcEg"),layout:c.TokenSwapLayoutV1},legacy:[]}}},{name:"devnet",swap:function(){return{current:{pubkey:new o.d("6Cust2JhvweKLh4CVo1dt21s2PJ86uNGkziudpkNPaCj"),layout:c.TokenSwapLayout},legacy:[new o.d("BSfTAcBdqmvX5iE2PW88WFNNp2DHhLUaBKk5WrnxVkcJ")]}}},{name:"localnet",swap:function(){return{current:{pubkey:new o.d("369YmCWHGxznT7GGBhcLZDRcRoGWmGKFWdmtiPy78yj7"),layout:c.TokenSwapLayoutV1},legacy:[]}}}],b=function(e){var t=f.find((function(t){return t.name===e}));if(t){var n=t.swap();a=n.current.pubkey,i=n.current.layout,r=n.legacy,"mainnet-beta"===e&&(s=new o.d("2KfJP7pZ6QSpXa26RmsN6kKVQteDEdQmizLSvuyryeiW"))}},v=function(){return{token:u,swap:a,swapLayout:i,swap_legacy:r,lending:s}}},35:function(e,t,n){"use strict";var a=n(388);n.d(t,"b",(function(){return a.a})),n.d(t,"n",(function(){return a.b}));var r=n(271);n.d(t,"e",(function(){return r.a})),n.d(t,"i",(function(){return r.b})),n.d(t,"j",(function(){return r.c})),n.d(t,"m",(function(){return r.d})),n.d(t,"p",(function(){return r.e})),n.d(t,"q",(function(){return r.f}));var i=n(389);n.d(t,"c",(function(){return i.a})),n.d(t,"d",(function(){return i.b})),n.d(t,"l",(function(){return i.c})),n.d(t,"o",(function(){return i.d}));n(91);var o=n(272);n.d(t,"a",(function(){return o.a})),n.d(t,"f",(function(){return o.b})),n.d(t,"g",(function(){return o.c}));var c=n(390);n.d(t,"h",(function(){return c.a})),n.d(t,"k",(function(){return c.b}));var l=n(391);n.d(t,"r",(function(){return l.a}))},353:function(e){e.exports=JSON.parse('{"name":"token-lending-ui","version":"0.1.0","private":true,"dependencies":{"@ant-design/pro-layout":"^6.7.0","@craco/craco":"^5.7.0","@project-serum/serum":"^0.13.11","@project-serum/sol-wallet-adapter":"^0.1.4","@solana/spl-token":"0.0.11","@solana/spl-token-swap":"0.0.2","@solana/web3.js":"^0.86.2","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.5.0","@testing-library/user-event":"^7.2.1","@types/chart.js":"^2.9.29","@types/echarts":"^4.9.0","@types/react-router-dom":"^5.1.6","@welldone-software/why-did-you-render":"^6.0.5","antd":"^4.6.6","bn.js":"^5.1.3","bs58":"^4.0.1","buffer-layout":"^1.2.0","chart.js":"^2.9.4","craco-less":"^1.17.0","echarts":"^4.9.0","eventemitter3":"^4.0.7","identicon.js":"^2.3.3","jazzicon":"^1.5.0","lodash":"^4.17.20","react":"^16.13.1","react-dom":"^16.13.1","react-github-btn":"^1.2.0","react-intl":"^5.10.2","react-router-dom":"^5.2.0","react-scripts":"3.4.3","typescript":"^4.0.0"},"scripts":{"start":"craco start","build":"craco build","test":"craco test","eject":"react-scripts eject","localnet:update":"solana-localnet update","localnet:up":"rm client/util/store/config.json; set -x; solana-localnet down; set -e; solana-localnet up","localnet:down":"solana-localnet down","localnet:logs":"solana-localnet logs -f","predeploy":"git pull --ff-only && yarn && yarn build","deploy":"gh-pages -d build","deploy:ar":"arweave deploy-dir build --key-file ","format:fix":"prettier --write \\"**/*.+(js|jsx|ts|tsx|json|css|md)\\""},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"repository":{"type":"git","url":"https://github.com/solana-labs/oyster-lending"},"homepage":".","devDependencies":{"@types/bn.js":"^4.11.6","@types/bs58":"^4.0.1","@types/identicon.js":"^2.3.0","@types/jest":"^24.9.1","@types/node":"^12.12.62","@types/react":"^16.9.50","@types/react-dom":"^16.9.8","arweave-deploy":"^1.9.1","gh-pages":"^3.1.0","prettier":"^2.1.2"}}')},360:function(e,t,n){},387:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(55),r=n(34);function i(e,t,n,i,o,c){var l=r.b;e.push(a.c.createApproveInstruction(l,n,i,o,[],c)),t.push(a.c.createRevokeInstruction(l,n,o,[]))}},388:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var a=n(27),r=n(1),i=n(32),o=r.struct([r.u8("isInitialized"),i.a("quoteMint")]),c=function(e){return e.data.length===o.span},l=function(t,n){var r=e.from(n.data),i=o.decode(r);return{pubkey:t,account:Object(a.a)({},n),info:i}}}).call(this,n(60).Buffer)},389:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u}));var a=n(27),r=n(1),i=n(32),o=r.struct([i.c("lastUpdateSlot"),i.c("depositedCollateral"),i.a("collateralReserve"),i.b("cumulativeBorrowRateWad"),i.b("borrowAmountWad"),i.a("borrowReserve"),i.a("tokenMint")]),c=function(e){return e.data.length===o.span},l=function(t,n){var r=e.from(n.data),i=o.decode(r);return{pubkey:t,account:Object(a.a)({},n),info:i}},u=function(e){return""}}).call(this,n(60).Buffer)},390:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return f}));var a=n(20),r=n(43),i=n.n(r),o=n(1),c=n(34),l=n(11),u=n(32),s=n(272),d=n(91),m=function(t,n,r,l,s,m,f){var b=o.struct([o.u8("instruction"),u.c("liquidityAmount")]),v=e.alloc(b.span);b.encode({instruction:d.a.DepositReserveLiquidity,liquidityAmount:new i.a(t)},v);var p=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:a.e,isSigner:!1,isWritable:!1},{pubkey:c.b,isSigner:!1,isWritable:!1}];return new a.i({keys:p,programId:c.a,data:v})},f=function(e){var t=Object(l.p)(e.borrowedLiquidityWad).toNumber();return t/(e.availableLiquidity.toNumber()+t)*Object(s.c)(e)}}).call(this,n(60).Buffer)},391:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var a=n(20),r=n(43),i=n.n(r),o=n(1),c=n(34),l=n(32),u=n(91),s=function(t,n,r,s,d,m,f){var b=o.struct([o.u8("instruction"),l.c("collateralAmount")]),v=e.alloc(b.span);b.encode({instruction:u.a.WithdrawReserveLiquidity,collateralAmount:new i.a(t)},v);var p=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!1},{pubkey:a.e,isSigner:!1,isWritable:!1},{pubkey:c.b,isSigner:!1,isWritable:!1}];return new a.i({keys:p,programId:c.a,data:v})}}).call(this,n(60).Buffer)},392:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return u}));var a=n(1),r=n(32),i=(n(393),a.struct([a.nu64("tradeFeeNumerator"),a.nu64("tradeFeeDenominator"),a.nu64("ownerTradeFeeNumerator"),a.nu64("ownerTradeFeeDenominator"),a.nu64("ownerWithdrawFeeNumerator"),a.nu64("ownerWithdrawFeeDenominator"),a.nu64("hostFeeNumerator"),a.nu64("hostFeeDenominator")],"fees")),o=a.struct([a.u8("isInitialized"),a.u8("nonce"),Object(r.a)("tokenAccountA"),Object(r.a)("tokenAccountB"),Object(r.a)("tokenPool"),Object(r.c)("feesNumerator"),Object(r.c)("feesDenominator")]),c=a.struct([a.u8("isInitialized"),a.u8("nonce"),Object(r.a)("tokenProgramId"),Object(r.a)("tokenAccountA"),Object(r.a)("tokenAccountB"),Object(r.a)("tokenPool"),Object(r.a)("mintA"),Object(r.a)("mintB"),Object(r.a)("feeAccount"),a.u8("curveType"),Object(r.c)("tradeFeeNumerator"),Object(r.c)("tradeFeeDenominator"),Object(r.c)("ownerTradeFeeNumerator"),Object(r.c)("ownerTradeFeeDenominator"),Object(r.c)("ownerWithdrawFeeNumerator"),Object(r.c)("ownerWithdrawFeeDenominator"),a.blob(16,"padding")]),l=a.union(a.u8(),a.blob(32),"curve");l.addVariant(0,a.struct([]),"constantProduct"),l.addVariant(1,a.struct([a.nu64("token_b_price")]),"constantPrice"),l.addVariant(2,a.struct([]),"stable"),l.addVariant(3,a.struct([a.nu64("token_b_offset")]),"offset");var u=a.struct([a.u8("isInitialized"),a.u8("nonce"),Object(r.a)("tokenProgramId"),Object(r.a)("tokenAccountA"),Object(r.a)("tokenAccountB"),Object(r.a)("tokenPool"),Object(r.a)("mintA"),Object(r.a)("mintB"),Object(r.a)("feeAccount"),i,l])},394:function(e,t,n){"use strict";var a;!function(e){e[e.ConstantProduct=0]="ConstantProduct",e[e.ConstantPrice=1]="ConstantPrice",e[e.Stable=2]="Stable",e[e.ConstantProductWithOffset=3]="ConstantProductWithOffset"}(a||(a={}))},395:function(e,t){},410:function(e,t,n){},52:function(e,t,n){"use strict";var a=n(387);n.d(t,"approve",(function(){return a.a}));var r=n(35);n.d(t,"BorrowAmountType",(function(){return r.a})),n.d(t,"LendingObligationLayout",(function(){return r.c})),n.d(t,"LendingReserveParser",(function(){return r.e})),n.d(t,"borrowInstruction",(function(){return r.f})),n.d(t,"reserveMarketCap",(function(){return r.q}));var i=n(392);n.d(t,"TokenSwapLayout",(function(){return i.a})),n.d(t,"TokenSwapLayoutLegacyV0",(function(){return i.b})),n.d(t,"TokenSwapLayoutV1",(function(){return i.c}));n(394),n(395)},529:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var a=n(20),r=n(43),i=n.n(r),o=n(91),c=n(1),l=n(32),u=n(34),s=function(t,n,r,s,d,m,f,b,v,p,y){var E=c.struct([c.u8("instruction"),l.c("liquidityAmount")]),g=e.alloc(E.span);E.encode({instruction:o.a.RepayOblogationLiquidity,liquidityAmount:new i.a(t)},g);var h=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!1},{pubkey:a.e,isSigner:!1,isWritable:!1},{pubkey:u.b,isSigner:!1,isWritable:!1}];return new a.i({keys:h,programId:u.a,data:g})}}).call(this,n(60).Buffer)},530:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var a=n(20),r=n(43),i=n.n(r),o=n(91),c=n(1),l=n(32),u=n(34),s=function(t,n,r,s,d,m,f,b,v,p,y,E){var g=c.struct([c.u8("instruction"),l.c("liquidityAmount")]),h=e.alloc(g.span);g.encode({instruction:o.a.LiquidateObligation,liquidityAmount:new i.a(t)},h);var O=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!1,isWritable:!1},{pubkey:y,isSigner:!1,isWritable:!1},{pubkey:E,isSigner:!1,isWritable:!1},{pubkey:a.e,isSigner:!1,isWritable:!1},{pubkey:u.b,isSigner:!1,isWritable:!1}];return new a.i({keys:O,programId:u.a,data:h})}}).call(this,n(60).Buffer)},540:function(e,t,n){e.exports=n(1089)},545:function(e,t,n){},548:function(e,t){},549:function(e,t){},578:function(e,t){},580:function(e,t){},592:function(e,t){},593:function(e,t){},62:function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return k})),n.d(t,"c",(function(){return A}));var a=n(21),r=n(0),i=n.n(r),o=n(508),c=n(67),l=n(26),u=n(11),s=n(13),d=n.n(s),m=n(22),f=n(86),b=n(92),v=n(186),p=n(126),y=n(125),E=n(145),g=n.n(E),h=n(20),O=function(e){Object(p.a)(n,e);var t=Object(y.a)(n);function n(e,a){var r;return Object(f.a)(this,n),(r=t.call(this))._publicKey=void 0,r._onProcess=void 0,r._publicKey=null,r._onProcess=!1,r.connect=r.connect.bind(Object(v.a)(r)),r}return Object(b.a)(n,[{key:"signTransaction",value:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.solong.signTransaction(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=this;this._onProcess||(void 0!==window.solong?(this._onProcess=!0,window.solong.selectAccount().then((function(t){e._publicKey=new h.d(t),e.emit("connect",e._publicKey)})).catch((function(){e.disconnect()})).finally((function(){e._onProcess=!1}))):Object(c.a)({message:"Solong Error",description:"Please install solong wallet from Chrome "}))}},{key:"disconnect",value:function(){this._publicKey&&(this._publicKey=null,this.emit("disconnect"))}},{key:"publicKey",get:function(){return this._publicKey}}]),n}(g.a),w=[{name:"sollet.io",url:"https://www.sollet.io"},{name:"solongwallet.com",url:"http://solongwallet.com"},{name:"solflare.com",url:"https://solflare.com/access-wallet"},{name:"mathwallet.org",url:"https://www.mathwallet.org"}],j=i.a.createContext(null);function k(e){var t,n,s=e.children,d=void 0===s?null:s,m=Object(l.e)().endpoint,f=Object(u.o)("walletProvider","https://www.sollet.io"),b=Object(a.a)(f,2),v=b[0],p=b[1],y=Object(r.useMemo)((function(){return"http://solongwallet.com"===v?new O(v,m):new o.a(v,m)}),[v,m]),E=Object(r.useState)(!1),g=Object(a.a)(E,2),h=g[0],k=g[1];return Object(r.useEffect)((function(){return y.on("connect",(function(){k(!0);var e=y.publicKey.toBase58(),t=e.length>20?"".concat(e.substring(0,7),".....").concat(e.substring(e.length-7,e.length)):e;Object(c.a)({message:"Wallet update",description:"Connected to wallet "+t})})),y.on("disconnect",(function(){k(!1),Object(c.a)({message:"Wallet update",description:"Disconnected from wallet"})})),function(){y.disconnect(),k(!1)}}),[y]),i.a.createElement(j.Provider,{value:{wallet:y,connected:h,providerUrl:v,setProviderUrl:p,providerName:null!==(t=null===(n=w.find((function(e){return e.url===v})))||void 0===n?void 0:n.name)&&void 0!==t?t:v}},d)}function A(){var e=Object(r.useContext)(j);return{connected:e.connected,wallet:e.wallet,providerUrl:e.providerUrl,setProvider:e.setProviderUrl,providerName:e.providerName}}},67:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n.n(a),i=n(358);function o(e){var t=e.message,n=void 0===t?"":t,a=e.description,o=void 0===a?void 0:a,c=e.txid,l=void 0===c?"":c,u=e.type,s=void 0===u?"info":u,d=e.placement,m=void 0===d?"bottomLeft":d;l&&(o=r.a.createElement(r.a.Fragment,null)),i.a[s]({message:r.a.createElement("span",{style:{color:"black"}},n),description:r.a.createElement("span",{style:{color:"black",opacity:.5}},o),placement:m,style:{backgroundColor:"white"}})}},678:function(e,t,n){},744:function(e,t,n){},745:function(e,t,n){},746:function(e,t,n){},751:function(e,t,n){},752:function(e,t,n){},753:function(e,t,n){},754:function(e,t,n){},755:function(e,t,n){},756:function(e,t,n){},757:function(e,t,n){},758:function(e,t,n){},759:function(e,t,n){},760:function(e,t,n){},761:function(e,t,n){},762:function(e,t,n){},763:function(e,t,n){},764:function(e,t,n){},765:function(e,t,n){},790:function(e,t,n){},791:function(e,t,n){},792:function(e,t,n){},793:function(e,t,n){},91:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e[e.InitLendingMarket=0]="InitLendingMarket",e[e.InitReserve=1]="InitReserve",e[e.DepositReserveLiquidity=2]="DepositReserveLiquidity",e[e.WithdrawReserveLiquidity=3]="WithdrawReserveLiquidity",e[e.BorrowLiquidity=4]="BorrowLiquidity",e[e.RepayOblogationLiquidity=5]="RepayOblogationLiquidity",e[e.LiquidateObligation=6]="LiquidateObligation"}(a||(a={}))}},[[540,1,2]]]);